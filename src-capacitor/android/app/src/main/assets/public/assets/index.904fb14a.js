const Kq=function(){const e=document.createElement("link").relList;return e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}(),jb={},Gq="",Ut=function(e,n){return!n||n.length===0?e():Promise.all(n.map(r=>{if(r=`${Gq}${r}`,r in jb)return;jb[r]=!0;const i=r.endsWith(".css"),s=i?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${s}`))return;const o=document.createElement("link");if(o.rel=i?"stylesheet":Kq,i||(o.as="script",o.crossOrigin=""),o.href=r,document.head.appendChild(o),i)return new Promise((c,u)=>{o.addEventListener("load",c),o.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>e())};function hw(t,e){const n=Object.create(null),r=t.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return e?i=>!!n[i.toLowerCase()]:i=>!!n[i]}const xt={},pc=[],ci=()=>{},Yq=()=>!1,Qq=/^on[^a-z]/,Np=t=>Qq.test(t),dw=t=>t.startsWith("onUpdate:"),Xt=Object.assign,fw=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},Jq=Object.prototype.hasOwnProperty,at=(t,e)=>Jq.call(t,e),Ae=Array.isArray,gc=t=>Xc(t)==="[object Map]",hP=t=>Xc(t)==="[object Set]",Kb=t=>Xc(t)==="[object Date]",Xq=t=>Xc(t)==="[object RegExp]",Ue=t=>typeof t=="function",$t=t=>typeof t=="string",Pu=t=>typeof t=="symbol",Tt=t=>t!==null&&typeof t=="object",dP=t=>Tt(t)&&Ue(t.then)&&Ue(t.catch),fP=Object.prototype.toString,Xc=t=>fP.call(t),Zq=t=>Xc(t).slice(8,-1),pP=t=>Xc(t)==="[object Object]",pw=t=>$t(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,df=hw(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Mp=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},e4=/-(\w)/g,Di=Mp(t=>t.replace(e4,(e,n)=>n?n.toUpperCase():"")),t4=/\B([A-Z])/g,Zc=Mp(t=>t.replace(t4,"-$1").toLowerCase()),Lp=Mp(t=>t.charAt(0).toUpperCase()+t.slice(1)),v_=Mp(t=>t?`on${Lp(t)}`:""),xu=(t,e)=>!Object.is(t,e),mc=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},Mf=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},n4=t=>{const e=parseFloat(t);return isNaN(e)?t:e},r4=t=>{const e=$t(t)?Number(t):NaN;return isNaN(e)?t:e};let Gb;const Py=()=>Gb||(Gb=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});function gw(t){if(Ae(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=$t(r)?a4(r):gw(r);if(i)for(const s in i)e[s]=i[s]}return e}else{if($t(t))return t;if(Tt(t))return t}}const i4=/;(?![^(]*\))/g,s4=/:([^]+)/,o4=/\/\*[^]*?\*\//g;function a4(t){const e={};return t.replace(o4,"").split(i4).forEach(n=>{if(n){const r=n.split(s4);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function mw(t){let e="";if($t(t))e=t;else if(Ae(t))for(let n=0;n<t.length;n++){const r=mw(t[n]);r&&(e+=r+" ")}else if(Tt(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const c4="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",l4=hw(c4);function gP(t){return!!t||t===""}function u4(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=Lf(t[r],e[r]);return n}function Lf(t,e){if(t===e)return!0;let n=Kb(t),r=Kb(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=Pu(t),r=Pu(e),n||r)return t===e;if(n=Ae(t),r=Ae(e),n||r)return n&&r?u4(t,e):!1;if(n=Tt(t),r=Tt(e),n||r){if(!n||!r)return!1;const i=Object.keys(t).length,s=Object.keys(e).length;if(i!==s)return!1;for(const o in t){const c=t.hasOwnProperty(o),u=e.hasOwnProperty(o);if(c&&!u||!c&&u||!Lf(t[o],e[o]))return!1}}return String(t)===String(e)}const Yne=t=>$t(t)?t:t==null?"":Ae(t)||Tt(t)&&(t.toString===fP||!Ue(t.toString))?JSON.stringify(t,mP,2):String(t),mP=(t,e)=>e&&e.__v_isRef?mP(t,e.value):gc(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,i])=>(n[`${r} =>`]=i,n),{})}:hP(e)?{[`Set(${e.size})`]:[...e.values()]}:Tt(e)&&!Ae(e)&&!pP(e)?String(e):e;let Ir;class _P{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Ir,!e&&Ir&&(this.index=(Ir.scopes||(Ir.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=Ir;try{return Ir=this,e()}finally{Ir=n}}}on(){Ir=this}off(){Ir=this.parent}stop(e){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function _w(t){return new _P(t)}function h4(t,e=Ir){e&&e.active&&e.effects.push(t)}function yw(){return Ir}function yP(t){Ir&&Ir.cleanups.push(t)}const vw=t=>{const e=new Set(t);return e.w=0,e.n=0,e},vP=t=>(t.w&no)>0,wP=t=>(t.n&no)>0,d4=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=no},f4=t=>{const{deps:e}=t;if(e.length){let n=0;for(let r=0;r<e.length;r++){const i=e[r];vP(i)&&!wP(i)?i.delete(t):e[n++]=i,i.w&=~no,i.n&=~no}e.length=n}},Vf=new WeakMap;let Ql=0,no=1;const xy=30;let ni;const Go=Symbol(""),ky=Symbol("");class ww{constructor(e,n=null,r){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,h4(this,r)}run(){if(!this.active)return this.fn();let e=ni,n=Ys;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=ni,ni=this,Ys=!0,no=1<<++Ql,Ql<=xy?d4(this):Yb(this),this.fn()}finally{Ql<=xy&&f4(this),no=1<<--Ql,ni=this.parent,Ys=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){ni===this?this.deferStop=!0:this.active&&(Yb(this),this.onStop&&this.onStop(),this.active=!1)}}function Yb(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let Ys=!0;const EP=[];function el(){EP.push(Ys),Ys=!1}function tl(){const t=EP.pop();Ys=t===void 0?!0:t}function pr(t,e,n){if(Ys&&ni){let r=Vf.get(t);r||Vf.set(t,r=new Map);let i=r.get(n);i||r.set(n,i=vw()),IP(i)}}function IP(t,e){let n=!1;Ql<=xy?wP(t)||(t.n|=no,n=!vP(t)):n=!t.has(ni),n&&(t.add(ni),ni.deps.push(t))}function as(t,e,n,r,i,s){const o=Vf.get(t);if(!o)return;let c=[];if(e==="clear")c=[...o.values()];else if(n==="length"&&Ae(t)){const u=Number(r);o.forEach((h,f)=>{(f==="length"||f>=u)&&c.push(h)})}else switch(n!==void 0&&c.push(o.get(n)),e){case"add":Ae(t)?pw(n)&&c.push(o.get("length")):(c.push(o.get(Go)),gc(t)&&c.push(o.get(ky)));break;case"delete":Ae(t)||(c.push(o.get(Go)),gc(t)&&c.push(o.get(ky)));break;case"set":gc(t)&&c.push(o.get(Go));break}if(c.length===1)c[0]&&Dy(c[0]);else{const u=[];for(const h of c)h&&u.push(...h);Dy(vw(u))}}function Dy(t,e){const n=Ae(t)?t:[...t];for(const r of n)r.computed&&Qb(r);for(const r of n)r.computed||Qb(r)}function Qb(t,e){(t!==ni||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}function p4(t,e){var n;return(n=Vf.get(t))==null?void 0:n.get(e)}const g4=hw("__proto__,__v_isRef,__isVue"),TP=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Pu)),m4=Ew(),_4=Ew(!1,!0),y4=Ew(!0),Jb=v4();function v4(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const r=rt(this);for(let s=0,o=this.length;s<o;s++)pr(r,"get",s+"");const i=r[e](...n);return i===-1||i===!1?r[e](...n.map(rt)):i}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){el();const r=rt(this)[e].apply(this,n);return tl(),r}}),t}function w4(t){const e=rt(this);return pr(e,"has",t),e.hasOwnProperty(t)}function Ew(t=!1,e=!1){return function(r,i,s){if(i==="__v_isReactive")return!t;if(i==="__v_isReadonly")return t;if(i==="__v_isShallow")return e;if(i==="__v_raw"&&s===(t?e?L4:CP:e?SP:RP).get(r))return r;const o=Ae(r);if(!t){if(o&&at(Jb,i))return Reflect.get(Jb,i,s);if(i==="hasOwnProperty")return w4}const c=Reflect.get(r,i,s);return(Pu(i)?TP.has(i):g4(i))||(t||pr(r,"get",i),e)?c:zt(c)?o&&pw(i)?c:c.value:Tt(c)?t?xP(c):_a(c):c}}const E4=bP(),I4=bP(!0);function bP(t=!1){return function(n,r,i,s){let o=n[r];if(Pc(o)&&zt(o)&&!zt(i))return!1;if(!t&&(!Ff(i)&&!Pc(i)&&(o=rt(o),i=rt(i)),!Ae(n)&&zt(o)&&!zt(i)))return o.value=i,!0;const c=Ae(n)&&pw(r)?Number(r)<n.length:at(n,r),u=Reflect.set(n,r,i,s);return n===rt(s)&&(c?xu(i,o)&&as(n,"set",r,i):as(n,"add",r,i)),u}}function T4(t,e){const n=at(t,e);t[e];const r=Reflect.deleteProperty(t,e);return r&&n&&as(t,"delete",e,void 0),r}function b4(t,e){const n=Reflect.has(t,e);return(!Pu(e)||!TP.has(e))&&pr(t,"has",e),n}function A4(t){return pr(t,"iterate",Ae(t)?"length":Go),Reflect.ownKeys(t)}const AP={get:m4,set:E4,deleteProperty:T4,has:b4,ownKeys:A4},R4={get:y4,set(t,e){return!0},deleteProperty(t,e){return!0}},S4=Xt({},AP,{get:_4,set:I4}),Iw=t=>t,Vp=t=>Reflect.getPrototypeOf(t);function Fd(t,e,n=!1,r=!1){t=t.__v_raw;const i=rt(t),s=rt(e);n||(e!==s&&pr(i,"get",e),pr(i,"get",s));const{has:o}=Vp(i),c=r?Iw:n?Aw:ku;if(o.call(i,e))return c(t.get(e));if(o.call(i,s))return c(t.get(s));t!==i&&t.get(e)}function Ud(t,e=!1){const n=this.__v_raw,r=rt(n),i=rt(t);return e||(t!==i&&pr(r,"has",t),pr(r,"has",i)),t===i?n.has(t):n.has(t)||n.has(i)}function Bd(t,e=!1){return t=t.__v_raw,!e&&pr(rt(t),"iterate",Go),Reflect.get(t,"size",t)}function Xb(t){t=rt(t);const e=rt(this);return Vp(e).has.call(e,t)||(e.add(t),as(e,"add",t,t)),this}function Zb(t,e){e=rt(e);const n=rt(this),{has:r,get:i}=Vp(n);let s=r.call(n,t);s||(t=rt(t),s=r.call(n,t));const o=i.call(n,t);return n.set(t,e),s?xu(e,o)&&as(n,"set",t,e):as(n,"add",t,e),this}function eA(t){const e=rt(this),{has:n,get:r}=Vp(e);let i=n.call(e,t);i||(t=rt(t),i=n.call(e,t)),r&&r.call(e,t);const s=e.delete(t);return i&&as(e,"delete",t,void 0),s}function tA(){const t=rt(this),e=t.size!==0,n=t.clear();return e&&as(t,"clear",void 0,void 0),n}function $d(t,e){return function(r,i){const s=this,o=s.__v_raw,c=rt(o),u=e?Iw:t?Aw:ku;return!t&&pr(c,"iterate",Go),o.forEach((h,f)=>r.call(i,u(h),u(f),s))}}function qd(t,e,n){return function(...r){const i=this.__v_raw,s=rt(i),o=gc(s),c=t==="entries"||t===Symbol.iterator&&o,u=t==="keys"&&o,h=i[t](...r),f=n?Iw:e?Aw:ku;return!e&&pr(s,"iterate",u?ky:Go),{next(){const{value:p,done:m}=h.next();return m?{value:p,done:m}:{value:c?[f(p[0]),f(p[1])]:f(p),done:m}},[Symbol.iterator](){return this}}}}function xs(t){return function(...e){return t==="delete"?!1:this}}function C4(){const t={get(s){return Fd(this,s)},get size(){return Bd(this)},has:Ud,add:Xb,set:Zb,delete:eA,clear:tA,forEach:$d(!1,!1)},e={get(s){return Fd(this,s,!1,!0)},get size(){return Bd(this)},has:Ud,add:Xb,set:Zb,delete:eA,clear:tA,forEach:$d(!1,!0)},n={get(s){return Fd(this,s,!0)},get size(){return Bd(this,!0)},has(s){return Ud.call(this,s,!0)},add:xs("add"),set:xs("set"),delete:xs("delete"),clear:xs("clear"),forEach:$d(!0,!1)},r={get(s){return Fd(this,s,!0,!0)},get size(){return Bd(this,!0)},has(s){return Ud.call(this,s,!0)},add:xs("add"),set:xs("set"),delete:xs("delete"),clear:xs("clear"),forEach:$d(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{t[s]=qd(s,!1,!1),n[s]=qd(s,!0,!1),e[s]=qd(s,!1,!0),r[s]=qd(s,!0,!0)}),[t,n,e,r]}const[P4,x4,k4,D4]=C4();function Tw(t,e){const n=e?t?D4:k4:t?x4:P4;return(r,i,s)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?r:Reflect.get(at(n,i)&&i in r?n:r,i,s)}const O4={get:Tw(!1,!1)},N4={get:Tw(!1,!0)},M4={get:Tw(!0,!1)},RP=new WeakMap,SP=new WeakMap,CP=new WeakMap,L4=new WeakMap;function V4(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function F4(t){return t.__v_skip||!Object.isExtensible(t)?0:V4(Zq(t))}function _a(t){return Pc(t)?t:bw(t,!1,AP,O4,RP)}function PP(t){return bw(t,!1,S4,N4,SP)}function xP(t){return bw(t,!0,R4,M4,CP)}function bw(t,e,n,r,i){if(!Tt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=i.get(t);if(s)return s;const o=F4(t);if(o===0)return t;const c=new Proxy(t,o===2?r:n);return i.set(t,c),c}function Qs(t){return Pc(t)?Qs(t.__v_raw):!!(t&&t.__v_isReactive)}function Pc(t){return!!(t&&t.__v_isReadonly)}function Ff(t){return!!(t&&t.__v_isShallow)}function kP(t){return Qs(t)||Pc(t)}function rt(t){const e=t&&t.__v_raw;return e?rt(e):t}function fs(t){return Mf(t,"__v_skip",!0),t}const ku=t=>Tt(t)?_a(t):t,Aw=t=>Tt(t)?xP(t):t;function DP(t){Ys&&ni&&(t=rt(t),IP(t.dep||(t.dep=vw())))}function OP(t,e){t=rt(t);const n=t.dep;n&&Dy(n)}function zt(t){return!!(t&&t.__v_isRef===!0)}function Bt(t){return MP(t,!1)}function NP(t){return MP(t,!0)}function MP(t,e){return zt(t)?t:new U4(t,e)}class U4{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:rt(e),this._value=n?e:ku(e)}get value(){return DP(this),this._value}set value(e){const n=this.__v_isShallow||Ff(e)||Pc(e);e=n?e:rt(e),xu(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:ku(e),OP(this))}}function Js(t){return zt(t)?t.value:t}function Yi(t){return Ue(t)?t():Js(t)}const B4={get:(t,e,n)=>Js(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return zt(i)&&!zt(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function LP(t){return Qs(t)?t:new Proxy(t,B4)}function $4(t){const e=Ae(t)?new Array(t.length):{};for(const n in t)e[n]=H4(t,n);return e}class q4{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return p4(rt(this._object),this._key)}}function H4(t,e,n){const r=t[e];return zt(r)?r:new q4(t,e,n)}class W4{constructor(e,n,r,i){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new ww(e,()=>{this._dirty||(this._dirty=!0,OP(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=r}get value(){const e=rt(this);return DP(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function z4(t,e,n=!1){let r,i;const s=Ue(t);return s?(r=t,i=ci):(r=t.get,i=t.set),new W4(r,i,s||!i,n)}function Xs(t,e,n,r){let i;try{i=r?t(...r):t()}catch(s){Fp(s,e,n)}return i}function Wr(t,e,n,r){if(Ue(t)){const s=Xs(t,e,n,r);return s&&dP(s)&&s.catch(o=>{Fp(o,e,n)}),s}const i=[];for(let s=0;s<t.length;s++)i.push(Wr(t[s],e,n,r));return i}function Fp(t,e,n,r=!0){const i=e?e.vnode:null;if(e){let s=e.parent;const o=e.proxy,c=n;for(;s;){const h=s.ec;if(h){for(let f=0;f<h.length;f++)if(h[f](t,o,c)===!1)return}s=s.parent}const u=e.appContext.config.errorHandler;if(u){Xs(u,null,10,[t,o,c]);return}}j4(t,n,i,r)}function j4(t,e,n,r=!0){console.error(t)}let Du=!1,Oy=!1;const Un=[];let Ii=0;const _c=[];let Qi=null,Vo=0;const VP=Promise.resolve();let Rw=null;function Sw(t){const e=Rw||VP;return t?e.then(this?t.bind(this):t):e}function K4(t){let e=Ii+1,n=Un.length;for(;e<n;){const r=e+n>>>1;Ou(Un[r])<t?e=r+1:n=r}return e}function Cw(t){(!Un.length||!Un.includes(t,Du&&t.allowRecurse?Ii+1:Ii))&&(t.id==null?Un.push(t):Un.splice(K4(t.id),0,t),FP())}function FP(){!Du&&!Oy&&(Oy=!0,Rw=VP.then(BP))}function G4(t){const e=Un.indexOf(t);e>Ii&&Un.splice(e,1)}function Y4(t){Ae(t)?_c.push(...t):(!Qi||!Qi.includes(t,t.allowRecurse?Vo+1:Vo))&&_c.push(t),FP()}function nA(t,e=Du?Ii+1:0){for(;e<Un.length;e++){const n=Un[e];n&&n.pre&&(Un.splice(e,1),e--,n())}}function UP(t){if(_c.length){const e=[...new Set(_c)];if(_c.length=0,Qi){Qi.push(...e);return}for(Qi=e,Qi.sort((n,r)=>Ou(n)-Ou(r)),Vo=0;Vo<Qi.length;Vo++)Qi[Vo]();Qi=null,Vo=0}}const Ou=t=>t.id==null?1/0:t.id,Q4=(t,e)=>{const n=Ou(t)-Ou(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function BP(t){Oy=!1,Du=!0,Un.sort(Q4);const e=ci;try{for(Ii=0;Ii<Un.length;Ii++){const n=Un[Ii];n&&n.active!==!1&&Xs(n,null,14)}}finally{Ii=0,Un.length=0,UP(),Du=!1,Rw=null,(Un.length||_c.length)&&BP()}}function J4(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||xt;let i=n;const s=e.startsWith("update:"),o=s&&e.slice(7);if(o&&o in r){const f=`${o==="modelValue"?"model":o}Modifiers`,{number:p,trim:m}=r[f]||xt;m&&(i=n.map(y=>$t(y)?y.trim():y)),p&&(i=n.map(n4))}let c,u=r[c=v_(e)]||r[c=v_(Di(e))];!u&&s&&(u=r[c=v_(Zc(e))]),u&&Wr(u,t,6,i);const h=r[c+"Once"];if(h){if(!t.emitted)t.emitted={};else if(t.emitted[c])return;t.emitted[c]=!0,Wr(h,t,6,i)}}function $P(t,e,n=!1){const r=e.emitsCache,i=r.get(t);if(i!==void 0)return i;const s=t.emits;let o={},c=!1;if(!Ue(t)){const u=h=>{const f=$P(h,e,!0);f&&(c=!0,Xt(o,f))};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}return!s&&!c?(Tt(t)&&r.set(t,null),null):(Ae(s)?s.forEach(u=>o[u]=null):Xt(o,s),Tt(t)&&r.set(t,o),o)}function Up(t,e){return!t||!Np(e)?!1:(e=e.slice(2).replace(/Once$/,""),at(t,e[0].toLowerCase()+e.slice(1))||at(t,Zc(e))||at(t,e))}let or=null,qP=null;function Uf(t){const e=or;return or=t,qP=t&&t.type.__scopeId||null,e}function HP(t,e=or,n){if(!e||t._n)return t;const r=(...i)=>{r._d&&gA(-1);const s=Uf(e);let o;try{o=t(...i)}finally{Uf(s),r._d&&gA(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function w_(t){const{type:e,vnode:n,proxy:r,withProxy:i,props:s,propsOptions:[o],slots:c,attrs:u,emit:h,render:f,renderCache:p,data:m,setupState:y,ctx:v,inheritAttrs:I}=t;let A,N;const D=Uf(t);try{if(n.shapeFlag&4){const P=i||r;A=Ei(f.call(P,P,p,s,y,m,v)),N=u}else{const P=e;A=Ei(P.length>1?P(s,{attrs:u,slots:c,emit:h}):P(s,null)),N=e.props?u:X4(u)}}catch(P){fu.length=0,Fp(P,t,1),A=ar(li)}let k=A;if(N&&I!==!1){const P=Object.keys(N),{shapeFlag:B}=k;P.length&&B&7&&(o&&P.some(dw)&&(N=Z4(N,o)),k=cs(k,N))}return n.dirs&&(k=cs(k),k.dirs=k.dirs?k.dirs.concat(n.dirs):n.dirs),n.transition&&(k.transition=n.transition),A=k,Uf(D),A}const X4=t=>{let e;for(const n in t)(n==="class"||n==="style"||Np(n))&&((e||(e={}))[n]=t[n]);return e},Z4=(t,e)=>{const n={};for(const r in t)(!dw(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function eH(t,e,n){const{props:r,children:i,component:s}=t,{props:o,children:c,patchFlag:u}=e,h=s.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&u>=0){if(u&1024)return!0;if(u&16)return r?rA(r,o,h):!!o;if(u&8){const f=e.dynamicProps;for(let p=0;p<f.length;p++){const m=f[p];if(o[m]!==r[m]&&!Up(h,m))return!0}}}else return(i||c)&&(!c||!c.$stable)?!0:r===o?!1:r?o?rA(r,o,h):!0:!!o;return!1}function rA(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==t[s]&&!Up(n,s))return!0}return!1}function tH({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}const WP=t=>t.__isSuspense;function nH(t,e){e&&e.pendingBranch?Ae(t)?e.effects.push(...t):e.effects.push(t):Y4(t)}function Qne(t,e){return Pw(t,null,e)}const Hd={};function Yo(t,e,n){return Pw(t,e,n)}function Pw(t,e,{immediate:n,deep:r,flush:i,onTrack:s,onTrigger:o}=xt){var c;const u=yw()===((c=ln)==null?void 0:c.scope)?ln:null;let h,f=!1,p=!1;if(zt(t)?(h=()=>t.value,f=Ff(t)):Qs(t)?(h=()=>t,r=!0):Ae(t)?(p=!0,f=t.some(P=>Qs(P)||Ff(P)),h=()=>t.map(P=>{if(zt(P))return P.value;if(Qs(P))return Ho(P);if(Ue(P))return Xs(P,u,2)})):Ue(t)?e?h=()=>Xs(t,u,2):h=()=>{if(!(u&&u.isUnmounted))return m&&m(),Wr(t,u,3,[y])}:h=ci,e&&r){const P=h;h=()=>Ho(P())}let m,y=P=>{m=D.onStop=()=>{Xs(P,u,4)}},v;if(Vu)if(y=ci,e?n&&Wr(e,u,3,[h(),p?[]:void 0,y]):h(),i==="sync"){const P=JH();v=P.__watcherHandles||(P.__watcherHandles=[])}else return ci;let I=p?new Array(t.length).fill(Hd):Hd;const A=()=>{if(!!D.active)if(e){const P=D.run();(r||f||(p?P.some((B,V)=>xu(B,I[V])):xu(P,I)))&&(m&&m(),Wr(e,u,3,[P,I===Hd?void 0:p&&I[0]===Hd?[]:I,y]),I=P)}else D.run()};A.allowRecurse=!!e;let N;i==="sync"?N=A:i==="post"?N=()=>Rn(A,u&&u.suspense):(A.pre=!0,u&&(A.id=u.uid),N=()=>Cw(A));const D=new ww(h,N);e?n?A():I=D.run():i==="post"?Rn(D.run.bind(D),u&&u.suspense):D.run();const k=()=>{D.stop(),u&&u.scope&&fw(u.scope.effects,D)};return v&&v.push(k),k}function rH(t,e,n){const r=this.proxy,i=$t(t)?t.includes(".")?zP(r,t):()=>r[t]:t.bind(r,r);let s;Ue(e)?s=e:(s=e.handler,n=e);const o=ln;kc(this);const c=Pw(i,s.bind(r),n);return o?kc(o):Qo(),c}function zP(t,e){const n=e.split(".");return()=>{let r=t;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function Ho(t,e){if(!Tt(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),zt(t))Ho(t.value,e);else if(Ae(t))for(let n=0;n<t.length;n++)Ho(t[n],e);else if(hP(t)||gc(t))t.forEach(n=>{Ho(n,e)});else if(pP(t))for(const n in t)Ho(t[n],e);return t}function jP(t,e){const n=or;if(n===null)return t;const r=jp(n)||n.proxy,i=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[o,c,u,h=xt]=e[s];o&&(Ue(o)&&(o={mounted:o,updated:o}),o.deep&&Ho(c),i.push({dir:o,instance:r,value:c,oldValue:void 0,arg:u,modifiers:h}))}return t}function Po(t,e,n,r){const i=t.dirs,s=e&&e.dirs;for(let o=0;o<i.length;o++){const c=i[o];s&&(c.oldValue=s[o].value);let u=c.dir[r];u&&(el(),Wr(u,n,8,[t.el,c,t,e]),tl())}}function KP(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return qp(()=>{t.isMounted=!0}),Hp(()=>{t.isUnmounting=!0}),t}const Ur=[Function,Array],GP={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ur,onEnter:Ur,onAfterEnter:Ur,onEnterCancelled:Ur,onBeforeLeave:Ur,onLeave:Ur,onAfterLeave:Ur,onLeaveCancelled:Ur,onBeforeAppear:Ur,onAppear:Ur,onAfterAppear:Ur,onAppearCancelled:Ur},iH={name:"BaseTransition",props:GP,setup(t,{slots:e}){const n=ho(),r=KP();let i;return()=>{const s=e.default&&xw(e.default(),!0);if(!s||!s.length)return;let o=s[0];if(s.length>1){for(const I of s)if(I.type!==li){o=I;break}}const c=rt(t),{mode:u}=c;if(r.isLeaving)return E_(o);const h=iA(o);if(!h)return E_(o);const f=Nu(h,c,r,n);xc(h,f);const p=n.subTree,m=p&&iA(p);let y=!1;const{getTransitionKey:v}=h.type;if(v){const I=v();i===void 0?i=I:I!==i&&(i=I,y=!0)}if(m&&m.type!==li&&(!$s(h,m)||y)){const I=Nu(m,c,r,n);if(xc(m,I),u==="out-in")return r.isLeaving=!0,I.afterLeave=()=>{r.isLeaving=!1,n.update.active!==!1&&n.update()},E_(o);u==="in-out"&&h.type!==li&&(I.delayLeave=(A,N,D)=>{const k=YP(r,m);k[String(m.key)]=m,A._leaveCb=()=>{N(),A._leaveCb=void 0,delete f.delayedLeave},f.delayedLeave=D})}return o}}},sH=iH;function YP(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function Nu(t,e,n,r){const{appear:i,mode:s,persisted:o=!1,onBeforeEnter:c,onEnter:u,onAfterEnter:h,onEnterCancelled:f,onBeforeLeave:p,onLeave:m,onAfterLeave:y,onLeaveCancelled:v,onBeforeAppear:I,onAppear:A,onAfterAppear:N,onAppearCancelled:D}=e,k=String(t.key),P=YP(n,t),B=(M,J)=>{M&&Wr(M,r,9,J)},V=(M,J)=>{const ee=J[1];B(M,J),Ae(M)?M.every(ge=>ge.length<=1)&&ee():M.length<=1&&ee()},F={mode:s,persisted:o,beforeEnter(M){let J=c;if(!n.isMounted)if(i)J=I||c;else return;M._leaveCb&&M._leaveCb(!0);const ee=P[k];ee&&$s(t,ee)&&ee.el._leaveCb&&ee.el._leaveCb(),B(J,[M])},enter(M){let J=u,ee=h,ge=f;if(!n.isMounted)if(i)J=A||u,ee=N||h,ge=D||f;else return;let te=!1;const Be=M._enterCb=fe=>{te||(te=!0,fe?B(ge,[M]):B(ee,[M]),F.delayedLeave&&F.delayedLeave(),M._enterCb=void 0)};J?V(J,[M,Be]):Be()},leave(M,J){const ee=String(t.key);if(M._enterCb&&M._enterCb(!0),n.isUnmounting)return J();B(p,[M]);let ge=!1;const te=M._leaveCb=Be=>{ge||(ge=!0,J(),Be?B(v,[M]):B(y,[M]),M._leaveCb=void 0,P[ee]===t&&delete P[ee])};P[ee]=t,m?V(m,[M,te]):te()},clone(M){return Nu(M,e,n,r)}};return F}function E_(t){if(Bp(t))return t=cs(t),t.children=null,t}function iA(t){return Bp(t)?t.children?t.children[0]:void 0:t}function xc(t,e){t.shapeFlag&6&&t.component?xc(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function xw(t,e=!1,n){let r=[],i=0;for(let s=0;s<t.length;s++){let o=t[s];const c=n==null?o.key:String(n)+String(o.key!=null?o.key:s);o.type===ti?(o.patchFlag&128&&i++,r=r.concat(xw(o.children,e,c))):(e||o.type!==li)&&r.push(c!=null?cs(o,{key:c}):o)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}function kw(t,e){return Ue(t)?(()=>Xt({name:t.name},e,{setup:t}))():t}const uu=t=>!!t.type.__asyncLoader,Bp=t=>t.type.__isKeepAlive,oH={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const n=ho(),r=n.ctx;if(!r.renderer)return()=>{const D=e.default&&e.default();return D&&D.length===1?D[0]:D};const i=new Map,s=new Set;let o=null;const c=n.suspense,{renderer:{p:u,m:h,um:f,o:{createElement:p}}}=r,m=p("div");r.activate=(D,k,P,B,V)=>{const F=D.component;h(D,k,P,0,c),u(F.vnode,D,k,P,F,c,B,D.slotScopeIds,V),Rn(()=>{F.isDeactivated=!1,F.a&&mc(F.a);const M=D.props&&D.props.onVnodeMounted;M&&$r(M,F.parent,D)},c)},r.deactivate=D=>{const k=D.component;h(D,m,null,1,c),Rn(()=>{k.da&&mc(k.da);const P=D.props&&D.props.onVnodeUnmounted;P&&$r(P,k.parent,D),k.isDeactivated=!0},c)};function y(D){I_(D),f(D,n,c,!0)}function v(D){i.forEach((k,P)=>{const B=qy(k.type);B&&(!D||!D(B))&&I(P)})}function I(D){const k=i.get(D);!o||!$s(k,o)?y(k):o&&I_(o),i.delete(D),s.delete(D)}Yo(()=>[t.include,t.exclude],([D,k])=>{D&&v(P=>Jl(D,P)),k&&v(P=>!Jl(k,P))},{flush:"post",deep:!0});let A=null;const N=()=>{A!=null&&i.set(A,T_(n.subTree))};return qp(N),Dw(N),Hp(()=>{i.forEach(D=>{const{subTree:k,suspense:P}=n,B=T_(k);if(D.type===B.type&&D.key===B.key){I_(B);const V=B.component.da;V&&Rn(V,P);return}y(D)})}),()=>{if(A=null,!e.default)return null;const D=e.default(),k=D[0];if(D.length>1)return o=null,D;if(!$f(k)||!(k.shapeFlag&4)&&!(k.shapeFlag&128))return o=null,k;let P=T_(k);const B=P.type,V=qy(uu(P)?P.type.__asyncResolved||{}:B),{include:F,exclude:M,max:J}=t;if(F&&(!V||!Jl(F,V))||M&&V&&Jl(M,V))return o=P,k;const ee=P.key==null?B:P.key,ge=i.get(ee);return P.el&&(P=cs(P),k.shapeFlag&128&&(k.ssContent=P)),A=ee,ge?(P.el=ge.el,P.component=ge.component,P.transition&&xc(P,P.transition),P.shapeFlag|=512,s.delete(ee),s.add(ee)):(s.add(ee),J&&s.size>parseInt(J,10)&&I(s.values().next().value)),P.shapeFlag|=256,o=P,WP(k.type)?k:P}}},Jne=oH;function Jl(t,e){return Ae(t)?t.some(n=>Jl(n,e)):$t(t)?t.split(",").includes(e):Xq(t)?t.test(e):!1}function aH(t,e){QP(t,"a",e)}function cH(t,e){QP(t,"da",e)}function QP(t,e,n=ln){const r=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if($p(e,r,n),n){let i=n.parent;for(;i&&i.parent;)Bp(i.parent.vnode)&&lH(r,e,n,i),i=i.parent}}function lH(t,e,n,r){const i=$p(e,t,r,!0);JP(()=>{fw(r[e],i)},n)}function I_(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function T_(t){return t.shapeFlag&128?t.ssContent:t}function $p(t,e,n=ln,r=!1){if(n){const i=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...o)=>{if(n.isUnmounted)return;el(),kc(n);const c=Wr(e,n,t,o);return Qo(),tl(),c});return r?i.unshift(s):i.push(s),s}}const ps=t=>(e,n=ln)=>(!Vu||t==="sp")&&$p(t,(...r)=>e(...r),n),uH=ps("bm"),qp=ps("m"),hH=ps("bu"),Dw=ps("u"),Hp=ps("bum"),JP=ps("um"),XP=ps("sp"),dH=ps("rtg"),fH=ps("rtc");function pH(t,e=ln){$p("ec",t,e)}const Ow="components";function gH(t,e){return ex(Ow,t,!0,e)||t}const ZP=Symbol.for("v-ndc");function mH(t){return $t(t)?ex(Ow,t,!1)||t:t||ZP}function ex(t,e,n=!0,r=!1){const i=or||ln;if(i){const s=i.type;if(t===Ow){const c=qy(s,!1);if(c&&(c===e||c===Di(e)||c===Lp(Di(e))))return s}const o=sA(i[t]||s[t],e)||sA(i.appContext[t],e);return!o&&r?s:o}}function sA(t,e){return t&&(t[e]||t[Di(e)]||t[Lp(Di(e))])}function Xne(t,e,n,r){let i;const s=n&&n[r];if(Ae(t)||$t(t)){i=new Array(t.length);for(let o=0,c=t.length;o<c;o++)i[o]=e(t[o],o,void 0,s&&s[o])}else if(typeof t=="number"){i=new Array(t);for(let o=0;o<t;o++)i[o]=e(o+1,o,void 0,s&&s[o])}else if(Tt(t))if(t[Symbol.iterator])i=Array.from(t,(o,c)=>e(o,c,void 0,s&&s[c]));else{const o=Object.keys(t);i=new Array(o.length);for(let c=0,u=o.length;c<u;c++){const h=o[c];i[c]=e(t[h],h,c,s&&s[c])}}else i=[];return n&&(n[r]=i),i}const Ny=t=>t?dx(t)?jp(t)||t.proxy:Ny(t.parent):null,hu=Xt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Ny(t.parent),$root:t=>Ny(t.root),$emit:t=>t.emit,$options:t=>Nw(t),$forceUpdate:t=>t.f||(t.f=()=>Cw(t.update)),$nextTick:t=>t.n||(t.n=Sw.bind(t.proxy)),$watch:t=>rH.bind(t)}),b_=(t,e)=>t!==xt&&!t.__isScriptSetup&&at(t,e),_H={get({_:t},e){const{ctx:n,setupState:r,data:i,props:s,accessCache:o,type:c,appContext:u}=t;let h;if(e[0]!=="$"){const y=o[e];if(y!==void 0)switch(y){case 1:return r[e];case 2:return i[e];case 4:return n[e];case 3:return s[e]}else{if(b_(r,e))return o[e]=1,r[e];if(i!==xt&&at(i,e))return o[e]=2,i[e];if((h=t.propsOptions[0])&&at(h,e))return o[e]=3,s[e];if(n!==xt&&at(n,e))return o[e]=4,n[e];My&&(o[e]=0)}}const f=hu[e];let p,m;if(f)return e==="$attrs"&&pr(t,"get",e),f(t);if((p=c.__cssModules)&&(p=p[e]))return p;if(n!==xt&&at(n,e))return o[e]=4,n[e];if(m=u.config.globalProperties,at(m,e))return m[e]},set({_:t},e,n){const{data:r,setupState:i,ctx:s}=t;return b_(i,e)?(i[e]=n,!0):r!==xt&&at(r,e)?(r[e]=n,!0):at(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:s}},o){let c;return!!n[o]||t!==xt&&at(t,o)||b_(e,o)||(c=s[0])&&at(c,o)||at(r,o)||at(hu,o)||at(i.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:at(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function oA(t){return Ae(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let My=!0;function yH(t){const e=Nw(t),n=t.proxy,r=t.ctx;My=!1,e.beforeCreate&&aA(e.beforeCreate,t,"bc");const{data:i,computed:s,methods:o,watch:c,provide:u,inject:h,created:f,beforeMount:p,mounted:m,beforeUpdate:y,updated:v,activated:I,deactivated:A,beforeDestroy:N,beforeUnmount:D,destroyed:k,unmounted:P,render:B,renderTracked:V,renderTriggered:F,errorCaptured:M,serverPrefetch:J,expose:ee,inheritAttrs:ge,components:te,directives:Be,filters:fe}=e;if(h&&vH(h,r,null),o)for(const je in o){const $e=o[je];Ue($e)&&(r[je]=$e.bind(n))}if(i){const je=i.call(n,n);Tt(je)&&(t.data=_a(je))}if(My=!0,s)for(const je in s){const $e=s[je],zn=Ue($e)?$e.bind(n,n):Ue($e.get)?$e.get.bind(n,n):ci,ht=!Ue($e)&&Ue($e.set)?$e.set.bind(n):ci,Qe=xe({get:zn,set:ht});Object.defineProperty(r,je,{enumerable:!0,configurable:!0,get:()=>Qe.value,set:wt=>Qe.value=wt})}if(c)for(const je in c)tx(c[je],r,n,je);if(u){const je=Ue(u)?u.call(n):u;Reflect.ownKeys(je).forEach($e=>{ff($e,je[$e])})}f&&aA(f,t,"c");function Ne(je,$e){Ae($e)?$e.forEach(zn=>je(zn.bind(n))):$e&&je($e.bind(n))}if(Ne(uH,p),Ne(qp,m),Ne(hH,y),Ne(Dw,v),Ne(aH,I),Ne(cH,A),Ne(pH,M),Ne(fH,V),Ne(dH,F),Ne(Hp,D),Ne(JP,P),Ne(XP,J),Ae(ee))if(ee.length){const je=t.exposed||(t.exposed={});ee.forEach($e=>{Object.defineProperty(je,$e,{get:()=>n[$e],set:zn=>n[$e]=zn})})}else t.exposed||(t.exposed={});B&&t.render===ci&&(t.render=B),ge!=null&&(t.inheritAttrs=ge),te&&(t.components=te),Be&&(t.directives=Be)}function vH(t,e,n=ci){Ae(t)&&(t=Ly(t));for(const r in t){const i=t[r];let s;Tt(i)?"default"in i?s=dr(i.from||r,i.default,!0):s=dr(i.from||r):s=dr(i),zt(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[r]=s}}function aA(t,e,n){Wr(Ae(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function tx(t,e,n,r){const i=r.includes(".")?zP(n,r):()=>n[r];if($t(t)){const s=e[t];Ue(s)&&Yo(i,s)}else if(Ue(t))Yo(i,t.bind(n));else if(Tt(t))if(Ae(t))t.forEach(s=>tx(s,e,n,r));else{const s=Ue(t.handler)?t.handler.bind(n):e[t.handler];Ue(s)&&Yo(i,s,t)}}function Nw(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=t.appContext,c=s.get(e);let u;return c?u=c:!i.length&&!n&&!r?u=e:(u={},i.length&&i.forEach(h=>Bf(u,h,o,!0)),Bf(u,e,o)),Tt(e)&&s.set(e,u),u}function Bf(t,e,n,r=!1){const{mixins:i,extends:s}=e;s&&Bf(t,s,n,!0),i&&i.forEach(o=>Bf(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const c=wH[o]||n&&n[o];t[o]=c?c(t[o],e[o]):e[o]}return t}const wH={data:cA,props:lA,emits:lA,methods:Xl,computed:Xl,beforeCreate:Qn,created:Qn,beforeMount:Qn,mounted:Qn,beforeUpdate:Qn,updated:Qn,beforeDestroy:Qn,beforeUnmount:Qn,destroyed:Qn,unmounted:Qn,activated:Qn,deactivated:Qn,errorCaptured:Qn,serverPrefetch:Qn,components:Xl,directives:Xl,watch:IH,provide:cA,inject:EH};function cA(t,e){return e?t?function(){return Xt(Ue(t)?t.call(this,this):t,Ue(e)?e.call(this,this):e)}:e:t}function EH(t,e){return Xl(Ly(t),Ly(e))}function Ly(t){if(Ae(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Qn(t,e){return t?[...new Set([].concat(t,e))]:e}function Xl(t,e){return t?Xt(Object.create(null),t,e):e}function lA(t,e){return t?Ae(t)&&Ae(e)?[...new Set([...t,...e])]:Xt(Object.create(null),oA(t),oA(e!=null?e:{})):e}function IH(t,e){if(!t)return e;if(!e)return t;const n=Xt(Object.create(null),t);for(const r in e)n[r]=Qn(t[r],e[r]);return n}function nx(){return{app:null,config:{isNativeTag:Yq,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let TH=0;function bH(t,e){return function(r,i=null){Ue(r)||(r=Xt({},r)),i!=null&&!Tt(i)&&(i=null);const s=nx(),o=new Set;let c=!1;const u=s.app={_uid:TH++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:XH,get config(){return s.config},set config(h){},use(h,...f){return o.has(h)||(h&&Ue(h.install)?(o.add(h),h.install(u,...f)):Ue(h)&&(o.add(h),h(u,...f))),u},mixin(h){return s.mixins.includes(h)||s.mixins.push(h),u},component(h,f){return f?(s.components[h]=f,u):s.components[h]},directive(h,f){return f?(s.directives[h]=f,u):s.directives[h]},mount(h,f,p){if(!c){const m=ar(r,i);return m.appContext=s,f&&e?e(m,h):t(m,h,p),c=!0,u._container=h,h.__vue_app__=u,jp(m.component)||m.component.proxy}},unmount(){c&&(t(null,u._container),delete u._container.__vue_app__)},provide(h,f){return s.provides[h]=f,u},runWithContext(h){Mu=u;try{return h()}finally{Mu=null}}};return u}}let Mu=null;function ff(t,e){if(ln){let n=ln.provides;const r=ln.parent&&ln.parent.provides;r===n&&(n=ln.provides=Object.create(r)),n[t]=e}}function dr(t,e,n=!1){const r=ln||or;if(r||Mu){const i=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:Mu._context.provides;if(i&&t in i)return i[t];if(arguments.length>1)return n&&Ue(e)?e.call(r&&r.proxy):e}}function AH(){return!!(ln||or||Mu)}function RH(t,e,n,r=!1){const i={},s={};Mf(s,zp,1),t.propsDefaults=Object.create(null),rx(t,e,i,s);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);n?t.props=r?i:PP(i):t.type.props?t.props=i:t.props=s,t.attrs=s}function SH(t,e,n,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=t,c=rt(i),[u]=t.propsOptions;let h=!1;if((r||o>0)&&!(o&16)){if(o&8){const f=t.vnode.dynamicProps;for(let p=0;p<f.length;p++){let m=f[p];if(Up(t.emitsOptions,m))continue;const y=e[m];if(u)if(at(s,m))y!==s[m]&&(s[m]=y,h=!0);else{const v=Di(m);i[v]=Vy(u,c,v,y,t,!1)}else y!==s[m]&&(s[m]=y,h=!0)}}}else{rx(t,e,i,s)&&(h=!0);let f;for(const p in c)(!e||!at(e,p)&&((f=Zc(p))===p||!at(e,f)))&&(u?n&&(n[p]!==void 0||n[f]!==void 0)&&(i[p]=Vy(u,c,p,void 0,t,!0)):delete i[p]);if(s!==c)for(const p in s)(!e||!at(e,p)&&!0)&&(delete s[p],h=!0)}h&&as(t,"set","$attrs")}function rx(t,e,n,r){const[i,s]=t.propsOptions;let o=!1,c;if(e)for(let u in e){if(df(u))continue;const h=e[u];let f;i&&at(i,f=Di(u))?!s||!s.includes(f)?n[f]=h:(c||(c={}))[f]=h:Up(t.emitsOptions,u)||(!(u in r)||h!==r[u])&&(r[u]=h,o=!0)}if(s){const u=rt(n),h=c||xt;for(let f=0;f<s.length;f++){const p=s[f];n[p]=Vy(i,u,p,h[p],t,!at(h,p))}}return o}function Vy(t,e,n,r,i,s){const o=t[n];if(o!=null){const c=at(o,"default");if(c&&r===void 0){const u=o.default;if(o.type!==Function&&!o.skipFactory&&Ue(u)){const{propsDefaults:h}=i;n in h?r=h[n]:(kc(i),r=h[n]=u.call(null,e),Qo())}else r=u}o[0]&&(s&&!c?r=!1:o[1]&&(r===""||r===Zc(n))&&(r=!0))}return r}function ix(t,e,n=!1){const r=e.propsCache,i=r.get(t);if(i)return i;const s=t.props,o={},c=[];let u=!1;if(!Ue(t)){const f=p=>{u=!0;const[m,y]=ix(p,e,!0);Xt(o,m),y&&c.push(...y)};!n&&e.mixins.length&&e.mixins.forEach(f),t.extends&&f(t.extends),t.mixins&&t.mixins.forEach(f)}if(!s&&!u)return Tt(t)&&r.set(t,pc),pc;if(Ae(s))for(let f=0;f<s.length;f++){const p=Di(s[f]);uA(p)&&(o[p]=xt)}else if(s)for(const f in s){const p=Di(f);if(uA(p)){const m=s[f],y=o[p]=Ae(m)||Ue(m)?{type:m}:Xt({},m);if(y){const v=fA(Boolean,y.type),I=fA(String,y.type);y[0]=v>-1,y[1]=I<0||v<I,(v>-1||at(y,"default"))&&c.push(p)}}}const h=[o,c];return Tt(t)&&r.set(t,h),h}function uA(t){return t[0]!=="$"}function hA(t){const e=t&&t.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:t===null?"null":""}function dA(t,e){return hA(t)===hA(e)}function fA(t,e){return Ae(e)?e.findIndex(n=>dA(n,t)):Ue(e)&&dA(e,t)?0:-1}const sx=t=>t[0]==="_"||t==="$stable",Mw=t=>Ae(t)?t.map(Ei):[Ei(t)],CH=(t,e,n)=>{if(e._n)return e;const r=HP((...i)=>Mw(e(...i)),n);return r._c=!1,r},ox=(t,e,n)=>{const r=t._ctx;for(const i in t){if(sx(i))continue;const s=t[i];if(Ue(s))e[i]=CH(i,s,r);else if(s!=null){const o=Mw(s);e[i]=()=>o}}},ax=(t,e)=>{const n=Mw(e);t.slots.default=()=>n},PH=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=rt(e),Mf(e,"_",n)):ox(e,t.slots={})}else t.slots={},e&&ax(t,e);Mf(t.slots,zp,1)},xH=(t,e,n)=>{const{vnode:r,slots:i}=t;let s=!0,o=xt;if(r.shapeFlag&32){const c=e._;c?n&&c===1?s=!1:(Xt(i,e),!n&&c===1&&delete i._):(s=!e.$stable,ox(e,i)),o=e}else e&&(ax(t,e),o={default:1});if(s)for(const c in i)!sx(c)&&!(c in o)&&delete i[c]};function Fy(t,e,n,r,i=!1){if(Ae(t)){t.forEach((m,y)=>Fy(m,e&&(Ae(e)?e[y]:e),n,r,i));return}if(uu(r)&&!i)return;const s=r.shapeFlag&4?jp(r.component)||r.component.proxy:r.el,o=i?null:s,{i:c,r:u}=t,h=e&&e.r,f=c.refs===xt?c.refs={}:c.refs,p=c.setupState;if(h!=null&&h!==u&&($t(h)?(f[h]=null,at(p,h)&&(p[h]=null)):zt(h)&&(h.value=null)),Ue(u))Xs(u,c,12,[o,f]);else{const m=$t(u),y=zt(u);if(m||y){const v=()=>{if(t.f){const I=m?at(p,u)?p[u]:f[u]:u.value;i?Ae(I)&&fw(I,s):Ae(I)?I.includes(s)||I.push(s):m?(f[u]=[s],at(p,u)&&(p[u]=f[u])):(u.value=[s],t.k&&(f[t.k]=u.value))}else m?(f[u]=o,at(p,u)&&(p[u]=o)):y&&(u.value=o,t.k&&(f[t.k]=o))};o?(v.id=-1,Rn(v,n)):v()}}}const Rn=nH;function kH(t){return DH(t)}function DH(t,e){const n=Py();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:c,createComment:u,setText:h,setElementText:f,parentNode:p,nextSibling:m,setScopeId:y=ci,insertStaticContent:v}=t,I=(T,R,O,$=null,G=null,Y=null,he=!1,ne=null,ie=!!R.dynamicChildren)=>{if(T===R)return;T&&!$s(T,R)&&($=W(T),wt(T,G,Y,!0),T=null),R.patchFlag===-2&&(ie=!1,R.dynamicChildren=null);const{type:Q,ref:we,shapeFlag:me}=R;switch(Q){case Wp:A(T,R,O,$);break;case li:N(T,R,O,$);break;case A_:T==null&&D(R,O,$,he);break;case ti:te(T,R,O,$,G,Y,he,ne,ie);break;default:me&1?B(T,R,O,$,G,Y,he,ne,ie):me&6?Be(T,R,O,$,G,Y,he,ne,ie):(me&64||me&128)&&Q.process(T,R,O,$,G,Y,he,ne,ie,se)}we!=null&&G&&Fy(we,T&&T.ref,Y,R||T,!R)},A=(T,R,O,$)=>{if(T==null)r(R.el=c(R.children),O,$);else{const G=R.el=T.el;R.children!==T.children&&h(G,R.children)}},N=(T,R,O,$)=>{T==null?r(R.el=u(R.children||""),O,$):R.el=T.el},D=(T,R,O,$)=>{[T.el,T.anchor]=v(T.children,R,O,$,T.el,T.anchor)},k=({el:T,anchor:R},O,$)=>{let G;for(;T&&T!==R;)G=m(T),r(T,O,$),T=G;r(R,O,$)},P=({el:T,anchor:R})=>{let O;for(;T&&T!==R;)O=m(T),i(T),T=O;i(R)},B=(T,R,O,$,G,Y,he,ne,ie)=>{he=he||R.type==="svg",T==null?V(R,O,$,G,Y,he,ne,ie):J(T,R,G,Y,he,ne,ie)},V=(T,R,O,$,G,Y,he,ne)=>{let ie,Q;const{type:we,props:me,shapeFlag:Ie,transition:Se,dirs:Ke}=T;if(ie=T.el=o(T.type,Y,me&&me.is,me),Ie&8?f(ie,T.children):Ie&16&&M(T.children,ie,null,$,G,Y&&we!=="foreignObject",he,ne),Ke&&Po(T,null,$,"created"),F(ie,T,T.scopeId,he,$),me){for(const et in me)et!=="value"&&!df(et)&&s(ie,et,null,me[et],Y,T.children,$,G,bt);"value"in me&&s(ie,"value",null,me.value),(Q=me.onVnodeBeforeMount)&&$r(Q,$,T)}Ke&&Po(T,null,$,"beforeMount");const lt=(!G||G&&!G.pendingBranch)&&Se&&!Se.persisted;lt&&Se.beforeEnter(ie),r(ie,R,O),((Q=me&&me.onVnodeMounted)||lt||Ke)&&Rn(()=>{Q&&$r(Q,$,T),lt&&Se.enter(ie),Ke&&Po(T,null,$,"mounted")},G)},F=(T,R,O,$,G)=>{if(O&&y(T,O),$)for(let Y=0;Y<$.length;Y++)y(T,$[Y]);if(G){let Y=G.subTree;if(R===Y){const he=G.vnode;F(T,he,he.scopeId,he.slotScopeIds,G.parent)}}},M=(T,R,O,$,G,Y,he,ne,ie=0)=>{for(let Q=ie;Q<T.length;Q++){const we=T[Q]=ne?Us(T[Q]):Ei(T[Q]);I(null,we,R,O,$,G,Y,he,ne)}},J=(T,R,O,$,G,Y,he)=>{const ne=R.el=T.el;let{patchFlag:ie,dynamicChildren:Q,dirs:we}=R;ie|=T.patchFlag&16;const me=T.props||xt,Ie=R.props||xt;let Se;O&&xo(O,!1),(Se=Ie.onVnodeBeforeUpdate)&&$r(Se,O,R,T),we&&Po(R,T,O,"beforeUpdate"),O&&xo(O,!0);const Ke=G&&R.type!=="foreignObject";if(Q?ee(T.dynamicChildren,Q,ne,O,$,Ke,Y):he||$e(T,R,ne,null,O,$,Ke,Y,!1),ie>0){if(ie&16)ge(ne,R,me,Ie,O,$,G);else if(ie&2&&me.class!==Ie.class&&s(ne,"class",null,Ie.class,G),ie&4&&s(ne,"style",me.style,Ie.style,G),ie&8){const lt=R.dynamicProps;for(let et=0;et<lt.length;et++){const Mt=lt[et],jn=me[Mt],mi=Ie[Mt];(mi!==jn||Mt==="value")&&s(ne,Mt,jn,mi,G,T.children,O,$,bt)}}ie&1&&T.children!==R.children&&f(ne,R.children)}else!he&&Q==null&&ge(ne,R,me,Ie,O,$,G);((Se=Ie.onVnodeUpdated)||we)&&Rn(()=>{Se&&$r(Se,O,R,T),we&&Po(R,T,O,"updated")},$)},ee=(T,R,O,$,G,Y,he)=>{for(let ne=0;ne<R.length;ne++){const ie=T[ne],Q=R[ne],we=ie.el&&(ie.type===ti||!$s(ie,Q)||ie.shapeFlag&70)?p(ie.el):O;I(ie,Q,we,null,$,G,Y,he,!0)}},ge=(T,R,O,$,G,Y,he)=>{if(O!==$){if(O!==xt)for(const ne in O)!df(ne)&&!(ne in $)&&s(T,ne,O[ne],null,he,R.children,G,Y,bt);for(const ne in $){if(df(ne))continue;const ie=$[ne],Q=O[ne];ie!==Q&&ne!=="value"&&s(T,ne,Q,ie,he,R.children,G,Y,bt)}"value"in $&&s(T,"value",O.value,$.value)}},te=(T,R,O,$,G,Y,he,ne,ie)=>{const Q=R.el=T?T.el:c(""),we=R.anchor=T?T.anchor:c("");let{patchFlag:me,dynamicChildren:Ie,slotScopeIds:Se}=R;Se&&(ne=ne?ne.concat(Se):Se),T==null?(r(Q,O,$),r(we,O,$),M(R.children,O,we,G,Y,he,ne,ie)):me>0&&me&64&&Ie&&T.dynamicChildren?(ee(T.dynamicChildren,Ie,O,G,Y,he,ne),(R.key!=null||G&&R===G.subTree)&&Lw(T,R,!0)):$e(T,R,O,we,G,Y,he,ne,ie)},Be=(T,R,O,$,G,Y,he,ne,ie)=>{R.slotScopeIds=ne,T==null?R.shapeFlag&512?G.ctx.activate(R,O,$,he,ie):fe(R,O,$,G,Y,he,ie):Fe(T,R,ie)},fe=(T,R,O,$,G,Y,he)=>{const ne=T.component=WH(T,$,G);if(Bp(T)&&(ne.ctx.renderer=se),zH(ne),ne.asyncDep){if(G&&G.registerDep(ne,Ne),!T.el){const ie=ne.subTree=ar(li);N(null,ie,R,O)}return}Ne(ne,T,R,O,G,Y,he)},Fe=(T,R,O)=>{const $=R.component=T.component;if(eH(T,R,O))if($.asyncDep&&!$.asyncResolved){je($,R,O);return}else $.next=R,G4($.update),$.update();else R.el=T.el,$.vnode=R},Ne=(T,R,O,$,G,Y,he)=>{const ne=()=>{if(T.isMounted){let{next:we,bu:me,u:Ie,parent:Se,vnode:Ke}=T,lt=we,et;xo(T,!1),we?(we.el=Ke.el,je(T,we,he)):we=Ke,me&&mc(me),(et=we.props&&we.props.onVnodeBeforeUpdate)&&$r(et,Se,we,Ke),xo(T,!0);const Mt=w_(T),jn=T.subTree;T.subTree=Mt,I(jn,Mt,p(jn.el),W(jn),T,G,Y),we.el=Mt.el,lt===null&&tH(T,Mt.el),Ie&&Rn(Ie,G),(et=we.props&&we.props.onVnodeUpdated)&&Rn(()=>$r(et,Se,we,Ke),G)}else{let we;const{el:me,props:Ie}=R,{bm:Se,m:Ke,parent:lt}=T,et=uu(R);if(xo(T,!1),Se&&mc(Se),!et&&(we=Ie&&Ie.onVnodeBeforeMount)&&$r(we,lt,R),xo(T,!0),me&&Ze){const Mt=()=>{T.subTree=w_(T),Ze(me,T.subTree,T,G,null)};et?R.type.__asyncLoader().then(()=>!T.isUnmounted&&Mt()):Mt()}else{const Mt=T.subTree=w_(T);I(null,Mt,O,$,T,G,Y),R.el=Mt.el}if(Ke&&Rn(Ke,G),!et&&(we=Ie&&Ie.onVnodeMounted)){const Mt=R;Rn(()=>$r(we,lt,Mt),G)}(R.shapeFlag&256||lt&&uu(lt.vnode)&&lt.vnode.shapeFlag&256)&&T.a&&Rn(T.a,G),T.isMounted=!0,R=O=$=null}},ie=T.effect=new ww(ne,()=>Cw(Q),T.scope),Q=T.update=()=>ie.run();Q.id=T.uid,xo(T,!0),Q()},je=(T,R,O)=>{R.component=T;const $=T.vnode.props;T.vnode=R,T.next=null,SH(T,R.props,$,O),xH(T,R.children,O),el(),nA(),tl()},$e=(T,R,O,$,G,Y,he,ne,ie=!1)=>{const Q=T&&T.children,we=T?T.shapeFlag:0,me=R.children,{patchFlag:Ie,shapeFlag:Se}=R;if(Ie>0){if(Ie&128){ht(Q,me,O,$,G,Y,he,ne,ie);return}else if(Ie&256){zn(Q,me,O,$,G,Y,he,ne,ie);return}}Se&8?(we&16&&bt(Q,G,Y),me!==Q&&f(O,me)):we&16?Se&16?ht(Q,me,O,$,G,Y,he,ne,ie):bt(Q,G,Y,!0):(we&8&&f(O,""),Se&16&&M(me,O,$,G,Y,he,ne,ie))},zn=(T,R,O,$,G,Y,he,ne,ie)=>{T=T||pc,R=R||pc;const Q=T.length,we=R.length,me=Math.min(Q,we);let Ie;for(Ie=0;Ie<me;Ie++){const Se=R[Ie]=ie?Us(R[Ie]):Ei(R[Ie]);I(T[Ie],Se,O,null,G,Y,he,ne,ie)}Q>we?bt(T,G,Y,!0,!1,me):M(R,O,$,G,Y,he,ne,ie,me)},ht=(T,R,O,$,G,Y,he,ne,ie)=>{let Q=0;const we=R.length;let me=T.length-1,Ie=we-1;for(;Q<=me&&Q<=Ie;){const Se=T[Q],Ke=R[Q]=ie?Us(R[Q]):Ei(R[Q]);if($s(Se,Ke))I(Se,Ke,O,null,G,Y,he,ne,ie);else break;Q++}for(;Q<=me&&Q<=Ie;){const Se=T[me],Ke=R[Ie]=ie?Us(R[Ie]):Ei(R[Ie]);if($s(Se,Ke))I(Se,Ke,O,null,G,Y,he,ne,ie);else break;me--,Ie--}if(Q>me){if(Q<=Ie){const Se=Ie+1,Ke=Se<we?R[Se].el:$;for(;Q<=Ie;)I(null,R[Q]=ie?Us(R[Q]):Ei(R[Q]),O,Ke,G,Y,he,ne,ie),Q++}}else if(Q>Ie)for(;Q<=me;)wt(T[Q],G,Y,!0),Q++;else{const Se=Q,Ke=Q,lt=new Map;for(Q=Ke;Q<=Ie;Q++){const Tn=R[Q]=ie?Us(R[Q]):Ei(R[Q]);Tn.key!=null&&lt.set(Tn.key,Q)}let et,Mt=0;const jn=Ie-Ke+1;let mi=!1,Sa=0;const Vi=new Array(jn);for(Q=0;Q<jn;Q++)Vi[Q]=0;for(Q=Se;Q<=me;Q++){const Tn=T[Q];if(Mt>=jn){wt(Tn,G,Y,!0);continue}let er;if(Tn.key!=null)er=lt.get(Tn.key);else for(et=Ke;et<=Ie;et++)if(Vi[et-Ke]===0&&$s(Tn,R[et])){er=et;break}er===void 0?wt(Tn,G,Y,!0):(Vi[er-Ke]=Q+1,er>=Sa?Sa=er:mi=!0,I(Tn,R[er],O,null,G,Y,he,ne,ie),Mt++)}const Ca=mi?OH(Vi):pc;for(et=Ca.length-1,Q=jn-1;Q>=0;Q--){const Tn=Ke+Q,er=R[Tn],Pa=Tn+1<we?R[Tn+1].el:$;Vi[Q]===0?I(null,er,O,Pa,G,Y,he,ne,ie):mi&&(et<0||Q!==Ca[et]?Qe(er,O,Pa,2):et--)}}},Qe=(T,R,O,$,G=null)=>{const{el:Y,type:he,transition:ne,children:ie,shapeFlag:Q}=T;if(Q&6){Qe(T.component.subTree,R,O,$);return}if(Q&128){T.suspense.move(R,O,$);return}if(Q&64){he.move(T,R,O,se);return}if(he===ti){r(Y,R,O);for(let me=0;me<ie.length;me++)Qe(ie[me],R,O,$);r(T.anchor,R,O);return}if(he===A_){k(T,R,O);return}if($!==2&&Q&1&&ne)if($===0)ne.beforeEnter(Y),r(Y,R,O),Rn(()=>ne.enter(Y),G);else{const{leave:me,delayLeave:Ie,afterLeave:Se}=ne,Ke=()=>r(Y,R,O),lt=()=>{me(Y,()=>{Ke(),Se&&Se()})};Ie?Ie(Y,Ke,lt):lt()}else r(Y,R,O)},wt=(T,R,O,$=!1,G=!1)=>{const{type:Y,props:he,ref:ne,children:ie,dynamicChildren:Q,shapeFlag:we,patchFlag:me,dirs:Ie}=T;if(ne!=null&&Fy(ne,null,O,T,!0),we&256){R.ctx.deactivate(T);return}const Se=we&1&&Ie,Ke=!uu(T);let lt;if(Ke&&(lt=he&&he.onVnodeBeforeUnmount)&&$r(lt,R,T),we&6)Vt(T.component,O,$);else{if(we&128){T.suspense.unmount(O,$);return}Se&&Po(T,null,R,"beforeUnmount"),we&64?T.type.remove(T,R,O,G,se,$):Q&&(Y!==ti||me>0&&me&64)?bt(Q,R,O,!1,!0):(Y===ti&&me&384||!G&&we&16)&&bt(ie,R,O),$&&En(T)}(Ke&&(lt=he&&he.onVnodeUnmounted)||Se)&&Rn(()=>{lt&&$r(lt,R,T),Se&&Po(T,null,R,"unmounted")},O)},En=T=>{const{type:R,el:O,anchor:$,transition:G}=T;if(R===ti){In(O,$);return}if(R===A_){P(T);return}const Y=()=>{i(O),G&&!G.persisted&&G.afterLeave&&G.afterLeave()};if(T.shapeFlag&1&&G&&!G.persisted){const{leave:he,delayLeave:ne}=G,ie=()=>he(O,Y);ne?ne(T.el,Y,ie):ie()}else Y()},In=(T,R)=>{let O;for(;T!==R;)O=m(T),i(T),T=O;i(R)},Vt=(T,R,O)=>{const{bum:$,scope:G,update:Y,subTree:he,um:ne}=T;$&&mc($),G.stop(),Y&&(Y.active=!1,wt(he,T,R,O)),ne&&Rn(ne,R),Rn(()=>{T.isUnmounted=!0},R),R&&R.pendingBranch&&!R.isUnmounted&&T.asyncDep&&!T.asyncResolved&&T.suspenseId===R.pendingId&&(R.deps--,R.deps===0&&R.resolve())},bt=(T,R,O,$=!1,G=!1,Y=0)=>{for(let he=Y;he<T.length;he++)wt(T[he],R,O,$,G)},W=T=>T.shapeFlag&6?W(T.component.subTree):T.shapeFlag&128?T.suspense.next():m(T.anchor||T.el),de=(T,R,O)=>{T==null?R._vnode&&wt(R._vnode,null,null,!0):I(R._vnode||null,T,R,null,null,null,O),nA(),UP(),R._vnode=T},se={p:I,um:wt,m:Qe,r:En,mt:fe,mc:M,pc:$e,pbc:ee,n:W,o:t};let Ee,Ze;return e&&([Ee,Ze]=e(se)),{render:de,hydrate:Ee,createApp:bH(de,Ee)}}function xo({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function Lw(t,e,n=!1){const r=t.children,i=e.children;if(Ae(r)&&Ae(i))for(let s=0;s<r.length;s++){const o=r[s];let c=i[s];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=i[s]=Us(i[s]),c.el=o.el),n||Lw(o,c)),c.type===Wp&&(c.el=o.el)}}function OH(t){const e=t.slice(),n=[0];let r,i,s,o,c;const u=t.length;for(r=0;r<u;r++){const h=t[r];if(h!==0){if(i=n[n.length-1],t[i]<h){e[r]=i,n.push(r);continue}for(s=0,o=n.length-1;s<o;)c=s+o>>1,t[n[c]]<h?s=c+1:o=c;h<t[n[s]]&&(s>0&&(e[r]=n[s-1]),n[s]=r)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=e[o];return n}const NH=t=>t.__isTeleport,du=t=>t&&(t.disabled||t.disabled===""),pA=t=>typeof SVGElement!="undefined"&&t instanceof SVGElement,Uy=(t,e)=>{const n=t&&t.to;return $t(n)?e?e(n):null:n},MH={__isTeleport:!0,process(t,e,n,r,i,s,o,c,u,h){const{mc:f,pc:p,pbc:m,o:{insert:y,querySelector:v,createText:I,createComment:A}}=h,N=du(e.props);let{shapeFlag:D,children:k,dynamicChildren:P}=e;if(t==null){const B=e.el=I(""),V=e.anchor=I("");y(B,n,r),y(V,n,r);const F=e.target=Uy(e.props,v),M=e.targetAnchor=I("");F&&(y(M,F),o=o||pA(F));const J=(ee,ge)=>{D&16&&f(k,ee,ge,i,s,o,c,u)};N?J(n,V):F&&J(F,M)}else{e.el=t.el;const B=e.anchor=t.anchor,V=e.target=t.target,F=e.targetAnchor=t.targetAnchor,M=du(t.props),J=M?n:V,ee=M?B:F;if(o=o||pA(V),P?(m(t.dynamicChildren,P,J,i,s,o,c),Lw(t,e,!0)):u||p(t,e,J,ee,i,s,o,c,!1),N)M||Wd(e,n,B,h,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const ge=e.target=Uy(e.props,v);ge&&Wd(e,ge,null,h,0)}else M&&Wd(e,V,F,h,1)}cx(e)},remove(t,e,n,r,{um:i,o:{remove:s}},o){const{shapeFlag:c,children:u,anchor:h,targetAnchor:f,target:p,props:m}=t;if(p&&s(f),(o||!du(m))&&(s(h),c&16))for(let y=0;y<u.length;y++){const v=u[y];i(v,e,n,!0,!!v.dynamicChildren)}},move:Wd,hydrate:LH};function Wd(t,e,n,{o:{insert:r},m:i},s=2){s===0&&r(t.targetAnchor,e,n);const{el:o,anchor:c,shapeFlag:u,children:h,props:f}=t,p=s===2;if(p&&r(o,e,n),(!p||du(f))&&u&16)for(let m=0;m<h.length;m++)i(h[m],e,n,2);p&&r(c,e,n)}function LH(t,e,n,r,i,s,{o:{nextSibling:o,parentNode:c,querySelector:u}},h){const f=e.target=Uy(e.props,u);if(f){const p=f._lpa||f.firstChild;if(e.shapeFlag&16)if(du(e.props))e.anchor=h(o(t),e,c(t),n,r,i,s),e.targetAnchor=p;else{e.anchor=o(t);let m=p;for(;m;)if(m=o(m),m&&m.nodeType===8&&m.data==="teleport anchor"){e.targetAnchor=m,f._lpa=e.targetAnchor&&o(e.targetAnchor);break}h(p,e,f,n,r,i,s)}cx(e)}return e.anchor&&o(e.anchor)}const Zne=MH;function cx(t){const e=t.ctx;if(e&&e.ut){let n=t.children[0].el;for(;n!==t.targetAnchor;)n.nodeType===1&&n.setAttribute("data-v-owner",e.uid),n=n.nextSibling;e.ut()}}const ti=Symbol.for("v-fgt"),Wp=Symbol.for("v-txt"),li=Symbol.for("v-cmt"),A_=Symbol.for("v-stc"),fu=[];let ii=null;function By(t=!1){fu.push(ii=t?null:[])}function VH(){fu.pop(),ii=fu[fu.length-1]||null}let Lu=1;function gA(t){Lu+=t}function lx(t){return t.dynamicChildren=Lu>0?ii||pc:null,VH(),Lu>0&&ii&&ii.push(t),t}function ere(t,e,n,r,i,s){return lx(hx(t,e,n,r,i,s,!0))}function $y(t,e,n,r,i){return lx(ar(t,e,n,r,i,!0))}function $f(t){return t?t.__v_isVNode===!0:!1}function $s(t,e){return t.type===e.type&&t.key===e.key}const zp="__vInternal",ux=({key:t})=>t!=null?t:null,pf=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?$t(t)||zt(t)||Ue(t)?{i:or,r:t,k:e,f:!!n}:t:null);function hx(t,e=null,n=null,r=0,i=null,s=t===ti?0:1,o=!1,c=!1){const u={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&ux(e),ref:e&&pf(e),scopeId:qP,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:or};return c?(Vw(u,n),s&128&&t.normalize(u)):n&&(u.shapeFlag|=$t(n)?8:16),Lu>0&&!o&&ii&&(u.patchFlag>0||s&6)&&u.patchFlag!==32&&ii.push(u),u}const ar=FH;function FH(t,e=null,n=null,r=0,i=null,s=!1){if((!t||t===ZP)&&(t=li),$f(t)){const c=cs(t,e,!0);return n&&Vw(c,n),Lu>0&&!s&&ii&&(c.shapeFlag&6?ii[ii.indexOf(t)]=c:ii.push(c)),c.patchFlag|=-2,c}if(YH(t)&&(t=t.__vccOpts),e){e=UH(e);let{class:c,style:u}=e;c&&!$t(c)&&(e.class=mw(c)),Tt(u)&&(kP(u)&&!Ae(u)&&(u=Xt({},u)),e.style=gw(u))}const o=$t(t)?1:WP(t)?128:NH(t)?64:Tt(t)?4:Ue(t)?2:0;return hx(t,e,n,r,i,o,s,!0)}function UH(t){return t?kP(t)||zp in t?Xt({},t):t:null}function cs(t,e,n=!1){const{props:r,ref:i,patchFlag:s,children:o}=t,c=e?$H(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&ux(c),ref:e&&e.ref?n&&i?Ae(i)?i.concat(pf(e)):[i,pf(e)]:pf(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==ti?s===-1?16:s|16:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&cs(t.ssContent),ssFallback:t.ssFallback&&cs(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function BH(t=" ",e=0){return ar(Wp,null,t,e)}function tre(t="",e=!1){return e?(By(),$y(li,null,t)):ar(li,null,t)}function Ei(t){return t==null||typeof t=="boolean"?ar(li):Ae(t)?ar(ti,null,t.slice()):typeof t=="object"?Us(t):ar(Wp,null,String(t))}function Us(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:cs(t)}function Vw(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(Ae(e))n=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),Vw(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!(zp in e)?e._ctx=or:i===3&&or&&(or.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Ue(e)?(e={default:e,_ctx:or},n=32):(e=String(e),r&64?(n=16,e=[BH(e)]):n=8);t.children=e,t.shapeFlag|=n}function $H(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=mw([e.class,r.class]));else if(i==="style")e.style=gw([e.style,r.style]);else if(Np(i)){const s=e[i],o=r[i];o&&s!==o&&!(Ae(s)&&s.includes(o))&&(e[i]=s?[].concat(s,o):o)}else i!==""&&(e[i]=r[i])}return e}function $r(t,e,n,r=null){Wr(t,e,7,[n,r])}const qH=nx();let HH=0;function WH(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||qH,s={uid:HH++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new _P(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ix(r,i),emitsOptions:$P(r,i),emit:null,emitted:null,propsDefaults:xt,inheritAttrs:r.inheritAttrs,ctx:xt,data:xt,props:xt,attrs:xt,slots:xt,refs:xt,setupState:xt,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=J4.bind(null,s),t.ce&&t.ce(s),s}let ln=null;const ho=()=>ln||or;let Fw,Wa,mA="__VUE_INSTANCE_SETTERS__";(Wa=Py()[mA])||(Wa=Py()[mA]=[]),Wa.push(t=>ln=t),Fw=t=>{Wa.length>1?Wa.forEach(e=>e(t)):Wa[0](t)};const kc=t=>{Fw(t),t.scope.on()},Qo=()=>{ln&&ln.scope.off(),Fw(null)};function dx(t){return t.vnode.shapeFlag&4}let Vu=!1;function zH(t,e=!1){Vu=e;const{props:n,children:r}=t.vnode,i=dx(t);RH(t,n,i,e),PH(t,r);const s=i?jH(t,e):void 0;return Vu=!1,s}function jH(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=fs(new Proxy(t.ctx,_H));const{setup:r}=n;if(r){const i=t.setupContext=r.length>1?GH(t):null;kc(t),el();const s=Xs(r,t,0,[t.props,i]);if(tl(),Qo(),dP(s)){if(s.then(Qo,Qo),e)return s.then(o=>{_A(t,o,e)}).catch(o=>{Fp(o,t,0)});t.asyncDep=s}else _A(t,s,e)}else fx(t,e)}function _A(t,e,n){Ue(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Tt(e)&&(t.setupState=LP(e)),fx(t,n)}let yA;function fx(t,e,n){const r=t.type;if(!t.render){if(!e&&yA&&!r.render){const i=r.template||Nw(t).template;if(i){const{isCustomElement:s,compilerOptions:o}=t.appContext.config,{delimiters:c,compilerOptions:u}=r,h=Xt(Xt({isCustomElement:s,delimiters:c},o),u);r.render=yA(i,h)}}t.render=r.render||ci}kc(t),el(),yH(t),tl(),Qo()}function KH(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,n){return pr(t,"get","$attrs"),e[n]}}))}function GH(t){const e=n=>{t.exposed=n||{}};return{get attrs(){return KH(t)},slots:t.slots,emit:t.emit,expose:e}}function jp(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(LP(fs(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in hu)return hu[n](t)},has(e,n){return n in e||n in hu}}))}function qy(t,e=!0){return Ue(t)?t.displayName||t.name:t.name||e&&t.__name}function YH(t){return Ue(t)&&"__vccOpts"in t}const xe=(t,e)=>z4(t,e,Vu);function De(t,e,n){const r=arguments.length;return r===2?Tt(e)&&!Ae(e)?$f(e)?ar(t,null,[e]):ar(t,e):ar(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&$f(n)&&(n=[n]),ar(t,e,n))}const QH=Symbol.for("v-scx"),JH=()=>dr(QH),XH="3.3.4",ZH="http://www.w3.org/2000/svg",Fo=typeof document!="undefined"?document:null,vA=Fo&&Fo.createElement("template"),eW={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e?Fo.createElementNS(ZH,t):Fo.createElement(t,n?{is:n}:void 0);return t==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:t=>Fo.createTextNode(t),createComment:t=>Fo.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Fo.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,s){const o=n?n.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{vA.innerHTML=r?`<svg>${t}</svg>`:t;const c=vA.content;if(r){const u=c.firstChild;for(;u.firstChild;)c.appendChild(u.firstChild);c.removeChild(u)}e.insertBefore(c,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function tW(t,e,n){const r=t._vtc;r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function nW(t,e,n){const r=t.style,i=$t(n);if(n&&!i){if(e&&!$t(e))for(const s in e)n[s]==null&&Hy(r,s,"");for(const s in n)Hy(r,s,n[s])}else{const s=r.display;i?e!==n&&(r.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(r.display=s)}}const wA=/\s*!important$/;function Hy(t,e,n){if(Ae(n))n.forEach(r=>Hy(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=rW(t,e);wA.test(n)?t.setProperty(Zc(r),n.replace(wA,""),"important"):t[r]=n}}const EA=["Webkit","Moz","ms"],R_={};function rW(t,e){const n=R_[e];if(n)return n;let r=Di(e);if(r!=="filter"&&r in t)return R_[e]=r;r=Lp(r);for(let i=0;i<EA.length;i++){const s=EA[i]+r;if(s in t)return R_[e]=s}return e}const IA="http://www.w3.org/1999/xlink";function iW(t,e,n,r,i){if(r&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(IA,e.slice(6,e.length)):t.setAttributeNS(IA,e,n);else{const s=l4(e);n==null||s&&!gP(n)?t.removeAttribute(e):t.setAttribute(e,s?"":n)}}function sW(t,e,n,r,i,s,o){if(e==="innerHTML"||e==="textContent"){r&&o(r,i,s),t[e]=n==null?"":n;return}const c=t.tagName;if(e==="value"&&c!=="PROGRESS"&&!c.includes("-")){t._value=n;const h=c==="OPTION"?t.getAttribute("value"):t.value,f=n==null?"":n;h!==f&&(t.value=f),n==null&&t.removeAttribute(e);return}let u=!1;if(n===""||n==null){const h=typeof t[e];h==="boolean"?n=gP(n):n==null&&h==="string"?(n="",u=!0):h==="number"&&(n=0,u=!0)}try{t[e]=n}catch{}u&&t.removeAttribute(e)}function px(t,e,n,r){t.addEventListener(e,n,r)}function oW(t,e,n,r){t.removeEventListener(e,n,r)}function aW(t,e,n,r,i=null){const s=t._vei||(t._vei={}),o=s[e];if(r&&o)o.value=r;else{const[c,u]=cW(e);if(r){const h=s[e]=hW(r,i);px(t,c,h,u)}else o&&(oW(t,c,o,u),s[e]=void 0)}}const TA=/(?:Once|Passive|Capture)$/;function cW(t){let e;if(TA.test(t)){e={};let r;for(;r=t.match(TA);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Zc(t.slice(2)),e]}let S_=0;const lW=Promise.resolve(),uW=()=>S_||(lW.then(()=>S_=0),S_=Date.now());function hW(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Wr(dW(r,n.value),e,5,[r])};return n.value=t,n.attached=uW(),n}function dW(t,e){if(Ae(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const bA=/^on[a-z]/,fW=(t,e,n,r,i=!1,s,o,c,u)=>{e==="class"?tW(t,r,i):e==="style"?nW(t,n,r):Np(e)?dw(e)||aW(t,e,n,r,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):pW(t,e,r,i))?sW(t,e,r,s,o,c,u):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),iW(t,e,r,i))};function pW(t,e,n,r){return r?!!(e==="innerHTML"||e==="textContent"||e in t&&bA.test(e)&&Ue(n)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||bA.test(e)&&$t(n)?!1:e in t}const ks="transition",Ol="animation",Uw=(t,{slots:e})=>De(sH,mx(t),e);Uw.displayName="Transition";const gx={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},gW=Uw.props=Xt({},GP,gx),ko=(t,e=[])=>{Ae(t)?t.forEach(n=>n(...e)):t&&t(...e)},AA=t=>t?Ae(t)?t.some(e=>e.length>1):t.length>1:!1;function mx(t){const e={};for(const te in t)te in gx||(e[te]=t[te]);if(t.css===!1)return e;const{name:n="v",type:r,duration:i,enterFromClass:s=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:c=`${n}-enter-to`,appearFromClass:u=s,appearActiveClass:h=o,appearToClass:f=c,leaveFromClass:p=`${n}-leave-from`,leaveActiveClass:m=`${n}-leave-active`,leaveToClass:y=`${n}-leave-to`}=t,v=mW(i),I=v&&v[0],A=v&&v[1],{onBeforeEnter:N,onEnter:D,onEnterCancelled:k,onLeave:P,onLeaveCancelled:B,onBeforeAppear:V=N,onAppear:F=D,onAppearCancelled:M=k}=e,J=(te,Be,fe)=>{Vs(te,Be?f:c),Vs(te,Be?h:o),fe&&fe()},ee=(te,Be)=>{te._isLeaving=!1,Vs(te,p),Vs(te,y),Vs(te,m),Be&&Be()},ge=te=>(Be,fe)=>{const Fe=te?F:D,Ne=()=>J(Be,te,fe);ko(Fe,[Be,Ne]),RA(()=>{Vs(Be,te?u:s),Gi(Be,te?f:c),AA(Fe)||SA(Be,r,I,Ne)})};return Xt(e,{onBeforeEnter(te){ko(N,[te]),Gi(te,s),Gi(te,o)},onBeforeAppear(te){ko(V,[te]),Gi(te,u),Gi(te,h)},onEnter:ge(!1),onAppear:ge(!0),onLeave(te,Be){te._isLeaving=!0;const fe=()=>ee(te,Be);Gi(te,p),yx(),Gi(te,m),RA(()=>{!te._isLeaving||(Vs(te,p),Gi(te,y),AA(P)||SA(te,r,A,fe))}),ko(P,[te,fe])},onEnterCancelled(te){J(te,!1),ko(k,[te])},onAppearCancelled(te){J(te,!0),ko(M,[te])},onLeaveCancelled(te){ee(te),ko(B,[te])}})}function mW(t){if(t==null)return null;if(Tt(t))return[C_(t.enter),C_(t.leave)];{const e=C_(t);return[e,e]}}function C_(t){return r4(t)}function Gi(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t._vtc||(t._vtc=new Set)).add(e)}function Vs(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const{_vtc:n}=t;n&&(n.delete(e),n.size||(t._vtc=void 0))}function RA(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let _W=0;function SA(t,e,n,r){const i=t._endId=++_W,s=()=>{i===t._endId&&r()};if(n)return setTimeout(s,n);const{type:o,timeout:c,propCount:u}=_x(t,e);if(!o)return r();const h=o+"end";let f=0;const p=()=>{t.removeEventListener(h,m),s()},m=y=>{y.target===t&&++f>=u&&p()};setTimeout(()=>{f<u&&p()},c+1),t.addEventListener(h,m)}function _x(t,e){const n=window.getComputedStyle(t),r=v=>(n[v]||"").split(", "),i=r(`${ks}Delay`),s=r(`${ks}Duration`),o=CA(i,s),c=r(`${Ol}Delay`),u=r(`${Ol}Duration`),h=CA(c,u);let f=null,p=0,m=0;e===ks?o>0&&(f=ks,p=o,m=s.length):e===Ol?h>0&&(f=Ol,p=h,m=u.length):(p=Math.max(o,h),f=p>0?o>h?ks:Ol:null,m=f?f===ks?s.length:u.length:0);const y=f===ks&&/\b(transform|all)(,|$)/.test(r(`${ks}Property`).toString());return{type:f,timeout:p,propCount:m,hasTransform:y}}function CA(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>PA(n)+PA(t[r])))}function PA(t){return Number(t.slice(0,-1).replace(",","."))*1e3}function yx(){return document.body.offsetHeight}const vx=new WeakMap,wx=new WeakMap,Ex={name:"TransitionGroup",props:Xt({},gW,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=ho(),r=KP();let i,s;return Dw(()=>{if(!i.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!TW(i[0].el,n.vnode.el,o))return;i.forEach(wW),i.forEach(EW);const c=i.filter(IW);yx(),c.forEach(u=>{const h=u.el,f=h.style;Gi(h,o),f.transform=f.webkitTransform=f.transitionDuration="";const p=h._moveCb=m=>{m&&m.target!==h||(!m||/transform$/.test(m.propertyName))&&(h.removeEventListener("transitionend",p),h._moveCb=null,Vs(h,o))};h.addEventListener("transitionend",p)})}),()=>{const o=rt(t),c=mx(o);let u=o.tag||ti;i=s,s=e.default?xw(e.default()):[];for(let h=0;h<s.length;h++){const f=s[h];f.key!=null&&xc(f,Nu(f,c,r,n))}if(i)for(let h=0;h<i.length;h++){const f=i[h];xc(f,Nu(f,c,r,n)),vx.set(f,f.el.getBoundingClientRect())}return ar(u,null,s)}}},yW=t=>delete t.mode;Ex.props;const vW=Ex;function wW(t){const e=t.el;e._moveCb&&e._moveCb(),e._enterCb&&e._enterCb()}function EW(t){wx.set(t,t.el.getBoundingClientRect())}function IW(t){const e=vx.get(t),n=wx.get(t),r=e.left-n.left,i=e.top-n.top;if(r||i){const s=t.el.style;return s.transform=s.webkitTransform=`translate(${r}px,${i}px)`,s.transitionDuration="0s",t}}function TW(t,e,n){const r=t.cloneNode();t._vtc&&t._vtc.forEach(o=>{o.split(/\s+/).forEach(c=>c&&r.classList.remove(c))}),n.split(/\s+/).forEach(o=>o&&r.classList.add(o)),r.style.display="none";const i=e.nodeType===1?e:e.parentNode;i.appendChild(r);const{hasTransform:s}=_x(r);return i.removeChild(r),s}const xA=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Ae(e)?n=>mc(e,n):e},nre={created(t,{value:e},n){t.checked=Lf(e,n.props.value),t._assign=xA(n),px(t,"change",()=>{t._assign(bW(t))})},beforeUpdate(t,{value:e,oldValue:n},r){t._assign=xA(r),e!==n&&(t.checked=Lf(e,r.props.value))}};function bW(t){return"_value"in t?t._value:t.value}const AW=Xt({patchProp:fW},eW);let kA;function RW(){return kA||(kA=kH(AW))}const Ix=(...t)=>{const e=RW().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=SW(r);if(!i)return;const s=e._component;!Ue(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.innerHTML="";const o=n(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e};function SW(t){return $t(t)?document.querySelector(t):t}/*! Capacitor: https://capacitorjs.com/ - MIT License */const CW=t=>{const e=new Map;e.set("web",{name:"web"});const n=t.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:e},r=(s,o)=>{n.platforms.set(s,o)},i=s=>{n.platforms.has(s)&&(n.currentPlatform=n.platforms.get(s))};return n.addPlatform=r,n.setPlatform=i,n},PW=t=>t.CapacitorPlatforms=CW(t),Tx=PW(typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});Tx.addPlatform;Tx.setPlatform;var Dc;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(Dc||(Dc={}));class P_ extends Error{constructor(e,n,r){super(e),this.message=e,this.code=n,this.data=r}}const xW=t=>{var e,n;return t!=null&&t.androidBridge?"android":!((n=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},kW=t=>{var e,n,r,i,s;const o=t.CapacitorCustomPlatform||null,c=t.Capacitor||{},u=c.Plugins=c.Plugins||{},h=t.CapacitorPlatforms,f=()=>o!==null?o.name:xW(t),p=((e=h==null?void 0:h.currentPlatform)===null||e===void 0?void 0:e.getPlatform)||f,m=()=>p()!=="web",y=((n=h==null?void 0:h.currentPlatform)===null||n===void 0?void 0:n.isNativePlatform)||m,v=F=>{const M=P.get(F);return!!(M!=null&&M.platforms.has(p())||N(F))},I=((r=h==null?void 0:h.currentPlatform)===null||r===void 0?void 0:r.isPluginAvailable)||v,A=F=>{var M;return(M=c.PluginHeaders)===null||M===void 0?void 0:M.find(J=>J.name===F)},N=((i=h==null?void 0:h.currentPlatform)===null||i===void 0?void 0:i.getPluginHeader)||A,D=F=>t.console.error(F),k=(F,M,J)=>Promise.reject(`${J} does not have an implementation of "${M}".`),P=new Map,B=(F,M={})=>{const J=P.get(F);if(J)return console.warn(`Capacitor plugin "${F}" already registered. Cannot register plugins twice.`),J.proxy;const ee=p(),ge=N(F);let te;const Be=async()=>(!te&&ee in M?te=typeof M[ee]=="function"?te=await M[ee]():te=M[ee]:o!==null&&!te&&"web"in M&&(te=typeof M.web=="function"?te=await M.web():te=M.web),te),fe=(ht,Qe)=>{var wt,En;if(ge){const In=ge==null?void 0:ge.methods.find(Vt=>Qe===Vt.name);if(In)return In.rtype==="promise"?Vt=>c.nativePromise(F,Qe.toString(),Vt):(Vt,bt)=>c.nativeCallback(F,Qe.toString(),Vt,bt);if(ht)return(wt=ht[Qe])===null||wt===void 0?void 0:wt.bind(ht)}else{if(ht)return(En=ht[Qe])===null||En===void 0?void 0:En.bind(ht);throw new P_(`"${F}" plugin is not implemented on ${ee}`,Dc.Unimplemented)}},Fe=ht=>{let Qe;const wt=(...En)=>{const In=Be().then(Vt=>{const bt=fe(Vt,ht);if(bt){const W=bt(...En);return Qe=W==null?void 0:W.remove,W}else throw new P_(`"${F}.${ht}()" is not implemented on ${ee}`,Dc.Unimplemented)});return ht==="addListener"&&(In.remove=async()=>Qe()),In};return wt.toString=()=>`${ht.toString()}() { [capacitor code] }`,Object.defineProperty(wt,"name",{value:ht,writable:!1,configurable:!1}),wt},Ne=Fe("addListener"),je=Fe("removeListener"),$e=(ht,Qe)=>{const wt=Ne({eventName:ht},Qe),En=async()=>{const Vt=await wt;je({eventName:ht,callbackId:Vt},Qe)},In=new Promise(Vt=>wt.then(()=>Vt({remove:En})));return In.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await En()},In},zn=new Proxy({},{get(ht,Qe){switch(Qe){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return ge?$e:Ne;case"removeListener":return je;default:return Fe(Qe)}}});return u[F]=zn,P.set(F,{name:F,proxy:zn,platforms:new Set([...Object.keys(M),...ge?[ee]:[]])}),zn},V=((s=h==null?void 0:h.currentPlatform)===null||s===void 0?void 0:s.registerPlugin)||B;return c.convertFileSrc||(c.convertFileSrc=F=>F),c.getPlatform=p,c.handleError=D,c.isNativePlatform=y,c.isPluginAvailable=I,c.pluginMethodNoop=k,c.registerPlugin=V,c.Exception=P_,c.DEBUG=!!c.DEBUG,c.isLoggingEnabled=!!c.isLoggingEnabled,c.platform=c.getPlatform(),c.isNative=c.isNativePlatform(),c},DW=t=>t.Capacitor=kW(t),qf=DW(typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{}),Bw=qf.registerPlugin;qf.Plugins;class bx{constructor(e){this.listeners={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,n){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(n);const i=this.windowListeners[e];i&&!i.registered&&this.addWindowListener(i);const s=async()=>this.removeListener(e,n),o=Promise.resolve({remove:s});return Object.defineProperty(o,"remove",{value:async()=>{console.warn("Using addListener() without 'await' is deprecated."),await s()}}),o}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n){const r=this.listeners[e];r&&r.forEach(i=>i(n))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(e="not implemented"){return new qf.Exception(e,Dc.Unimplemented)}unavailable(e="not available"){return new qf.Exception(e,Dc.Unavailable)}async removeListener(e,n){const r=this.listeners[e];if(!r)return;const i=r.indexOf(n);this.listeners[e].splice(i,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){!e||(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}}const DA=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),OA=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class OW extends bx{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[i,s]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");i=OA(i).trim(),s=OA(s).trim(),n[i]=s}),n}async setCookie(e){try{const n=DA(e.key),r=DA(e.value),i=`; expires=${(e.expires||"").replace("expires=","")}`,s=(e.path||"/").replace("path=",""),o=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${r||""}${i}; path=${s}; ${o};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}Bw("CapacitorCookies",{web:()=>new OW});const NW=async t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{const i=r.result;e(i.indexOf(",")>=0?i.split(",")[1]:i)},r.onerror=i=>n(i),r.readAsDataURL(t)}),MW=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(i=>i.toLocaleLowerCase()).reduce((i,s,o)=>(i[s]=t[e[o]],i),{})},LW=(t,e=!0)=>t?Object.entries(t).reduce((r,i)=>{const[s,o]=i;let c,u;return Array.isArray(o)?(u="",o.forEach(h=>{c=e?encodeURIComponent(h):h,u+=`${s}=${c}&`}),u.slice(0,-1)):(c=e?encodeURIComponent(o):o,u=`${s}=${c}`),`${r}&${u}`},"").substr(1):null,VW=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e),i=MW(t.headers)["content-type"]||"";if(typeof t.data=="string")n.body=t.data;else if(i.includes("application/x-www-form-urlencoded")){const s=new URLSearchParams;for(const[o,c]of Object.entries(t.data||{}))s.set(o,c);n.body=s.toString()}else if(i.includes("multipart/form-data")){const s=new FormData;if(t.data instanceof FormData)t.data.forEach((c,u)=>{s.append(u,c)});else for(const c of Object.keys(t.data))s.append(c,t.data[c]);n.body=s;const o=new Headers(n.headers);o.delete("content-type"),n.headers=o}else(i.includes("application/json")||typeof t.data=="object")&&(n.body=JSON.stringify(t.data));return n};class FW extends bx{async request(e){const n=VW(e,e.webFetchExtra),r=LW(e.params,e.shouldEncodeUrlParams),i=r?`${e.url}?${r}`:e.url,s=await fetch(i,n),o=s.headers.get("content-type")||"";let{responseType:c="text"}=s.ok?e:{};o.includes("application/json")&&(c="json");let u,h;switch(c){case"arraybuffer":case"blob":h=await s.blob(),u=await NW(h);break;case"json":u=await s.json();break;case"document":case"text":default:u=await s.text()}const f={};return s.headers.forEach((p,m)=>{f[m]=p}),{data:u,headers:f,status:s.status,url:s.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}Bw("CapacitorHttp",{web:()=>new FW});Bw("App",{web:()=>Ut(()=>import("./web.6a4f8cc1.js"),[]).then(t=>new t.AppWeb)});function $w(t,e,n,r){return Object.defineProperty(t,e,{get:n,set:r,enumerable:!0}),t}const na=Bt(!1);let Kp;function UW(t,e){const n=/(edg|edge|edga|edgios)\/([\w.]+)/.exec(t)||/(opr)[\/]([\w.]+)/.exec(t)||/(vivaldi)[\/]([\w.]+)/.exec(t)||/(chrome|crios)[\/]([\w.]+)/.exec(t)||/(version)(applewebkit)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(t)||/(webkit)[\/]([\w.]+).*(version)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(t)||/(firefox|fxios)[\/]([\w.]+)/.exec(t)||/(webkit)[\/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[\/]([\w.]+)/.exec(t)||[];return{browser:n[5]||n[3]||n[1]||"",version:n[2]||n[4]||"0",versionNumber:n[4]||n[2]||"0",platform:e[0]||""}}function BW(t){return/(ipad)/.exec(t)||/(ipod)/.exec(t)||/(windows phone)/.exec(t)||/(iphone)/.exec(t)||/(kindle)/.exec(t)||/(silk)/.exec(t)||/(android)/.exec(t)||/(win)/.exec(t)||/(mac)/.exec(t)||/(linux)/.exec(t)||/(cros)/.exec(t)||/(playbook)/.exec(t)||/(bb)/.exec(t)||/(blackberry)/.exec(t)||[]}const Ax="ontouchstart"in window||window.navigator.maxTouchPoints>0;function $W(t){Kp={is:{...t}},delete t.mac,delete t.desktop;const e=Math.min(window.innerHeight,window.innerWidth)>414?"ipad":"iphone";Object.assign(t,{mobile:!0,ios:!0,platform:e,[e]:!0})}function qW(t){const e=t.toLowerCase(),n=BW(e),r=UW(e,n),i={};r.browser&&(i[r.browser]=!0,i.version=r.version,i.versionNumber=parseInt(r.versionNumber,10)),r.platform&&(i[r.platform]=!0);const s=i.android||i.ios||i.bb||i.blackberry||i.ipad||i.iphone||i.ipod||i.kindle||i.playbook||i.silk||i["windows phone"];return s===!0||e.indexOf("mobile")>-1?(i.mobile=!0,i.edga||i.edgios?(i.edge=!0,r.browser="edge"):i.crios?(i.chrome=!0,r.browser="chrome"):i.fxios&&(i.firefox=!0,r.browser="firefox")):i.desktop=!0,(i.ipod||i.ipad||i.iphone)&&(i.ios=!0),i["windows phone"]&&(i.winphone=!0,delete i["windows phone"]),(i.chrome||i.opr||i.safari||i.vivaldi||i.mobile===!0&&i.ios!==!0&&s!==!0)&&(i.webkit=!0),i.edg&&(r.browser="edgechromium",i.edgeChromium=!0),(i.safari&&i.blackberry||i.bb)&&(r.browser="blackberry",i.blackberry=!0),i.safari&&i.playbook&&(r.browser="playbook",i.playbook=!0),i.opr&&(r.browser="opera",i.opera=!0),i.safari&&i.android&&(r.browser="android",i.android=!0),i.safari&&i.kindle&&(r.browser="kindle",i.kindle=!0),i.safari&&i.silk&&(r.browser="silk",i.silk=!0),i.vivaldi&&(r.browser="vivaldi",i.vivaldi=!0),i.name=r.browser,i.platform=r.platform,e.indexOf("electron")>-1?i.electron=!0:document.location.href.indexOf("-extension://")>-1?i.bex=!0:(window.Capacitor!==void 0?(i.capacitor=!0,i.nativeMobile=!0,i.nativeMobileWrapper="capacitor"):(window._cordovaNative!==void 0||window.cordova!==void 0)&&(i.cordova=!0,i.nativeMobile=!0,i.nativeMobileWrapper="cordova"),Ax===!0&&i.mac===!0&&(i.desktop===!0&&i.safari===!0||i.nativeMobile===!0&&i.android!==!0&&i.ios!==!0&&i.ipad!==!0)&&$W(i)),i}const NA=navigator.userAgent||navigator.vendor||window.opera,HW={has:{touch:!1,webStorage:!1},within:{iframe:!1}},Yt={userAgent:NA,is:qW(NA),has:{touch:Ax},within:{iframe:window.self!==window.top}},Wy={install(t){const{$q:e}=t;na.value===!0?(t.onSSRHydrated.push(()=>{Object.assign(e.platform,Yt),na.value=!1,Kp=void 0}),e.platform=_a(this)):e.platform=this}};{let t;$w(Yt.has,"webStorage",()=>{if(t!==void 0)return t;try{if(window.localStorage)return t=!0,!0}catch{}return t=!1,!1}),Yt.is.ios===!0&&window.navigator.vendor.toLowerCase().indexOf("apple"),na.value===!0?Object.assign(Wy,Yt,Kp,HW):Object.assign(Wy,Yt)}var Gp=(t,e)=>{const n=_a(t);for(const r in t)$w(e,r,()=>n[r],i=>{n[r]=i});return e};const vh={hasPassive:!1,passiveCapture:!0,notPassiveCapture:!0};try{const t=Object.defineProperty({},"passive",{get(){Object.assign(vh,{hasPassive:!0,passive:{passive:!0},notPassive:{passive:!1},passiveCapture:{passive:!0,capture:!0},notPassiveCapture:{passive:!1,capture:!0}})}});window.addEventListener("qtest",null,t),window.removeEventListener("qtest",null,t)}catch{}function Oc(){}function WW(t){return t.touches&&t.touches[0]?t=t.touches[0]:t.changedTouches&&t.changedTouches[0]?t=t.changedTouches[0]:t.targetTouches&&t.targetTouches[0]&&(t=t.targetTouches[0]),{top:t.clientY,left:t.clientX}}function rre(t){if(t.path)return t.path;if(t.composedPath)return t.composedPath();const e=[];let n=t.target;for(;n;){if(e.push(n),n.tagName==="HTML")return e.push(document),e.push(window),e;n=n.parentElement}}function Rx(t){t.stopPropagation()}function zW(t){t.cancelable!==!1&&t.preventDefault()}function za(t){t.cancelable!==!1&&t.preventDefault(),t.stopPropagation()}function jW(t,e,n){const r=`__q_${e}_evt`;t[r]=t[r]!==void 0?t[r].concat(n):n,n.forEach(i=>{i[0].addEventListener(i[1],t[i[2]],vh[i[3]])})}function KW(t,e){const n=`__q_${e}_evt`;t[n]!==void 0&&(t[n].forEach(r=>{r[0].removeEventListener(r[1],t[r[2]],vh[r[3]])}),t[n]=void 0)}function GW(t,e=250,n){let r=null;function i(){const s=arguments,o=()=>{r=null,n!==!0&&t.apply(this,s)};r!==null?clearTimeout(r):n===!0&&t.apply(this,s),r=setTimeout(o,e)}return i.cancel=()=>{r!==null&&clearTimeout(r)},i}const x_=["sm","md","lg","xl"],{passive:MA}=vh;var YW=Gp({width:0,height:0,name:"xs",sizes:{sm:600,md:1024,lg:1440,xl:1920},lt:{sm:!0,md:!0,lg:!0,xl:!0},gt:{xs:!1,sm:!1,md:!1,lg:!1},xs:!0,sm:!1,md:!1,lg:!1,xl:!1},{setSizes:Oc,setDebounce:Oc,install({$q:t,onSSRHydrated:e}){if(t.screen=this,this.__installed===!0){t.config.screen!==void 0&&(t.config.screen.bodyClasses===!1?document.body.classList.remove(`screen--${this.name}`):this.__update(!0));return}const{visualViewport:n}=window,r=n||window,i=document.scrollingElement||document.documentElement,s=n===void 0||Yt.is.mobile===!0?()=>[Math.max(window.innerWidth,i.clientWidth),Math.max(window.innerHeight,i.clientHeight)]:()=>[n.width*n.scale+window.innerWidth-i.clientWidth,n.height*n.scale+window.innerHeight-i.clientHeight],o=t.config.screen!==void 0&&t.config.screen.bodyClasses===!0;this.__update=p=>{const[m,y]=s();if(y!==this.height&&(this.height=y),m!==this.width)this.width=m;else if(p!==!0)return;let v=this.sizes;this.gt.xs=m>=v.sm,this.gt.sm=m>=v.md,this.gt.md=m>=v.lg,this.gt.lg=m>=v.xl,this.lt.sm=m<v.sm,this.lt.md=m<v.md,this.lt.lg=m<v.lg,this.lt.xl=m<v.xl,this.xs=this.lt.sm,this.sm=this.gt.xs===!0&&this.lt.md===!0,this.md=this.gt.sm===!0&&this.lt.lg===!0,this.lg=this.gt.md===!0&&this.lt.xl===!0,this.xl=this.gt.lg,v=this.xs===!0&&"xs"||this.sm===!0&&"sm"||this.md===!0&&"md"||this.lg===!0&&"lg"||"xl",v!==this.name&&(o===!0&&(document.body.classList.remove(`screen--${this.name}`),document.body.classList.add(`screen--${v}`)),this.name=v)};let c,u={},h=16;this.setSizes=p=>{x_.forEach(m=>{p[m]!==void 0&&(u[m]=p[m])})},this.setDebounce=p=>{h=p};const f=()=>{const p=getComputedStyle(document.body);p.getPropertyValue("--q-size-sm")&&x_.forEach(m=>{this.sizes[m]=parseInt(p.getPropertyValue(`--q-size-${m}`),10)}),this.setSizes=m=>{x_.forEach(y=>{m[y]&&(this.sizes[y]=m[y])}),this.__update(!0)},this.setDebounce=m=>{c!==void 0&&r.removeEventListener("resize",c,MA),c=m>0?GW(this.__update,m):this.__update,r.addEventListener("resize",c,MA)},this.setDebounce(h),Object.keys(u).length!==0?(this.setSizes(u),u=void 0):this.__update(),o===!0&&this.name==="xs"&&document.body.classList.add("screen--xs")};na.value===!0?e.push(f):f()}});const Mn=Gp({isActive:!1,mode:!1},{__media:void 0,set(t){Mn.mode=t,t==="auto"?(Mn.__media===void 0&&(Mn.__media=window.matchMedia("(prefers-color-scheme: dark)"),Mn.__updateMedia=()=>{Mn.set("auto")},Mn.__media.addListener(Mn.__updateMedia)),t=Mn.__media.matches):Mn.__media!==void 0&&(Mn.__media.removeListener(Mn.__updateMedia),Mn.__media=void 0),Mn.isActive=t===!0,document.body.classList.remove(`body--${t===!0?"light":"dark"}`),document.body.classList.add(`body--${t===!0?"dark":"light"}`)},toggle(){Mn.set(Mn.isActive===!1)},install({$q:t,onSSRHydrated:e,ssrContext:n}){const{dark:r}=t.config;if(t.dark=this,this.__installed===!0&&r===void 0)return;this.isActive=r===!0;const i=r!==void 0?r:!1;if(na.value===!0){const s=c=>{this.__fromSSR=c},o=this.set;this.set=s,s(i),e.push(()=>{this.set=o,this.set(this.__fromSSR)})}else this.set(i)}}),Sx=()=>!0;function QW(t){return typeof t=="string"&&t!==""&&t!=="/"&&t!=="#/"}function JW(t){return t.startsWith("#")===!0&&(t=t.substring(1)),t.startsWith("/")===!1&&(t="/"+t),t.endsWith("/")===!0&&(t=t.substring(0,t.length-1)),"#"+t}function XW(t){if(t.backButtonExit===!1)return()=>!1;if(t.backButtonExit==="*")return Sx;const e=["#/"];return Array.isArray(t.backButtonExit)===!0&&e.push(...t.backButtonExit.filter(QW).map(JW)),()=>e.includes(window.location.hash)}var ZW={__history:[],add:Oc,remove:Oc,install({$q:t}){if(this.__installed===!0)return;const{cordova:e,capacitor:n}=Yt.is;if(e!==!0&&n!==!0)return;const r=t.config[e===!0?"cordova":"capacitor"];if(r!==void 0&&r.backButton===!1||n===!0&&(window.Capacitor===void 0||window.Capacitor.Plugins.App===void 0))return;this.add=o=>{o.condition===void 0&&(o.condition=Sx),this.__history.push(o)},this.remove=o=>{const c=this.__history.indexOf(o);c>=0&&this.__history.splice(c,1)};const i=XW(Object.assign({backButtonExit:!0},r)),s=()=>{if(this.__history.length){const o=this.__history[this.__history.length-1];o.condition()===!0&&(this.__history.pop(),o.handler())}else i()===!0?navigator.app.exitApp():window.history.back()};e===!0?document.addEventListener("deviceready",()=>{document.addEventListener("backbutton",s,!1)}):window.Capacitor.Plugins.App.addListener("backButton",s)}},zy={isoName:"en-US",nativeName:"English (US)",label:{clear:"Clear",ok:"OK",cancel:"Cancel",close:"Close",set:"Set",select:"Select",reset:"Reset",remove:"Remove",update:"Update",create:"Create",search:"Search",filter:"Filter",refresh:"Refresh",expand:t=>t?`Expand "${t}"`:"Expand",collapse:t=>t?`Collapse "${t}"`:"Collapse"},date:{days:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),daysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),firstDayOfWeek:0,format24h:!1,pluralDay:"days"},table:{noData:"No data available",noResults:"No matching records found",loading:"Loading...",selectedRecords:t=>t===1?"1 record selected.":(t===0?"No":t)+" records selected.",recordsPerPage:"Records per page:",allRows:"All",pagination:(t,e,n)=>t+"-"+e+" of "+n,columns:"Columns"},editor:{url:"URL",bold:"Bold",italic:"Italic",strikethrough:"Strikethrough",underline:"Underline",unorderedList:"Unordered List",orderedList:"Ordered List",subscript:"Subscript",superscript:"Superscript",hyperlink:"Hyperlink",toggleFullscreen:"Toggle Fullscreen",quote:"Quote",left:"Left align",center:"Center align",right:"Right align",justify:"Justify align",print:"Print",outdent:"Decrease indentation",indent:"Increase indentation",removeFormat:"Remove formatting",formatting:"Formatting",fontSize:"Font Size",align:"Align",hr:"Insert Horizontal Rule",undo:"Undo",redo:"Redo",heading1:"Heading 1",heading2:"Heading 2",heading3:"Heading 3",heading4:"Heading 4",heading5:"Heading 5",heading6:"Heading 6",paragraph:"Paragraph",code:"Code",size1:"Very small",size2:"A bit small",size3:"Normal",size4:"Medium-large",size5:"Big",size6:"Very big",size7:"Maximum",defaultFont:"Default Font",viewSource:"View Source"},tree:{noNodes:"No nodes available",noResults:"No matching nodes found"}};function LA(){const t=Array.isArray(navigator.languages)===!0&&navigator.languages.length!==0?navigator.languages[0]:navigator.language;if(typeof t=="string")return t.split(/[-_]/).map((e,n)=>n===0?e.toLowerCase():n>1||e.length<4?e.toUpperCase():e[0].toUpperCase()+e.slice(1).toLowerCase()).join("-")}const Tr=Gp({__langPack:{}},{getLocale:LA,set(t=zy,e){const n={...t,rtl:t.rtl===!0,getLocale:LA};{if(n.set=Tr.set,Tr.__langConfig===void 0||Tr.__langConfig.noHtmlAttrs!==!0){const r=document.documentElement;r.setAttribute("dir",n.rtl===!0?"rtl":"ltr"),r.setAttribute("lang",n.isoName)}Object.assign(Tr.__langPack,n),Tr.props=n,Tr.isoName=n.isoName,Tr.nativeName=n.nativeName}},install({$q:t,lang:e,ssrContext:n}){t.lang=Tr.__langPack,Tr.__langConfig=t.config.lang,this.__installed===!0?e!==void 0&&this.set(e):this.set(e||zy)}});function ez(t,e,n=document.body){if(typeof t!="string")throw new TypeError("Expected a string as propName");if(typeof e!="string")throw new TypeError("Expected a string as value");if(!(n instanceof Element))throw new TypeError("Expected a DOM element");n.style.setProperty(`--q-${t}`,e)}let Cx=!1;function tz(t){Cx=t.isComposing===!0}function nz(t){return Cx===!0||t!==Object(t)||t.isComposing===!0||t.qKeyEvent===!0}function jy(t,e){return nz(t)===!0?!1:[].concat(e).includes(t.keyCode)}function Px(t){if(t.ios===!0)return"ios";if(t.android===!0)return"android"}function rz({is:t,has:e,within:n},r){const i=[t.desktop===!0?"desktop":"mobile",`${e.touch===!1?"no-":""}touch`];if(t.mobile===!0){const s=Px(t);s!==void 0&&i.push("platform-"+s)}if(t.nativeMobile===!0){const s=t.nativeMobileWrapper;i.push(s),i.push("native-mobile"),t.ios===!0&&(r[s]===void 0||r[s].iosStatusBarPadding!==!1)&&i.push("q-ios-padding")}else t.electron===!0?i.push("electron"):t.bex===!0&&i.push("bex");return n.iframe===!0&&i.push("within-iframe"),i}function iz(){const{is:t}=Yt,e=document.body.className,n=new Set(e.replace(/ {2}/g," ").split(" "));if(Kp!==void 0)n.delete("desktop"),n.add("platform-ios"),n.add("mobile");else if(t.nativeMobile!==!0&&t.electron!==!0&&t.bex!==!0){if(t.desktop===!0)n.delete("mobile"),n.delete("platform-ios"),n.delete("platform-android"),n.add("desktop");else if(t.mobile===!0){n.delete("desktop"),n.add("mobile");const i=Px(t);i!==void 0?(n.add(`platform-${i}`),n.delete(`platform-${i==="ios"?"android":"ios"}`)):(n.delete("platform-ios"),n.delete("platform-android"))}}Yt.has.touch===!0&&(n.delete("no-touch"),n.add("touch")),Yt.within.iframe===!0&&n.add("within-iframe");const r=Array.from(n).join(" ");e!==r&&(document.body.className=r)}function sz(t){for(const e in t)ez(e,t[e])}var oz={install(t){if(this.__installed!==!0){if(na.value===!0)iz();else{const{$q:e}=t;e.config.brand!==void 0&&sz(e.config.brand);const n=rz(Yt,e.config);document.body.classList.add.apply(document.body.classList,n)}Yt.is.ios===!0&&document.body.addEventListener("touchstart",Oc),window.addEventListener("keydown",tz,!0)}}},az={name:"material-icons",type:{positive:"check_circle",negative:"warning",info:"info",warning:"priority_high"},arrow:{up:"arrow_upward",right:"arrow_forward",down:"arrow_downward",left:"arrow_back",dropdown:"arrow_drop_down"},chevron:{left:"chevron_left",right:"chevron_right"},colorPicker:{spectrum:"gradient",tune:"tune",palette:"style"},pullToRefresh:{icon:"refresh"},carousel:{left:"chevron_left",right:"chevron_right",up:"keyboard_arrow_up",down:"keyboard_arrow_down",navigationIcon:"lens"},chip:{remove:"cancel",selected:"check"},datetime:{arrowLeft:"chevron_left",arrowRight:"chevron_right",now:"access_time",today:"today"},editor:{bold:"format_bold",italic:"format_italic",strikethrough:"strikethrough_s",underline:"format_underlined",unorderedList:"format_list_bulleted",orderedList:"format_list_numbered",subscript:"vertical_align_bottom",superscript:"vertical_align_top",hyperlink:"link",toggleFullscreen:"fullscreen",quote:"format_quote",left:"format_align_left",center:"format_align_center",right:"format_align_right",justify:"format_align_justify",print:"print",outdent:"format_indent_decrease",indent:"format_indent_increase",removeFormat:"format_clear",formatting:"text_format",fontSize:"format_size",align:"format_align_left",hr:"remove",undo:"undo",redo:"redo",heading:"format_size",code:"code",size:"format_size",font:"font_download",viewSource:"code"},expansionItem:{icon:"keyboard_arrow_down",denseIcon:"arrow_drop_down"},fab:{icon:"add",activeIcon:"close"},field:{clear:"cancel",error:"error"},pagination:{first:"first_page",prev:"keyboard_arrow_left",next:"keyboard_arrow_right",last:"last_page"},rating:{icon:"grade"},stepper:{done:"check",active:"edit",error:"warning"},tabs:{left:"chevron_left",right:"chevron_right",up:"keyboard_arrow_up",down:"keyboard_arrow_down"},table:{arrowUp:"arrow_upward",warning:"warning",firstPage:"first_page",prevPage:"chevron_left",nextPage:"chevron_right",lastPage:"last_page"},tree:{icon:"play_arrow"},uploader:{done:"done",clear:"clear",add:"add_box",upload:"cloud_upload",removeQueue:"clear_all",removeUploaded:"done_all"}};const Hf=Gp({iconMapFn:null,__icons:{}},{set(t,e){const n={...t,rtl:t.rtl===!0};n.set=Hf.set,Object.assign(Hf.__icons,n)},install({$q:t,iconSet:e,ssrContext:n}){t.config.iconMapFn!==void 0&&(this.iconMapFn=t.config.iconMapFn),t.iconSet=this.__icons,$w(t,"iconMapFn",()=>this.iconMapFn,r=>{this.iconMapFn=r}),this.__installed===!0?e!==void 0&&this.set(e):this.set(e||az)}}),cz="_q_",ire="_q_l_",sre="_q_pc_",ore="_q_fo_",are="_q_tabs_",cre=()=>{},Wf={};let xx=!1;function lz(){xx=!0}function k_(t,e){if(t===e)return!0;if(t!==null&&e!==null&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,r;if(t.constructor===Array){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(k_(t[r],e[r])!==!0)return!1;return!0}if(t.constructor===Map){if(t.size!==e.size)return!1;let s=t.entries();for(r=s.next();r.done!==!0;){if(e.has(r.value[0])!==!0)return!1;r=s.next()}for(s=t.entries(),r=s.next();r.done!==!0;){if(k_(r.value[1],e.get(r.value[0]))!==!0)return!1;r=s.next()}return!0}if(t.constructor===Set){if(t.size!==e.size)return!1;const s=t.entries();for(r=s.next();r.done!==!0;){if(e.has(r.value[0])!==!0)return!1;r=s.next()}return!0}if(t.buffer!=null&&t.buffer.constructor===ArrayBuffer){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(t[r]!==e[r])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const i=Object.keys(t).filter(s=>t[s]!==void 0);if(n=i.length,n!==Object.keys(e).filter(s=>e[s]!==void 0).length)return!1;for(r=n;r--!==0;){const s=i[r];if(k_(t[s],e[s])!==!0)return!1}return!0}return t!==t&&e!==e}function Fu(t){return t!==null&&typeof t=="object"&&Array.isArray(t)!==!0}function kx(t){return Object.prototype.toString.call(t)==="[object Date]"}const VA=[Wy,oz,Mn,YW,ZW,Tr,Hf];function uz(t,e){const n=Ix(t);n.config.globalProperties=e.config.globalProperties;const{reload:r,...i}=e._context;return Object.assign(n._context,i),n}function FA(t,e){e.forEach(n=>{n.install(t),n.__installed=!0})}function hz(t,e,n){t.config.globalProperties.$q=n.$q,t.provide(cz,n.$q),FA(n,VA),e.components!==void 0&&Object.values(e.components).forEach(r=>{Fu(r)===!0&&r.name!==void 0&&t.component(r.name,r)}),e.directives!==void 0&&Object.values(e.directives).forEach(r=>{Fu(r)===!0&&r.name!==void 0&&t.directive(r.name,r)}),e.plugins!==void 0&&FA(n,Object.values(e.plugins).filter(r=>typeof r.install=="function"&&VA.includes(r)===!1)),na.value===!0&&(n.$q.onSSRHydrated=()=>{n.onSSRHydrated.forEach(r=>{r()}),n.$q.onSSRHydrated=()=>{}})}var dz=function(t,e={}){const n={version:"2.12.7"};xx===!1?(e.config!==void 0&&Object.assign(Wf,e.config),n.config={...Wf},lz()):n.config=e.config||{},hz(t,e,{parentApp:t,$q:n,lang:e.lang,iconSet:e.iconSet,onSSRHydrated:[]})},fz={version:"2.12.7",install:dz,lang:Tr,iconSet:Hf},pz=!1;/*!
 * pinia v2.1.6
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */let Dx;const Yp=t=>Dx=t,Ox=Symbol();function Ky(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var pu;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(pu||(pu={}));function gz(){const t=_w(!0),e=t.run(()=>Bt({}));let n=[],r=[];const i=fs({install(s){Yp(i),i._a=s,s.provide(Ox,i),s.config.globalProperties.$pinia=i,r.forEach(o=>n.push(o)),r=[]},use(s){return!this._a&&!pz?r.push(s):n.push(s),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return i}const Nx=()=>{};function UA(t,e,n,r=Nx){t.push(e);const i=()=>{const s=t.indexOf(e);s>-1&&(t.splice(s,1),r())};return!n&&yw()&&yP(i),i}function ja(t,...e){t.slice().forEach(n=>{n(...e)})}const mz=t=>t();function Gy(t,e){t instanceof Map&&e instanceof Map&&e.forEach((n,r)=>t.set(r,n)),t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],i=t[n];Ky(i)&&Ky(r)&&t.hasOwnProperty(n)&&!zt(r)&&!Qs(r)?t[n]=Gy(i,r):t[n]=r}return t}const _z=Symbol();function yz(t){return!Ky(t)||!t.hasOwnProperty(_z)}const{assign:Fs}=Object;function vz(t){return!!(zt(t)&&t.effect)}function wz(t,e,n,r){const{state:i,actions:s,getters:o}=e,c=n.state.value[t];let u;function h(){c||(n.state.value[t]=i?i():{});const f=$4(n.state.value[t]);return Fs(f,s,Object.keys(o||{}).reduce((p,m)=>(p[m]=fs(xe(()=>{Yp(n);const y=n._s.get(t);return o[m].call(y,y)})),p),{}))}return u=Mx(t,h,e,n,r,!0),u}function Mx(t,e,n={},r,i,s){let o;const c=Fs({actions:{}},n),u={deep:!0};let h,f,p=[],m=[],y;const v=r.state.value[t];!s&&!v&&(r.state.value[t]={}),Bt({});let I;function A(M){let J;h=f=!1,typeof M=="function"?(M(r.state.value[t]),J={type:pu.patchFunction,storeId:t,events:y}):(Gy(r.state.value[t],M),J={type:pu.patchObject,payload:M,storeId:t,events:y});const ee=I=Symbol();Sw().then(()=>{I===ee&&(h=!0)}),f=!0,ja(p,J,r.state.value[t])}const N=s?function(){const{state:J}=n,ee=J?J():{};this.$patch(ge=>{Fs(ge,ee)})}:Nx;function D(){o.stop(),p=[],m=[],r._s.delete(t)}function k(M,J){return function(){Yp(r);const ee=Array.from(arguments),ge=[],te=[];function Be(Ne){ge.push(Ne)}function fe(Ne){te.push(Ne)}ja(m,{args:ee,name:M,store:B,after:Be,onError:fe});let Fe;try{Fe=J.apply(this&&this.$id===t?this:B,ee)}catch(Ne){throw ja(te,Ne),Ne}return Fe instanceof Promise?Fe.then(Ne=>(ja(ge,Ne),Ne)).catch(Ne=>(ja(te,Ne),Promise.reject(Ne))):(ja(ge,Fe),Fe)}}const P={_p:r,$id:t,$onAction:UA.bind(null,m),$patch:A,$reset:N,$subscribe(M,J={}){const ee=UA(p,M,J.detached,()=>ge()),ge=o.run(()=>Yo(()=>r.state.value[t],te=>{(J.flush==="sync"?f:h)&&M({storeId:t,type:pu.direct,events:y},te)},Fs({},u,J)));return ee},$dispose:D},B=_a(P);r._s.set(t,B);const V=r._a&&r._a.runWithContext||mz,F=r._e.run(()=>(o=_w(),V(()=>o.run(e))));for(const M in F){const J=F[M];if(zt(J)&&!vz(J)||Qs(J))s||(v&&yz(J)&&(zt(J)?J.value=v[M]:Gy(J,v[M])),r.state.value[t][M]=J);else if(typeof J=="function"){const ee=k(M,J);F[M]=ee,c.actions[M]=J}}return Fs(B,F),Fs(rt(B),F),Object.defineProperty(B,"$state",{get:()=>r.state.value[t],set:M=>{A(J=>{Fs(J,M)})}}),r._p.forEach(M=>{Fs(B,o.run(()=>M({store:B,app:r._a,pinia:r,options:c})))}),v&&s&&n.hydrate&&n.hydrate(B.$state,v),h=!0,f=!0,B}function Ez(t,e,n){let r,i;const s=typeof e=="function";typeof t=="string"?(r=t,i=s?n:e):(i=t,r=t.id);function o(c,u){const h=AH();return c=c||(h?dr(Ox,null):null),c&&Yp(c),c=Dx,c._s.has(r)||(s?Mx(r,e,i,c):wz(r,i,c)),c._s.get(r)}return o.$id=r,o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lx={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ce=function(t,e){if(!t)throw nl(e)},nl=function(t){return new Error("Firebase Database ("+Lx.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Iz=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],c=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Qp={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,c=o?t[i+1]:0,u=i+2<t.length,h=u?t[i+2]:0,f=s>>2,p=(s&3)<<4|c>>4;let m=(c&15)<<2|h>>6,y=h&63;u||(y=64,o||(m=64)),r.push(n[f],n[p],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Vx(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Iz(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;const h=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||c==null||h==null||p==null)throw new Tz;const m=s<<2|c>>4;if(r.push(m),h!==64){const y=c<<4&240|h>>2;if(r.push(y),p!==64){const v=h<<6&192|p;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Tz extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Fx=function(t){const e=Vx(t);return Qp.encodeByteArray(e,!0)},Ux=function(t){return Fx(t).replace(/\./g,"")},zf=function(t){try{return Qp.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bz(t){return Bx(void 0,t)}function Bx(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!Az(n)||(t[n]=Bx(t[n],e[n]));return t}function Az(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $x(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rz=()=>$x().__FIREBASE_DEFAULTS__,Sz=()=>{if(typeof process=="undefined"||typeof process.env=="undefined")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Cz=()=>{if(typeof document=="undefined")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&zf(t[1]);return e&&JSON.parse(e)},Jp=()=>{try{return Rz()||Sz()||Cz()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Pz=t=>{var e,n;return(n=(e=Jp())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},qx=()=>{var t;return(t=Jp())===null||t===void 0?void 0:t.config},Hx=t=>{var e;return(e=Jp())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qw(){return typeof window!="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rn())}function xz(){var t;const e=(t=Jp())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function lre(){return typeof self=="object"&&self.self===self}function kz(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Wx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Dz(){const t=rn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function zx(){return Lx.NODE_ADMIN===!0}function Oz(){return!xz()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Xp(){try{return typeof indexedDB=="object"}catch{return!1}}function Nz(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mz="FirebaseError";class gi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Mz,Object.setPrototypeOf(this,gi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rl.prototype.create)}}class rl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?Lz(s,r):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new gi(i,c,r)}}function Lz(t,e){return t.replace(Vz,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Vz=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uu(t){return JSON.parse(t)}function Pn(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jx=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=Uu(zf(s[0])||""),n=Uu(zf(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},Fz=function(t){const e=jx(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},Uz=function(t){const e=jx(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gs(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Nc(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Yy(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function jf(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function Bu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(BA(s)&&BA(o)){if(!Bu(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function BA(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ya(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Zl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function eu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bz{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let p=0;p<16;p++)r[p]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let p=0;p<16;p++)r[p]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let p=16;p<80;p++){const m=r[p-3]^r[p-8]^r[p-14]^r[p-16];r[p]=(m<<1|m>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],c=this.chain_[3],u=this.chain_[4],h,f;for(let p=0;p<80;p++){p<40?p<20?(h=c^s&(o^c),f=1518500249):(h=s^o^c,f=1859775393):p<60?(h=s&o|c&(s|o),f=2400959708):(h=s^o^c,f=3395469782);const m=(i<<5|i>>>27)+h+u+f+r[p]&4294967295;u=c,c=o,o=(s<<30|s>>>2)&4294967295,s=i,i=m}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function $z(t,e){const n=new qz(t,e);return n.subscribe.bind(n)}class qz{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Hz(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=D_),i.error===void 0&&(i.error=D_),i.complete===void 0&&(i.complete=D_);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console!="undefined"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Hz(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function D_(){}function Wz(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zz=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,ce(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Zp=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jz=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kz=1e3,Gz=2,Yz=4*60*60*1e3,Qz=.5;function Jz(t,e=Kz,n=Gz){const r=e*Math.pow(n,t),i=Math.round(Qz*r*(Math.random()-.5)*2);return Math.min(Yz,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ke(t){return t&&t._delegate?t._delegate:t}class hi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const No="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xz{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new ra;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ej(e))try{this.getOrInitializeService({instanceIdentifier:No})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=No){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=No){return this.instances.has(e)}getOptions(e=No){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(s);r===c&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(!!r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Zz(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=No){return this.component?this.component.multipleInstances?e:No:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Zz(t){return t===No?void 0:t}function ej(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tj{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Xz(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hw=[];var Ge;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ge||(Ge={}));const Kx={debug:Ge.DEBUG,verbose:Ge.VERBOSE,info:Ge.INFO,warn:Ge.WARN,error:Ge.ERROR,silent:Ge.SILENT},nj=Ge.INFO,rj={[Ge.DEBUG]:"log",[Ge.VERBOSE]:"log",[Ge.INFO]:"info",[Ge.WARN]:"warn",[Ge.ERROR]:"error"},ij=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=rj[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class wh{constructor(e){this.name=e,this._logLevel=nj,this._logHandler=ij,this._userLogHandler=null,Hw.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Kx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ge.DEBUG,...e),this._logHandler(this,Ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ge.VERBOSE,...e),this._logHandler(this,Ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ge.INFO,...e),this._logHandler(this,Ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ge.WARN,...e),this._logHandler(this,Ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ge.ERROR,...e),this._logHandler(this,Ge.ERROR,...e)}}function sj(t){Hw.forEach(e=>{e.setLogLevel(t)})}function oj(t,e){for(const n of Hw){let r=null;e&&e.level&&(r=Kx[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(i,s,...o)=>{const c=o.map(u=>{if(u==null)return null;if(typeof u=="string")return u;if(typeof u=="number"||typeof u=="boolean")return u.toString();if(u instanceof Error)return u.message;try{return JSON.stringify(u)}catch{return null}}).filter(u=>u).join(" ");s>=(r!=null?r:i.logLevel)&&t({level:Ge[s].toLowerCase(),message:c,args:o,type:i.name})}}}const aj=(t,e)=>e.some(n=>t instanceof n);let $A,qA;function cj(){return $A||($A=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lj(){return qA||(qA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Gx=new WeakMap,Qy=new WeakMap,Yx=new WeakMap,O_=new WeakMap,Ww=new WeakMap;function uj(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Zs(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Gx.set(n,t)}).catch(()=>{}),Ww.set(e,t),e}function hj(t){if(Qy.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Qy.set(t,e)}let Jy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Qy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Yx.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Zs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function dj(t){Jy=t(Jy)}function fj(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(N_(this),e,...n);return Yx.set(r,e.sort?e.sort():[e]),Zs(r)}:lj().includes(t)?function(...e){return t.apply(N_(this),e),Zs(Gx.get(this))}:function(...e){return Zs(t.apply(N_(this),e))}}function pj(t){return typeof t=="function"?fj(t):(t instanceof IDBTransaction&&hj(t),aj(t,cj())?new Proxy(t,Jy):t)}function Zs(t){if(t instanceof IDBRequest)return uj(t);if(O_.has(t))return O_.get(t);const e=pj(t);return e!==t&&(O_.set(t,e),Ww.set(e,t)),e}const N_=t=>Ww.get(t);function gj(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),c=Zs(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Zs(o.result),u.oldVersion,u.newVersion,Zs(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const mj=["get","getKey","getAll","getAllKeys","count"],_j=["put","add","delete","clear"],M_=new Map;function HA(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(M_.get(e))return M_.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=_j.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||mj.includes(n)))return;const s=async function(o,...c){const u=this.transaction(o,i?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(c.shift())),(await Promise.all([h[n](...c),i&&u.done]))[0]};return M_.set(e,s),s}dj(t=>({...t,get:(e,n,r)=>HA(e,n)||t.get(e,n,r),has:(e,n)=>!!HA(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(vj(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function vj(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Xy="@firebase/app",WA="0.9.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ia=new wh("@firebase/app"),wj="@firebase/app-compat",Ej="@firebase/analytics-compat",Ij="@firebase/analytics",Tj="@firebase/app-check-compat",bj="@firebase/app-check",Aj="@firebase/auth",Rj="@firebase/auth-compat",Sj="@firebase/database",Cj="@firebase/database-compat",Pj="@firebase/functions",xj="@firebase/functions-compat",kj="@firebase/installations",Dj="@firebase/installations-compat",Oj="@firebase/messaging",Nj="@firebase/messaging-compat",Mj="@firebase/performance",Lj="@firebase/performance-compat",Vj="@firebase/remote-config",Fj="@firebase/remote-config-compat",Uj="@firebase/storage",Bj="@firebase/storage-compat",$j="@firebase/firestore",qj="@firebase/firestore-compat",Hj="firebase",Wj="10.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $u="[DEFAULT]",zj={[Xy]:"fire-core",[wj]:"fire-core-compat",[Ij]:"fire-analytics",[Ej]:"fire-analytics-compat",[bj]:"fire-app-check",[Tj]:"fire-app-check-compat",[Aj]:"fire-auth",[Rj]:"fire-auth-compat",[Sj]:"fire-rtdb",[Cj]:"fire-rtdb-compat",[Pj]:"fire-fn",[xj]:"fire-fn-compat",[kj]:"fire-iid",[Dj]:"fire-iid-compat",[Oj]:"fire-fcm",[Nj]:"fire-fcm-compat",[Mj]:"fire-perf",[Lj]:"fire-perf-compat",[Vj]:"fire-rc",[Fj]:"fire-rc-compat",[Uj]:"fire-gcs",[Bj]:"fire-gcs-compat",[$j]:"fire-fst",[qj]:"fire-fst-compat","fire-js":"fire-js",[Hj]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro=new Map,qu=new Map;function Qx(t,e){try{t.container.addComponent(e)}catch(n){ia.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function jj(t,e){t.container.addOrOverwriteComponent(e)}function di(t){const e=t.name;if(qu.has(e))return ia.debug(`There were multiple attempts to register component ${e}.`),!1;qu.set(e,t);for(const n of ro.values())Qx(n,t);return!0}function va(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Kj(t,e,n=$u){va(t,e).clearInstance(n)}function Gj(){qu.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yj={["no-app"]:"No Firebase App '{$appName}' has been created - call initializeApp() first",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},rs=new rl("app","Firebase",Yj);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qj{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new hi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw rs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ms=Wj;function zw(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:$u,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw rs.create("bad-app-name",{appName:String(i)});if(n||(n=qx()),!n)throw rs.create("no-options");const s=ro.get(i);if(s){if(Bu(n,s.options)&&Bu(r,s.config))return s;throw rs.create("duplicate-app",{appName:i})}const o=new tj(i);for(const u of qu.values())o.addComponent(u);const c=new Qj(n,r,o);return ro.set(i,c),c}function eg(t=$u){const e=ro.get(t);if(!e&&t===$u&&qx())return zw();if(!e)throw rs.create("no-app",{appName:t});return e}function Jj(){return Array.from(ro.values())}async function Xj(t){const e=t.name;ro.has(e)&&(ro.delete(e),await Promise.all(t.container.getProviders().map(n=>n.delete())),t.isDeleted=!0)}function fr(t,e,n){var r;let i=(r=zj[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const c=[`Unable to register library "${i}" with version "${e}":`];s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ia.warn(c.join(" "));return}di(new hi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function Zj(t,e){if(t!==null&&typeof t!="function")throw rs.create("invalid-log-argument");oj(t,e)}function eK(t){sj(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tK="firebase-heartbeat-database",nK=1,Hu="firebase-heartbeat-store";let L_=null;function Jx(){return L_||(L_=gj(tK,nK,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Hu)}}}).catch(t=>{throw rs.create("idb-open",{originalErrorMessage:t.message})})),L_}async function rK(t){try{return await(await Jx()).transaction(Hu).objectStore(Hu).get(Xx(t))}catch(e){if(e instanceof gi)ia.warn(e.message);else{const n=rs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ia.warn(n.message)}}}async function zA(t,e){try{const r=(await Jx()).transaction(Hu,"readwrite");await r.objectStore(Hu).put(e,Xx(t)),await r.done}catch(n){if(n instanceof gi)ia.warn(n.message);else{const r=rs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ia.warn(r.message)}}}function Xx(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iK=1024,sK=30*24*60*60*1e3;class oK{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new cK(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=jA();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const s=new Date(i.date).valueOf();return Date.now()-s<=sK}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=jA(),{heartbeatsToSend:n,unsentEntries:r}=aK(this._heartbeatsCache.heartbeats),i=Ux(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function jA(){return new Date().toISOString().substring(0,10)}function aK(t,e=iK){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),KA(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),KA(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class cK{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Xp()?Nz().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await rK(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return zA(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return zA(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function KA(t){return Ux(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lK(t){di(new hi("platform-logger",e=>new yj(e),"PRIVATE")),di(new hi("heartbeat",e=>new oK(e),"PRIVATE")),fr(Xy,WA,t),fr(Xy,WA,"esm2017"),fr("fire-js","")}lK("");var ure=Object.freeze(Object.defineProperty({__proto__:null,SDK_VERSION:ms,_DEFAULT_ENTRY_NAME:$u,_addComponent:Qx,_addOrOverwriteComponent:jj,_apps:ro,_clearComponents:Gj,_components:qu,_getProvider:va,_registerComponent:di,_removeServiceInstance:Kj,deleteApp:Xj,getApp:eg,getApps:Jj,initializeApp:zw,onLog:Zj,registerVersion:fr,setLogLevel:eK,FirebaseError:gi},Symbol.toStringTag,{value:"Module"})),uK=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},ue,jw=jw||{},Oe=uK||self;function tg(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Eh(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function hK(t){return Object.prototype.hasOwnProperty.call(t,V_)&&t[V_]||(t[V_]=++dK)}var V_="closure_uid_"+(1e9*Math.random()>>>0),dK=0;function fK(t,e,n){return t.call.apply(t.bind,arguments)}function pK(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function qn(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?qn=fK:qn=pK,qn.apply(null,arguments)}function zd(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function vn(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),c=2;c<arguments.length;c++)o[c-2]=arguments[c];return e.prototype[i].apply(r,o)}}function fo(){this.s=this.s,this.o=this.o}var gK=0;fo.prototype.s=!1;fo.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),gK!=0)&&hK(this)};fo.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Zx=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Kw(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function GA(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(tg(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function Hn(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Hn.prototype.h=function(){this.defaultPrevented=!0};var mK=function(){if(!Oe.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Oe.addEventListener("test",()=>{},e),Oe.removeEventListener("test",()=>{},e)}catch{}return t}();function Wu(t){return/^[\s\xa0]*$/.test(t)}function ng(){var t=Oe.navigator;return t&&(t=t.userAgent)?t:""}function Ti(t){return ng().indexOf(t)!=-1}function Gw(t){return Gw[" "](t),t}Gw[" "]=function(){};function _K(t,e){var n=l6;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var yK=Ti("Opera"),Mc=Ti("Trident")||Ti("MSIE"),e1=Ti("Edge"),Zy=e1||Mc,t1=Ti("Gecko")&&!(ng().toLowerCase().indexOf("webkit")!=-1&&!Ti("Edge"))&&!(Ti("Trident")||Ti("MSIE"))&&!Ti("Edge"),vK=ng().toLowerCase().indexOf("webkit")!=-1&&!Ti("Edge");function n1(){var t=Oe.document;return t?t.documentMode:void 0}var ev;e:{var F_="",U_=function(){var t=ng();if(t1)return/rv:([^\);]+)(\)|;)/.exec(t);if(e1)return/Edge\/([\d\.]+)/.exec(t);if(Mc)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(vK)return/WebKit\/(\S+)/.exec(t);if(yK)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(U_&&(F_=U_?U_[1]:""),Mc){var B_=n1();if(B_!=null&&B_>parseFloat(F_)){ev=String(B_);break e}}ev=F_}var tv;if(Oe.document&&Mc){var YA=n1();tv=YA||parseInt(ev,10)||void 0}else tv=void 0;var wK=tv;function zu(t,e){if(Hn.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(t1){e:{try{Gw(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:EK[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&zu.$.h.call(this)}}vn(zu,Hn);var EK={2:"touch",3:"pen",4:"mouse"};zu.prototype.h=function(){zu.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Ih="closure_listenable_"+(1e6*Math.random()|0),IK=0;function TK(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++IK,this.fa=this.ia=!1}function rg(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Yw(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function bK(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function r1(t){const e={};for(const n in t)e[n]=t[n];return e}const QA="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function i1(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<QA.length;s++)n=QA[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function ig(t){this.src=t,this.g={},this.h=0}ig.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=rv(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new TK(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function nv(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=Zx(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(rg(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function rv(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var Qw="closure_lm_"+(1e6*Math.random()|0),$_={};function s1(t,e,n,r,i){if(r&&r.once)return a1(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)s1(t,e[s],n,r,i);return null}return n=Zw(n),t&&t[Ih]?t.O(e,n,Eh(r)?!!r.capture:!!r,i):o1(t,e,n,!1,r,i)}function o1(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=Eh(i)?!!i.capture:!!i,c=Xw(t);if(c||(t[Qw]=c=new ig(t)),n=c.add(e,n,r,o,s),n.proxy)return n;if(r=AK(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)mK||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(l1(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function AK(){function t(n){return e.call(t.src,t.listener,n)}const e=RK;return t}function a1(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)a1(t,e[s],n,r,i);return null}return n=Zw(n),t&&t[Ih]?t.P(e,n,Eh(r)?!!r.capture:!!r,i):o1(t,e,n,!0,r,i)}function c1(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)c1(t,e[s],n,r,i);else r=Eh(r)?!!r.capture:!!r,n=Zw(n),t&&t[Ih]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=rv(s,n,r,i),-1<n&&(rg(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=Xw(t))&&(e=t.g[e.toString()],t=-1,e&&(t=rv(e,n,r,i)),(n=-1<t?e[t]:null)&&Jw(n))}function Jw(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[Ih])nv(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(l1(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Xw(e))?(nv(n,t),n.h==0&&(n.src=null,e[Qw]=null)):rg(t)}}}function l1(t){return t in $_?$_[t]:$_[t]="on"+t}function RK(t,e){if(t.fa)t=!0;else{e=new zu(e,this);var n=t.listener,r=t.la||t.src;t.ia&&Jw(t),t=n.call(r,e)}return t}function Xw(t){return t=t[Qw],t instanceof ig?t:null}var q_="__closure_events_fn_"+(1e9*Math.random()>>>0);function Zw(t){return typeof t=="function"?t:(t[q_]||(t[q_]=function(e){return t.handleEvent(e)}),t[q_])}function _n(){fo.call(this),this.i=new ig(this),this.S=this,this.J=null}vn(_n,fo);_n.prototype[Ih]=!0;_n.prototype.removeEventListener=function(t,e,n,r){c1(this,t,e,n,r)};function kn(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new Hn(e,t);else if(e instanceof Hn)e.target=e.target||t;else{var i=e;e=new Hn(r,t),i1(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=jd(o,r,!0,e)&&i}if(o=e.g=t,i=jd(o,r,!0,e)&&i,i=jd(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=jd(o,r,!1,e)&&i}_n.prototype.N=function(){if(_n.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)rg(n[r]);delete t.g[e],t.h--}}this.J=null};_n.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};_n.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function jd(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var c=o.listener,u=o.la||o.src;o.ia&&nv(t.i,o),i=c.call(u,r)!==!1&&i}}return i&&!r.defaultPrevented}var eE=Oe.JSON.stringify;class SK{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function CK(){var t=tE;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class PK{constructor(){this.h=this.g=null}add(e,n){const r=u1.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var u1=new SK(()=>new xK,t=>t.reset());class xK{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function kK(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function DK(t){Oe.setTimeout(()=>{throw t},0)}let ju,Ku=!1,tE=new PK,h1=()=>{const t=Oe.Promise.resolve(void 0);ju=()=>{t.then(OK)}};var OK=()=>{for(var t;t=CK();){try{t.h.call(t.g)}catch(n){DK(n)}var e=u1;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Ku=!1};function sg(t,e){_n.call(this),this.h=t||1,this.g=e||Oe,this.j=qn(this.qb,this),this.l=Date.now()}vn(sg,_n);ue=sg.prototype;ue.ga=!1;ue.T=null;ue.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),kn(this,"tick"),this.ga&&(nE(this),this.start()))}};ue.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function nE(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}ue.N=function(){sg.$.N.call(this),nE(this),delete this.g};function rE(t,e,n){if(typeof t=="function")n&&(t=qn(t,n));else if(t&&typeof t.handleEvent=="function")t=qn(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:Oe.setTimeout(t,e||0)}function d1(t){t.g=rE(()=>{t.g=null,t.i&&(t.i=!1,d1(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class NK extends fo{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:d1(this)}N(){super.N(),this.g&&(Oe.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gu(t){fo.call(this),this.h=t,this.g={}}vn(Gu,fo);var JA=[];function f1(t,e,n,r){Array.isArray(n)||(n&&(JA[0]=n.toString()),n=JA);for(var i=0;i<n.length;i++){var s=s1(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function p1(t){Yw(t.g,function(e,n){this.g.hasOwnProperty(n)&&Jw(e)},t),t.g={}}Gu.prototype.N=function(){Gu.$.N.call(this),p1(this)};Gu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function og(){this.g=!0}og.prototype.Ea=function(){this.g=!1};function MK(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",c=s.split("&"),u=0;u<c.length;u++){var h=c[u].split("=");if(1<h.length){var f=h[0];h=h[1];var p=f.split("_");o=2<=p.length&&p[1]=="type"?o+(f+"="+h+"&"):o+(f+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function LK(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function uc(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+FK(t,n)+(r?" "+r:"")})}function VK(t,e){t.info(function(){return"TIMEOUT: "+e})}og.prototype.info=function(){};function FK(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return eE(n)}catch{return e}}var wa={},XA=null;function ag(){return XA=XA||new _n}wa.Ta="serverreachability";function g1(t){Hn.call(this,wa.Ta,t)}vn(g1,Hn);function Yu(t){const e=ag();kn(e,new g1(e))}wa.STAT_EVENT="statevent";function m1(t,e){Hn.call(this,wa.STAT_EVENT,t),this.stat=e}vn(m1,Hn);function Jn(t){const e=ag();kn(e,new m1(e,t))}wa.Ua="timingevent";function _1(t,e){Hn.call(this,wa.Ua,t),this.size=e}vn(_1,Hn);function Th(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return Oe.setTimeout(function(){t()},e)}var cg={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},y1={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function iE(){}iE.prototype.h=null;function ZA(t){return t.h||(t.h=t.i())}function v1(){}var bh={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function sE(){Hn.call(this,"d")}vn(sE,Hn);function oE(){Hn.call(this,"c")}vn(oE,Hn);var iv;function lg(){}vn(lg,iE);lg.prototype.g=function(){return new XMLHttpRequest};lg.prototype.i=function(){return{}};iv=new lg;function Ah(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Gu(this),this.P=UK,t=Zy?125:void 0,this.V=new sg(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new w1}function w1(){this.i=null,this.g="",this.h=!1}var UK=45e3,sv={},Kf={};ue=Ah.prototype;ue.setTimeout=function(t){this.P=t};function ov(t,e,n){t.L=1,t.v=hg(ls(e)),t.s=n,t.S=!0,E1(t,null)}function E1(t,e){t.G=Date.now(),Rh(t),t.A=ls(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),P1(n.i,"t",r),t.C=0,n=t.l.J,t.h=new w1,t.g=Q1(t.l,n?e:null,!t.s),0<t.O&&(t.M=new NK(qn(t.Pa,t,t.g),t.O)),f1(t.U,t.g,"readystatechange",t.nb),e=t.I?r1(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),Yu(),MK(t.j,t.u,t.A,t.m,t.W,t.s)}ue.nb=function(t){t=t.target;const e=this.M;e&&bi(t)==3?e.l():this.Pa(t)};ue.Pa=function(t){try{if(t==this.g)e:{const f=bi(this.g);var e=this.g.Ia();const p=this.g.da();if(!(3>f)&&(f!=3||Zy||this.g&&(this.h.h||this.g.ja()||rR(this.g)))){this.J||f!=4||e==7||(e==8||0>=p?Yu(3):Yu(2)),ug(this);var n=this.g.da();this.ca=n;t:if(I1(this)){var r=rR(this.g);t="";var i=r.length,s=bi(this.g)==4;if(!this.h.i){if(typeof TextDecoder=="undefined"){Wo(this),gu(this);var o="";break t}this.h.i=new Oe.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,LK(this.j,this.u,this.A,this.m,this.W,f,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var c,u=this.g;if((c=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Wu(c)){var h=c;break t}}h=null}if(n=h)uc(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,av(this,n);else{this.i=!1,this.o=3,Jn(12),Wo(this),gu(this);break e}}this.S?(T1(this,f,o),Zy&&this.i&&f==3&&(f1(this.U,this.V,"tick",this.mb),this.V.start())):(uc(this.j,this.m,o,null),av(this,o)),f==4&&Wo(this),this.i&&!this.J&&(f==4?j1(this.l,this):(this.i=!1,Rh(this)))}else o6(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.o=3,Jn(12)):(this.o=0,Jn(13)),Wo(this),gu(this)}}}catch{}finally{}};function I1(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function T1(t,e,n){let r=!0,i;for(;!t.J&&t.C<n.length;)if(i=BK(t,n),i==Kf){e==4&&(t.o=4,Jn(14),r=!1),uc(t.j,t.m,null,"[Incomplete Response]");break}else if(i==sv){t.o=4,Jn(15),uc(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else uc(t.j,t.m,i,null),av(t,i);I1(t)&&i!=Kf&&i!=sv&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,Jn(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),dE(e),e.M=!0,Jn(11))):(uc(t.j,t.m,n,"[Invalid Chunked Response]"),Wo(t),gu(t))}ue.mb=function(){if(this.g){var t=bi(this.g),e=this.g.ja();this.C<e.length&&(ug(this),T1(this,t,e),this.i&&t!=4&&Rh(this))}};function BK(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?Kf:(n=Number(e.substring(n,r)),isNaN(n)?sv:(r+=1,r+n>e.length?Kf:(e=e.slice(r,r+n),t.C=r+n,e)))}ue.cancel=function(){this.J=!0,Wo(this)};function Rh(t){t.Y=Date.now()+t.P,b1(t,t.P)}function b1(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=Th(qn(t.lb,t),e)}function ug(t){t.B&&(Oe.clearTimeout(t.B),t.B=null)}ue.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(VK(this.j,this.A),this.L!=2&&(Yu(),Jn(17)),Wo(this),this.o=2,gu(this)):b1(this,this.Y-t)};function gu(t){t.l.H==0||t.J||j1(t.l,t)}function Wo(t){ug(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,nE(t.V),p1(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function av(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||cv(n.i,t))){if(!t.K&&cv(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Qf(n),gg(n);else break e;hE(n),Jn(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=Th(qn(n.ib,n),6e3));if(1>=D1(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else zo(n,11)}else if((t.K||n.g==t)&&Qf(n),!Wu(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let h=i[e];if(n.V=h[0],h=h[1],n.H==2)if(h[0]=="c"){n.K=h[1],n.pa=h[2];const f=h[3];f!=null&&(n.ra=f,n.l.info("VER="+n.ra));const p=h[4];p!=null&&(n.Ga=p,n.l.info("SVER="+n.Ga));const m=h[5];m!=null&&typeof m=="number"&&0<m&&(r=1.5*m,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const y=t.g;if(y){const v=y.g?y.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(v){var s=r.i;s.g||v.indexOf("spdy")==-1&&v.indexOf("quic")==-1&&v.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(aE(s,s.h),s.h=null))}if(r.F){const I=y.g?y.g.getResponseHeader("X-HTTP-Session-Id"):null;I&&(r.Da=I,Ot(r.I,r.F,I))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=Y1(r,r.J?r.pa:null,r.Y),o.K){O1(r.i,o);var c=o,u=r.L;u&&c.setTimeout(u),c.B&&(ug(c),Rh(c)),r.g=o}else W1(r);0<n.j.length&&mg(n)}else h[0]!="stop"&&h[0]!="close"||zo(n,7);else n.H==3&&(h[0]=="stop"||h[0]=="close"?h[0]=="stop"?zo(n,7):uE(n):h[0]!="noop"&&n.h&&n.h.Aa(h),n.A=0)}}Yu(4)}catch{}}function $K(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map!="undefined"&&t instanceof Map||typeof Set!="undefined"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(tg(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function qK(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map!="undefined"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set!="undefined"&&t instanceof Set)){if(tg(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function A1(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(tg(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=qK(t),r=$K(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var R1=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function HK(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Jo(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Jo){this.h=t.h,Gf(this,t.j),this.s=t.s,this.g=t.g,Yf(this,t.m),this.l=t.l;var e=t.i,n=new Qu;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),eR(this,n),this.o=t.o}else t&&(e=String(t).match(R1))?(this.h=!1,Gf(this,e[1]||"",!0),this.s=tu(e[2]||""),this.g=tu(e[3]||"",!0),Yf(this,e[4]),this.l=tu(e[5]||"",!0),eR(this,e[6]||"",!0),this.o=tu(e[7]||"")):(this.h=!1,this.i=new Qu(null,this.h))}Jo.prototype.toString=function(){var t=[],e=this.j;e&&t.push(nu(e,tR,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(nu(e,tR,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(nu(n,n.charAt(0)=="/"?jK:zK,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",nu(n,GK)),t.join("")};function ls(t){return new Jo(t)}function Gf(t,e,n){t.j=n?tu(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Yf(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function eR(t,e,n){e instanceof Qu?(t.i=e,YK(t.i,t.h)):(n||(e=nu(e,KK)),t.i=new Qu(e,t.h))}function Ot(t,e,n){t.i.set(e,n)}function hg(t){return Ot(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function tu(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function nu(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,WK),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function WK(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var tR=/[#\/\?@]/g,zK=/[#\?:]/g,jK=/[#\?]/g,KK=/[#\?@]/g,GK=/#/g;function Qu(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function po(t){t.g||(t.g=new Map,t.h=0,t.i&&HK(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}ue=Qu.prototype;ue.add=function(t,e){po(this),this.i=null,t=il(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function S1(t,e){po(t),e=il(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function C1(t,e){return po(t),e=il(t,e),t.g.has(e)}ue.forEach=function(t,e){po(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};ue.ta=function(){po(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};ue.Z=function(t){po(this);let e=[];if(typeof t=="string")C1(this,t)&&(e=e.concat(this.g.get(il(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};ue.set=function(t,e){return po(this),this.i=null,t=il(this,t),C1(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};ue.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function P1(t,e,n){S1(t,e),0<n.length&&(t.i=null,t.g.set(il(t,e),Kw(n)),t.h+=n.length)}ue.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function il(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function YK(t,e){e&&!t.j&&(po(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(S1(this,r),P1(this,i,n))},t)),t.j=e}var QK=class{constructor(t,e){this.g=t,this.map=e}};function x1(t){this.l=t||JK,Oe.PerformanceNavigationTiming?(t=Oe.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(Oe.g&&Oe.g.Ka&&Oe.g.Ka()&&Oe.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var JK=10;function k1(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function D1(t){return t.h?1:t.g?t.g.size:0}function cv(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function aE(t,e){t.g?t.g.add(e):t.h=e}function O1(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}x1.prototype.cancel=function(){if(this.i=N1(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function N1(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return Kw(t.i)}var XK=class{stringify(t){return Oe.JSON.stringify(t,void 0)}parse(t){return Oe.JSON.parse(t,void 0)}};function ZK(){this.g=new XK}function e6(t,e,n){const r=n||"";try{A1(t,function(i,s){let o=i;Eh(i)&&(o=eE(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function t6(t,e){const n=new og;if(Oe.Image){const r=new Image;r.onload=zd(Kd,n,r,"TestLoadImage: loaded",!0,e),r.onerror=zd(Kd,n,r,"TestLoadImage: error",!1,e),r.onabort=zd(Kd,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=zd(Kd,n,r,"TestLoadImage: timeout",!1,e),Oe.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Kd(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function dg(t){this.l=t.ec||null,this.j=t.ob||!1}vn(dg,iE);dg.prototype.g=function(){return new fg(this.l,this.j)};dg.prototype.i=function(t){return function(){return t}}({});function fg(t,e){_n.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=cE,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}vn(fg,_n);var cE=0;ue=fg.prototype;ue.open=function(t,e){if(this.readyState!=cE)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Ju(this)};ue.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||Oe).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};ue.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Sh(this)),this.readyState=cE};ue.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Ju(this)),this.g&&(this.readyState=3,Ju(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Oe.ReadableStream!="undefined"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;M1(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function M1(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}ue.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Sh(this):Ju(this),this.readyState==3&&M1(this)}};ue.Za=function(t){this.g&&(this.response=this.responseText=t,Sh(this))};ue.Ya=function(t){this.g&&(this.response=t,Sh(this))};ue.ka=function(){this.g&&Sh(this)};function Sh(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Ju(t)}ue.setRequestHeader=function(t,e){this.v.append(t,e)};ue.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};ue.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Ju(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(fg.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var n6=Oe.JSON.parse;function jt(t){_n.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=L1,this.L=this.M=!1}vn(jt,_n);var L1="",r6=/^https?$/i,i6=["POST","PUT"];ue=jt.prototype;ue.Oa=function(t){this.M=t};ue.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():iv.g(),this.C=this.u?ZA(this.u):ZA(iv),this.g.onreadystatechange=qn(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){nR(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=Oe.FormData&&t instanceof Oe.FormData,!(0<=Zx(i6,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{U1(this),0<this.B&&((this.L=s6(this.g))?(this.g.timeout=this.B,this.g.ontimeout=qn(this.ua,this)):this.A=rE(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){nR(this,s)}};function s6(t){return Mc&&typeof t.timeout=="number"&&t.ontimeout!==void 0}ue.ua=function(){typeof jw!="undefined"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,kn(this,"timeout"),this.abort(8))};function nR(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,V1(t),pg(t)}function V1(t){t.F||(t.F=!0,kn(t,"complete"),kn(t,"error"))}ue.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,kn(this,"complete"),kn(this,"abort"),pg(this))};ue.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),pg(this,!0)),jt.$.N.call(this)};ue.La=function(){this.s||(this.G||this.v||this.l?F1(this):this.kb())};ue.kb=function(){F1(this)};function F1(t){if(t.h&&typeof jw!="undefined"&&(!t.C[1]||bi(t)!=4||t.da()!=2)){if(t.v&&bi(t)==4)rE(t.La,0,t);else if(kn(t,"readystatechange"),bi(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(R1)[1]||null;!i&&Oe.self&&Oe.self.location&&(i=Oe.self.location.protocol.slice(0,-1)),r=!r6.test(i?i.toLowerCase():"")}n=r}if(n)kn(t,"complete"),kn(t,"success");else{t.m=6;try{var s=2<bi(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",V1(t)}}finally{pg(t)}}}}function pg(t,e){if(t.g){U1(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||kn(t,"ready");try{n.onreadystatechange=r}catch{}}}function U1(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(Oe.clearTimeout(t.A),t.A=null)}ue.isActive=function(){return!!this.g};function bi(t){return t.g?t.g.readyState:0}ue.da=function(){try{return 2<bi(this)?this.g.status:-1}catch{return-1}};ue.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};ue.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),n6(e)}};function rR(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case L1:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function o6(t){const e={};t=(t.g&&2<=bi(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(Wu(t[r]))continue;var n=kK(t[r]);const i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}bK(e,function(r){return r.join(", ")})}ue.Ia=function(){return this.m};ue.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function B1(t){let e="";return Yw(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function lE(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=B1(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Ot(t,e,n))}function Nl(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function $1(t){this.Ga=0,this.j=[],this.l=new og,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Nl("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Nl("baseRetryDelayMs",5e3,t),this.hb=Nl("retryDelaySeedMs",1e4,t),this.eb=Nl("forwardChannelMaxRetries",2,t),this.xa=Nl("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new x1(t&&t.concurrentRequestLimit),this.Ja=new ZK,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}ue=$1.prototype;ue.ra=8;ue.H=1;function uE(t){if(q1(t),t.H==3){var e=t.W++,n=ls(t.I);if(Ot(n,"SID",t.K),Ot(n,"RID",e),Ot(n,"TYPE","terminate"),Ch(t,n),e=new Ah(t,t.l,e),e.L=2,e.v=hg(ls(n)),n=!1,Oe.navigator&&Oe.navigator.sendBeacon)try{n=Oe.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&Oe.Image&&(new Image().src=e.v,n=!0),n||(e.g=Q1(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Rh(e)}G1(t)}function gg(t){t.g&&(dE(t),t.g.cancel(),t.g=null)}function q1(t){gg(t),t.u&&(Oe.clearTimeout(t.u),t.u=null),Qf(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&Oe.clearTimeout(t.m),t.m=null)}function mg(t){if(!k1(t.i)&&!t.m){t.m=!0;var e=t.Na;ju||h1(),Ku||(ju(),Ku=!0),tE.add(e,t),t.C=0}}function a6(t,e){return D1(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Th(qn(t.Na,t,e),K1(t,t.C)),t.C++,!0)}ue.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new Ah(this,this.l,t);let s=this.s;if(this.U&&(s?(s=r1(s),i1(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=H1(this,i,e),n=ls(this.I),Ot(n,"RID",t),Ot(n,"CVER",22),this.F&&Ot(n,"X-HTTP-Session-Id",this.F),Ch(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(B1(s)))+"&"+e:this.o&&lE(n,this.o,s)),aE(this.i,i),this.bb&&Ot(n,"TYPE","init"),this.P?(Ot(n,"$req",e),Ot(n,"SID","null"),i.aa=!0,ov(i,n,null)):ov(i,n,e),this.H=2}}else this.H==3&&(t?iR(this,t):this.j.length==0||k1(this.i)||iR(this))};function iR(t,e){var n;e?n=e.m:n=t.W++;const r=ls(t.I);Ot(r,"SID",t.K),Ot(r,"RID",n),Ot(r,"AID",t.V),Ch(t,r),t.o&&t.s&&lE(r,t.o,t.s),n=new Ah(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=H1(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),aE(t.i,n),ov(n,r,e)}function Ch(t,e){t.na&&Yw(t.na,function(n,r){Ot(e,r,n)}),t.h&&A1({},function(n,r){Ot(e,r,n)})}function H1(t,e,n){n=Math.min(t.j.length,n);var r=t.h?qn(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let c=!0;for(let u=0;u<n;u++){let h=i[u].g;const f=i[u].map;if(h-=s,0>h)s=Math.max(0,i[u].g-100),c=!1;else try{e6(f,o,"req"+h+"_")}catch{r&&r(f)}}if(c){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function W1(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;ju||h1(),Ku||(ju(),Ku=!0),tE.add(e,t),t.A=0}}function hE(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Th(qn(t.Ma,t),K1(t,t.A)),t.A++,!0)}ue.Ma=function(){if(this.u=null,z1(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Th(qn(this.jb,this),t)}};ue.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Jn(10),gg(this),z1(this))};function dE(t){t.B!=null&&(Oe.clearTimeout(t.B),t.B=null)}function z1(t){t.g=new Ah(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=ls(t.wa);Ot(e,"RID","rpc"),Ot(e,"SID",t.K),Ot(e,"AID",t.V),Ot(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Ot(e,"TO",t.qa),Ot(e,"TYPE","xmlhttp"),Ch(t,e),t.o&&t.s&&lE(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=hg(ls(e)),n.s=null,n.S=!0,E1(n,t)}ue.ib=function(){this.v!=null&&(this.v=null,gg(this),hE(this),Jn(19))};function Qf(t){t.v!=null&&(Oe.clearTimeout(t.v),t.v=null)}function j1(t,e){var n=null;if(t.g==e){Qf(t),dE(t),t.g=null;var r=2}else if(cv(t.i,e))n=e.F,O1(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var i=t.C;r=ag(),kn(r,new _1(r,n)),mg(t)}else W1(t);else if(i=e.o,i==3||i==0&&0<e.ca||!(r==1&&a6(t,e)||r==2&&hE(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:zo(t,5);break;case 4:zo(t,10);break;case 3:zo(t,6);break;default:zo(t,2)}}}function K1(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function zo(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=qn(t.pb,t);n||(n=new Jo("//www.google.com/images/cleardot.gif"),Oe.location&&Oe.location.protocol=="http"||Gf(n,"https"),hg(n)),t6(n.toString(),r)}else Jn(2);t.H=0,t.h&&t.h.za(e),G1(t),q1(t)}ue.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Jn(2)):(this.l.info("Failed to ping google.com"),Jn(1))};function G1(t){if(t.H=0,t.ma=[],t.h){const e=N1(t.i);(e.length!=0||t.j.length!=0)&&(GA(t.ma,e),GA(t.ma,t.j),t.i.i.length=0,Kw(t.j),t.j.length=0),t.h.ya()}}function Y1(t,e,n){var r=n instanceof Jo?ls(n):new Jo(n);if(r.g!="")e&&(r.g=e+"."+r.g),Yf(r,r.m);else{var i=Oe.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Jo(null);r&&Gf(s,r),e&&(s.g=e),i&&Yf(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&Ot(r,n,e),Ot(r,"VER",t.ra),Ch(t,r),r}function Q1(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new jt(new dg({ob:!0})):new jt(t.va),e.Oa(t.J),e}ue.isActive=function(){return!!this.h&&this.h.isActive(this)};function J1(){}ue=J1.prototype;ue.Ba=function(){};ue.Aa=function(){};ue.za=function(){};ue.ya=function(){};ue.isActive=function(){return!0};ue.Va=function(){};function Jf(){if(Mc&&!(10<=Number(wK)))throw Error("Environmental error: no available transport.")}Jf.prototype.g=function(t,e){return new Pr(t,e)};function Pr(t,e){_n.call(this),this.g=new $1(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Wu(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Wu(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new sl(this)}vn(Pr,_n);Pr.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Jn(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=Y1(t,null,t.Y),mg(t)};Pr.prototype.close=function(){uE(this.g)};Pr.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=eE(t),t=n);e.j.push(new QK(e.fb++,t)),e.H==3&&mg(e)};Pr.prototype.N=function(){this.g.h=null,delete this.j,uE(this.g),delete this.g,Pr.$.N.call(this)};function X1(t){sE.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}vn(X1,sE);function Z1(){oE.call(this),this.status=1}vn(Z1,oE);function sl(t){this.g=t}vn(sl,J1);sl.prototype.Ba=function(){kn(this.g,"a")};sl.prototype.Aa=function(t){kn(this.g,new X1(t))};sl.prototype.za=function(t){kn(this.g,new Z1)};sl.prototype.ya=function(){kn(this.g,"b")};function c6(){this.blockSize=-1}function fi(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}vn(fi,c6);fi.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function H_(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}fi.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)H_(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){H_(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){H_(this,r),i=0;break}}this.h=i,this.i+=e};fi.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function yt(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var l6={};function fE(t){return-128<=t&&128>t?_K(t,function(e){return new yt([e|0],0>e?-1:0)}):new yt([t|0],0>t?-1:0)}function Ai(t){if(isNaN(t)||!isFinite(t))return yc;if(0>t)return Cn(Ai(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=lv;return new yt(e,0)}function ek(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Cn(ek(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Ai(Math.pow(e,8)),r=yc,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=Ai(Math.pow(e,s)),r=r.R(s).add(Ai(o))):(r=r.R(n),r=r.add(Ai(o)))}return r}var lv=4294967296,yc=fE(0),uv=fE(1),sR=fE(16777216);ue=yt.prototype;ue.ea=function(){if(qr(this))return-Cn(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:lv+r)*e,e*=lv}return t};ue.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Ji(this))return"0";if(qr(this))return"-"+Cn(this).toString(t);for(var e=Ai(Math.pow(t,6)),n=this,r="";;){var i=Zf(n,e).g;n=Xf(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,Ji(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};ue.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Ji(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function qr(t){return t.h==-1}ue.X=function(t){return t=Xf(this,t),qr(t)?-1:Ji(t)?0:1};function Cn(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new yt(n,~t.h).add(uv)}ue.abs=function(){return qr(this)?Cn(this):this};ue.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new yt(n,n[n.length-1]&-2147483648?-1:0)};function Xf(t,e){return t.add(Cn(e))}ue.R=function(t){if(Ji(this)||Ji(t))return yc;if(qr(this))return qr(t)?Cn(this).R(Cn(t)):Cn(Cn(this).R(t));if(qr(t))return Cn(this.R(Cn(t)));if(0>this.X(sR)&&0>t.X(sR))return Ai(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,c=t.D(i)>>>16,u=t.D(i)&65535;n[2*r+2*i]+=o*u,Gd(n,2*r+2*i),n[2*r+2*i+1]+=s*u,Gd(n,2*r+2*i+1),n[2*r+2*i+1]+=o*c,Gd(n,2*r+2*i+1),n[2*r+2*i+2]+=s*c,Gd(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new yt(n,0)};function Gd(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Ml(t,e){this.g=t,this.h=e}function Zf(t,e){if(Ji(e))throw Error("division by zero");if(Ji(t))return new Ml(yc,yc);if(qr(t))return e=Zf(Cn(t),e),new Ml(Cn(e.g),Cn(e.h));if(qr(e))return e=Zf(t,Cn(e)),new Ml(Cn(e.g),e.h);if(30<t.g.length){if(qr(t)||qr(e))throw Error("slowDivide_ only works with positive integers.");for(var n=uv,r=e;0>=r.X(t);)n=oR(n),r=oR(r);var i=Ka(n,1),s=Ka(r,1);for(r=Ka(r,2),n=Ka(n,2);!Ji(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=Ka(r,1),n=Ka(n,1)}return e=Xf(t,i.R(e)),new Ml(i,e)}for(i=yc;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=Ai(n),o=s.R(e);qr(o)||0<o.X(t);)n-=r,s=Ai(n),o=s.R(e);Ji(s)&&(s=uv),i=i.add(s),t=Xf(t,o)}return new Ml(i,t)}ue.gb=function(t){return Zf(this,t).h};ue.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new yt(n,this.h&t.h)};ue.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new yt(n,this.h|t.h)};ue.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new yt(n,this.h^t.h)};function oR(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new yt(n,t.h)}function Ka(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new yt(i,t.h)}Jf.prototype.createWebChannel=Jf.prototype.g;Pr.prototype.send=Pr.prototype.u;Pr.prototype.open=Pr.prototype.m;Pr.prototype.close=Pr.prototype.close;cg.NO_ERROR=0;cg.TIMEOUT=8;cg.HTTP_ERROR=6;y1.COMPLETE="complete";v1.EventType=bh;bh.OPEN="a";bh.CLOSE="b";bh.ERROR="c";bh.MESSAGE="d";_n.prototype.listen=_n.prototype.O;jt.prototype.listenOnce=jt.prototype.P;jt.prototype.getLastError=jt.prototype.Sa;jt.prototype.getLastErrorCode=jt.prototype.Ia;jt.prototype.getStatus=jt.prototype.da;jt.prototype.getResponseJson=jt.prototype.Wa;jt.prototype.getResponseText=jt.prototype.ja;jt.prototype.send=jt.prototype.ha;jt.prototype.setWithCredentials=jt.prototype.Oa;fi.prototype.digest=fi.prototype.l;fi.prototype.reset=fi.prototype.reset;fi.prototype.update=fi.prototype.j;yt.prototype.add=yt.prototype.add;yt.prototype.multiply=yt.prototype.R;yt.prototype.modulo=yt.prototype.gb;yt.prototype.compare=yt.prototype.X;yt.prototype.toNumber=yt.prototype.ea;yt.prototype.toString=yt.prototype.toString;yt.prototype.getBits=yt.prototype.D;yt.fromNumber=Ai;yt.fromString=ek;var u6=function(){return new Jf},h6=function(){return ag()},W_=cg,d6=y1,f6=wa,aR={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Yd=v1,p6=jt,g6=fi,vc=yt;const cR="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ln.UNAUTHENTICATED=new Ln(null),Ln.GOOGLE_CREDENTIALS=new Ln("google-credentials-uid"),Ln.FIRST_PARTY=new Ln("first-party-uid"),Ln.MOCK_USER=new Ln("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ol="10.4.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sa=new wh("@firebase/firestore");function nc(){return sa.logLevel}function Z(t,...e){if(sa.logLevel<=Ge.DEBUG){const n=e.map(pE);sa.debug(`Firestore (${ol}): ${t}`,...n)}}function Qt(t,...e){if(sa.logLevel<=Ge.ERROR){const n=e.map(pE);sa.error(`Firestore (${ol}): ${t}`,...n)}}function Xu(t,...e){if(sa.logLevel<=Ge.WARN){const n=e.map(pE);sa.warn(`Firestore (${ol}): ${t}`,...n)}}function pE(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _e(t="Unexpected state"){const e=`FIRESTORE (${ol}) INTERNAL ASSERTION FAILED: `+t;throw Qt(e),new Error(e)}function be(t,e){t||_e()}function ve(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class re extends gi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m6{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class _6{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ln.UNAUTHENTICATED))}shutdown(){}}class y6{constructor(e){this.t=e,this.currentUser=Ln.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new ki;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ki,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},c=u=>{Z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(Z("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ki)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(be(typeof r.accessToken=="string"),new m6(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return be(e===null||typeof e=="string"),new Ln(e)}}class v6{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ln.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class w6{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new v6(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ln.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class E6{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class I6{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{s.error!=null&&Z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Z("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(be(typeof n.token=="string"),this.R=n.token,new E6(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T6(t){const e=typeof self!="undefined"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{static V(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=T6(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Ve(t,e){return t<e?-1:t>e?1:0}function Lc(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function nk(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new re(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new re(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new re(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new re(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return It.fromMillis(Date.now())}static fromDate(e){return It.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new It(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ve(this.nanoseconds,e.nanoseconds):Ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Te(e)}static min(){return new Te(new It(0,0))}static max(){return new Te(new It(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(e,n,r){n===void 0?n=0:n>e.length&&_e(),r===void 0?r=e.length-n:r>e.length-n&&_e(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Zu.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Zu?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ft extends Zu{construct(e,n,r){return new ft(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new re(q.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ft(n)}static emptyPath(){return new ft([])}}const b6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Jt extends Zu{construct(e,n,r){return new Jt(e,n,r)}static isValidIdentifier(e){return b6.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Jt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Jt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new re(q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new re(q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new re(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(r+=c,i++):(s(),i++)}if(s(),o)throw new re(q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Jt(n)}static emptyPath(){return new Jt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.path=e}static fromPath(e){return new le(ft.fromString(e))}static fromName(e){return new le(ft.fromString(e).popFirst(5))}static empty(){return new le(ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ft.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ft.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new le(new ft(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function hv(t){return t.fields.find(e=>e.kind===2)}function Mo(t){return t.fields.filter(e=>e.kind!==2)}ep.UNKNOWN_ID=-1;class gf{constructor(e,n){this.fieldPath=e,this.kind=n}}class eh{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new eh(0,xr.min())}}function rk(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Te.fromTimestamp(r===1e9?new It(n+1,0):new It(n,r));return new xr(i,le.empty(),e)}function ik(t){return new xr(t.readTime,t.key,-1)}class xr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new xr(Te.min(),le.empty(),-1)}static max(){return new xr(Te.max(),le.empty(),-1)}}function gE(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=le.comparator(t.documentKey,e.documentKey),n!==0?n:Ve(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ok{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function go(t){if(t.code!==q.FAILED_PRECONDITION||t.message!==sk)throw t;Z("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&_e(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new L((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof L?n:L.resolve(n)}catch(n){return L.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):L.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):L.reject(n)}static resolve(e){return new L((n,r)=>{n(e)})}static reject(e){return new L((n,r)=>{r(e)})}static waitFor(e){return new L((n,r)=>{let i=0,s=0,o=!1;e.forEach(c=>{++i,c.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=L.resolve(!1);for(const r of e)n=n.next(i=>i?L.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new L((r,i)=>{const s=e.length,o=new Array(s);let c=0;for(let u=0;u<s;u++){const h=u;n(e[h]).next(f=>{o[h]=f,++c,c===s&&r(o)},f=>i(f))}})}static doWhile(e,n){return new L((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.m=new ki,this.transaction.oncomplete=()=>{this.m.resolve()},this.transaction.onabort=()=>{n.error?this.m.reject(new mu(e,n.error)):this.m.resolve()},this.transaction.onerror=r=>{const i=mE(r.target.error);this.m.reject(new mu(e,i))}}static open(e,n,r,i){try{return new _g(n,e.transaction(i,r))}catch(s){throw new mu(n,s)}}get g(){return this.m.promise}abort(e){e&&this.m.reject(e),this.aborted||(Z("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}p(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new R6(n)}}class Xi{constructor(e,n,r){this.name=e,this.version=n,this.S=r,Xi.D(rn())===12.2&&Qt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Z("SimpleDb","Removing database:",e),Uo(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!Xp())return!1;if(Xi.v())return!0;const e=rn(),n=Xi.D(e),r=0<n&&n<10,i=Xi.F(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process!="undefined"&&((e=process.env)===null||e===void 0?void 0:e.M)==="YES"}static O(e,n){return e.store(n)}static D(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static F(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async N(e){return this.db||(Z("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new mu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new re(q.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new re(q.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new mu(e,o))},i.onupgradeneeded=s=>{Z("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.S.B(o,i.transaction,s.oldVersion,this.version).next(()=>{Z("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=n=>this.L(n)),this.db}k(e){this.L=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.N(e);const c=_g.open(this.db,e,s?"readonly":"readwrite",r),u=i(c).next(h=>(c.p(),h)).catch(h=>(c.abort(h),L.reject(h))).toPromise();return u.catch(()=>{}),await c.g,u}catch(c){const u=c,h=u.name!=="FirebaseError"&&o<3;if(Z("SimpleDb","Transaction failed with error:",u.message,"Retrying:",h),this.close(),!h)return Promise.reject(u)}}}close(){this.db&&this.db.close(),this.db=void 0}}class A6{constructor(e){this.q=e,this.K=!1,this.$=null}get isDone(){return this.K}get U(){return this.$}set cursor(e){this.q=e}done(){this.K=!0}W(e){this.$=e}delete(){return Uo(this.q.delete())}}class mu extends re{constructor(e,n){super(q.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function mo(t){return t.name==="IndexedDbTransactionError"}class R6{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(Z("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(Z("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Uo(r)}add(e){return Z("SimpleDb","ADD",this.store.name,e,e),Uo(this.store.add(e))}get(e){return Uo(this.store.get(e)).next(n=>(n===void 0&&(n=null),Z("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return Z("SimpleDb","DELETE",this.store.name,e),Uo(this.store.delete(e))}count(){return Z("SimpleDb","COUNT",this.store.name),Uo(this.store.count())}G(e,n){const r=this.options(e,n);if(r.index||typeof this.store.getAll!="function"){const i=this.cursor(r),s=[];return this.j(i,(o,c)=>{s.push(c)}).next(()=>s)}{const i=this.store.getAll(r.range);return new L((s,o)=>{i.onerror=c=>{o(c.target.error)},i.onsuccess=c=>{s(c.target.result)}})}}H(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new L((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}J(e,n){Z("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.Y=!1;const i=this.cursor(r);return this.j(i,(s,o,c)=>c.delete())}Z(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.j(i,n)}X(e){const n=this.cursor({});return new L((r,i)=>{n.onerror=s=>{const o=mE(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(c=>{c?o.continue():r()}):r()}})}j(e,n){const r=[];return new L((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const c=o.target.result;if(!c)return void i();const u=new A6(c),h=n(c.primaryKey,c.value,u);if(h instanceof L){const f=h.catch(p=>(u.done(),L.reject(p)));r.push(f)}u.isDone?i():u.U===null?c.continue():c.continue(u.U)}}).next(()=>L.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Uo(t){return new L((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=mE(r.target.error);n(i)}})}let lR=!1;function mE(t){const e=Xi.D(rn());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new re("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return lR||(lR=!0,setTimeout(()=>{throw r},0)),r}}return t}class S6{constructor(e,n){this.asyncQueue=e,this.ee=n,this.task=null}start(){this.te(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}te(e){Z("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{Z("IndexBackiller",`Documents written: ${await this.ee.ne()}`)}catch(n){mo(n)?Z("IndexBackiller","Ignoring IndexedDB error during index backfill: ",n):await go(n)}await this.te(6e4)})}}class C6{constructor(e,n){this.localStore=e,this.persistence=n}async ne(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.re(n,e))}re(e,n){const r=new Set;let i=n,s=!0;return L.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return Z("IndexBackiller",`Processing collection: ${o}`),this.ie(e,o,i).next(c=>{i-=c,r.add(o)});s=!1})).next(()=>n-i)}ie(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.se(i,s)).next(c=>(Z("IndexBackiller",`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(e,n,c))).next(()=>o.size)}))}se(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=ik(s);gE(o,r)>0&&(r=o)}),new xr(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.oe(r),this._e=r=>n.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}cr.ae=-1;function yg(t){return t==null}function th(t){return t===0&&1/t==-1/0}function ak(t){return typeof t=="number"&&Number.isInteger(t)&&!th(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xn(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=uR(e)),e=P6(t.get(n),e);return uR(e)}function P6(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function uR(t){return t+""}function Ri(t){const e=t.length;if(be(e>=2),e===2)return be(t.charAt(0)===""&&t.charAt(1)===""),ft.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("",s);switch((o<0||o>n)&&_e(),t.charAt(o+1)){case"":const c=t.substring(s,o);let u;i.length===0?u=c:(i+=c,u=i,i=""),r.push(u);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:_e()}s=o+2}return new ft(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mf(t,e){return[t,Xn(e)]}function ck(t,e,n){return[t,Xn(e),n]}const x6={},k6=["prefixPath","collectionGroup","readTime","documentId"],D6=["prefixPath","collectionGroup","documentId"],O6=["collectionGroup","readTime","prefixPath","documentId"],N6=["canonicalId","targetId"],M6=["targetId","path"],L6=["path","targetId"],V6=["collectionId","parent"],F6=["indexId","uid"],U6=["uid","sequenceNumber"],B6=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],$6=["indexId","uid","orderedDocumentKey"],q6=["userId","collectionPath","documentId"],H6=["userId","collectionPath","largestBatchId"],W6=["userId","collectionGroup","largestBatchId"],lk=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],z6=[...lk,"documentOverlays"],uk=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],hk=uk,j6=[...hk,"indexConfiguration","indexState","indexEntries"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv extends ok{constructor(e,n){super(),this.ue=e,this.currentSequenceNumber=n}}function wn(t,e){const n=ve(t);return Xi.O(n.ue,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dR(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ea(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function dk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e,n){this.comparator=e,this.root=n||Sn.EMPTY}insert(e,n){return new St(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Sn.BLACK,null,null))}remove(e){return new St(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Sn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qd(this.root,e,this.comparator,!0)}}class Qd{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Sn{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r!=null?r:Sn.RED,this.left=i!=null?i:Sn.EMPTY,this.right=s!=null?s:Sn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Sn(e!=null?e:this.key,n!=null?n:this.value,r!=null?r:this.color,i!=null?i:this.left,s!=null?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Sn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Sn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Sn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Sn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw _e();const e=this.left.check();if(e!==this.right.check())throw _e();return e+(this.isRed()?0:1)}}Sn.EMPTY=null,Sn.RED=!0,Sn.BLACK=!1;Sn.EMPTY=new class{constructor(){this.size=0}get key(){throw _e()}get value(){throw _e()}get color(){throw _e()}get left(){throw _e()}get right(){throw _e()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Sn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.comparator=e,this.data=new St(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new fR(this.data.getIterator())}getIteratorFrom(e){return new fR(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Rt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Rt(this.comparator);return n.data=e,n}}class fR{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ga(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e){this.fields=e,e.sort(Jt.comparator)}static empty(){return new lr([])}unionWith(e){let n=new Rt(Jt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new lr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Lc(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException!="undefined"&&s instanceof DOMException?new fk("Invalid base64 string: "+s):s}}(e);return new yn(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new yn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yn.EMPTY_BYTE_STRING=new yn("");const K6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function io(t){if(be(!!t),typeof t=="string"){let e=0;const n=K6.exec(t);if(be(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ht(t.seconds),nanos:Ht(t.nanos)}}function Ht(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function so(t){return typeof t=="string"?yn.fromBase64String(t):yn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _E(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function yE(t){const e=t.mapValue.fields.__previous_value__;return _E(e)?yE(e):e}function nh(t){const e=io(t.mapValue.fields.__local_write_time__.timestampValue);return new It(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G6{constructor(e,n,r,i,s,o,c,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=h}}class oa{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new oa("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof oa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ks={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},_f={nullValue:"NULL_VALUE"};function aa(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?_E(t)?4:pk(t)?9007199254740991:10:_e()}function Oi(t,e){if(t===e)return!0;const n=aa(t);if(n!==aa(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return nh(t).isEqual(nh(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=io(i.timestampValue),c=io(s.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return so(i.bytesValue).isEqual(so(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ht(i.geoPointValue.latitude)===Ht(s.geoPointValue.latitude)&&Ht(i.geoPointValue.longitude)===Ht(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ht(i.integerValue)===Ht(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Ht(i.doubleValue),c=Ht(s.doubleValue);return o===c?th(o)===th(c):isNaN(o)&&isNaN(c)}return!1}(t,e);case 9:return Lc(t.arrayValue.values||[],e.arrayValue.values||[],Oi);case 10:return function(i,s){const o=i.mapValue.fields||{},c=s.mapValue.fields||{};if(dR(o)!==dR(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!Oi(o[u],c[u])))return!1;return!0}(t,e);default:return _e()}}function rh(t,e){return(t.values||[]).find(n=>Oi(n,e))!==void 0}function oo(t,e){if(t===e)return 0;const n=aa(t),r=aa(e);if(n!==r)return Ve(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ve(t.booleanValue,e.booleanValue);case 2:return function(s,o){const c=Ht(s.integerValue||s.doubleValue),u=Ht(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return pR(t.timestampValue,e.timestampValue);case 4:return pR(nh(t),nh(e));case 5:return Ve(t.stringValue,e.stringValue);case 6:return function(s,o){const c=so(s),u=so(o);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const c=s.split("/"),u=o.split("/");for(let h=0;h<c.length&&h<u.length;h++){const f=Ve(c[h],u[h]);if(f!==0)return f}return Ve(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const c=Ve(Ht(s.latitude),Ht(o.latitude));return c!==0?c:Ve(Ht(s.longitude),Ht(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const c=s.values||[],u=o.values||[];for(let h=0;h<c.length&&h<u.length;++h){const f=oo(c[h],u[h]);if(f)return f}return Ve(c.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Ks.mapValue&&o===Ks.mapValue)return 0;if(s===Ks.mapValue)return 1;if(o===Ks.mapValue)return-1;const c=s.fields||{},u=Object.keys(c),h=o.fields||{},f=Object.keys(h);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){const m=Ve(u[p],f[p]);if(m!==0)return m;const y=oo(c[u[p]],h[f[p]]);if(y!==0)return y}return Ve(u.length,f.length)}(t.mapValue,e.mapValue);default:throw _e()}}function pR(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ve(t,e);const n=io(t),r=io(e),i=Ve(n.seconds,r.seconds);return i!==0?i:Ve(n.nanos,r.nanos)}function Vc(t){return fv(t)}function fv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=io(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return so(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return le.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=fv(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${fv(n.fields[o])}`;return i+"}"}(t.mapValue):_e()}function ih(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function pv(t){return!!t&&"integerValue"in t}function sh(t){return!!t&&"arrayValue"in t}function gR(t){return!!t&&"nullValue"in t}function mR(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function yf(t){return!!t&&"mapValue"in t}function _u(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ea(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=_u(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=_u(t.arrayValue.values[n]);return e}return Object.assign({},t)}function pk(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function Y6(t){return"nullValue"in t?_f:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?ih(oa.empty(),le.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:_e()}function Q6(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?ih(oa.empty(),le.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?Ks:_e()}function _R(t,e){const n=oo(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function yR(t,e){const n=oo(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this.value=e}static empty(){return new Bn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!yf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=_u(n)}setAll(e){let n=Jt.emptyPath(),r={},i=[];e.forEach((o,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=c.popLast()}o?r[c.lastSegment()]=_u(o):i.push(c.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());yf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Oi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];yf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ea(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Bn(_u(this.value))}}function gk(t){const e=[];return Ea(t.fields,(n,r)=>{const i=new Jt([n]);if(yf(r)){const s=gk(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new lr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e,n,r,i,s,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=c}static newInvalidDocument(e){return new Wt(e,0,Te.min(),Te.min(),Te.min(),Bn.empty(),0)}static newFoundDocument(e,n,r,i){return new Wt(e,1,n,Te.min(),r,i,0)}static newNoDocument(e,n){return new Wt(e,2,n,Te.min(),Te.min(),Bn.empty(),0)}static newUnknownDocument(e,n){return new Wt(e,3,n,Te.min(),Te.min(),Bn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Wt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Wt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e,n){this.position=e,this.inclusive=n}}function vR(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=le.comparator(le.fromName(o.referenceValue),n.key):r=oo(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function wR(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Oi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e,n="asc"){this.field=e,this.dir=n}}function J6(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{}class Xe extends mk{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new X6(e,n,r):n==="array-contains"?new t9(e,r):n==="in"?new Ik(e,r):n==="not-in"?new n9(e,r):n==="array-contains-any"?new r9(e,r):new Xe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Z6(e,r):new e9(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(oo(n,this.value)):n!==null&&aa(this.value)===aa(n)&&this.matchesComparison(oo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _e()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class _t extends mk{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new _t(e,n)}matches(e){return Uc(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.le(n=>n.isInequality());return e!==null?e.field:null}le(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function Uc(t){return t.op==="and"}function gv(t){return t.op==="or"}function vE(t){return _k(t)&&Uc(t)}function _k(t){for(const e of t.filters)if(e instanceof _t)return!1;return!0}function mv(t){if(t instanceof Xe)return t.field.canonicalString()+t.op.toString()+Vc(t.value);if(vE(t))return t.filters.map(e=>mv(e)).join(",");{const e=t.filters.map(n=>mv(n)).join(",");return`${t.op}(${e})`}}function yk(t,e){return t instanceof Xe?function(r,i){return i instanceof Xe&&r.op===i.op&&r.field.isEqual(i.field)&&Oi(r.value,i.value)}(t,e):t instanceof _t?function(r,i){return i instanceof _t&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,c)=>s&&yk(o,i.filters[c]),!0):!1}(t,e):void _e()}function vk(t,e){const n=t.filters.concat(e);return _t.create(n,t.op)}function wk(t){return t instanceof Xe?function(n){return`${n.field.canonicalString()} ${n.op} ${Vc(n.value)}`}(t):t instanceof _t?function(n){return n.op.toString()+" {"+n.getFilters().map(wk).join(" ,")+"}"}(t):"Filter"}class X6 extends Xe{constructor(e,n,r){super(e,n,r),this.key=le.fromName(r.referenceValue)}matches(e){const n=le.comparator(e.key,this.key);return this.matchesComparison(n)}}class Z6 extends Xe{constructor(e,n){super(e,"in",n),this.keys=Ek("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class e9 extends Xe{constructor(e,n){super(e,"not-in",n),this.keys=Ek("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Ek(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>le.fromName(r.referenceValue))}class t9 extends Xe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return sh(n)&&rh(n.arrayValue,this.value)}}class Ik extends Xe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&rh(this.value.arrayValue,n)}}class n9 extends Xe{constructor(e,n){super(e,"not-in",n)}matches(e){if(rh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!rh(this.value.arrayValue,n)}}class r9 extends Xe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!sh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>rh(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i9{constructor(e,n=null,r=[],i=[],s=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=c,this.he=null}}function _v(t,e=null,n=[],r=[],i=null,s=null,o=null){return new i9(t,e,n,r,i,s,o)}function ca(t){const e=ve(t);if(e.he===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>mv(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),yg(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Vc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Vc(r)).join(",")),e.he=n}return e.he}function Ph(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!J6(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!yk(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!wR(t.startAt,e.startAt)&&wR(t.endAt,e.endAt)}function tp(t){return le.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function np(t,e){return t.filters.filter(n=>n instanceof Xe&&n.field.isEqual(e))}function ER(t,e,n){let r=_f,i=!0;for(const s of np(t,e)){let o=_f,c=!0;switch(s.op){case"<":case"<=":o=Y6(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,c=!1;break;case"!=":case"not-in":o=_f}_R({value:r,inclusive:i},{value:o,inclusive:c})<0&&(r=o,i=c)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];_R({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function IR(t,e,n){let r=Ks,i=!0;for(const s of np(t,e)){let o=Ks,c=!0;switch(s.op){case">=":case">":o=Q6(s.value),c=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,c=!1;break;case"!=":case"not-in":o=Ks}yR({value:r,inclusive:i},{value:o,inclusive:c})>0&&(r=o,i=c)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];yR({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(e,n=null,r=[],i=[],s=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=c,this.endAt=u,this.Pe=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function Tk(t,e,n,r,i,s,o,c){return new al(t,e,n,r,i,s,o,c)}function xh(t){return new al(t)}function TR(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function wE(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function vg(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function bk(t){return t.collectionGroup!==null}function yu(t){const e=ve(t);if(e.Pe===null){e.Pe=[];const n=vg(e),r=wE(e);if(n!==null&&r===null)n.isKeyField()||e.Pe.push(new wc(n)),e.Pe.push(new wc(Jt.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.Pe.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.Pe.push(new wc(Jt.keyField(),s))}}}return e.Pe}function Rr(t){const e=ve(t);return e.Ie||(e.Ie=s9(e,yu(t))),e.Ie}function s9(t,e){if(t.limitType==="F")return _v(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new wc(i.field,s)});const n=t.endAt?new Fc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Fc(t.startAt.position,t.startAt.inclusive):null;return _v(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function yv(t,e){e.getFirstInequalityField(),vg(t);const n=t.filters.concat([e]);return new al(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function rp(t,e,n){return new al(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function wg(t,e){return Ph(Rr(t),Rr(e))&&t.limitType===e.limitType}function Ak(t){return`${ca(Rr(t))}|lt:${t.limitType}`}function rc(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>wk(i)).join(", ")}]`),yg(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Vc(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Vc(i)).join(",")),`Target(${r})`}(Rr(t))}; limitType=${t.limitType})`}function kh(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):le.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of yu(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,c,u){const h=vR(o,c,u);return o.inclusive?h<=0:h<0}(r.startAt,yu(r),i)||r.endAt&&!function(o,c,u){const h=vR(o,c,u);return o.inclusive?h>=0:h>0}(r.endAt,yu(r),i))}(t,e)}function Rk(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Sk(t){return(e,n)=>{let r=!1;for(const i of yu(t)){const s=o9(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function o9(t,e,n){const r=t.field.isKeyField()?le.comparator(e.key,n.key):function(s,o,c){const u=o.data.field(s),h=c.data.field(s);return u!==null&&h!==null?oo(u,h):_e()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return _e()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ea(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return dk(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a9=new St(le.comparator);function Ar(){return a9}const Ck=new St(le.comparator);function ru(...t){let e=Ck;for(const n of t)e=e.insert(n.key,n);return e}function Pk(t){let e=Ck;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Si(){return vu()}function xk(){return vu()}function vu(){return new _o(t=>t.toString(),(t,e)=>t.isEqual(e))}const c9=new St(le.comparator),l9=new Rt(le.comparator);function ze(...t){let e=l9;for(const n of t)e=e.add(n);return e}const u9=new Rt(Ve);function EE(){return u9}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kk(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:th(e)?"-0":e}}function Dk(t){return{integerValue:""+t}}function Ok(t,e){return ak(e)?Dk(e):kk(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(){this._=void 0}}function h9(t,e,n){return t instanceof oh?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&_E(s)&&(s=yE(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof la?Mk(t,e):t instanceof Bc?Lk(t,e):function(i,s){const o=Nk(i,s),c=bR(o)+bR(i.Te);return pv(o)&&pv(i.Te)?Dk(c):kk(i.serializer,c)}(t,e)}function d9(t,e,n){return t instanceof la?Mk(t,e):t instanceof Bc?Lk(t,e):n}function Nk(t,e){return t instanceof $c?function(r){return pv(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class oh extends Eg{}class la extends Eg{constructor(e){super(),this.elements=e}}function Mk(t,e){const n=Vk(e);for(const r of t.elements)n.some(i=>Oi(i,r))||n.push(r);return{arrayValue:{values:n}}}class Bc extends Eg{constructor(e){super(),this.elements=e}}function Lk(t,e){let n=Vk(e);for(const r of t.elements)n=n.filter(i=>!Oi(i,r));return{arrayValue:{values:n}}}class $c extends Eg{constructor(e,n){super(),this.serializer=e,this.Te=n}}function bR(t){return Ht(t.integerValue||t.doubleValue)}function Vk(t){return sh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(e,n){this.field=e,this.transform=n}}function f9(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof la&&i instanceof la||r instanceof Bc&&i instanceof Bc?Lc(r.elements,i.elements,Oi):r instanceof $c&&i instanceof $c?Oi(r.Te,i.Te):r instanceof oh&&i instanceof oh}(t.transform,e.transform)}class p9{constructor(e,n){this.version=e,this.transformResults=n}}class xn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new xn}static exists(e){return new xn(void 0,e)}static updateTime(e){return new xn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ig{}function Fk(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Tg(t.key,xn.none()):new cl(t.key,t.data,xn.none());{const n=t.data,r=Bn.empty();let i=new Rt(Jt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new _s(t.key,r,new lr(i.toArray()),xn.none())}}function g9(t,e,n){t instanceof cl?function(i,s,o){const c=i.value.clone(),u=RR(i.fieldTransforms,s,o.transformResults);c.setAll(u),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):t instanceof _s?function(i,s,o){if(!vf(i.precondition,s))return void s.convertToUnknownDocument(o.version);const c=RR(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(Uk(i)),u.setAll(c),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function wu(t,e,n,r){return t instanceof cl?function(s,o,c,u){if(!vf(s.precondition,o))return c;const h=s.value.clone(),f=SR(s.fieldTransforms,u,o);return h.setAll(f),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof _s?function(s,o,c,u){if(!vf(s.precondition,o))return c;const h=SR(s.fieldTransforms,u,o),f=o.data;return f.setAll(Uk(s)),f.setAll(h),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,o,c){return vf(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(t,e,n)}function m9(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=Nk(r.transform,i||null);s!=null&&(n===null&&(n=Bn.empty()),n.set(r.field,s))}return n||null}function AR(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Lc(r,i,(s,o)=>f9(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class cl extends Ig{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class _s extends Ig{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Uk(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function RR(t,e,n){const r=new Map;be(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,c=e.data.field(s.field);r.set(s.field,d9(o,c,n[i]))}return r}function SR(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,h9(s,o,e))}return r}class Tg extends Ig{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Bk extends Ig{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&g9(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=wu(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=wu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=xk();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let c=this.applyToLocalView(o,s.mutatedFields);c=n.has(i.key)?null:c;const u=Fk(o,c);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Te.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ze())}isEqual(e){return this.batchId===e.batchId&&Lc(this.mutations,e.mutations,(n,r)=>AR(n,r))&&Lc(this.baseMutations,e.baseMutations,(n,r)=>AR(n,r))}}class bE{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){be(e.mutations.length===r.length);let i=function(){return c9}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new bE(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _9{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var en,it;function y9(t){switch(t){default:return _e();case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0}}function $k(t){if(t===void 0)return Qt("GRPC error has no .code"),q.UNKNOWN;switch(t){case en.OK:return q.OK;case en.CANCELLED:return q.CANCELLED;case en.UNKNOWN:return q.UNKNOWN;case en.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case en.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case en.INTERNAL:return q.INTERNAL;case en.UNAVAILABLE:return q.UNAVAILABLE;case en.UNAUTHENTICATED:return q.UNAUTHENTICATED;case en.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case en.NOT_FOUND:return q.NOT_FOUND;case en.ALREADY_EXISTS:return q.ALREADY_EXISTS;case en.PERMISSION_DENIED:return q.PERMISSION_DENIED;case en.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case en.ABORTED:return q.ABORTED;case en.OUT_OF_RANGE:return q.OUT_OF_RANGE;case en.UNIMPLEMENTED:return q.UNIMPLEMENTED;case en.DATA_LOSS:return q.DATA_LOSS;default:return _e()}}(it=en||(en={}))[it.OK=0]="OK",it[it.CANCELLED=1]="CANCELLED",it[it.UNKNOWN=2]="UNKNOWN",it[it.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",it[it.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",it[it.NOT_FOUND=5]="NOT_FOUND",it[it.ALREADY_EXISTS=6]="ALREADY_EXISTS",it[it.PERMISSION_DENIED=7]="PERMISSION_DENIED",it[it.UNAUTHENTICATED=16]="UNAUTHENTICATED",it[it.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",it[it.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",it[it.ABORTED=10]="ABORTED",it[it.OUT_OF_RANGE=11]="OUT_OF_RANGE",it[it.UNIMPLEMENTED=12]="UNIMPLEMENTED",it[it.INTERNAL=13]="INTERNAL",it[it.UNAVAILABLE=14]="UNAVAILABLE",it[it.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v9(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w9=new vc([4294967295,4294967295],0);function CR(t){const e=v9().encode(t),n=new g6;return n.update(e),new Uint8Array(n.digest())}function PR(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new vc([n,r],0),new vc([i,s],0)]}class RE{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new iu(`Invalid padding: ${n}`);if(r<0)throw new iu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new iu(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new iu(`Invalid padding when bitmap length is 0: ${n}`);this.Ae=8*e.length-n,this.Re=vc.fromNumber(this.Ae)}Ve(e,n,r){let i=e.add(n.multiply(vc.fromNumber(r)));return i.compare(w9)===1&&(i=new vc([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Re).toNumber()}me(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ae===0)return!1;const n=CR(e),[r,i]=PR(n);for(let s=0;s<this.hashCount;s++){const o=this.Ve(r,i,s);if(!this.me(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new RE(s,i,n);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.Ae===0)return;const n=CR(e),[r,i]=PR(n);for(let s=0;s<this.hashCount;s++){const o=this.Ve(r,i,s);this.fe(o)}}fe(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class iu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Oh.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Dh(Te.min(),i,new St(Ve),Ar(),ze())}}class Oh{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Oh(r,n,ze(),ze(),ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(e,n,r,i){this.ge=e,this.removedTargetIds=n,this.key=r,this.pe=i}}class qk{constructor(e,n){this.targetId=e,this.ye=n}}class Hk{constructor(e,n,r=yn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class xR{constructor(){this.we=0,this.Se=DR(),this.be=yn.EMPTY_BYTE_STRING,this.De=!1,this.Ce=!0}get current(){return this.De}get resumeToken(){return this.be}get ve(){return this.we!==0}get Fe(){return this.Ce}Me(e){e.approximateByteSize()>0&&(this.Ce=!0,this.be=e)}xe(){let e=ze(),n=ze(),r=ze();return this.Se.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:_e()}}),new Oh(this.be,this.De,e,n,r)}Oe(){this.Ce=!1,this.Se=DR()}Ne(e,n){this.Ce=!0,this.Se=this.Se.insert(e,n)}Be(e){this.Ce=!0,this.Se=this.Se.remove(e)}Le(){this.we+=1}ke(){this.we-=1}qe(){this.Ce=!0,this.De=!0}}class E9{constructor(e){this.Qe=e,this.Ke=new Map,this.$e=Ar(),this.Ue=kR(),this.We=new St(Ve)}Ge(e){for(const n of e.ge)e.pe&&e.pe.isFoundDocument()?this.ze(n,e.pe):this.je(n,e.key,e.pe);for(const n of e.removedTargetIds)this.je(n,e.key,e.pe)}He(e){this.forEachTarget(e,n=>{const r=this.Je(n);switch(e.state){case 0:this.Ye(n)&&r.Me(e.resumeToken);break;case 1:r.ke(),r.ve||r.Oe(),r.Me(e.resumeToken);break;case 2:r.ke(),r.ve||this.removeTarget(n);break;case 3:this.Ye(n)&&(r.qe(),r.Me(e.resumeToken));break;case 4:this.Ye(n)&&(this.Ze(n),r.Me(e.resumeToken));break;default:_e()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ke.forEach((r,i)=>{this.Ye(i)&&n(i)})}Xe(e){const n=e.targetId,r=e.ye.count,i=this.et(n);if(i){const s=i.target;if(tp(s))if(r===0){const o=new le(s.path);this.je(n,o,Wt.newNoDocument(o,Te.min()))}else be(r===1);else{const o=this.tt(n);if(o!==r){const c=this.nt(e),u=c?this.rt(c,e,o):1;if(u!==0){this.Ze(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.We=this.We.insert(n,h)}}}}}nt(e){const n=e.ye.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,c;try{o=so(r).toUint8Array()}catch(u){if(u instanceof fk)return Xu("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new RE(o,i,s)}catch(u){return Xu(u instanceof iu?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ae===0?null:c}rt(e,n,r){return n.ye.count===r-this.ot(e,n.targetId)?0:2}ot(e,n){const r=this.Qe.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Qe.st(),c=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.je(n,s,null),i++)}),i}_t(e){const n=new Map;this.Ke.forEach((s,o)=>{const c=this.et(o);if(c){if(s.current&&tp(c.target)){const u=new le(c.target.path);this.$e.get(u)!==null||this.ut(o,u)||this.je(o,u,Wt.newNoDocument(u,e))}s.Fe&&(n.set(o,s.xe()),s.Oe())}});let r=ze();this.Ue.forEach((s,o)=>{let c=!0;o.forEachWhile(u=>{const h=this.et(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(s))}),this.$e.forEach((s,o)=>o.setReadTime(e));const i=new Dh(e,n,this.We,this.$e,r);return this.$e=Ar(),this.Ue=kR(),this.We=new St(Ve),i}ze(e,n){if(!this.Ye(e))return;const r=this.ut(e,n.key)?2:0;this.Je(e).Ne(n.key,r),this.$e=this.$e.insert(n.key,n),this.Ue=this.Ue.insert(n.key,this.ct(n.key).add(e))}je(e,n,r){if(!this.Ye(e))return;const i=this.Je(e);this.ut(e,n)?i.Ne(n,1):i.Be(n),this.Ue=this.Ue.insert(n,this.ct(n).delete(e)),r&&(this.$e=this.$e.insert(n,r))}removeTarget(e){this.Ke.delete(e)}tt(e){const n=this.Je(e).xe();return this.Qe.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Le(e){this.Je(e).Le()}Je(e){let n=this.Ke.get(e);return n||(n=new xR,this.Ke.set(e,n)),n}ct(e){let n=this.Ue.get(e);return n||(n=new Rt(Ve),this.Ue=this.Ue.insert(e,n)),n}Ye(e){const n=this.et(e)!==null;return n||Z("WatchChangeAggregator","Detected inactive target",e),n}et(e){const n=this.Ke.get(e);return n&&n.ve?null:this.Qe.lt(e)}Ze(e){this.Ke.set(e,new xR),this.Qe.getRemoteKeysForTarget(e).forEach(n=>{this.je(e,n,null)})}ut(e,n){return this.Qe.getRemoteKeysForTarget(e).has(n)}}function kR(){return new St(le.comparator)}function DR(){return new St(le.comparator)}const I9=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),T9=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),b9=(()=>({and:"AND",or:"OR"}))();class A9{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function vv(t,e){return t.useProto3Json||yg(e)?e:{value:e}}function qc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Wk(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function R9(t,e){return qc(t,e.toTimestamp())}function Zn(t){return be(!!t),Te.fromTimestamp(function(n){const r=io(n);return new It(r.seconds,r.nanos)}(t))}function SE(t,e){return function(r){return new ft(["projects",r.projectId,"databases",r.database])}(t).child("documents").child(e).canonicalString()}function zk(t){const e=ft.fromString(t);return be(Zk(e)),e}function ip(t,e){return SE(t.databaseId,e.path)}function Xo(t,e){const n=zk(e);if(n.get(1)!==t.databaseId.projectId)throw new re(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new re(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new le(Kk(n))}function wv(t,e){return SE(t.databaseId,e)}function jk(t){const e=zk(t);return e.length===4?ft.emptyPath():Kk(e)}function Ev(t){return new ft(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Kk(t){return be(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function OR(t,e,n){return{name:ip(t,e),fields:n.value.mapValue.fields}}function S9(t,e,n){const r=Xo(t,e.name),i=Zn(e.updateTime),s=e.createTime?Zn(e.createTime):Te.min(),o=new Bn({mapValue:{fields:e.fields}}),c=Wt.newFoundDocument(r,i,s,o);return n&&c.setHasCommittedMutations(),n?c.setHasCommittedMutations():c}function C9(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:_e()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(h,f){return h.useProto3Json?(be(f===void 0||typeof f=="string"),yn.fromBase64String(f||"")):(be(f===void 0||f instanceof Uint8Array),yn.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(h){const f=h.code===void 0?q.UNKNOWN:$k(h.code);return new re(f,h.message||"")}(o);n=new Hk(r,i,s,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Xo(t,r.document.name),s=Zn(r.document.updateTime),o=r.document.createTime?Zn(r.document.createTime):Te.min(),c=new Bn({mapValue:{fields:r.document.fields}}),u=Wt.newFoundDocument(i,s,o,c),h=r.targetIds||[],f=r.removedTargetIds||[];n=new wf(h,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Xo(t,r.document),s=r.readTime?Zn(r.readTime):Te.min(),o=Wt.newNoDocument(i,s),c=r.removedTargetIds||[];n=new wf([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Xo(t,r.document),s=r.removedTargetIds||[];n=new wf([],s,i,null)}else{if(!("filter"in e))return _e();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new _9(i,s),c=r.targetId;n=new qk(c,o)}}return n}function sp(t,e){let n;if(e instanceof cl)n={update:OR(t,e.key,e.value)};else if(e instanceof Tg)n={delete:ip(t,e.key)};else if(e instanceof _s)n={update:OR(t,e.key,e.data),updateMask:N9(e.fieldMask)};else{if(!(e instanceof Bk))return _e();n={verify:ip(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const c=o.transform;if(c instanceof oh)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof la)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Bc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof $c)return{fieldPath:o.field.canonicalString(),increment:c.Te};throw _e()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:R9(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:_e()}(t,e.precondition)),n}function Iv(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?xn.updateTime(Zn(s.updateTime)):s.exists!==void 0?xn.exists(s.exists):xn.none()}(e.currentDocument):xn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,c){let u=null;if("setToServerValue"in c)be(c.setToServerValue==="REQUEST_TIME"),u=new oh;else if("appendMissingElements"in c){const f=c.appendMissingElements.values||[];u=new la(f)}else if("removeAllFromArray"in c){const f=c.removeAllFromArray.values||[];u=new Bc(f)}else"increment"in c?u=new $c(o,c.increment):_e();const h=Jt.fromServerFormat(c.fieldPath);return new IE(h,u)}(t,i)):[];if(e.update){e.update.name;const i=Xo(t,e.update.name),s=new Bn({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(u){const h=u.fieldPaths||[];return new lr(h.map(f=>Jt.fromServerFormat(f)))}(e.updateMask);return new _s(i,s,o,n,r)}return new cl(i,s,n,r)}if(e.delete){const i=Xo(t,e.delete);return new Tg(i,n)}if(e.verify){const i=Xo(t,e.verify);return new Bk(i,n)}return _e()}function P9(t,e){return t&&t.length>0?(be(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Zn(i.updateTime):Zn(s);return o.isEqual(Te.min())&&(o=Zn(s)),new p9(o,i.transformResults||[])}(n,e))):[]}function Gk(t,e){return{documents:[wv(t,e.path)]}}function Yk(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=wv(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=wv(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(u){if(u.length!==0)return Xk(_t.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(u){if(u.length!==0)return u.map(h=>function(p){return{field:ic(p.field),direction:k9(p.dir)}}(h))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=vv(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),n}function Qk(t){let e=jk(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){be(r===1);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];n.where&&(s=function(p){const m=Jk(p);return m instanceof _t&&vE(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(m=>function(v){return new wc(sc(v.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(m))}(n.orderBy));let c=null;n.limit&&(c=function(p){let m;return m=typeof p=="object"?p.value:p,yg(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(p){const m=!!p.before,y=p.values||[];return new Fc(y,m)}(n.startAt));let h=null;return n.endAt&&(h=function(p){const m=!p.before,y=p.values||[];return new Fc(y,m)}(n.endAt)),Tk(e,i,o,s,c,"F",u,h)}function x9(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _e()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Jk(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=sc(n.unaryFilter.field);return Xe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=sc(n.unaryFilter.field);return Xe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=sc(n.unaryFilter.field);return Xe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=sc(n.unaryFilter.field);return Xe.create(o,"!=",{nullValue:"NULL_VALUE"});default:return _e()}}(t):t.fieldFilter!==void 0?function(n){return Xe.create(sc(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return _e()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return _t.create(n.compositeFilter.filters.map(r=>Jk(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return _e()}}(n.compositeFilter.op))}(t):_e()}function k9(t){return I9[t]}function D9(t){return T9[t]}function O9(t){return b9[t]}function ic(t){return{fieldPath:t.canonicalString()}}function sc(t){return Jt.fromServerFormat(t.fieldPath)}function Xk(t){return t instanceof Xe?function(n){if(n.op==="=="){if(mR(n.value))return{unaryFilter:{field:ic(n.field),op:"IS_NAN"}};if(gR(n.value))return{unaryFilter:{field:ic(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(mR(n.value))return{unaryFilter:{field:ic(n.field),op:"IS_NOT_NAN"}};if(gR(n.value))return{unaryFilter:{field:ic(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ic(n.field),op:D9(n.op),value:n.value}}}(t):t instanceof _t?function(n){const r=n.getFilters().map(i=>Xk(i));return r.length===1?r[0]:{compositeFilter:{op:O9(n.op),filters:r}}}(t):_e()}function N9(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Zk(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e,n,r,i,s=Te.min(),o=Te.min(),c=yn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new Zi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Zi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Zi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Zi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(e){this.ht=e}}function M9(t,e){let n;if(e.document)n=S9(t.ht,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=le.fromSegments(e.noDocument.path),i=ha(e.noDocument.readTime);n=Wt.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return _e();{const r=le.fromSegments(e.unknownDocument.path),i=ha(e.unknownDocument.version);n=Wt.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new It(i[0],i[1]);return Te.fromTimestamp(s)}(e.readTime)),n}function NR(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:op(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:ip(s,o.key),fields:o.data.value.mapValue.fields,updateTime:qc(s,o.version.toTimestamp()),createTime:qc(s,o.createTime.toTimestamp())}}(t.ht,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:ua(e.version)};else{if(!e.isUnknownDocument())return _e();r.unknownDocument={path:n.path.toArray(),version:ua(e.version)}}return r}function op(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function ua(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ha(t){const e=new It(t.seconds,t.nanoseconds);return Te.fromTimestamp(e)}function Bo(t,e){const n=(e.baseMutations||[]).map(s=>Iv(t.ht,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const c=e.mutations[s+1];o.updateTransforms=c.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>Iv(t.ht,s)),i=It.fromMillis(e.localWriteTimeMs);return new TE(e.batchId,i,n,r)}function su(t){const e=ha(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?ha(t.lastLimboFreeSnapshotVersion):Te.min();let r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){return be(s.documents.length===1),Rr(xh(jk(s.documents[0])))}(t.query):function(s){return Rr(Qk(s))}(t.query),new Zi(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,yn.fromBase64String(t.resumeToken))}function tD(t,e){const n=ua(e.snapshotVersion),r=ua(e.lastLimboFreeSnapshotVersion);let i;i=tp(e.target)?Gk(t.ht,e.target):Yk(t.ht,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ca(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function nD(t){const e=Qk({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?rp(e,e.limit,"L"):e}function z_(t,e){return new AE(e.largestBatchId,Iv(t.ht,e.overlayMutation))}function MR(t,e){const n=e.path.lastSegment();return[t,Xn(e.path.popLast()),n]}function LR(t,e,n,r){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:ua(r.readTime),documentKey:Xn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L9{getBundleMetadata(e,n){return VR(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:ha(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return VR(e).put(function(i){return{bundleId:i.id,createTime:ua(Zn(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return FR(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:nD(s.bundledQuery),readTime:ha(s.readTime)}}(r)})}saveNamedQuery(e,n){return FR(e).put(function(i){return{name:i.name,readTime:ua(Zn(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function VR(t){return wn(t,"bundles")}function FR(t){return wn(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{constructor(e,n){this.serializer=e,this.userId=n}static Pt(e,n){const r=n.uid||"";return new bg(e,r)}getOverlay(e,n){return Ll(e).get(MR(this.userId,n)).next(r=>r?z_(this.serializer,r):null)}getOverlays(e,n){const r=Si();return L.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const c=new AE(n,o);i.push(this.It(e,c))}),L.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(Xn(o.getCollectionPath())));const s=[];return i.forEach(o=>{const c=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Ll(e).J("collectionPathOverlayIndex",c))}),L.waitFor(s)}getOverlaysForCollection(e,n,r){const i=Si(),s=Xn(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Ll(e).G("collectionPathOverlayIndex",o).next(c=>{for(const u of c){const h=z_(this.serializer,u);i.set(h.getKey(),h)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=Si();let o;const c=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Ll(e).Z({index:"collectionGroupOverlayIndex",range:c},(u,h,f)=>{const p=z_(this.serializer,h);s.size()<i||p.largestBatchId===o?(s.set(p.getKey(),p),o=p.largestBatchId):f.done()}).next(()=>s)}It(e,n){return Ll(e).put(function(i,s,o){const[c,u,h]=MR(s,o.mutation.key);return{userId:s,collectionPath:u,documentId:h,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:sp(i.ht,o.mutation)}}(this.serializer,this.userId,n))}}function Ll(t){return wn(t,"documentOverlays")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(){}dt(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.At(n,5);else if("booleanValue"in e)this.At(n,10),n.Rt(e.booleanValue?1:0);else if("integerValue"in e)this.At(n,15),n.Rt(Ht(e.integerValue));else if("doubleValue"in e){const r=Ht(e.doubleValue);isNaN(r)?this.At(n,13):(this.At(n,15),th(r)?n.Rt(0):n.Rt(r))}else if("timestampValue"in e){const r=e.timestampValue;this.At(n,20),typeof r=="string"?n.Vt(r):(n.Vt(`${r.seconds||""}`),n.Rt(r.nanos||0))}else if("stringValue"in e)this.ft(e.stringValue,n),this.gt(n);else if("bytesValue"in e)this.At(n,30),n.yt(so(e.bytesValue)),this.gt(n);else if("referenceValue"in e)this.wt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.At(n,45),n.Rt(r.latitude||0),n.Rt(r.longitude||0)}else"mapValue"in e?pk(e)?this.At(n,Number.MAX_SAFE_INTEGER):(this.St(e.mapValue,n),this.gt(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.gt(n)):_e()}ft(e,n){this.At(n,25),this.Dt(e,n)}Dt(e,n){n.Vt(e)}St(e,n){const r=e.fields||{};this.At(n,55);for(const i of Object.keys(r))this.ft(i,n),this.Tt(r[i],n)}bt(e,n){const r=e.values||[];this.At(n,50);for(const i of r)this.Tt(i,n)}wt(e,n){this.At(n,37),le.fromName(e).path.forEach(r=>{this.At(n,60),this.Dt(r,n)})}At(e,n){e.Rt(n)}gt(e){e.Rt(2)}}$o.Ct=new $o;function V9(t){if(t===0)return 8;let e=0;return t>>4==0&&(e+=4,t<<=4),t>>6==0&&(e+=2,t<<=2),t>>7==0&&(e+=1),e}function UR(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=V9(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}class F9{constructor(){this.buffer=new Uint8Array(1024),this.position=0}vt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ot(r.value),r=n.next();this.Nt()}Bt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=n.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Lt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const i=n.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const n=this.qt(e),r=UR(n);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}Kt(e){const n=this.qt(e),r=UR(n);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ft(e){const n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(n)}Ot(e){const n=255&e;n===0?(this.Gt(0),this.Gt(255)):n===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class U9{constructor(e){this.jt=e}yt(e){this.jt.vt(e)}Vt(e){this.jt.Bt(e)}Rt(e){this.jt.kt(e)}Et(){this.jt.$t()}}class B9{constructor(e){this.jt=e}yt(e){this.jt.xt(e)}Vt(e){this.jt.Lt(e)}Rt(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Vl{constructor(){this.jt=new F9,this.Ht=new U9(this.jt),this.Jt=new B9(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Zt(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new qo(this.indexId,this.documentKey,this.arrayValue,r)}}function Ds(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=BR(t.arrayValue,e.arrayValue),n!==0?n:(n=BR(t.directionalValue,e.directionalValue),n!==0?n:le.comparator(t.documentKey,e.documentKey)))}function BR(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(e){this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Xt=e.orderBy,this.en=[];for(const n of e.filters){const r=n;r.isInequality()?this.tn=r:this.en.push(r)}}nn(e){be(e.collectionGroup===this.collectionId);const n=hv(e);if(n!==void 0&&!this.rn(n))return!1;const r=Mo(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.rn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.tn!==void 0){if(!i.has(this.tn.field.canonicalString())){const c=r[s];if(!this.sn(this.tn,c)||!this.on(this.Xt[o++],c))return!1}++s}for(;s<r.length;++s){const c=r[s];if(o>=this.Xt.length||!this.on(this.Xt[o++],c))return!1}return!0}_n(){let e=new Rt(Jt.comparator);const n=[];for(const r of this.en)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new gf(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new gf(r.field,0))}for(const r of this.Xt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new gf(r.field,r.dir==="asc"?0:1)));return new ep(ep.UNKNOWN_ID,this.collectionId,n,eh.empty())}rn(e){for(const n of this.en)if(this.sn(n,e))return!0;return!1}sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}on(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rD(t){var e,n;if(be(t instanceof Xe||t instanceof _t),t instanceof Xe){if(t instanceof Ik){const i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>Xe.create(t.field,"==",s)))||[];return _t.create(i,"or")}return t}const r=t.filters.map(i=>rD(i));return _t.create(r,t.op)}function $9(t){if(t.getFilters().length===0)return[];const e=Av(rD(t));return be(iD(e)),Tv(e)||bv(e)?[e]:e.getFilters()}function Tv(t){return t instanceof Xe}function bv(t){return t instanceof _t&&vE(t)}function iD(t){return Tv(t)||bv(t)||function(n){if(n instanceof _t&&gv(n)){for(const r of n.getFilters())if(!Tv(r)&&!bv(r))return!1;return!0}return!1}(t)}function Av(t){if(be(t instanceof Xe||t instanceof _t),t instanceof Xe)return t;if(t.filters.length===1)return Av(t.filters[0]);const e=t.filters.map(r=>Av(r));let n=_t.create(e,t.op);return n=ap(n),iD(n)?n:(be(n instanceof _t),be(Uc(n)),be(n.filters.length>1),n.filters.reduce((r,i)=>CE(r,i)))}function CE(t,e){let n;return be(t instanceof Xe||t instanceof _t),be(e instanceof Xe||e instanceof _t),n=t instanceof Xe?e instanceof Xe?function(i,s){return _t.create([i,s],"and")}(t,e):qR(t,e):e instanceof Xe?qR(e,t):function(i,s){if(be(i.filters.length>0&&s.filters.length>0),Uc(i)&&Uc(s))return vk(i,s.getFilters());const o=gv(i)?i:s,c=gv(i)?s:i,u=o.filters.map(h=>CE(h,c));return _t.create(u,"or")}(t,e),ap(n)}function qR(t,e){if(Uc(e))return vk(e,t.getFilters());{const n=e.filters.map(r=>CE(t,r));return _t.create(n,"or")}}function ap(t){if(be(t instanceof Xe||t instanceof _t),t instanceof Xe)return t;const e=t.getFilters();if(e.length===1)return ap(e[0]);if(_k(t))return t;const n=e.map(i=>ap(i)),r=[];return n.forEach(i=>{i instanceof Xe?r.push(i):i instanceof _t&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:_t.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q9{constructor(){this.an=new PE}addToCollectionParentIndex(e,n){return this.an.add(n),L.resolve()}getCollectionParents(e,n){return L.resolve(this.an.getEntries(n))}addFieldIndex(e,n){return L.resolve()}deleteFieldIndex(e,n){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,n){return L.resolve()}getDocumentsMatchingTarget(e,n){return L.resolve(null)}getIndexType(e,n){return L.resolve(0)}getFieldIndexes(e,n){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,n){return L.resolve(xr.min())}getMinOffsetFromCollectionGroup(e,n){return L.resolve(xr.min())}updateCollectionGroup(e,n,r){return L.resolve()}updateIndexEntries(e,n){return L.resolve()}}class PE{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Rt(ft.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Rt(ft.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jd=new Uint8Array(0);class H9{constructor(e,n){this.user=e,this.databaseId=n,this.un=new PE,this.cn=new _o(r=>ca(r),(r,i)=>Ph(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.un.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.un.add(n)});const s={collectionId:r,parent:Xn(i)};return HR(e).put(s)}return L.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[nk(n),""],!1,!0);return HR(e).G(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(Ri(o.parent))}return r})}addFieldIndex(e,n){const r=Fl(e),i=function(c){return{indexId:c.indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=Qa(e);return s.next(c=>{o.put(LR(c,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=Fl(e),i=Qa(e),s=Ya(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Fl(e),r=Ya(e),i=Qa(e);return n.J().next(()=>r.J()).next(()=>i.J())}createTargetIndexes(e,n){return L.forEach(this.ln(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new $R(r);return this.addFieldIndex(e,s._n())}}))}getDocumentsMatchingTarget(e,n){const r=Ya(e);let i=!0;const s=new Map;return L.forEach(this.ln(n),o=>this.hn(e,o).next(c=>{i&&(i=!!c),s.set(o,c)})).next(()=>{if(i){let o=ze();const c=[];return L.forEach(s,(u,h)=>{Z("IndexedDbIndexManager",`Using index ${function(k){return`id=${k.indexId}|cg=${k.collectionGroup}|f=${k.fields.map(P=>`${P.fieldPath}:${P.kind}`).join(",")}`}(u)} to execute ${ca(n)}`);const f=function(k,P){const B=hv(P);if(B===void 0)return null;for(const V of np(k,B.fieldPath))switch(V.op){case"array-contains-any":return V.value.arrayValue.values||[];case"array-contains":return[V.value]}return null}(h,u),p=function(k,P){const B=new Map;for(const V of Mo(P))for(const F of np(k,V.fieldPath))switch(F.op){case"==":case"in":B.set(V.fieldPath.canonicalString(),F.value);break;case"not-in":case"!=":return B.set(V.fieldPath.canonicalString(),F.value),Array.from(B.values())}return null}(h,u),m=function(k,P){const B=[];let V=!0;for(const F of Mo(P)){const M=F.kind===0?ER(k,F.fieldPath,k.startAt):IR(k,F.fieldPath,k.startAt);B.push(M.value),V&&(V=M.inclusive)}return new Fc(B,V)}(h,u),y=function(k,P){const B=[];let V=!0;for(const F of Mo(P)){const M=F.kind===0?IR(k,F.fieldPath,k.endAt):ER(k,F.fieldPath,k.endAt);B.push(M.value),V&&(V=M.inclusive)}return new Fc(B,V)}(h,u),v=this.Pn(u,h,m),I=this.Pn(u,h,y),A=this.In(u,h,p),N=this.dn(u.indexId,f,v,m.inclusive,I,y.inclusive,A);return L.forEach(N,D=>r.H(D,n.limit).next(k=>{k.forEach(P=>{const B=le.fromSegments(P.documentKey);o.has(B)||(o=o.add(B),c.push(B))})}))}).next(()=>c)}return L.resolve(null)})}ln(e){let n=this.cn.get(e);return n||(e.filters.length===0?n=[e]:n=$9(_t.create(e.filters,"and")).map(r=>_v(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.cn.set(e,n),n)}dn(e,n,r,i,s,o,c){const u=(n!=null?n.length:1)*Math.max(r.length,s.length),h=u/(n!=null?n.length:1),f=[];for(let p=0;p<u;++p){const m=n?this.Tn(n[p/h]):Jd,y=this.En(e,m,r[p%h],i),v=this.An(e,m,s[p%h],o),I=c.map(A=>this.En(e,m,A,!0));f.push(...this.createRange(y,v,I))}return f}En(e,n,r,i){const s=new qo(e,le.empty(),n,r);return i?s:s.Zt()}An(e,n,r,i){const s=new qo(e,le.empty(),n,r);return i?s.Zt():s}hn(e,n){const r=new $R(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const c of s)r.nn(c)&&(!o||c.fields.length>o.fields.length)&&(o=c);return o})}getIndexType(e,n){let r=2;const i=this.ln(n);return L.forEach(i,s=>this.hn(e,s).next(o=>{o?r!==0&&o.fields.length<function(u){let h=new Rt(Jt.comparator),f=!1;for(const p of u.filters)for(const m of p.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?f=!0:h=h.add(m.field));for(const p of u.orderBy)p.field.isKeyField()||(h=h.add(p.field));return h.size+(f?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}Rn(e,n){const r=new Vl;for(const i of Mo(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Yt(i.kind);$o.Ct.dt(s,o)}return r.zt()}Tn(e){const n=new Vl;return $o.Ct.dt(e,n.Yt(0)),n.zt()}Vn(e,n){const r=new Vl;return $o.Ct.dt(ih(this.databaseId,n),r.Yt(function(s){const o=Mo(s);return o.length===0?0:o[o.length-1].kind}(e))),r.zt()}In(e,n,r){if(r===null)return[];let i=[];i.push(new Vl);let s=0;for(const o of Mo(e)){const c=r[s++];for(const u of i)if(this.mn(n,o.fieldPath)&&sh(c))i=this.fn(i,o,c);else{const h=u.Yt(o.kind);$o.Ct.dt(c,h)}}return this.gn(i)}Pn(e,n,r){return this.In(e,n,r.position)}gn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].zt();return n}fn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const c of i){const u=new Vl;u.seed(c.zt()),$o.Ct.dt(o,u.Yt(n.kind)),s.push(u)}return s}mn(e,n){return!!e.filters.find(r=>r instanceof Xe&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=Fl(e),i=Qa(e);return(n?r.G("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.G()).next(s=>{const o=[];return L.forEach(s,c=>i.get([c.indexId,this.uid]).next(u=>{o.push(function(f,p){const m=p?new eh(p.sequenceNumber,new xr(ha(p.readTime),new le(Ri(p.documentKey)),p.largestBatchId)):eh.empty(),y=f.fields.map(([v,I])=>new gf(Jt.fromServerFormat(v),I));return new ep(f.indexId,f.collectionGroup,y,m)}(c,u))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:Ve(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=Fl(e),s=Qa(e);return this.pn(e).next(o=>i.G("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(c=>L.forEach(c,u=>s.put(LR(u.indexId,this.user,o,r)))))}updateIndexEntries(e,n){const r=new Map;return L.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?L.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(c=>(r.set(i.collectionGroup,c),L.forEach(c,u=>this.yn(e,i,u).next(h=>{const f=this.wn(s,u);return h.isEqual(f)?L.resolve():this.Sn(e,s,u,h,f)}))))})}bn(e,n,r,i){return Ya(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Vn(r,n.key),documentKey:n.key.path.toArray()})}Dn(e,n,r,i){return Ya(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Vn(r,n.key),n.key.path.toArray()])}yn(e,n,r){const i=Ya(e);let s=new Rt(Ds);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Vn(r,n)])},(o,c)=>{s=s.add(new qo(r.indexId,n,c.arrayValue,c.directionalValue))}).next(()=>s)}wn(e,n){let r=new Rt(Ds);const i=this.Rn(n,e);if(i==null)return r;const s=hv(n);if(s!=null){const o=e.data.field(s.fieldPath);if(sh(o))for(const c of o.arrayValue.values||[])r=r.add(new qo(n.indexId,e.key,this.Tn(c),i))}else r=r.add(new qo(n.indexId,e.key,Jd,i));return r}Sn(e,n,r,i,s){Z("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(u,h,f,p,m){const y=u.getIterator(),v=h.getIterator();let I=Ga(y),A=Ga(v);for(;I||A;){let N=!1,D=!1;if(I&&A){const k=f(I,A);k<0?D=!0:k>0&&(N=!0)}else I!=null?D=!0:N=!0;N?(p(A),A=Ga(v)):D?(m(I),I=Ga(y)):(I=Ga(y),A=Ga(v))}}(i,s,Ds,c=>{o.push(this.bn(e,n,r,c))},c=>{o.push(this.Dn(e,n,r,c))}),L.waitFor(o)}pn(e){let n=1;return Qa(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,c)=>Ds(o,c)).filter((o,c,u)=>!c||Ds(o,u[c-1])!==0);const i=[];i.push(e);for(const o of r){const c=Ds(o,e),u=Ds(o,n);if(c===0)i[0]=e.Zt();else if(c>0&&u<0)i.push(o),i.push(o.Zt());else if(u>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];const c=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,Jd,[]],u=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,Jd,[]];s.push(IDBKeyRange.bound(c,u))}return s}Cn(e,n){return Ds(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(WR)}getMinOffset(e,n){return L.mapArray(this.ln(n),r=>this.hn(e,r).next(i=>i||_e())).next(WR)}}function HR(t){return wn(t,"collectionParents")}function Ya(t){return wn(t,"indexEntries")}function Fl(t){return wn(t,"indexConfiguration")}function Qa(t){return wn(t,"indexState")}function WR(t){be(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;gE(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new xr(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zR={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class sr{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new sr(e,sr.DEFAULT_COLLECTION_PERCENTILE,sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sD(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let c=0;const u=r.Z({range:o},(f,p,m)=>(c++,m.delete()));s.push(u.next(()=>{be(c===1)}));const h=[];for(const f of n.mutations){const p=ck(e,f.key.path,n.batchId);s.push(i.delete(p)),h.push(f.key)}return L.waitFor(s).next(()=>h)}function cp(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw _e();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sr.DEFAULT_COLLECTION_PERCENTILE=10,sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sr.DEFAULT=new sr(41943040,sr.DEFAULT_COLLECTION_PERCENTILE,sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sr.DISABLED=new sr(-1,0,0);class Ag{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.vn={}}static Pt(e,n,r,i){be(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new Ag(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Os(e).Z({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=oc(e),o=Os(e);return o.add({}).next(c=>{be(typeof c=="number");const u=new TE(c,n,r,i),h=function(y,v,I){const A=I.baseMutations.map(D=>sp(y.ht,D)),N=I.mutations.map(D=>sp(y.ht,D));return{userId:v,batchId:I.batchId,localWriteTimeMs:I.localWriteTime.toMillis(),baseMutations:A,mutations:N}}(this.serializer,this.userId,u),f=[];let p=new Rt((m,y)=>Ve(m.canonicalString(),y.canonicalString()));for(const m of i){const y=ck(this.userId,m.key.path,c);p=p.add(m.key.path.popLast()),f.push(o.put(h)),f.push(s.put(y,x6))}return p.forEach(m=>{f.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.vn[c]=u.keys()}),L.waitFor(f).next(()=>u)})}lookupMutationBatch(e,n){return Os(e).get(n).next(r=>r?(be(r.userId===this.userId),Bo(this.serializer,r)):null)}Fn(e,n){return this.vn[n]?L.resolve(this.vn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.vn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Os(e).Z({index:"userMutationsIndex",range:i},(o,c,u)=>{c.userId===this.userId&&(be(c.batchId>=r),s=Bo(this.serializer,c)),u.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Os(e).Z({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Os(e).G("userMutationsIndex",n).next(r=>r.map(i=>Bo(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=mf(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return oc(e).Z({range:i},(o,c,u)=>{const[h,f,p]=o,m=Ri(f);if(h===this.userId&&n.path.isEqual(m))return Os(e).get(p).next(y=>{if(!y)throw _e();be(y.userId===this.userId),s.push(Bo(this.serializer,y))});u.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Rt(Ve);const i=[];return n.forEach(s=>{const o=mf(this.userId,s.path),c=IDBKeyRange.lowerBound(o),u=oc(e).Z({range:c},(h,f,p)=>{const[m,y,v]=h,I=Ri(y);m===this.userId&&s.path.isEqual(I)?r=r.add(v):p.done()});i.push(u)}),L.waitFor(i).next(()=>this.Mn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=mf(this.userId,r),o=IDBKeyRange.lowerBound(s);let c=new Rt(Ve);return oc(e).Z({range:o},(u,h,f)=>{const[p,m,y]=u,v=Ri(m);p===this.userId&&r.isPrefixOf(v)?v.length===i&&(c=c.add(y)):f.done()}).next(()=>this.Mn(e,c))}Mn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(Os(e).get(s).next(o=>{if(o===null)throw _e();be(o.userId===this.userId),r.push(Bo(this.serializer,o))}))}),L.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return sD(e.ue,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.xn(n.batchId)}),L.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}xn(e){delete this.vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return L.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return oc(e).Z({range:r},(s,o,c)=>{if(s[0]===this.userId){const u=Ri(s[1]);i.push(u)}else c.done()}).next(()=>{be(i.length===0)})})}containsKey(e,n){return oD(e,this.userId,n)}On(e){return aD(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function oD(t,e,n){const r=mf(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return oc(t).Z({range:s,Y:!0},(c,u,h)=>{const[f,p,m]=c;f===e&&p===i&&(o=!0),h.done()}).next(()=>o)}function Os(t){return wn(t,"mutations")}function oc(t){return wn(t,"documentMutations")}function aD(t){return wn(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static Bn(){return new da(0)}static Ln(){return new da(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W9{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.kn(e).next(n=>{const r=new da(n.highestTargetId);return n.highestTargetId=r.next(),this.qn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.kn(e).next(n=>Te.fromTimestamp(new It(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.kn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.kn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.qn(e,i)))}addTargetData(e,n){return this.Qn(e,n).next(()=>this.kn(e).next(r=>(r.targetCount+=1,this.Kn(n,r),this.qn(e,r))))}updateTargetData(e,n){return this.Qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Ja(e).delete(n.targetId)).next(()=>this.kn(e)).next(r=>(be(r.targetCount>0),r.targetCount-=1,this.qn(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return Ja(e).Z((o,c)=>{const u=su(c);u.sequenceNumber<=n&&r.get(u.targetId)===null&&(i++,s.push(this.removeTargetData(e,u)))}).next(()=>L.waitFor(s)).next(()=>i)}forEachTarget(e,n){return Ja(e).Z((r,i)=>{const s=su(i);n(s)})}kn(e){return jR(e).get("targetGlobalKey").next(n=>(be(n!==null),n))}qn(e,n){return jR(e).put("targetGlobalKey",n)}Qn(e,n){return Ja(e).put(tD(this.serializer,n))}Kn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.kn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=ca(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Ja(e).Z({range:i,index:"queryTargetsIndex"},(o,c,u)=>{const h=su(c);Ph(n,h.target)&&(s=h,u.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=qs(e);return n.forEach(o=>{const c=Xn(o.path);i.push(s.put({targetId:r,path:c})),i.push(this.referenceDelegate.addReference(e,r,o))}),L.waitFor(i)}removeMatchingKeys(e,n,r){const i=qs(e);return L.forEach(n,s=>{const o=Xn(s.path);return L.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=qs(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=qs(e);let s=ze();return i.Z({range:r,Y:!0},(o,c,u)=>{const h=Ri(o[1]),f=new le(h);s=s.add(f)}).next(()=>s)}containsKey(e,n){const r=Xn(n.path),i=IDBKeyRange.bound([r],[nk(r)],!1,!0);let s=0;return qs(e).Z({index:"documentTargetsIndex",Y:!0,range:i},([o,c],u,h)=>{o!==0&&(s++,h.done())}).next(()=>s>0)}lt(e,n){return Ja(e).get(n).next(r=>r?su(r):null)}}function Ja(t){return wn(t,"targets")}function jR(t){return wn(t,"targetGlobal")}function qs(t){return wn(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KR([t,e],[n,r]){const i=Ve(t,n);return i===0?Ve(e,r):i}class z9{constructor(e){this.$n=e,this.buffer=new Rt(KR),this.Un=0}Wn(){return++this.Un}Gn(e){const n=[e,this.Wn()];if(this.buffer.size<this.$n)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();KR(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class j9{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.zn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.jn(6e4)}stop(){this.zn&&(this.zn.cancel(),this.zn=null)}get started(){return this.zn!==null}jn(e){Z("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.zn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.zn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){mo(n)?Z("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await go(n)}await this.jn(3e5)})}}class K9{constructor(e,n){this.Hn=e,this.params=n}calculateTargetCount(e,n){return this.Hn.Jn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return L.resolve(cr.ae);const r=new z9(n);return this.Hn.forEachTarget(e,i=>r.Gn(i.sequenceNumber)).next(()=>this.Hn.Yn(e,i=>r.Gn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Hn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Hn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Z("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(zR)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Z("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),zR):this.Zn(e,n))}getCacheSize(e){return this.Hn.getCacheSize(e)}Zn(e,n){let r,i,s,o,c,u,h;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(Z("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,o=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,c=Date.now(),this.removeTargets(e,r,n))).next(p=>(s=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(h=Date.now(),nc()<=Ge.DEBUG&&Z("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${i} in `+(c-o)+`ms
	Removed ${s} targets in `+(u-c)+`ms
	Removed ${p} documents in `+(h-u)+`ms
Total Duration: ${h-f}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:p})))}}function G9(t,e){return new K9(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y9{constructor(e,n){this.db=e,this.garbageCollector=G9(this,n)}Jn(e){const n=this.Xn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Xn(e){let n=0;return this.Yn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Yn(e,n){return this.er(e,(r,i)=>n(i))}addReference(e,n,r){return Xd(e,r)}removeReference(e,n,r){return Xd(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Xd(e,n)}tr(e,n){return function(i,s){let o=!1;return aD(i).X(c=>oD(i,c,s).next(u=>(u&&(o=!0),L.resolve(!u)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.er(e,(o,c)=>{if(c<=n){const u=this.tr(e,o).next(h=>{if(!h)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Te.min()),qs(e).delete(function(p){return[0,Xn(p.path)]}(o))))});i.push(u)}}).next(()=>L.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Xd(e,n)}er(e,n){const r=qs(e);let i,s=cr.ae;return r.Z({index:"documentTargetsIndex"},([o,c],{path:u,sequenceNumber:h})=>{o===0?(s!==cr.ae&&n(new le(Ri(i)),s),s=h,i=u):s=cr.ae}).next(()=>{s!==cr.ae&&n(new le(Ri(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Xd(t,e){return qs(t).put(function(r,i){return{targetId:0,path:Xn(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(){this.changes=new _o(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Wt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?L.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q9{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Do(e).put(r)}removeEntry(e,n,r){return Do(e).delete(function(s,o){const c=s.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],op(o),c[c.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.nr(e,r)))}getEntry(e,n){let r=Wt.newInvalidDocument(n);return Do(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Ul(n))},(i,s)=>{r=this.rr(n,s)}).next(()=>r)}ir(e,n){let r={size:0,document:Wt.newInvalidDocument(n)};return Do(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Ul(n))},(i,s)=>{r={document:this.rr(n,s),size:cp(s)}}).next(()=>r)}getEntries(e,n){let r=Ar();return this.sr(e,n,(i,s)=>{const o=this.rr(i,s);r=r.insert(i,o)}).next(()=>r)}_r(e,n){let r=Ar(),i=new St(le.comparator);return this.sr(e,n,(s,o)=>{const c=this.rr(s,o);r=r.insert(s,c),i=i.insert(s,cp(o))}).next(()=>({documents:r,ar:i}))}sr(e,n,r){if(n.isEmpty())return L.resolve();let i=new Rt(QR);n.forEach(u=>i=i.add(u));const s=IDBKeyRange.bound(Ul(i.first()),Ul(i.last())),o=i.getIterator();let c=o.getNext();return Do(e).Z({index:"documentKeyIndex",range:s},(u,h,f)=>{const p=le.fromSegments([...h.prefixPath,h.collectionGroup,h.documentId]);for(;c&&QR(c,p)<0;)r(c,null),c=o.getNext();c&&c.isEqual(p)&&(r(c,h),c=o.hasNext()?o.getNext():null),c?f.W(Ul(c)):f.done()}).next(()=>{for(;c;)r(c,null),c=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,c=[o.popLast().toArray(),o.lastSegment(),op(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Do(e).G(IDBKeyRange.bound(c,u,!0)).next(h=>{s==null||s.incrementDocumentReadCount(h.length);let f=Ar();for(const p of h){const m=this.rr(le.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);m.isFoundDocument()&&(kh(n,m)||i.has(m.key))&&(f=f.insert(m.key,m))}return f})}getAllFromCollectionGroup(e,n,r,i){let s=Ar();const o=YR(n,r),c=YR(n,xr.max());return Do(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,c,!0)},(u,h,f)=>{const p=this.rr(le.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);s=s.insert(p.key,p),s.size===i&&f.done()}).next(()=>s)}newChangeBuffer(e){return new J9(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return GR(e).get("remoteDocumentGlobalKey").next(n=>(be(!!n),n))}nr(e,n){return GR(e).put("remoteDocumentGlobalKey",n)}rr(e,n){if(n){const r=M9(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(Te.min())))return r}return Wt.newInvalidDocument(e)}}function lD(t){return new Q9(t)}class J9 extends cD{constructor(e,n){super(),this.ur=e,this.trackRemovals=n,this.cr=new _o(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new Rt((s,o)=>Ve(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const c=this.cr.get(s);if(n.push(this.ur.removeEntry(e,s,c.readTime)),o.isValidDocument()){const u=NR(this.ur.serializer,o);i=i.add(s.path.popLast()),r+=cp(u)-c.size,n.push(this.ur.addEntry(e,s,u))}else if(r-=c.size,this.trackRemovals){const u=NR(this.ur.serializer,o.convertToNoDocument(Te.min()));n.push(this.ur.addEntry(e,s,u))}}),i.forEach(s=>{n.push(this.ur.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.ur.updateMetadata(e,r)),L.waitFor(n)}getFromCache(e,n){return this.ur.ir(e,n).next(r=>(this.cr.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.ur._r(e,n).next(({documents:r,ar:i})=>(i.forEach((s,o)=>{this.cr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function GR(t){return wn(t,"remoteDocumentGlobal")}function Do(t){return wn(t,"remoteDocumentsV14")}function Ul(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function YR(t,e){const n=e.documentKey.path.toArray();return[t,op(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function QR(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=Ve(n[s],r[s]),i)return i;return i=Ve(n.length,r.length),i||(i=Ve(n[n.length-2],r[r.length-2]),i||Ve(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X9{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&wu(r.mutation,i,lr.empty(),It.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ze()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ze()){const i=Si();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=ru();return s.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Si();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ze()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,c)=>{n.set(o,c)})})}computeViews(e,n,r,i){let s=Ar();const o=vu(),c=function(){return vu()}();return n.forEach((u,h)=>{const f=r.get(h.key);i.has(h.key)&&(f===void 0||f.mutation instanceof _s)?s=s.insert(h.key,h):f!==void 0?(o.set(h.key,f.mutation.getFieldMask()),wu(f.mutation,h,f.mutation.getFieldMask(),It.now())):o.set(h.key,lr.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((h,f)=>o.set(h,f)),n.forEach((h,f)=>{var p;return c.set(h,new X9(f,(p=o.get(h))!==null&&p!==void 0?p:null))}),c))}recalculateAndSaveOverlays(e,n){const r=vu();let i=new St((o,c)=>o-c),s=ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const c of o)c.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let f=r.get(u)||lr.empty();f=c.applyToLocalView(h,f),r.set(u,f);const p=(i.get(c.batchId)||ze()).add(u);i=i.insert(c.batchId,p)})}).next(()=>{const o=[],c=i.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),h=u.key,f=u.value,p=xk();f.forEach(m=>{if(!s.has(m)){const y=Fk(n.get(m),r.get(m));y!==null&&p.set(m,y),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,p))}return L.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return le.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):bk(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):L.resolve(Si());let c=-1,u=s;return o.next(h=>L.forEach(h,(f,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),s.get(f)?L.resolve():this.remoteDocumentCache.getEntry(e,f).next(m=>{u=u.insert(f,m)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,u,h,ze())).next(f=>({batchId:c,changes:Pk(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new le(n)).next(r=>{let i=ru();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=ru();return this.indexManager.getCollectionParents(e,s).next(c=>L.forEach(c,u=>{const h=function(p,m){return new al(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(f=>{f.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,h)=>{const f=h.getKey();o.get(f)===null&&(o=o.insert(f,Wt.newInvalidDocument(f)))});let c=ru();return o.forEach((u,h)=>{const f=s.get(u);f!==void 0&&wu(f.mutation,h,lr.empty(),It.now()),kh(n,h)&&(c=c.insert(u,h))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z9{constructor(e){this.serializer=e,this.lr=new Map,this.hr=new Map}getBundleMetadata(e,n){return L.resolve(this.lr.get(n))}saveBundleMetadata(e,n){return this.lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Zn(i.createTime)}}(n)),L.resolve()}getNamedQuery(e,n){return L.resolve(this.hr.get(n))}saveNamedQuery(e,n){return this.hr.set(n.name,function(i){return{name:i.name,query:nD(i.bundledQuery),readTime:Zn(i.readTime)}}(n)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eG{constructor(){this.overlays=new St(le.comparator),this.Pr=new Map}getOverlay(e,n){return L.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Si();return L.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.It(e,n,s)}),L.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Pr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Pr.delete(r)),L.resolve()}getOverlaysForCollection(e,n,r){const i=Si(),s=n.length+1,o=new le(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return L.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new St((h,f)=>h-f);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let f=s.get(h.largestBatchId);f===null&&(f=Si(),s=s.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}const c=Si(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,f)=>c.set(h,f)),!(c.size()>=i)););return L.resolve(c)}It(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Pr.get(i.largestBatchId).delete(r.key);this.Pr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new AE(n,r));let s=this.Pr.get(n);s===void 0&&(s=ze(),this.Pr.set(n,s)),this.Pr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{constructor(){this.Ir=new Rt(pn.dr),this.Tr=new Rt(pn.Er)}isEmpty(){return this.Ir.isEmpty()}addReference(e,n){const r=new pn(e,n);this.Ir=this.Ir.add(r),this.Tr=this.Tr.add(r)}Ar(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Rr(new pn(e,n))}Vr(e,n){e.forEach(r=>this.removeReference(r,n))}mr(e){const n=new le(new ft([])),r=new pn(n,e),i=new pn(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Rr(o),s.push(o.key)}),s}gr(){this.Ir.forEach(e=>this.Rr(e))}Rr(e){this.Ir=this.Ir.delete(e),this.Tr=this.Tr.delete(e)}pr(e){const n=new le(new ft([])),r=new pn(n,e),i=new pn(n,e+1);let s=ze();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new pn(e,0),r=this.Ir.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class pn{constructor(e,n){this.key=e,this.yr=n}static dr(e,n){return le.comparator(e.key,n.key)||Ve(e.yr,n.yr)}static Er(e,n){return Ve(e.yr,n.yr)||le.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tG{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.wr=1,this.Sr=new Rt(pn.dr)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.wr;this.wr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new TE(s,n,r,i);this.mutationQueue.push(o);for(const c of i)this.Sr=this.Sr.add(new pn(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return L.resolve(o)}lookupMutationBatch(e,n){return L.resolve(this.br(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Dr(r),s=i<0?0:i;return L.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?-1:this.wr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new pn(n,0),i=new pn(n,Number.POSITIVE_INFINITY),s=[];return this.Sr.forEachInRange([r,i],o=>{const c=this.br(o.yr);s.push(c)}),L.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Rt(Ve);return n.forEach(i=>{const s=new pn(i,0),o=new pn(i,Number.POSITIVE_INFINITY);this.Sr.forEachInRange([s,o],c=>{r=r.add(c.yr)})}),L.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;le.isDocumentKey(s)||(s=s.child(""));const o=new pn(new le(s),0);let c=new Rt(Ve);return this.Sr.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(c=c.add(u.yr)),!0)},o),L.resolve(this.Cr(c))}Cr(e){const n=[];return e.forEach(r=>{const i=this.br(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){be(this.vr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Sr;return L.forEach(n.mutations,i=>{const s=new pn(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Sr=r})}xn(e){}containsKey(e,n){const r=new pn(n,0),i=this.Sr.firstAfterOrEqual(r);return L.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}vr(e,n){return this.Dr(e)}Dr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}br(e){const n=this.Dr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nG{constructor(e){this.Fr=e,this.docs=function(){return new St(le.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Fr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return L.resolve(r?r.document.mutableCopy():Wt.newInvalidDocument(n))}getEntries(e,n){let r=Ar();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Wt.newInvalidDocument(i))}),L.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Ar();const o=n.path,c=new le(o.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:h,value:{document:f}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||gE(ik(f),r)<=0||(i.has(f.key)||kh(n,f))&&(s=s.insert(f.key,f.mutableCopy()))}return L.resolve(s)}getAllFromCollectionGroup(e,n,r,i){_e()}Mr(e,n){return L.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new rG(this)}getSize(e){return L.resolve(this.size)}}class rG extends cD{constructor(e){super(),this.ur=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ur.addEntry(e,i)):this.ur.removeEntry(r)}),L.waitFor(n)}getFromCache(e,n){return this.ur.getEntry(e,n)}getAllFromCache(e,n){return this.ur.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iG{constructor(e){this.persistence=e,this.Or=new _o(n=>ca(n),Ph),this.lastRemoteSnapshotVersion=Te.min(),this.highestTargetId=0,this.Nr=0,this.Br=new xE,this.targetCount=0,this.Lr=da.Bn()}forEachTarget(e,n){return this.Or.forEach((r,i)=>n(i)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.Nr)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Nr&&(this.Nr=n),L.resolve()}Qn(e){this.Or.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Lr=new da(n),this.highestTargetId=n),e.sequenceNumber>this.Nr&&(this.Nr=e.sequenceNumber)}addTargetData(e,n){return this.Qn(n),this.targetCount+=1,L.resolve()}updateTargetData(e,n){return this.Qn(n),L.resolve()}removeTargetData(e,n){return this.Or.delete(n.target),this.Br.mr(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Or.forEach((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.Or.delete(o),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),L.waitFor(s).next(()=>i)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,n){const r=this.Or.get(n)||null;return L.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Ar(n,r),L.resolve()}removeMatchingKeys(e,n,r){this.Br.Vr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),L.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.mr(n),L.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.pr(n);return L.resolve(r)}containsKey(e,n){return L.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(e,n){this.kr={},this.overlays={},this.qr=new cr(0),this.Qr=!1,this.Qr=!0,this.referenceDelegate=e(this),this.Kr=new iG(this),this.indexManager=new q9,this.remoteDocumentCache=function(i){return new nG(i)}(r=>this.referenceDelegate.$r(r)),this.serializer=new eD(n),this.Ur=new Z9(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Qr=!1,Promise.resolve()}get started(){return this.Qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new eG,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.kr[e.toKey()];return r||(r=new tG(n,this.referenceDelegate),this.kr[e.toKey()]=r),r}getTargetCache(){return this.Kr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ur}runTransaction(e,n,r){Z("MemoryPersistence","Starting transaction:",e);const i=new sG(this.qr.next());return this.referenceDelegate.Wr(),r(i).next(s=>this.referenceDelegate.Gr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}zr(e,n){return L.or(Object.values(this.kr).map(r=>()=>r.containsKey(e,n)))}}class sG extends ok{constructor(e){super(),this.currentSequenceNumber=e}}class Rg{constructor(e){this.persistence=e,this.jr=new xE,this.Hr=null}static Jr(e){return new Rg(e)}get Yr(){if(this.Hr)return this.Hr;throw _e()}addReference(e,n,r){return this.jr.addReference(r,n),this.Yr.delete(r.toString()),L.resolve()}removeReference(e,n,r){return this.jr.removeReference(r,n),this.Yr.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,n){return this.Yr.add(n.toString()),L.resolve()}removeTarget(e,n){this.jr.mr(n.targetId).forEach(i=>this.Yr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Yr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Wr(){this.Hr=new Set}Gr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.Yr,r=>{const i=le.fromPath(r);return this.Zr(e,i).next(s=>{s||n.removeEntry(i,Te.min())})}).next(()=>(this.Hr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Zr(e,n).next(r=>{r?this.Yr.delete(n.toString()):this.Yr.add(n.toString())})}$r(e){return 0}Zr(e,n){return L.or([()=>L.resolve(this.jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.zr(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oG{constructor(e){this.serializer=e}B(e,n,r,i){const s=new _g("createOrUpgrade",n);r<1&&i>=1&&(function(u){u.createObjectStore("owner")}(e),function(u){u.createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",hR,{unique:!0}),u.createObjectStore("documentMutations")}(e),JR(e),function(u){u.createObjectStore("remoteDocuments")}(e));let o=L.resolve();return r<3&&i>=3&&(r!==0&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),JR(e)),o=o.next(()=>function(u){const h=u.store("targetGlobal"),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Te.min().toTimestamp(),targetCount:0};return h.put("targetGlobalKey",f)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(u,h){return h.store("mutations").G().next(f=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",hR,{unique:!0});const p=h.store("mutations"),m=f.map(y=>p.put(y));return L.waitFor(m)})}(e,s))),o=o.next(()=>{(function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.ei(s))),r<6&&i>=6&&(o=o.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ti(s)))),r<7&&i>=7&&(o=o.next(()=>this.ni(s))),r<8&&i>=8&&(o=o.next(()=>this.ri(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.ii(s))),r<11&&i>=11&&(o=o.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(u){const h=u.createObjectStore("documentOverlays",{keyPath:q6});h.createIndex("collectionPathOverlayIndex",H6,{unique:!1}),h.createIndex("collectionGroupOverlayIndex",W6,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(u){const h=u.createObjectStore("remoteDocumentsV14",{keyPath:k6});h.createIndex("documentKeyIndex",D6),h.createIndex("collectionGroupIndex",O6)}(e)).next(()=>this.si(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.oi(e,s))),r<15&&i>=15&&(o=o.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:F6}).createIndex("sequenceNumberIndex",U6,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:B6}).createIndex("documentKeyIndex",$6,{unique:!1})}(e))),o}ti(e){let n=0;return e.store("remoteDocuments").Z((r,i)=>{n+=cp(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ei(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.G().next(i=>L.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.G("userMutationsIndex",o).next(c=>L.forEach(c,u=>{be(u.userId===s.userId);const h=Bo(this.serializer,u);return sD(e,s.userId,h).next(()=>{})}))}))}ni(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.Z((o,c)=>{const u=new ft(o),h=function(p){return[0,Xn(p)]}(u);s.push(n.get(h).next(f=>f?L.resolve():(p=>n.put({targetId:0,path:Xn(p),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>L.waitFor(s))})}ri(e,n){e.createObjectStore("collectionParents",{keyPath:V6});const r=n.store("collectionParents"),i=new PE,s=o=>{if(i.add(o)){const c=o.lastSegment(),u=o.popLast();return r.put({collectionId:c,parent:Xn(u)})}};return n.store("remoteDocuments").Z({Y:!0},(o,c)=>{const u=new ft(o);return s(u.popLast())}).next(()=>n.store("documentMutations").Z({Y:!0},([o,c,u],h)=>{const f=Ri(c);return s(f.popLast())}))}ii(e){const n=e.store("targets");return n.Z((r,i)=>{const s=su(i),o=tD(this.serializer,s);return n.put(o)})}si(e,n){const r=n.store("remoteDocuments"),i=[];return r.Z((s,o)=>{const c=n.store("remoteDocumentsV14"),u=function(p){return p.document?new le(ft.fromString(p.document.name).popFirst(5)):p.noDocument?le.fromSegments(p.noDocument.path):p.unknownDocument?le.fromSegments(p.unknownDocument.path):_e()}(o).path.toArray(),h={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(c.put(h))}).next(()=>L.waitFor(i))}oi(e,n){const r=n.store("mutations"),i=lD(this.serializer),s=new hD(Rg.Jr,this.serializer.ht);return r.G().next(o=>{const c=new Map;return o.forEach(u=>{var h;let f=(h=c.get(u.userId))!==null&&h!==void 0?h:ze();Bo(this.serializer,u).keys().forEach(p=>f=f.add(p)),c.set(u.userId,f)}),L.forEach(c,(u,h)=>{const f=new Ln(h),p=bg.Pt(this.serializer,f),m=s.getIndexManager(f),y=Ag.Pt(f,this.serializer,m,s.referenceDelegate);return new uD(i,y,p,m).recalculateAndSaveOverlaysForDocumentKeys(new dv(n,cr.ae),u).next()})})}}function JR(t){t.createObjectStore("targetDocuments",{keyPath:M6}).createIndex("documentTargetsIndex",L6,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",N6,{unique:!0}),t.createObjectStore("targetGlobal")}const j_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class kE{constructor(e,n,r,i,s,o,c,u,h,f,p=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this._i=s,this.window=o,this.document=c,this.ai=h,this.ui=f,this.ci=p,this.qr=null,this.Qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.li=null,this.inForeground=!1,this.hi=null,this.Pi=null,this.Ii=Number.NEGATIVE_INFINITY,this.di=m=>Promise.resolve(),!kE.C())throw new re(q.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Y9(this,i),this.Ti=n+"main",this.serializer=new eD(u),this.Ei=new Xi(this.Ti,this.ci,new oG(this.serializer)),this.Kr=new W9(this.referenceDelegate,this.serializer),this.remoteDocumentCache=lD(this.serializer),this.Ur=new L9,this.window&&this.window.localStorage?this.Ai=this.window.localStorage:(this.Ai=null,f===!1&&Qt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ri().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new re(q.FAILED_PRECONDITION,j_);return this.Vi(),this.mi(),this.fi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Kr.getHighestSequenceNumber(e))}).then(e=>{this.qr=new cr(e,this.ai)}).then(()=>{this.Qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}gi(e){return this.di=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.k(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this._i.enqueueAndForget(async()=>{this.started&&await this.Ri()}))}Ri(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Zd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.pi(e).next(n=>{n||(this.isPrimary=!1,this._i.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.yi(e)).next(n=>this.isPrimary&&!n?this.wi(e).next(()=>!1):!!n&&this.Si(e).next(()=>!0))).catch(e=>{if(mo(e))return Z("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Z("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this._i.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}pi(e){return Bl(e).get("owner").next(n=>L.resolve(this.bi(n)))}Di(e){return Zd(e).delete(this.clientId)}async Ci(){if(this.isPrimary&&!this.vi(this.Ii,18e5)){this.Ii=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=wn(n,"clientMetadata");return r.G().next(i=>{const s=this.Fi(i,18e5),o=i.filter(c=>s.indexOf(c)===-1);return L.forEach(o,c=>r.delete(c.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Ai)for(const n of e)this.Ai.removeItem(this.Mi(n.clientId))}}fi(){this.Pi=this._i.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ri().then(()=>this.Ci()).then(()=>this.fi()))}bi(e){return!!e&&e.ownerId===this.clientId}yi(e){return this.ui?L.resolve(!0):Bl(e).get("owner").next(n=>{if(n!==null&&this.vi(n.leaseTimestampMs,5e3)&&!this.xi(n.ownerId)){if(this.bi(n)&&this.networkEnabled)return!0;if(!this.bi(n)){if(!n.allowTabSynchronization)throw new re(q.FAILED_PRECONDITION,j_);return!1}}return!(!this.networkEnabled||!this.inForeground)||Zd(e).G().next(r=>this.Fi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,c=this.networkEnabled===i.networkEnabled;if(s||o&&c)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&Z("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Qr=!1,this.Oi(),this.Pi&&(this.Pi.cancel(),this.Pi=null),this.Ni(),this.Bi(),await this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new dv(e,cr.ae);return this.wi(n).next(()=>this.Di(n))}),this.Ei.close(),this.Li()}Fi(e,n){return e.filter(r=>this.vi(r.updateTimeMs,n)&&!this.xi(r.clientId))}ki(){return this.runTransaction("getActiveClients","readonly",e=>Zd(e).G().next(n=>this.Fi(n,18e5).map(r=>r.clientId)))}get started(){return this.Qr}getMutationQueue(e,n){return Ag.Pt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Kr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new H9(e,this.serializer.ht.databaseId)}getDocumentOverlayCache(e){return bg.Pt(this.serializer,e)}getBundleCache(){return this.Ur}runTransaction(e,n,r){Z("IndexedDbPersistence","Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=function(u){return u===15?j6:u===14?hk:u===13?uk:u===12?z6:u===11?lk:void _e()}(this.ci);let o;return this.Ei.runTransaction(e,i,s,c=>(o=new dv(c,this.qr?this.qr.next():cr.ae),n==="readwrite-primary"?this.pi(o).next(u=>!!u||this.yi(o)).next(u=>{if(!u)throw Qt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this._i.enqueueRetryable(()=>this.di(!1)),new re(q.FAILED_PRECONDITION,sk);return r(o)}).next(u=>this.Si(o).next(()=>u)):this.qi(o).next(()=>r(o)))).then(c=>(o.raiseOnCommittedEvent(),c))}qi(e){return Bl(e).get("owner").next(n=>{if(n!==null&&this.vi(n.leaseTimestampMs,5e3)&&!this.xi(n.ownerId)&&!this.bi(n)&&!(this.ui||this.allowTabSynchronization&&n.allowTabSynchronization))throw new re(q.FAILED_PRECONDITION,j_)})}Si(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Bl(e).put("owner",n)}static C(){return Xi.C()}wi(e){const n=Bl(e);return n.get("owner").next(r=>this.bi(r)?(Z("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):L.resolve())}vi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Qt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Vi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.hi=()=>{this._i.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ri()))},this.document.addEventListener("visibilitychange",this.hi),this.inForeground=this.document.visibilityState==="visible")}Ni(){this.hi&&(this.document.removeEventListener("visibilitychange",this.hi),this.hi=null)}mi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.li=()=>{this.Oi();const n=/(?:Version|Mobile)\/1[456]/;Oz()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this._i.enterRestrictedMode(!0),this._i.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.li))}Bi(){this.li&&(this.window.removeEventListener("pagehide",this.li),this.li=null)}xi(e){var n;try{const r=((n=this.Ai)===null||n===void 0?void 0:n.getItem(this.Mi(e)))!==null;return Z("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Qt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Oi(){if(this.Ai)try{this.Ai.setItem(this.Mi(this.clientId),String(Date.now()))}catch(e){Qt("Failed to set zombie client id.",e)}}Li(){if(this.Ai)try{this.Ai.removeItem(this.Mi(this.clientId))}catch{}}Mi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Bl(t){return wn(t,"owner")}function Zd(t){return wn(t,"clientMetadata")}function dD(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Qi=r,this.Ki=i}static $i(e,n){let r=ze(),i=ze();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new DE(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aG{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{constructor(){this.Ui=!1,this.Wi=!1,this.Gi=100,this.zi=8}initialize(e,n){this.ji=e,this.indexManager=n,this.Ui=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Hi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Ji(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new aG;return this.Yi(e,n,o).next(c=>{if(s.result=c,this.Wi)return this.Zi(e,n,o,c.size)})}).next(()=>s.result)}Zi(e,n,r,i){return r.documentReadCount<this.Gi?(nc()<=Ge.DEBUG&&Z("QueryEngine","SDK will not create cache indexes for query:",rc(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Gi,"documents"),L.resolve()):(nc()<=Ge.DEBUG&&Z("QueryEngine","Query:",rc(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.zi*i?(nc()<=Ge.DEBUG&&Z("QueryEngine","The SDK decides to create cache indexes for query:",rc(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Rr(n))):L.resolve())}Hi(e,n){if(TR(n))return L.resolve(null);let r=Rr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=rp(n,null,"F"),r=Rr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ze(...s);return this.ji.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.Xi(n,c);return this.es(n,h,o,u.readTime)?this.Hi(e,rp(n,null,"F")):this.ts(e,h,n,u)}))})))}Ji(e,n,r,i){return TR(n)||i.isEqual(Te.min())?L.resolve(null):this.ji.getDocuments(e,r).next(s=>{const o=this.Xi(n,s);return this.es(n,o,r,i)?L.resolve(null):(nc()<=Ge.DEBUG&&Z("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),rc(n)),this.ts(e,o,n,rk(i,-1)).next(c=>c))})}Xi(e,n){let r=new Rt(Sk(e));return n.forEach((i,s)=>{kh(e,s)&&(r=r.add(s))}),r}es(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Yi(e,n,r){return nc()<=Ge.DEBUG&&Z("QueryEngine","Using full collection scan to execute query:",rc(n)),this.ji.getDocumentsMatchingQuery(e,n,xr.min(),r)}ts(e,n,r,i){return this.ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cG{constructor(e,n,r,i){this.persistence=e,this.ns=n,this.serializer=i,this.rs=new St(Ve),this.ss=new _o(s=>ca(s),Ph),this.os=new Map,this._s=e.getRemoteDocumentCache(),this.Kr=e.getTargetCache(),this.Ur=e.getBundleCache(),this.us(r)}us(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new uD(this._s,this.mutationQueue,this.documentOverlayCache,this.indexManager),this._s.setIndexManager(this.indexManager),this.ns.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.rs))}}function pD(t,e,n,r){return new cG(t,e,n,r)}async function gD(t,e){const n=ve(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.us(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],c=[];let u=ze();for(const h of i){o.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}for(const h of s){c.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(h=>({cs:h,removedBatchIds:o,addedBatchIds:c}))})})}function lG(t,e){const n=ve(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n._s.newChangeBuffer({trackRemovals:!0});return function(c,u,h,f){const p=h.batch,m=p.keys();let y=L.resolve();return m.forEach(v=>{y=y.next(()=>f.getEntry(u,v)).next(I=>{const A=h.docVersions.get(v);be(A!==null),I.version.compareTo(A)<0&&(p.applyToRemoteDocument(I,h),I.isValidDocument()&&(I.setReadTime(h.commitVersion),f.addEntry(I)))})}),y.next(()=>c.mutationQueue.removeMutationBatch(u,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=ze();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(u=u.add(c.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function mD(t){const e=ve(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Kr.getLastRemoteSnapshotVersion(n))}function uG(t,e){const n=ve(t),r=e.snapshotVersion;let i=n.rs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n._s.newChangeBuffer({trackRemovals:!0});i=n.rs;const c=[];e.targetChanges.forEach((f,p)=>{const m=i.get(p);if(!m)return;c.push(n.Kr.removeMatchingKeys(s,f.removedDocuments,p).next(()=>n.Kr.addMatchingKeys(s,f.addedDocuments,p)));let y=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(yn.EMPTY_BYTE_STRING,Te.min()).withLastLimboFreeSnapshotVersion(Te.min()):f.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(f.resumeToken,r)),i=i.insert(p,y),function(I,A,N){return I.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=3e8?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0}(m,y,f)&&c.push(n.Kr.updateTargetData(s,y))});let u=Ar(),h=ze();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(s,f))}),c.push(hG(s,o,e.documentUpdates).next(f=>{u=f.ls,h=f.hs})),!r.isEqual(Te.min())){const f=n.Kr.getLastRemoteSnapshotVersion(s).next(p=>n.Kr.setTargetsMetadata(s,s.currentSequenceNumber,r));c.push(f)}return L.waitFor(c).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,h)).next(()=>u)}).then(s=>(n.rs=i,s))}function hG(t,e,n){let r=ze(),i=ze();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Ar();return n.forEach((c,u)=>{const h=s.get(c);u.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(Te.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):Z("LocalStore","Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",u.version)}),{ls:o,hs:i}})}function dG(t,e){const n=ve(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function lp(t,e){const n=ve(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Kr.getTargetData(r,e).next(s=>s?(i=s,L.resolve(i)):n.Kr.allocateTargetId(r).next(o=>(i=new Zi(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Kr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.rs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.rs=n.rs.insert(r.targetId,r),n.ss.set(e,r.targetId)),r})}async function Hc(t,e,n){const r=ve(t),i=r.rs.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!mo(o))throw o;Z("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.rs=r.rs.remove(e),r.ss.delete(i.target)}function Rv(t,e,n){const r=ve(t);let i=Te.min(),s=ze();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,h,f){const p=ve(u),m=p.ss.get(f);return m!==void 0?L.resolve(p.rs.get(m)):p.Kr.getTargetData(h,f)}(r,o,Rr(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Kr.getMatchingKeysForTargetId(o,c.targetId).next(u=>{s=u})}).next(()=>r.ns.getDocumentsMatchingQuery(o,e,n?i:Te.min(),n?s:ze())).next(c=>(vD(r,Rk(e),c),{documents:c,Ps:s})))}function _D(t,e){const n=ve(t),r=ve(n.Kr),i=n.rs.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.lt(s,e).next(o=>o?o.target:null))}function yD(t,e){const n=ve(t),r=n.os.get(e)||Te.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n._s.getAllFromCollectionGroup(i,e,rk(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(vD(n,e,i),i))}function vD(t,e,n){let r=t.os.get(e)||Te.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.os.set(e,r)}function XR(t,e){return`firestore_clients_${t}_${e}`}function ZR(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function K_(t,e){return`firestore_targets_${t}_${e}`}class up{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Es(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new re(i.error.code,i.error.message))),o?new up(e,n,i.state,s):(Qt("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}As(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Eu{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Es(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new re(r.error.code,r.error.message))),s?new Eu(e,r.state,i):(Qt("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}As(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class hp{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=EE();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=ak(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new hp(e,s):(Qt("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class OE{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new OE(n.clientId,n.onlineState):(Qt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Sv{constructor(){this.activeTargetIds=EE()}Rs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}As(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class G_{constructor(e,n,r,i,s){this.window=e,this._i=n,this.persistenceKey=r,this.fs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.gs=this.ps.bind(this),this.ys=new St(Ve),this.started=!1,this.ws=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ss=XR(this.persistenceKey,this.fs),this.bs=function(u){return`firestore_sequence_number_${u}`}(this.persistenceKey),this.ys=this.ys.insert(this.fs,new Sv),this.Ds=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Cs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.vs=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.Fs=function(u){return`firestore_online_state_${u}`}(this.persistenceKey),this.Ms=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.gs)}static C(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.ki();for(const r of e){if(r===this.fs)continue;const i=this.getItem(XR(this.persistenceKey,r));if(i){const s=hp.Es(r,i);s&&(this.ys=this.ys.insert(s.clientId,s))}}this.xs();const n=this.storage.getItem(this.Fs);if(n){const r=this.Os(n);r&&this.Ns(r)}for(const r of this.ws)this.ps(r);this.ws=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.bs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Bs(this.ys)}isActiveQueryTarget(e){let n=!1;return this.ys.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,n,r){this.Ls(e,n,r),this.ks(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(K_(this.persistenceKey,e));if(r){const i=Eu.Es(e,r);i&&(n=i.state)}}return this.qs.Rs(e),this.xs(),n}removeLocalQueryTarget(e){this.qs.Vs(e),this.xs()}isLocalQueryTarget(e){return this.qs.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(K_(this.persistenceKey,e))}updateQueryState(e,n,r){this.Qs(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.ks(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Ks(e)}notifyBundleLoaded(e){this.$s(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.gs),this.removeItem(this.Ss),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return Z("SharedClientState","READ",e,n),n}setItem(e,n){Z("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){Z("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ps(e){const n=e;if(n.storageArea===this.storage){if(Z("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ss)return void Qt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this._i.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.Ds.test(n.key)){if(n.newValue==null){const r=this.Us(n.key);return this.Ws(r,null)}{const r=this.Gs(n.key,n.newValue);if(r)return this.Ws(r.clientId,r)}}else if(this.Cs.test(n.key)){if(n.newValue!==null){const r=this.zs(n.key,n.newValue);if(r)return this.js(r)}}else if(this.vs.test(n.key)){if(n.newValue!==null){const r=this.Hs(n.key,n.newValue);if(r)return this.Js(r)}}else if(n.key===this.Fs){if(n.newValue!==null){const r=this.Os(n.newValue);if(r)return this.Ns(r)}}else if(n.key===this.bs){const r=function(s){let o=cr.ae;if(s!=null)try{const c=JSON.parse(s);be(typeof c=="number"),o=c}catch(c){Qt("SharedClientState","Failed to read sequence number from WebStorage",c)}return o}(n.newValue);r!==cr.ae&&this.sequenceNumberHandler(r)}else if(n.key===this.Ms){const r=this.Ys(n.newValue);await Promise.all(r.map(i=>this.syncEngine.Zs(i)))}}}else this.ws.push(n)})}}get qs(){return this.ys.get(this.fs)}xs(){this.setItem(this.Ss,this.qs.As())}Ls(e,n,r){const i=new up(this.currentUser,e,n,r),s=ZR(this.persistenceKey,this.currentUser,e);this.setItem(s,i.As())}ks(e){const n=ZR(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Ks(e){const n={clientId:this.fs,onlineState:e};this.storage.setItem(this.Fs,JSON.stringify(n))}Qs(e,n,r){const i=K_(this.persistenceKey,e),s=new Eu(e,n,r);this.setItem(i,s.As())}$s(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Ms,n)}Us(e){const n=this.Ds.exec(e);return n?n[1]:null}Gs(e,n){const r=this.Us(e);return hp.Es(r,n)}zs(e,n){const r=this.Cs.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return up.Es(new Ln(s),i,n)}Hs(e,n){const r=this.vs.exec(e),i=Number(r[1]);return Eu.Es(i,n)}Os(e){return OE.Es(e)}Ys(e){return JSON.parse(e)}async js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Xs(e.batchId,e.state,e.error);Z("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Js(e){return this.syncEngine.eo(e.targetId,e.state,e.error)}Ws(e,n){const r=n?this.ys.insert(e,n):this.ys.remove(e),i=this.Bs(this.ys),s=this.Bs(r),o=[],c=[];return s.forEach(u=>{i.has(u)||o.push(u)}),i.forEach(u=>{s.has(u)||c.push(u)}),this.syncEngine.no(o,c).then(()=>{this.ys=r})}Ns(e){this.ys.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Bs(e){let n=EE();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class wD{constructor(){this.ro=new Sv,this.io={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.ro.Rs(e),this.io[e]||"not-current"}updateQueryState(e,n,r){this.io[e]=n}removeLocalQueryTarget(e){this.ro.Vs(e)}isLocalQueryTarget(e){return this.ro.activeTargetIds.has(e)}clearQueryState(e){delete this.io[e]}getAllActiveQueryTargets(){return this.ro.activeTargetIds}isActiveQueryTarget(e){return this.ro.activeTargetIds.has(e)}start(){return this.ro=new Sv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fG{so(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(){this.oo=()=>this._o(),this.ao=()=>this.uo(),this.co=[],this.lo()}so(e){this.co.push(e)}shutdown(){window.removeEventListener("online",this.oo),window.removeEventListener("offline",this.ao)}lo(){window.addEventListener("online",this.oo),window.addEventListener("offline",this.ao)}_o(){Z("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.co)e(0)}uo(){Z("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.co)e(1)}static C(){return typeof window!="undefined"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ef=null;function Y_(){return ef===null?ef=function(){return 268435456+Math.round(2147483648*Math.random())}():ef++,"0x"+ef.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pG={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gG{constructor(e){this.ho=e.ho,this.Po=e.Po}Io(e){this.To=e}Eo(e){this.Ao=e}onMessage(e){this.Ro=e}close(){this.Po()}send(e){this.ho(e)}Vo(){this.To()}mo(e){this.Ao(e)}fo(e){this.Ro(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nn="WebChannelConnection";class mG extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.po=r+"://"+n.host,this.yo=`projects/${i}/databases/${s}`,this.wo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get So(){return!1}bo(n,r,i,s,o){const c=Y_(),u=this.Do(n,r);Z("RestConnection",`Sending RPC '${n}' ${c}:`,u,i);const h={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Co(h,s,o),this.vo(n,u,h,i).then(f=>(Z("RestConnection",`Received RPC '${n}' ${c}: `,f),f),f=>{throw Xu("RestConnection",`RPC '${n}' ${c} failed with error: `,f,"url: ",u,"request:",i),f})}Fo(n,r,i,s,o,c){return this.bo(n,r,i,s,o)}Co(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ol}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}Do(n,r){const i=pG[n];return`${this.po}/v1/${r}:${i}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,n,r,i){const s=Y_();return new Promise((o,c)=>{const u=new p6;u.setWithCredentials(!0),u.listenOnce(d6.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case W_.NO_ERROR:const f=u.getResponseJson();Z(Nn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case W_.TIMEOUT:Z(Nn,`RPC '${e}' ${s} timed out`),c(new re(q.DEADLINE_EXCEEDED,"Request time out"));break;case W_.HTTP_ERROR:const p=u.getStatus();if(Z(Nn,`RPC '${e}' ${s} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const y=m==null?void 0:m.error;if(y&&y.status&&y.message){const v=function(A){const N=A.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(N)>=0?N:q.UNKNOWN}(y.status);c(new re(v,y.message))}else c(new re(q.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new re(q.UNAVAILABLE,"Connection failed."));break;default:_e()}}finally{Z(Nn,`RPC '${e}' ${s} completed.`)}});const h=JSON.stringify(i);Z(Nn,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",h,r,15)})}Mo(e,n,r){const i=Y_(),s=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=u6(),c=h6(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Co(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=s.join("");Z(Nn,`Creating RPC '${e}' stream ${i}: ${f}`,u);const p=o.createWebChannel(f,u);let m=!1,y=!1;const v=new gG({ho:A=>{y?Z(Nn,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(m||(Z(Nn,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),Z(Nn,`RPC '${e}' stream ${i} sending:`,A),p.send(A))},Po:()=>p.close()}),I=(A,N,D)=>{A.listen(N,k=>{try{D(k)}catch(P){setTimeout(()=>{throw P},0)}})};return I(p,Yd.EventType.OPEN,()=>{y||Z(Nn,`RPC '${e}' stream ${i} transport opened.`)}),I(p,Yd.EventType.CLOSE,()=>{y||(y=!0,Z(Nn,`RPC '${e}' stream ${i} transport closed`),v.mo())}),I(p,Yd.EventType.ERROR,A=>{y||(y=!0,Xu(Nn,`RPC '${e}' stream ${i} transport errored:`,A),v.mo(new re(q.UNAVAILABLE,"The operation could not be completed")))}),I(p,Yd.EventType.MESSAGE,A=>{var N;if(!y){const D=A.data[0];be(!!D);const k=D,P=k.error||((N=k[0])===null||N===void 0?void 0:N.error);if(P){Z(Nn,`RPC '${e}' stream ${i} received error:`,P);const B=P.status;let V=function(J){const ee=en[J];if(ee!==void 0)return $k(ee)}(B),F=P.message;V===void 0&&(V=q.INTERNAL,F="Unknown error status: "+B+" with message "+P.message),y=!0,v.mo(new re(V,F)),p.close()}else Z(Nn,`RPC '${e}' stream ${i} received:`,D),v.fo(D)}}),I(c,f6.STAT_EVENT,A=>{A.stat===aR.PROXY?Z(Nn,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===aR.NOPROXY&&Z(Nn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{v.Vo()},0),v}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ED(){return typeof window!="undefined"?window:null}function Ef(){return typeof document!="undefined"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sg(t){return new A9(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(e,n,r=1e3,i=1.5,s=6e4){this._i=e,this.timerId=n,this.xo=r,this.Oo=i,this.No=s,this.Bo=0,this.Lo=null,this.ko=Date.now(),this.reset()}reset(){this.Bo=0}qo(){this.Bo=this.No}Qo(e){this.cancel();const n=Math.floor(this.Bo+this.Ko()),r=Math.max(0,Date.now()-this.ko),i=Math.max(0,n-r);i>0&&Z("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Bo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Lo=this._i.enqueueAfterDelay(this.timerId,i,()=>(this.ko=Date.now(),e())),this.Bo*=this.Oo,this.Bo<this.xo&&(this.Bo=this.xo),this.Bo>this.No&&(this.Bo=this.No)}$o(){this.Lo!==null&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){this.Lo!==null&&(this.Lo.cancel(),this.Lo=null)}Ko(){return(Math.random()-.5)*this.Bo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(e,n,r,i,s,o,c,u){this._i=e,this.Uo=r,this.Wo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.Go=0,this.zo=null,this.jo=null,this.stream=null,this.Ho=new ID(e,n)}Jo(){return this.state===1||this.state===5||this.Yo()}Yo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Zo()}async stop(){this.Jo()&&await this.close(0)}Xo(){this.state=0,this.Ho.reset()}e_(){this.Yo()&&this.zo===null&&(this.zo=this._i.enqueueAfterDelay(this.Uo,6e4,()=>this.t_()))}n_(e){this.r_(),this.stream.send(e)}async t_(){if(this.Yo())return this.close(0)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}i_(){this.jo&&(this.jo.cancel(),this.jo=null)}async close(e,n){this.r_(),this.i_(),this.Ho.cancel(),this.Go++,e!==4?this.Ho.reset():n&&n.code===q.RESOURCE_EXHAUSTED?(Qt(n.toString()),Qt("Using maximum backoff delay to prevent overloading the backend."),this.Ho.qo()):n&&n.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.s_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Eo(n)}s_(){}auth(){this.state=1;const e=this.o_(this.Go),n=this.Go;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Go===n&&this.__(r,i)},r=>{e(()=>{const i=new re(q.UNKNOWN,"Fetching auth token failed: "+r.message);return this.a_(i)})})}__(e,n){const r=this.o_(this.Go);this.stream=this.u_(e,n),this.stream.Io(()=>{r(()=>(this.state=2,this.jo=this._i.enqueueAfterDelay(this.Wo,1e4,()=>(this.Yo()&&(this.state=3),Promise.resolve())),this.listener.Io()))}),this.stream.Eo(i=>{r(()=>this.a_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Zo(){this.state=5,this.Ho.Qo(async()=>{this.state=0,this.start()})}a_(e){return Z("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}o_(e){return n=>{this._i.enqueueAndForget(()=>this.Go===e?n():(Z("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class _G extends TD{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}u_(e,n){return this.connection.Mo("Listen",e,n)}onMessage(e){this.Ho.reset();const n=C9(this.serializer,e),r=function(s){if(!("targetChange"in s))return Te.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Te.min():o.readTime?Zn(o.readTime):Te.min()}(e);return this.listener.c_(n,r)}l_(e){const n={};n.database=Ev(this.serializer),n.addTarget=function(s,o){let c;const u=o.target;if(c=tp(u)?{documents:Gk(s,u)}:{query:Yk(s,u)},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=Wk(s,o.resumeToken);const h=vv(s,o.expectedCount);h!==null&&(c.expectedCount=h)}else if(o.snapshotVersion.compareTo(Te.min())>0){c.readTime=qc(s,o.snapshotVersion.toTimestamp());const h=vv(s,o.expectedCount);h!==null&&(c.expectedCount=h)}return c}(this.serializer,e);const r=x9(this.serializer,e);r&&(n.labels=r),this.n_(n)}h_(e){const n={};n.database=Ev(this.serializer),n.removeTarget=e,this.n_(n)}}class yG extends TD{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.P_=!1}get I_(){return this.P_}start(){this.P_=!1,this.lastStreamToken=void 0,super.start()}s_(){this.P_&&this.d_([])}u_(e,n){return this.connection.Mo("Write",e,n)}onMessage(e){if(be(!!e.streamToken),this.lastStreamToken=e.streamToken,this.P_){this.Ho.reset();const n=P9(e.writeResults,e.commitTime),r=Zn(e.commitTime);return this.listener.T_(r,n)}return be(!e.writeResults||e.writeResults.length===0),this.P_=!0,this.listener.E_()}A_(){const e={};e.database=Ev(this.serializer),this.n_(e)}d_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>sp(this.serializer,r))};this.n_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vG extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.R_=!1}V_(){if(this.R_)throw new re(q.FAILED_PRECONDITION,"The client has already been terminated.")}bo(e,n,r){return this.V_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.bo(e,n,r,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new re(q.UNKNOWN,i.toString())})}Fo(e,n,r,i){return this.V_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Fo(e,n,r,s,o,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new re(q.UNKNOWN,s.toString())})}terminate(){this.R_=!0}}class wG{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.f_=0,this.g_=null,this.p_=!0}y_(){this.f_===0&&(this.w_("Unknown"),this.g_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.g_=null,this.S_("Backend didn't respond within 10 seconds."),this.w_("Offline"),Promise.resolve())))}b_(e){this.state==="Online"?this.w_("Unknown"):(this.f_++,this.f_>=1&&(this.D_(),this.S_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.w_("Offline")))}set(e){this.D_(),this.f_=0,e==="Online"&&(this.p_=!1),this.w_(e)}w_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}S_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.p_?(Qt(n),this.p_=!1):Z("OnlineStateTracker",n)}D_(){this.g_!==null&&(this.g_.cancel(),this.g_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EG{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.C_=[],this.v_=new Map,this.F_=new Set,this.M_=[],this.x_=s,this.x_.so(o=>{r.enqueueAndForget(async()=>{Ia(this)&&(Z("RemoteStore","Restarting streams for network reachability change."),await async function(u){const h=ve(u);h.F_.add(4),await Nh(h),h.O_.set("Unknown"),h.F_.delete(4),await Cg(h)}(this))})}),this.O_=new wG(r,i)}}async function Cg(t){if(Ia(t))for(const e of t.M_)await e(!0)}async function Nh(t){for(const e of t.M_)await e(!1)}function Pg(t,e){const n=ve(t);n.v_.has(e.targetId)||(n.v_.set(e.targetId,e),LE(n)?ME(n):ul(n).Yo()&&NE(n,e))}function ah(t,e){const n=ve(t),r=ul(n);n.v_.delete(e),r.Yo()&&bD(n,e),n.v_.size===0&&(r.Yo()?r.e_():Ia(n)&&n.O_.set("Unknown"))}function NE(t,e){if(t.N_.Le(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Te.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ul(t).l_(e)}function bD(t,e){t.N_.Le(e),ul(t).h_(e)}function ME(t){t.N_=new E9({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.v_.get(e)||null,st:()=>t.datastore.serializer.databaseId}),ul(t).start(),t.O_.y_()}function LE(t){return Ia(t)&&!ul(t).Jo()&&t.v_.size>0}function Ia(t){return ve(t).F_.size===0}function AD(t){t.N_=void 0}async function IG(t){t.v_.forEach((e,n)=>{NE(t,e)})}async function TG(t,e){AD(t),LE(t)?(t.O_.b_(e),ME(t)):t.O_.set("Unknown")}async function bG(t,e,n){if(t.O_.set("Online"),e instanceof Hk&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const c of s.targetIds)i.v_.has(c)&&(await i.remoteSyncer.rejectListen(c,o),i.v_.delete(c),i.N_.removeTarget(c))}(t,e)}catch(r){Z("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await dp(t,r)}else if(e instanceof wf?t.N_.Ge(e):e instanceof qk?t.N_.Xe(e):t.N_.He(e),!n.isEqual(Te.min()))try{const r=await mD(t.localStore);n.compareTo(r)>=0&&await function(s,o){const c=s.N_._t(o);return c.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const f=s.v_.get(h);f&&s.v_.set(h,f.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,h)=>{const f=s.v_.get(u);if(!f)return;s.v_.set(u,f.withResumeToken(yn.EMPTY_BYTE_STRING,f.snapshotVersion)),bD(s,u);const p=new Zi(f.target,u,h,f.sequenceNumber);NE(s,p)}),s.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){Z("RemoteStore","Failed to raise snapshot:",r),await dp(t,r)}}async function dp(t,e,n){if(!mo(e))throw e;t.F_.add(1),await Nh(t),t.O_.set("Offline"),n||(n=()=>mD(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Z("RemoteStore","Retrying IndexedDB access"),await n(),t.F_.delete(1),await Cg(t)})}function RD(t,e){return e().catch(n=>dp(t,n,e))}async function ll(t){const e=ve(t),n=ao(e);let r=e.C_.length>0?e.C_[e.C_.length-1].batchId:-1;for(;AG(e);)try{const i=await dG(e.localStore,r);if(i===null){e.C_.length===0&&n.e_();break}r=i.batchId,RG(e,i)}catch(i){await dp(e,i)}SD(e)&&CD(e)}function AG(t){return Ia(t)&&t.C_.length<10}function RG(t,e){t.C_.push(e);const n=ao(t);n.Yo()&&n.I_&&n.d_(e.mutations)}function SD(t){return Ia(t)&&!ao(t).Jo()&&t.C_.length>0}function CD(t){ao(t).start()}async function SG(t){ao(t).A_()}async function CG(t){const e=ao(t);for(const n of t.C_)e.d_(n.mutations)}async function PG(t,e,n){const r=t.C_.shift(),i=bE.from(r,e,n);await RD(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await ll(t)}async function xG(t,e){e&&ao(t).I_&&await async function(r,i){if(function(o){return y9(o)&&o!==q.ABORTED}(i.code)){const s=r.C_.shift();ao(r).Xo(),await RD(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await ll(r)}}(t,e),SD(t)&&CD(t)}async function tS(t,e){const n=ve(t);n.asyncQueue.verifyOperationInProgress(),Z("RemoteStore","RemoteStore received new credentials");const r=Ia(n);n.F_.add(3),await Nh(n),r&&n.O_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.F_.delete(3),await Cg(n)}async function Cv(t,e){const n=ve(t);e?(n.F_.delete(2),await Cg(n)):e||(n.F_.add(2),await Nh(n),n.O_.set("Unknown"))}function ul(t){return t.B_||(t.B_=function(n,r,i){const s=ve(n);return s.V_(),new _G(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Io:IG.bind(null,t),Eo:TG.bind(null,t),c_:bG.bind(null,t)}),t.M_.push(async e=>{e?(t.B_.Xo(),LE(t)?ME(t):t.O_.set("Unknown")):(await t.B_.stop(),AD(t))})),t.B_}function ao(t){return t.L_||(t.L_=function(n,r,i){const s=ve(n);return s.V_(),new yG(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Io:SG.bind(null,t),Eo:xG.bind(null,t),E_:CG.bind(null,t),T_:PG.bind(null,t)}),t.M_.push(async e=>{e?(t.L_.Xo(),await ll(t)):(await t.L_.stop(),t.C_.length>0&&(Z("RemoteStore",`Stopping write stream with ${t.C_.length} pending writes`),t.C_=[]))})),t.L_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new ki,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,c=new VE(e,n,o,i,s);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new re(q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function FE(t,e){if(Qt("AsyncQueue",`${e}: ${t}`),mo(t))return new re(q.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(e){this.comparator=e?(n,r)=>e(n,r)||le.comparator(n.key,r.key):(n,r)=>le.comparator(n.key,r.key),this.keyedMap=ru(),this.sortedSet=new St(this.comparator)}static emptySet(e){return new Ec(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ec)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ec;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(){this.k_=new St(le.comparator)}track(e){const n=e.doc.key,r=this.k_.get(n);r?e.type!==0&&r.type===3?this.k_=this.k_.insert(n,e):e.type===3&&r.type!==1?this.k_=this.k_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.k_=this.k_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.k_=this.k_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.k_=this.k_.remove(n):e.type===1&&r.type===2?this.k_=this.k_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.k_=this.k_.insert(n,{type:2,doc:e.doc}):_e():this.k_=this.k_.insert(n,e)}q_(){const e=[];return this.k_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Wc{constructor(e,n,r,i,s,o,c,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(c=>{o.push({type:0,doc:c})}),new Wc(e,n,Ec.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kG{constructor(){this.Q_=void 0,this.listeners=[]}}class DG{constructor(){this.queries=new _o(e=>Ak(e),wg),this.onlineState="Unknown",this.K_=new Set}}async function UE(t,e){const n=ve(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new kG),i)try{s.Q_=await n.onListen(r)}catch(o){const c=FE(o,`Initialization of query '${rc(e.query)}' failed`);return void e.onError(c)}n.queries.set(r,s),s.listeners.push(e),e.U_(n.onlineState),s.Q_&&e.W_(s.Q_)&&$E(n)}async function BE(t,e){const n=ve(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=s.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function OG(t,e){const n=ve(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const c of o.listeners)c.W_(i)&&(r=!0);o.Q_=i}}r&&$E(n)}function NG(t,e,n){const r=ve(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function $E(t){t.K_.forEach(e=>{e.next()})}class qE{constructor(e,n,r){this.query=e,this.G_=n,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=r||{}}W_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Wc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.z_?this.H_(e)&&(this.G_.next(e),n=!0):this.J_(e,this.onlineState)&&(this.Y_(e),n=!0),this.j_=e,n}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let n=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),n=!0),n}J_(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.Z_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}H_(e){if(e.docChanges.length>0)return!0;const n=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Y_(e){e=Wc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(e){this.key=e}}class xD{constructor(e){this.key=e}}class MG{constructor(e,n){this.query=e,this.oa=n,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=ze(),this.mutatedKeys=ze(),this.ua=Sk(e),this.ca=new Ec(this.ua)}get la(){return this.oa}ha(e,n){const r=n?n.Pa:new nS,i=n?n.ca:this.ca;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,c=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,p)=>{const m=i.get(f),y=kh(this.query,p)?p:null,v=!!m&&this.mutatedKeys.has(m.key),I=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let A=!1;m&&y?m.data.isEqual(y.data)?v!==I&&(r.track({type:3,doc:y}),A=!0):this.Ia(m,y)||(r.track({type:2,doc:y}),A=!0,(u&&this.ua(y,u)>0||h&&this.ua(y,h)<0)&&(c=!0)):!m&&y?(r.track({type:0,doc:y}),A=!0):m&&!y&&(r.track({type:1,doc:m}),A=!0,(u||h)&&(c=!0)),A&&(y?(o=o.add(y),s=I?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{ca:o,Pa:r,es:c,mutatedKeys:s}}Ia(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const i=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const s=e.Pa.q_();s.sort((h,f)=>function(m,y){const v=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _e()}};return v(m)-v(y)}(h.type,f.type)||this.ua(h.doc,f.doc)),this.da(r);const o=n?this.Ta():[],c=this.aa.size===0&&this.current?1:0,u=c!==this._a;return this._a=c,s.length!==0||u?{snapshot:new Wc(this.query,e.ca,i,s,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ea:o}:{Ea:o}}U_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new nS,mutatedKeys:this.mutatedKeys,es:!1},!1)):{Ea:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}da(e){e&&(e.addedDocuments.forEach(n=>this.oa=this.oa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.oa=this.oa.delete(n)),this.current=e.current)}Ta(){if(!this.current)return[];const e=this.aa;this.aa=ze(),this.ca.forEach(r=>{this.Aa(r.key)&&(this.aa=this.aa.add(r.key))});const n=[];return e.forEach(r=>{this.aa.has(r)||n.push(new xD(r))}),this.aa.forEach(r=>{e.has(r)||n.push(new PD(r))}),n}Ra(e){this.oa=e.Ps,this.aa=ze();const n=this.ha(e.documents);return this.applyChanges(n,!0)}Va(){return Wc.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,this._a===0,this.hasCachedResults)}}class LG{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class VG{constructor(e){this.key=e,this.ma=!1}}class FG{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.fa={},this.ga=new _o(c=>Ak(c),wg),this.pa=new Map,this.ya=new Set,this.wa=new St(le.comparator),this.Sa=new Map,this.ba=new xE,this.Da={},this.Ca=new Map,this.va=da.Ln(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return this.Fa===!0}}async function UG(t,e){const n=KE(t);let r,i;const s=n.ga.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Va();else{const o=await lp(n.localStore,Rr(e)),c=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=await HE(n,e,r,c==="current",o.resumeToken),n.isPrimaryClient&&Pg(n.remoteStore,o)}return i}async function HE(t,e,n,r,i){t.Ma=(p,m,y)=>async function(I,A,N,D){let k=A.view.ha(N);k.es&&(k=await Rv(I.localStore,A.query,!1).then(({documents:V})=>A.view.ha(V,k)));const P=D&&D.targetChanges.get(A.targetId),B=A.view.applyChanges(k,I.isPrimaryClient,P);return Pv(I,A.targetId,B.Ea),B.snapshot}(t,p,m,y);const s=await Rv(t.localStore,e,!0),o=new MG(e,s.Ps),c=o.ha(s.documents),u=Oh.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),h=o.applyChanges(c,t.isPrimaryClient,u);Pv(t,n,h.Ea);const f=new LG(e,n,o);return t.ga.set(e,f),t.pa.has(n)?t.pa.get(n).push(e):t.pa.set(n,[e]),h.snapshot}async function BG(t,e){const n=ve(t),r=n.ga.get(e),i=n.pa.get(r.targetId);if(i.length>1)return n.pa.set(r.targetId,i.filter(s=>!wg(s,e))),void n.ga.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Hc(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),ah(n.remoteStore,r.targetId),zc(n,r.targetId)}).catch(go)):(zc(n,r.targetId),await Hc(n.localStore,r.targetId,!0))}async function $G(t,e,n){const r=GE(t);try{const i=await function(o,c){const u=ve(o),h=It.now(),f=c.reduce((y,v)=>y.add(v.key),ze());let p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let v=Ar(),I=ze();return u._s.getEntries(y,f).next(A=>{v=A,v.forEach((N,D)=>{D.isValidDocument()||(I=I.add(N))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,v)).next(A=>{p=A;const N=[];for(const D of c){const k=m9(D,p.get(D.key).overlayedDocument);k!=null&&N.push(new _s(D.key,k,gk(k.value.mapValue),xn.exists(!0)))}return u.mutationQueue.addMutationBatch(y,h,N,c)}).next(A=>{m=A;const N=A.applyToLocalDocumentSet(p,I);return u.documentOverlayCache.saveOverlays(y,A.batchId,N)})}).then(()=>({batchId:m.batchId,changes:Pk(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,c,u){let h=o.Da[o.currentUser.toKey()];h||(h=new St(Ve)),h=h.insert(c,u),o.Da[o.currentUser.toKey()]=h}(r,i.batchId,n),await yo(r,i.changes),await ll(r.remoteStore)}catch(i){const s=FE(i,"Failed to persist write");n.reject(s)}}async function kD(t,e){const n=ve(t);try{const r=await uG(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Sa.get(s);o&&(be(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.ma=!0:i.modifiedDocuments.size>0?be(o.ma):i.removedDocuments.size>0&&(be(o.ma),o.ma=!1))}),await yo(n,r,e)}catch(r){await go(r)}}function rS(t,e,n){const r=ve(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ga.forEach((s,o)=>{const c=o.view.U_(e);c.snapshot&&i.push(c.snapshot)}),function(o,c){const u=ve(o);u.onlineState=c;let h=!1;u.queries.forEach((f,p)=>{for(const m of p.listeners)m.U_(c)&&(h=!0)}),h&&$E(u)}(r.eventManager,e),i.length&&r.fa.c_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function qG(t,e,n){const r=ve(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Sa.get(e),s=i&&i.key;if(s){let o=new St(le.comparator);o=o.insert(s,Wt.newNoDocument(s,Te.min()));const c=ze().add(s),u=new Dh(Te.min(),new Map,new St(Ve),o,c);await kD(r,u),r.wa=r.wa.remove(s),r.Sa.delete(e),jE(r)}else await Hc(r.localStore,e,!1).then(()=>zc(r,e,n)).catch(go)}async function HG(t,e){const n=ve(t),r=e.batch.batchId;try{const i=await lG(n.localStore,e);zE(n,r,null),WE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await yo(n,i)}catch(i){await go(i)}}async function WG(t,e,n){const r=ve(t);try{const i=await function(o,c){const u=ve(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let f;return u.mutationQueue.lookupMutationBatch(h,c).next(p=>(be(p!==null),f=p.keys(),u.mutationQueue.removeMutationBatch(h,p))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,f,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f)).next(()=>u.localDocuments.getDocuments(h,f))})}(r.localStore,e);zE(r,e,n),WE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await yo(r,i)}catch(i){await go(i)}}function WE(t,e){(t.Ca.get(e)||[]).forEach(n=>{n.resolve()}),t.Ca.delete(e)}function zE(t,e,n){const r=ve(t);let i=r.Da[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Da[r.currentUser.toKey()]=i}}function zc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.pa.get(e))t.ga.delete(r),n&&t.fa.xa(r,n);t.pa.delete(e),t.isPrimaryClient&&t.ba.mr(e).forEach(r=>{t.ba.containsKey(r)||DD(t,r)})}function DD(t,e){t.ya.delete(e.path.canonicalString());const n=t.wa.get(e);n!==null&&(ah(t.remoteStore,n),t.wa=t.wa.remove(e),t.Sa.delete(n),jE(t))}function Pv(t,e,n){for(const r of n)r instanceof PD?(t.ba.addReference(r.key,e),zG(t,r)):r instanceof xD?(Z("SyncEngine","Document no longer in limbo: "+r.key),t.ba.removeReference(r.key,e),t.ba.containsKey(r.key)||DD(t,r.key)):_e()}function zG(t,e){const n=e.key,r=n.path.canonicalString();t.wa.get(n)||t.ya.has(r)||(Z("SyncEngine","New document in limbo: "+n),t.ya.add(r),jE(t))}function jE(t){for(;t.ya.size>0&&t.wa.size<t.maxConcurrentLimboResolutions;){const e=t.ya.values().next().value;t.ya.delete(e);const n=new le(ft.fromString(e)),r=t.va.next();t.Sa.set(r,new VG(n)),t.wa=t.wa.insert(n,r),Pg(t.remoteStore,new Zi(Rr(xh(n.path)),r,"TargetPurposeLimboResolution",cr.ae))}}async function yo(t,e,n){const r=ve(t),i=[],s=[],o=[];r.ga.isEmpty()||(r.ga.forEach((c,u)=>{o.push(r.Ma(u,e,n).then(h=>{if((h||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,h!=null&&h.fromCache?"not-current":"current"),h){i.push(h);const f=DE.$i(u.targetId,h);s.push(f)}}))}),await Promise.all(o),r.fa.c_(i),await async function(u,h){const f=ve(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>L.forEach(h,m=>L.forEach(m.Qi,y=>f.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>L.forEach(m.Ki,y=>f.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!mo(p))throw p;Z("LocalStore","Failed to update sequence numbers: "+p)}for(const p of h){const m=p.targetId;if(!p.fromCache){const y=f.rs.get(m),v=y.snapshotVersion,I=y.withLastLimboFreeSnapshotVersion(v);f.rs=f.rs.insert(m,I)}}}(r.localStore,s))}async function jG(t,e){const n=ve(t);if(!n.currentUser.isEqual(e)){Z("SyncEngine","User change. New user:",e.toKey());const r=await gD(n.localStore,e);n.currentUser=e,function(s,o){s.Ca.forEach(c=>{c.forEach(u=>{u.reject(new re(q.CANCELLED,o))})}),s.Ca.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await yo(n,r.cs)}}function KG(t,e){const n=ve(t),r=n.Sa.get(e);if(r&&r.ma)return ze().add(r.key);{let i=ze();const s=n.pa.get(e);if(!s)return i;for(const o of s){const c=n.ga.get(o);i=i.unionWith(c.view.la)}return i}}async function GG(t,e){const n=ve(t),r=await Rv(n.localStore,e.query,!0),i=e.view.Ra(r);return n.isPrimaryClient&&Pv(n,e.targetId,i.Ea),i}async function YG(t,e){const n=ve(t);return yD(n.localStore,e).then(r=>yo(n,r))}async function QG(t,e,n,r){const i=ve(t),s=await function(c,u){const h=ve(c),f=ve(h.mutationQueue);return h.persistence.runTransaction("Lookup mutation documents","readonly",p=>f.Fn(p,u).next(m=>m?h.localDocuments.getDocuments(p,m):L.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await ll(i.remoteStore):n==="acknowledged"||n==="rejected"?(zE(i,e,r||null),WE(i,e),function(c,u){ve(ve(c).mutationQueue).xn(u)}(i.localStore,e)):_e(),await yo(i,s)):Z("SyncEngine","Cannot apply mutation batch with id: "+e)}async function JG(t,e){const n=ve(t);if(KE(n),GE(n),e===!0&&n.Fa!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await iS(n,r.toArray());n.Fa=!0,await Cv(n.remoteStore,!0);for(const s of i)Pg(n.remoteStore,s)}else if(e===!1&&n.Fa!==!1){const r=[];let i=Promise.resolve();n.pa.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(zc(n,o),Hc(n.localStore,o,!0))),ah(n.remoteStore,o)}),await i,await iS(n,r),function(o){const c=ve(o);c.Sa.forEach((u,h)=>{ah(c.remoteStore,h)}),c.ba.gr(),c.Sa=new Map,c.wa=new St(le.comparator)}(n),n.Fa=!1,await Cv(n.remoteStore,!1)}}async function iS(t,e,n){const r=ve(t),i=[],s=[];for(const o of e){let c;const u=r.pa.get(o);if(u&&u.length!==0){c=await lp(r.localStore,Rr(u[0]));for(const h of u){const f=r.ga.get(h),p=await GG(r,f);p.snapshot&&s.push(p.snapshot)}}else{const h=await _D(r.localStore,o);c=await lp(r.localStore,h),await HE(r,OD(h),o,!1,c.resumeToken)}i.push(c)}return r.fa.c_(s),i}function OD(t){return Tk(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function XG(t){return function(n){return ve(ve(n).persistence).ki()}(ve(t).localStore)}async function ZG(t,e,n,r){const i=ve(t);if(i.Fa)return void Z("SyncEngine","Ignoring unexpected query state notification.");const s=i.pa.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await yD(i.localStore,Rk(s[0])),c=Dh.createSynthesizedRemoteEventForCurrentChange(e,n==="current",yn.EMPTY_BYTE_STRING);await yo(i,o,c);break}case"rejected":await Hc(i.localStore,e,!0),zc(i,e,r);break;default:_e()}}async function e3(t,e,n){const r=KE(t);if(r.Fa){for(const i of e){if(r.pa.has(i)){Z("SyncEngine","Adding an already active target "+i);continue}const s=await _D(r.localStore,i),o=await lp(r.localStore,s);await HE(r,OD(s),o.targetId,!1,o.resumeToken),Pg(r.remoteStore,o)}for(const i of n)r.pa.has(i)&&await Hc(r.localStore,i,!1).then(()=>{ah(r.remoteStore,i),zc(r,i)}).catch(go)}}function KE(t){const e=ve(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=kD.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=KG.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=qG.bind(null,e),e.fa.c_=OG.bind(null,e.eventManager),e.fa.xa=NG.bind(null,e.eventManager),e}function GE(t){const e=ve(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=HG.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=WG.bind(null,e),e}class xv{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Sg(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return pD(this.persistence,new fD,e.initialUser,this.serializer)}createPersistence(e){return new hD(Rg.Jr,this.serializer)}createSharedClientState(e){return new wD}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class ND extends xv{constructor(e,n,r){super(),this.Na=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Na.initialize(this,e),await GE(this.Na.syncEngine),await ll(this.Na.remoteStore),await this.persistence.gi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}createLocalStore(e){return pD(this.persistence,new fD,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new j9(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const r=new C6(n,this.persistence);return new S6(e.asyncQueue,r)}createPersistence(e){const n=dD(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?sr.withCacheSize(this.cacheSizeBytes):sr.DEFAULT;return new kE(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,ED(),Ef(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new wD}}class t3 extends ND{constructor(e,n){super(e,n,!1),this.Na=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Na.syncEngine;this.sharedClientState instanceof G_&&(this.sharedClientState.syncEngine={Xs:QG.bind(null,n),eo:ZG.bind(null,n),no:e3.bind(null,n),ki:XG.bind(null,n),Zs:YG.bind(null,n)},await this.sharedClientState.start()),await this.persistence.gi(async r=>{await JG(this.Na.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}createSharedClientState(e){const n=ED();if(!G_.C(n))throw new re(q.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=dD(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new G_(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class YE{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>rS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=jG.bind(null,this.syncEngine),await Cv(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new DG}()}createDatastore(e){const n=Sg(e.databaseInfo.databaseId),r=function(s){return new mG(s)}(e.databaseInfo);return function(s,o,c,u){return new vG(s,o,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,c){return new EG(r,i,s,o,c)}(this.localStore,this.datastore,e.asyncQueue,n=>rS(this.syncEngine,n,0),function(){return eS.C()?new eS:new fG}())}createSyncEngine(e,n){return function(i,s,o,c,u,h,f){const p=new FG(i,s,o,c,u,h);return f&&(p.Fa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(n){const r=ve(n);Z("RemoteStore","RemoteStore shutting down."),r.F_.add(5),await Nh(r),r.x_.shutdown(),r.O_.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):Qt("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n3{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ln.UNAUTHENTICATED,this.clientId=tk.V(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{Z("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(Z("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new re(q.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ki;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=FE(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Q_(t,e){t.asyncQueue.verifyOperationInProgress(),Z("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await gD(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function sS(t,e){t.asyncQueue.verifyOperationInProgress();const n=await i3(t);Z("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(i=>tS(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>tS(e.remoteStore,s)),t._onlineComponents=e}function r3(t){return t.name==="FirebaseError"?t.code===q.FAILED_PRECONDITION||t.code===q.UNIMPLEMENTED:!(typeof DOMException!="undefined"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function i3(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Z("FirestoreClient","Using user provided OfflineComponentProvider");try{await Q_(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!r3(n))throw n;Xu("Error using user provided cache. Falling back to memory cache: "+n),await Q_(t,new xv)}}else Z("FirestoreClient","Using default OfflineComponentProvider"),await Q_(t,new xv);return t._offlineComponents}async function MD(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Z("FirestoreClient","Using user provided OnlineComponentProvider"),await sS(t,t._uninitializedComponentsProvider._online)):(Z("FirestoreClient","Using default OnlineComponentProvider"),await sS(t,new YE))),t._onlineComponents}function s3(t){return MD(t).then(e=>e.syncEngine)}async function fp(t){const e=await MD(t),n=e.eventManager;return n.onListen=UG.bind(null,e.syncEngine),n.onUnlisten=BG.bind(null,e.syncEngine),n}function o3(t,e,n={}){const r=new ki;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,c,u,h){const f=new QE({next:m=>{o.enqueueAndForget(()=>BE(s,p));const y=m.docs.has(c);!y&&m.fromCache?h.reject(new re(q.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&u&&u.source==="server"?h.reject(new re(q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(m)},error:m=>h.reject(m)}),p=new qE(xh(c.path),f,{includeMetadataChanges:!0,Z_:!0});return UE(s,p)}(await fp(t),t.asyncQueue,e,n,r)),r.promise}function a3(t,e,n={}){const r=new ki;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,c,u,h){const f=new QE({next:m=>{o.enqueueAndForget(()=>BE(s,p)),m.fromCache&&u.source==="server"?h.reject(new re(q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(m)},error:m=>h.reject(m)}),p=new qE(c,f,{includeMetadataChanges:!0,Z_:!0});return UE(s,p)}(await fp(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LD(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oS=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VD(t,e,n){if(!n)throw new re(q.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function c3(t,e,n,r){if(e===!0&&r===!0)throw new re(q.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function aS(t){if(!le.isDocumentKey(t))throw new re(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function cS(t){if(le.isDocumentKey(t))throw new re(q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function xg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":_e()}function zr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new re(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=xg(t);throw new re(q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function l3(t,e){if(e<=0)throw new re(q.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new re(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new re(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}c3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=LD((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new re(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new re(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new re(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class JE{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lS({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new re(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new re(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lS(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new _6;switch(r.type){case"firstParty":return new w6(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new re(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=oS.get(n);r&&(Z("ComponentProvider","Removing Datastore"),oS.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ys(this.firestore,e,this._query)}}class Wn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new eo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wn(this.firestore,e,this._key)}}class eo extends ys{constructor(e,n,r){super(e,n,xh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Wn(this.firestore,null,new le(e))}withConverter(e){return new eo(this.firestore,e,this._path)}}function ou(t,e,...n){if(t=ke(t),VD("collection","path",e),t instanceof JE){const r=ft.fromString(e,...n);return cS(r),new eo(t,null,r)}{if(!(t instanceof Wn||t instanceof eo))throw new re(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ft.fromString(e,...n));return cS(r),new eo(t.firestore,null,r)}}function $l(t,e,...n){if(t=ke(t),arguments.length===1&&(e=tk.V()),VD("doc","path",e),t instanceof JE){const r=ft.fromString(e,...n);return aS(r),new Wn(t,null,new le(r))}{if(!(t instanceof Wn||t instanceof eo))throw new re(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ft.fromString(e,...n));return aS(r),new Wn(t.firestore,t instanceof eo?t.converter:null,new le(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u3{constructor(){this.Za=Promise.resolve(),this.Xa=[],this.eu=!1,this.tu=[],this.nu=null,this.ru=!1,this.iu=!1,this.su=[],this.Ho=new ID(this,"async_queue_retry"),this.ou=()=>{const n=Ef();n&&Z("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Ho.$o()};const e=Ef();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.ou)}get isShuttingDown(){return this.eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this._u(),this.au(e)}enterRestrictedMode(e){if(!this.eu){this.eu=!0,this.iu=e||!1;const n=Ef();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.ou)}}enqueue(e){if(this._u(),this.eu)return new Promise(()=>{});const n=new ki;return this.au(()=>this.eu&&this.iu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xa.push(e),this.uu()))}async uu(){if(this.Xa.length!==0){try{await this.Xa[0](),this.Xa.shift(),this.Ho.reset()}catch(e){if(!mo(e))throw e;Z("AsyncQueue","Operation failed with retryable error: "+e)}this.Xa.length>0&&this.Ho.Qo(()=>this.uu())}}au(e){const n=this.Za.then(()=>(this.ru=!0,e().catch(r=>{this.nu=r,this.ru=!1;const i=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(r);throw Qt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.ru=!1,r))));return this.Za=n,n}enqueueAfterDelay(e,n,r){this._u(),this.su.indexOf(e)>-1&&(n=0);const i=VE.createAndSchedule(this,e,n,r,s=>this.cu(s));return this.tu.push(i),i}_u(){this.nu&&_e()}verifyOperationInProgress(){}async lu(){let e;do e=this.Za,await e;while(e!==this.Za)}hu(e){for(const n of this.tu)if(n.timerId===e)return!0;return!1}Pu(e){return this.lu().then(()=>{this.tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lu()})}Iu(e){this.su.push(e)}cu(e){const n=this.tu.indexOf(e);this.tu.splice(n,1)}}function uS(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class co extends JE{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new u3}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||FD(this),this._firestoreClient.terminate()}}function h3(t,e,n){n||(n="(default)");const r=va(t,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(Bu(s,e))return i;throw new re(q.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new re(q.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new re(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:e,instanceIdentifier:n})}function Mh(t){return t._firestoreClient||FD(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function FD(t){var e,n,r;const i=t._freezeSettings(),s=function(c,u,h,f){return new G6(c,u,h,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,LD(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new n3(t._authCredentials,t._appCheckCredentials,t._queue,s),((n=i.localCache)===null||n===void 0?void 0:n._offlineComponentProvider)&&((r=i.localCache)===null||r===void 0?void 0:r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new jc(yn.fromBase64String(e))}catch(n){throw new re(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new jc(yn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new re(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Jt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new re(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new re(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ve(this._lat,e._lat)||Ve(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d3=/^__.*__$/;class f3{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new _s(e,this.data,this.fieldMask,n,this.fieldTransforms):new cl(e,this.data,n,this.fieldTransforms)}}class UD{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new _s(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function BD(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _e()}}class Dg{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.du(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Tu(){return this.settings.Tu}Eu(e){return new Dg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Au(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Eu({path:r,Ru:!1});return i.Vu(e),i}mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Eu({path:r,Ru:!1});return i.du(),i}fu(e){return this.Eu({path:void 0,Ru:!0})}gu(e){return pp(e,this.settings.methodName,this.settings.pu||!1,this.path,this.settings.yu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}du(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vu(this.path.get(e))}Vu(e){if(e.length===0)throw this.gu("Document fields must not be empty");if(BD(this.Tu)&&d3.test(e))throw this.gu('Document fields cannot begin and end with "__"')}}class p3{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Sg(e)}wu(e,n,r,i=!1){return new Dg({Tu:e,methodName:n,yu:r,path:Jt.emptyPath(),Ru:!1,pu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Og(t){const e=t._freezeSettings(),n=Sg(t._databaseId);return new p3(t._databaseId,!!e.ignoreUndefinedProperties,n)}function $D(t,e,n,r,i,s={}){const o=t.wu(s.merge||s.mergeFields?2:0,e,n,i);XE("Data must be an object, but it was:",o,r);const c=WD(r,o);let u,h;if(s.merge)u=new lr(o.fieldMask),h=o.fieldTransforms;else if(s.mergeFields){const f=[];for(const p of s.mergeFields){const m=kv(e,p,n);if(!o.contains(m))throw new re(q.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);jD(f,m)||f.push(m)}u=new lr(f),h=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,h=o.fieldTransforms;return new f3(new Bn(c),u,h)}class Ng extends Vh{_toFieldTransform(e){if(e.Tu!==2)throw e.Tu===1?e.gu(`${this._methodName}() can only appear at the top level of your update data`):e.gu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ng}}function g3(t,e,n){return new Dg({Tu:3,yu:e.settings.yu,methodName:t._methodName,Ru:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class m3 extends Vh{constructor(e,n){super(e),this.Su=n}_toFieldTransform(e){const n=g3(this,e,!0),r=this.Su.map(s=>hl(s,n)),i=new la(r);return new IE(e.path,i)}isEqual(e){return this===e}}class _3 extends Vh{constructor(e,n){super(e),this.bu=n}_toFieldTransform(e){const n=new $c(e.serializer,Ok(e.serializer,this.bu));return new IE(e.path,n)}isEqual(e){return this===e}}function qD(t,e,n,r){const i=t.wu(1,e,n);XE("Data must be an object, but it was:",i,r);const s=[],o=Bn.empty();Ea(r,(u,h)=>{const f=ZE(e,u,n);h=ke(h);const p=i.mu(f);if(h instanceof Ng)s.push(f);else{const m=hl(h,p);m!=null&&(s.push(f),o.set(f,m))}});const c=new lr(s);return new UD(o,c,i.fieldTransforms)}function HD(t,e,n,r,i,s){const o=t.wu(1,e,n),c=[kv(e,r,n)],u=[i];if(s.length%2!=0)throw new re(q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)c.push(kv(e,s[m])),u.push(s[m+1]);const h=[],f=Bn.empty();for(let m=c.length-1;m>=0;--m)if(!jD(h,c[m])){const y=c[m];let v=u[m];v=ke(v);const I=o.mu(y);if(v instanceof Ng)h.push(y);else{const A=hl(v,I);A!=null&&(h.push(y),f.set(y,A))}}const p=new lr(h);return new UD(f,p,o.fieldTransforms)}function y3(t,e,n,r=!1){return hl(n,t.wu(r?4:3,e))}function hl(t,e){if(zD(t=ke(t)))return XE("Unsupported field value:",e,t),WD(t,e);if(t instanceof Vh)return function(r,i){if(!BD(i.Tu))throw i.gu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.gu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Ru&&e.Tu!==4)throw e.gu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const c of r){let u=hl(c,i.fu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=ke(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Ok(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=It.fromDate(r);return{timestampValue:qc(i.serializer,s)}}if(r instanceof It){const s=new It(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:qc(i.serializer,s)}}if(r instanceof kg)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof jc)return{bytesValue:Wk(i.serializer,r._byteString)};if(r instanceof Wn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.gu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:SE(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.gu(`Unsupported field value: ${xg(r)}`)}(t,e)}function WD(t,e){const n={};return dk(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ea(t,(r,i)=>{const s=hl(i,e.Au(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function zD(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof It||t instanceof kg||t instanceof jc||t instanceof Wn||t instanceof Vh)}function XE(t,e,n){if(!zD(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=xg(n);throw r==="an object"?e.gu(t+" a custom object"):e.gu(t+" "+r)}}function kv(t,e,n){if((e=ke(e))instanceof Lh)return e._internalPath;if(typeof e=="string")return ZE(t,e);throw pp("Field path arguments must be of type string or ",t,!1,void 0,n)}const v3=new RegExp("[~\\*/\\[\\]]");function ZE(t,e,n){if(e.search(v3)>=0)throw pp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Lh(...e.split("."))._internalPath}catch{throw pp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function pp(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new re(q.INVALID_ARGUMENT,c+t+u)}function jD(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Wn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new w3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Mg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class w3 extends KD{data(){return super.data()}}function Mg(t,e){return typeof e=="string"?ZE(t,e):e instanceof Lh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GD(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new re(q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class eI{}class tI extends eI{}function E3(t,e,...n){let r=[];e instanceof eI&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof nI).length,c=s.filter(u=>u instanceof Lg).length;if(o>1||o>0&&c>0)throw new re(q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Lg extends tI{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Lg(e,n,r)}_apply(e){const n=this._parse(e);return YD(e._query,n),new ys(e.firestore,e.converter,yv(e._query,n))}_parse(e){const n=Og(e.firestore);return function(s,o,c,u,h,f,p){let m;if(h.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new re(q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){pS(p,f);const y=[];for(const v of p)y.push(fS(u,s,v));m={arrayValue:{values:y}}}else m=fS(u,s,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||pS(p,f),m=y3(c,o,p,f==="in"||f==="not-in");return Xe.create(h,f,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function hS(t,e,n){const r=e,i=Mg("where",t);return Lg._create(i,r,n)}class nI extends eI{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new nI(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:_t.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const c=s.getFlattenedFilters();for(const u of c)YD(o,u),o=yv(o,u)}(e._query,n),new ys(e.firestore,e.converter,yv(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class rI extends tI{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new rI(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new re(q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new re(q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new wc(s,o);return function(h,f){if(wE(h)===null){const p=vg(h);p!==null&&QD(h,p,f.field)}}(i,c),c}(e._query,this._field,this._direction);return new ys(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new al(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function dS(t,e="asc"){const n=e,r=Mg("orderBy",t);return rI._create(r,n)}class iI extends tI{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new iI(e,n,r)}_apply(e){return new ys(e.firestore,e.converter,rp(e._query,this._limit,this._limitType))}}function I3(t){return l3("limit",t),iI._create("limit",t,"F")}function fS(t,e,n){if(typeof(n=ke(n))=="string"){if(n==="")throw new re(q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!bk(e)&&n.indexOf("/")!==-1)throw new re(q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ft.fromString(n));if(!le.isDocumentKey(r))throw new re(q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ih(t,new le(r))}if(n instanceof Wn)return ih(t,n._key);throw new re(q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xg(n)}.`)}function pS(t,e){if(!Array.isArray(t)||t.length===0)throw new re(q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function YD(t,e){if(e.isInequality()){const r=vg(t),i=e.field;if(r!==null&&!r.isEqual(i))throw new re(q.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const s=wE(t);s!==null&&QD(t,i,s)}const n=function(i,s){for(const o of i)for(const c of o.getFlattenedFilters())if(s.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new re(q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new re(q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function QD(t,e,n){if(!n.isEqual(e))throw new re(q.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class T3{convertValue(e,n="none"){switch(aa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ht(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(so(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw _e()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ea(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new kg(Ht(e.latitude),Ht(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=yE(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(nh(e));default:return null}}convertTimestamp(e){const n=io(e);return new It(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ft.fromString(e);be(Zk(r));const i=new oa(r.get(1),r.get(3)),s=new le(r.popFirst(5));return i.isEqual(n)||Qt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JD(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class XD extends KD{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new If(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Mg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class If extends XD{data(e={}){return super.data(e)}}class ZD{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new au(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new If(this._firestore,this._userDataWriter,r.key,r,new au(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new re(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(c=>{const u=new If(i._firestore,i._userDataWriter,c.doc.key,c.doc,new au(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{const u=new If(i._firestore,i._userDataWriter,c.doc.key,c.doc,new au(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,f=-1;return c.type!==0&&(h=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:b3(c.type),doc:u,oldIndex:h,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function b3(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _e()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sI(t){t=zr(t,Wn);const e=zr(t.firestore,co);return o3(Mh(e),t._key).then(n=>eO(e,t,n))}class oI extends T3{constructor(e){super(),this.firestore=e}convertBytes(e){return new jc(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Wn(this.firestore,null,n)}}function gp(t){t=zr(t,ys);const e=zr(t.firestore,co),n=Mh(e),r=new oI(e);return GD(t._query),a3(n,t._query).then(i=>new ZD(e,r,t,i))}function A3(t,e,n){t=zr(t,Wn);const r=zr(t.firestore,co),i=JD(t.converter,e,n);return aI(r,[$D(Og(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,xn.none())])}function R3(t,e,n,...r){t=zr(t,Wn);const i=zr(t.firestore,co),s=Og(i);let o;return o=typeof(e=ke(e))=="string"||e instanceof Lh?HD(s,"updateDoc",t._key,e,n,r):qD(s,"updateDoc",t._key,e),aI(i,[o.toMutation(t._key,xn.exists(!0))])}function Ic(t,...e){var n,r,i;t=ke(t);let s={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||uS(e[o])||(s=e[o],o++);const c={includeMetadataChanges:s.includeMetadataChanges};if(uS(e[o])){const p=e[o];e[o]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,h,f;if(t instanceof Wn)h=zr(t.firestore,co),f=xh(t._key.path),u={next:p=>{e[o]&&e[o](eO(h,t,p))},error:e[o+1],complete:e[o+2]};else{const p=zr(t,ys);h=zr(p.firestore,co),f=p._query;const m=new oI(h);u={next:y=>{e[o]&&e[o](new ZD(h,m,p,y))},error:e[o+1],complete:e[o+2]},GD(t._query)}return function(m,y,v,I){const A=new QE(I),N=new qE(y,A,v);return m.asyncQueue.enqueueAndForget(async()=>UE(await fp(m),N)),()=>{A.La(),m.asyncQueue.enqueueAndForget(async()=>BE(await fp(m),N))}}(Mh(h),f,c,u)}function aI(t,e){return function(r,i){const s=new ki;return r.asyncQueue.enqueueAndForget(async()=>$G(await s3(r),i,s)),s.promise}(Mh(t),e)}function eO(t,e,n){const r=n.docs.get(e._key),i=new oI(t);return new XD(t,i,e._key,r,new au(n.hasPendingWrites,n.fromCache),e.converter)}class S3{constructor(e){let n;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),n=e.tabManager):(n=k3(void 0),n._initialize(e)),this._onlineComponentProvider=n._onlineComponentProvider,this._offlineComponentProvider=n._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function C3(t){return new S3(t)}class P3{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=new YE,this._offlineComponentProvider=new ND(this._onlineComponentProvider,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}class x3{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=new YE,this._offlineComponentProvider=new t3(this._onlineComponentProvider,e==null?void 0:e.cacheSizeBytes)}}function k3(t){return new P3(t==null?void 0:t.forceOwnership)}function D3(){return new x3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Og(e)}set(e,n,r){this._verifyNotCommitted();const i=J_(e,this._firestore),s=JD(i.converter,n,r),o=$D(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,xn.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=J_(e,this._firestore);let o;return o=typeof(n=ke(n))=="string"||n instanceof Lh?HD(this._dataReader,"WriteBatch.update",s._key,n,r,i):qD(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,xn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=J_(e,this._firestore);return this._mutations=this._mutations.concat(new Tg(n._key,xn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new re(q.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function J_(t,e){if((t=ke(t)).firestore!==e)throw new re(q.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function N3(...t){return new m3("arrayUnion",t)}function M3(t){return new _3("increment",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L3(t){return Mh(t=zr(t,co)),new O3(t,e=>aI(t,e))}(function(e,n=!0){(function(i){ol=i})(ms),di(new hi("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),c=new co(new y6(r.getProvider("auth-internal")),new I6(r.getProvider("app-check-internal")),function(h,f){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new re(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new oa(h.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),fr(cR,"4.2.0",e),fr(cR,"4.2.0","esm2017")})();function cI(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}const pre={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},gre={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gS(t){return t!==void 0&&t.getResponse!==void 0}function mS(t){return t!==void 0&&t.enterprise!==void 0}class V3{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(n=>n.provider==="EMAIL_PASSWORD_PROVIDER"&&n.enforcementState!=="OFF")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F3(){return{["admin-restricted-operation"]:"This operation is restricted to administrators only.",["argument-error"]:"",["app-not-authorized"]:"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.",["app-not-installed"]:"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.",["captcha-check-failed"]:"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.",["code-expired"]:"The SMS code has expired. Please re-send the verification code to try again.",["cordova-not-ready"]:"Cordova framework is not ready.",["cors-unsupported"]:"This browser is not supported.",["credential-already-in-use"]:"This credential is already associated with a different user account.",["custom-token-mismatch"]:"The custom token corresponds to a different audience.",["requires-recent-login"]:"This operation is sensitive and requires recent authentication. Log in again before retrying this request.",["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.",["dynamic-link-not-activated"]:"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.",["email-change-needs-verification"]:"Multi-factor users must always have a verified email.",["email-already-in-use"]:"The email address is already in use by another account.",["emulator-config-failed"]:'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',["expired-action-code"]:"The action code has expired.",["cancelled-popup-request"]:"This operation has been cancelled due to another conflicting popup being opened.",["internal-error"]:"An internal AuthError has occurred.",["invalid-app-credential"]:"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.",["invalid-app-id"]:"The mobile app identifier is not registed for the current project.",["invalid-user-token"]:"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.",["invalid-auth-event"]:"An internal AuthError has occurred.",["invalid-verification-code"]:"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.",["invalid-continue-uri"]:"The continue URL provided in the request is invalid.",["invalid-cordova-configuration"]:"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.",["invalid-custom-token"]:"The custom token format is incorrect. Please check the documentation.",["invalid-dynamic-link-domain"]:"The provided dynamic link domain is not configured or authorized for the current project.",["invalid-email"]:"The email address is badly formatted.",["invalid-emulator-scheme"]:"Emulator URL must start with a valid scheme (http:// or https://).",["invalid-api-key"]:"Your API key is invalid, please check you have copied it correctly.",["invalid-cert-hash"]:"The SHA-1 certificate hash provided is invalid.",["invalid-credential"]:"The supplied auth credential is malformed or has expired.",["invalid-message-payload"]:"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.",["invalid-multi-factor-session"]:"The request does not contain a valid proof of first factor successful sign-in.",["invalid-oauth-provider"]:"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.",["invalid-oauth-client-id"]:"The OAuth client ID provided is either invalid or does not match the specified API key.",["unauthorized-domain"]:"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.",["invalid-action-code"]:"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.",["wrong-password"]:"The password is invalid or the user does not have a password.",["invalid-persistence-type"]:"The specified persistence type is invalid. It can only be local, session or none.",["invalid-phone-number"]:"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].",["invalid-provider-id"]:"The specified provider ID is invalid.",["invalid-recipient-email"]:"The email corresponding to this action failed to send as the provided recipient email address is invalid.",["invalid-sender"]:"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.",["invalid-verification-id"]:"The verification ID used to create the phone auth credential is invalid.",["invalid-tenant-id"]:"The Auth instance's tenant ID is invalid.",["login-blocked"]:"Login blocked by user-provided method: {$originalMessage}",["missing-android-pkg-name"]:"An Android Package Name must be provided if the Android App is required to be installed.",["auth-domain-config-required"]:"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.",["missing-app-credential"]:"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.",["missing-verification-code"]:"The phone auth credential was created with an empty SMS verification code.",["missing-continue-uri"]:"A continue URL must be provided in the request.",["missing-iframe-start"]:"An internal AuthError has occurred.",["missing-ios-bundle-id"]:"An iOS Bundle ID must be provided if an App Store ID is provided.",["missing-or-invalid-nonce"]:"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.",["missing-password"]:"A non-empty password must be provided",["missing-multi-factor-info"]:"No second factor identifier is provided.",["missing-multi-factor-session"]:"The request is missing proof of first factor successful sign-in.",["missing-phone-number"]:"To send verification codes, provide a phone number for the recipient.",["missing-verification-id"]:"The phone auth credential was created with an empty verification ID.",["app-deleted"]:"This instance of FirebaseApp has been deleted.",["multi-factor-info-not-found"]:"The user does not have a second factor matching the identifier provided.",["multi-factor-auth-required"]:"Proof of ownership of a second factor is required to complete sign-in.",["account-exists-with-different-credential"]:"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.",["network-request-failed"]:"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.",["no-auth-event"]:"An internal AuthError has occurred.",["no-such-provider"]:"User was not linked to an account with the given provider.",["null-user"]:"A null user object was provided as the argument for an operation which requires a non-null user object.",["operation-not-allowed"]:"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.",["operation-not-supported-in-this-environment"]:'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',["popup-blocked"]:"Unable to establish a connection with the popup. It may have been blocked by the browser.",["popup-closed-by-user"]:"The popup has been closed by the user before finalizing the operation.",["provider-already-linked"]:"User can only be linked to one identity for the given provider.",["quota-exceeded"]:"The project's quota for this operation has been exceeded.",["redirect-cancelled-by-user"]:"The redirect operation has been cancelled by the user before finalizing.",["redirect-operation-pending"]:"A redirect sign-in operation is already pending.",["rejected-credential"]:"The request contains malformed or mismatching credentials.",["second-factor-already-in-use"]:"The second factor is already enrolled on this account.",["maximum-second-factor-count-exceeded"]:"The maximum allowed number of second factors on a user has been exceeded.",["tenant-id-mismatch"]:"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.",["user-token-expired"]:"The user's credential is no longer valid. The user must sign in again.",["too-many-requests"]:"We have blocked all requests from this device due to unusual activity. Try again later.",["unauthorized-continue-uri"]:"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.",["unsupported-first-factor"]:"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.",["unsupported-persistence-type"]:"The current environment does not support the specified persistence type.",["unsupported-tenant-operation"]:"This operation is not supported in a multi-tenant context.",["unverified-email"]:"The operation requires a verified email.",["user-cancelled"]:"The user did not grant your application the permissions it requested.",["user-not-found"]:"There is no user record corresponding to this identifier. The user may have been deleted.",["user-disabled"]:"The user account has been disabled by an administrator.",["user-mismatch"]:"The supplied credentials do not correspond to the previously signed in user.",["user-signed-out"]:"",["weak-password"]:"The password must be 6 characters long or more.",["web-storage-unsupported"]:"This browser is not supported or 3rd party cookies and data may be disabled.",["already-initialized"]:"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.",["missing-recaptcha-token"]:"The reCAPTCHA token is missing when sending request to the backend.",["invalid-recaptcha-token"]:"The reCAPTCHA token is invalid when sending request to the backend.",["invalid-recaptcha-action"]:"The reCAPTCHA action is invalid when sending request to the backend.",["recaptcha-not-enabled"]:"reCAPTCHA Enterprise integration is not enabled for this project.",["missing-client-type"]:"The reCAPTCHA client type is missing when sending request to the backend.",["missing-recaptcha-version"]:"The reCAPTCHA version is missing when sending request to the backend.",["invalid-req-type"]:"Invalid request parameters.",["invalid-recaptcha-version"]:"The reCAPTCHA version is invalid when sending request to the backend.",["unsupported-password-policy-schema-version"]:"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.",["password-does-not-meet-requirements"]:"The password does not meet the requirements."}}function tO(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const mre=F3,U3=tO,nO=new rl("auth","Firebase",tO());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mp=new wh("@firebase/auth");function B3(t,...e){mp.logLevel<=Ge.WARN&&mp.warn(`Auth (${ms}): ${t}`,...e)}function Tf(t,...e){mp.logLevel<=Ge.ERROR&&mp.error(`Auth (${ms}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gr(t,...e){throw lI(t,...e)}function Sr(t,...e){return lI(t,...e)}function rO(t,e,n){const r=Object.assign(Object.assign({},U3()),{[e]:n});return new rl("auth","Firebase",r).create(e,{appName:t.name})}function dl(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&gr(t,"argument-error"),rO(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function lI(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return nO.create(t,...e)}function oe(t,e,...n){if(!t)throw lI(e,...n)}function Ci(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Tf(e),new Error(e)}function us(t,e){t||Ci(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ch(){var t;return typeof self!="undefined"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function uI(){return _S()==="http:"||_S()==="https:"}function _S(){var t;return typeof self!="undefined"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $3(){return typeof navigator!="undefined"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(uI()||kz()||"connection"in navigator)?navigator.onLine:!0}function q3(){if(typeof navigator=="undefined")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(e,n){this.shortDelay=e,this.longDelay=n,us(n>e,"Short delay should be less than long delay!"),this.isMobile=qw()||Wx()}get(){return $3()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hI(t,e){us(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self!="undefined"&&"fetch"in self)return self.fetch;Ci("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self!="undefined"&&"Headers"in self)return self.Headers;Ci("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self!="undefined"&&"Response"in self)return self.Response;Ci("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H3={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W3=new Fh(3e4,6e4);function Zt(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function on(t,e,n,r,i={}){return sO(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const c=ya(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),iO.fetch()(oO(t,t.config.apiHost,n,c),Object.assign({method:e,headers:u,referrerPolicy:"no-referrer"},s))})}async function sO(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},H3),e);try{const i=new z3(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw cu(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const c=s.ok?o.errorMessage:o.error.message,[u,h]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw cu(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw cu(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw cu(t,"user-disabled",o);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw rO(t,f,h);gr(t,f)}}catch(i){if(i instanceof gi)throw i;gr(t,"network-request-failed",{message:String(i)})}}async function vs(t,e,n,r,i={}){const s=await on(t,e,n,r,i);return"mfaPendingCredential"in s&&gr(t,"multi-factor-auth-required",{_serverResponse:s}),s}function oO(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?hI(t.config,i):`${t.config.apiScheme}://${i}`}class z3{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Sr(this.auth,"network-request-failed")),W3.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function cu(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Sr(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j3(t){return(await on(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function K3(t,e){return on(t,"GET","/v2/recaptchaConfig",Zt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G3(t,e){return on(t,"POST","/v1/accounts:delete",e)}async function Y3(t,e){return on(t,"POST","/v1/accounts:update",e)}async function Q3(t,e){return on(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iu(t){if(!!t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function J3(t,e=!1){const n=ke(t),r=await n.getIdToken(e),i=Vg(r);oe(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Iu(X_(i.auth_time)),issuedAtTime:Iu(X_(i.iat)),expirationTime:Iu(X_(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function X_(t){return Number(t)*1e3}function Vg(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Tf("JWT malformed, contained fewer than 3 sections"),null;try{const i=zf(n);return i?JSON.parse(i):(Tf("Failed to decode base64 JWT payload"),null)}catch(i){return Tf("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function X3(t){const e=Vg(t);return oe(e,"internal-error"),oe(typeof e.exp!="undefined","internal-error"),oe(typeof e.iat!="undefined","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hs(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof gi&&Z3(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Z3({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e5{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Iu(this.lastLoginAt),this.creationTime=Iu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lh(t){var e;const n=t.auth,r=await t.getIdToken(),i=await hs(t,Q3(n,{idToken:r}));oe(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?r5(s.providerUserInfo):[],c=n5(t.providerData,o),u=t.isAnonymous,h=!(t.email&&s.passwordHash)&&!(c!=null&&c.length),f=u?h:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new aO(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(t,p)}async function t5(t){const e=ke(t);await lh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function n5(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function r5(t){return t.map(e=>{var{providerId:n}=e,r=cI(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i5(t,e){const n=await sO(t,{},async()=>{const r=ya({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=oO(t,i,"/v1/token",`key=${s}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",iO.fetch()(o,{method:"POST",headers:c,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){oe(e.idToken,"internal-error"),oe(typeof e.idToken!="undefined","internal-error"),oe(typeof e.refreshToken!="undefined","internal-error");const n="expiresIn"in e&&typeof e.expiresIn!="undefined"?Number(e.expiresIn):X3(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return oe(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await i5(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new uh;return r&&(oe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(oe(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(oe(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new uh,this.toJSON())}_performRefresh(){return Ci("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ns(t,e){oe(typeof t=="string"||typeof t=="undefined","internal-error",{appName:e})}class Zo{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=cI(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new e5(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new aO(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await hs(this,this.stsTokenManager.getToken(this.auth,e));return oe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return J3(this,e)}reload(){return t5(this)}_assign(e){this!==e&&(oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Zo(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await lh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await hs(this,G3(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,c,u,h,f;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,y=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,v=(o=n.photoURL)!==null&&o!==void 0?o:void 0,I=(c=n.tenantId)!==null&&c!==void 0?c:void 0,A=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,N=(h=n.createdAt)!==null&&h!==void 0?h:void 0,D=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:k,emailVerified:P,isAnonymous:B,providerData:V,stsTokenManager:F}=n;oe(k&&F,e,"internal-error");const M=uh.fromJSON(this.name,F);oe(typeof k=="string",e,"internal-error"),Ns(p,e.name),Ns(m,e.name),oe(typeof P=="boolean",e,"internal-error"),oe(typeof B=="boolean",e,"internal-error"),Ns(y,e.name),Ns(v,e.name),Ns(I,e.name),Ns(A,e.name),Ns(N,e.name),Ns(D,e.name);const J=new Zo({uid:k,auth:e,email:m,emailVerified:P,displayName:p,isAnonymous:B,photoURL:v,phoneNumber:y,tenantId:I,stsTokenManager:M,createdAt:N,lastLoginAt:D});return V&&Array.isArray(V)&&(J.providerData=V.map(ee=>Object.assign({},ee))),A&&(J._redirectEventId=A),J}static async _fromIdTokenResponse(e,n,r=!1){const i=new uh;i.updateFromServerResponse(n);const s=new Zo({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await lh(s),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yS=new Map;function es(t){us(t instanceof Function,"Expected a class definition");let e=yS.get(t);return e?(us(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,yS.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}cO.type="NONE";const vS=cO;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bf(t,e,n){return`firebase:${t}:${e}:${n}`}class Tc{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=bf(this.userKey,i.apiKey,s),this.fullPersistenceKey=bf("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Zo._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Tc(es(vS),e,r);const i=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=i[0]||es(vS);const o=bf(r,e.config.apiKey,e.name);let c=null;for(const h of n)try{const f=await h._get(o);if(f){const p=Zo._fromJSON(e,f);h!==s&&(c=p),s=h;break}}catch{}const u=i.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new Tc(s,e,r):(s=u[0],c&&await s._set(o,c.toJSON()),await Promise.all(n.map(async h=>{if(h!==s)try{await h._remove(o)}catch{}})),new Tc(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wS(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(hO(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(lO(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(fO(e))return"Blackberry";if(pO(e))return"Webos";if(dI(e))return"Safari";if((e.includes("chrome/")||uO(e))&&!e.includes("edge/"))return"Chrome";if(dO(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function lO(t=rn()){return/firefox\//i.test(t)}function dI(t=rn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function uO(t=rn()){return/crios\//i.test(t)}function hO(t=rn()){return/iemobile/i.test(t)}function dO(t=rn()){return/android/i.test(t)}function fO(t=rn()){return/blackberry/i.test(t)}function pO(t=rn()){return/webos/i.test(t)}function Fg(t=rn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function _re(t=rn()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function s5(t=rn()){var e;return Fg(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function o5(){return Dz()&&document.documentMode===10}function gO(t=rn()){return Fg(t)||dO(t)||pO(t)||fO(t)||/windows phone/i.test(t)||hO(t)}function a5(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mO(t,e=[]){let n;switch(t){case"Browser":n=wS(rn());break;case"Worker":n=`${wS(rn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ms}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c5{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,c)=>{try{const u=e(s);o(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l5(t,e={}){return on(t,"GET","/v2/passwordPolicy",Zt(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u5=6;class h5{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:u5,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,c;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d5{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ES(this),this.idTokenSubscription=new ES(this),this.beforeStateQueue=new c5(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=nO,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=es(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Tc.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===c)&&(u==null?void 0:u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await lh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=q3()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?ke(e):null;return n&&oe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(es(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await l5(this),n=new h5(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new rl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&es(e)||this._popupRedirectResolver;oe(n,this,"argument-error"),this.redirectPersistenceManager=await Tc.create(this,[es(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(oe(c,this,"internal-error"),c.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=mO(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&B3(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function hn(t){return ke(t)}class ES{constructor(e){this.auth=e,this.observer=null,this.addObserver=$z(n=>this.observer=n)}get next(){return oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f5(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function fI(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Sr("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",f5().appendChild(r)})}function _O(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const p5="https://www.google.com/recaptcha/enterprise.js?render=",g5="recaptcha-enterprise",m5="NO_RECAPTCHA";class _5{constructor(e){this.type=g5,this.auth=hn(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,c)=>{K3(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const h=new V3(u);return s.tenantId==null?s._agentRecaptchaConfig=h:s._tenantRecaptchaConfigs[s.tenantId]=h,o(h.siteKey)}}).catch(u=>{c(u)})})}function i(s,o,c){const u=window.grecaptcha;mS(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(h=>{o(h)}).catch(()=>{o(m5)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(c=>{if(!n&&mS(window.grecaptcha))i(c,s,o);else{if(typeof window=="undefined"){o(new Error("RecaptchaVerifier is only supported in browser"));return}fI(p5+c).then(()=>{i(c,s,o)}).catch(u=>{o(u)})}}).catch(c=>{o(c)})})}}async function lo(t,e,n,r=!1){const i=new _5(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y5(t,e){const n=va(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Bu(s,e!=null?e:{}))return i;gr(i,"already-initialized")}return n.initialize({options:e})}function v5(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(es);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function w5(t,e,n){const r=hn(t);oe(r._canInitEmulator,r,"emulator-config-failed"),oe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=yO(e),{host:o,port:c}=E5(e),u=c===null?"":`:${c}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||I5()}function yO(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function E5(t){const e=yO(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:IS(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:IS(o)}}}function IS(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function I5(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console!="undefined"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window!="undefined"&&typeof document!="undefined"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ci("not implemented")}_getIdTokenResponse(e){return Ci("not implemented")}_linkToIdToken(e,n){return Ci("not implemented")}_getReauthenticationResolver(e){return Ci("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vO(t,e){return on(t,"POST","/v1/accounts:resetPassword",Zt(t,e))}async function wO(t,e){return on(t,"POST","/v1/accounts:update",e)}async function T5(t,e){return on(t,"POST","/v1/accounts:update",Zt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z_(t,e){return vs(t,"POST","/v1/accounts:signInWithPassword",Zt(t,e))}async function Ug(t,e){return on(t,"POST","/v1/accounts:sendOobCode",Zt(t,e))}async function b5(t,e){return Ug(t,e)}async function ey(t,e){return Ug(t,e)}async function ty(t,e){return Ug(t,e)}async function A5(t,e){return Ug(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R5(t,e){return vs(t,"POST","/v1/accounts:signInWithEmailLink",Zt(t,e))}async function S5(t,e){return vs(t,"POST","/v1/accounts:signInWithEmailLink",Zt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh extends Uh{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new hh(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new hh(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if((n==null?void 0:n.email)&&(n==null?void 0:n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){var n;switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(!((n=e._getRecaptchaConfig())===null||n===void 0)&&n.emailPasswordEnabled){const i=await lo(e,r,"signInWithPassword");return Z_(e,i)}else return Z_(e,r).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const s=await lo(e,r,"signInWithPassword");return Z_(e,s)}else return Promise.reject(i)});case"emailLink":return R5(e,{email:this._email,oobCode:this._password});default:gr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":return wO(e,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return S5(e,{idToken:n,email:this._email,oobCode:this._password});default:gr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function is(t,e){return vs(t,"POST","/v1/accounts:signInWithIdp",Zt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C5="http://localhost";class ds extends Uh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ds(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):gr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=cI(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new ds(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return is(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,is(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,is(e,n)}buildRequest(){const e={requestUri:C5,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ya(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P5(t,e){return on(t,"POST","/v1/accounts:sendVerificationCode",Zt(t,e))}async function x5(t,e){return vs(t,"POST","/v1/accounts:signInWithPhoneNumber",Zt(t,e))}async function k5(t,e){const n=await vs(t,"POST","/v1/accounts:signInWithPhoneNumber",Zt(t,e));if(n.temporaryProof)throw cu(t,"account-exists-with-different-credential",n);return n}const D5={USER_NOT_FOUND:"user-not-found"};async function O5(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return vs(t,"POST","/v1/accounts:signInWithPhoneNumber",Zt(t,n),D5)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea extends Uh{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new ea({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new ea({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return x5(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return k5(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return O5(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!n&&!i&&!s?null:new ea({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N5(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function M5(t){const e=Zl(eu(t)).link,n=e?Zl(eu(e)).deep_link_id:null,r=Zl(eu(t)).deep_link_id;return(r?Zl(eu(r)).link:null)||r||n||e||t}class Bg{constructor(e){var n,r,i,s,o,c;const u=Zl(eu(e)),h=(n=u.apiKey)!==null&&n!==void 0?n:null,f=(r=u.oobCode)!==null&&r!==void 0?r:null,p=N5((i=u.mode)!==null&&i!==void 0?i:null);oe(h&&f&&p,"argument-error"),this.apiKey=h,this.operation=p,this.code=f,this.continueUrl=(s=u.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(c=u.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=M5(e);try{return new Bg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(){this.providerId=vo.PROVIDER_ID}static credential(e,n){return hh._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Bg.parseLink(n);return oe(r,"argument-error"),hh._fromEmailAndCode(e,r.code,r.tenantId)}}vo.PROVIDER_ID="password";vo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";vo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl extends ws{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Af extends fl{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return oe("providerId"in n&&"signInMethod"in n,"argument-error"),ds._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return oe(e.idToken||e.accessToken,"argument-error"),ds._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Af.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Af.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:c}=e;if(!r&&!i&&!n&&!s||!c)return null;try{return new Af(c)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs extends fl{constructor(){super("facebook.com")}static credential(e){return ds._fromParams({providerId:Hs.PROVIDER_ID,signInMethod:Hs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hs.credentialFromTaggedObject(e)}static credentialFromError(e){return Hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hs.credential(e.oauthAccessToken)}catch{return null}}}Hs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Hs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws extends fl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ds._fromParams({providerId:Ws.PROVIDER_ID,signInMethod:Ws.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ws.credentialFromTaggedObject(e)}static credentialFromError(e){return Ws.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ws.credential(n,r)}catch{return null}}}Ws.GOOGLE_SIGN_IN_METHOD="google.com";Ws.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs extends fl{constructor(){super("github.com")}static credential(e){return ds._fromParams({providerId:zs.PROVIDER_ID,signInMethod:zs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zs.credentialFromTaggedObject(e)}static credentialFromError(e){return zs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zs.credential(e.oauthAccessToken)}catch{return null}}}zs.GITHUB_SIGN_IN_METHOD="github.com";zs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L5="http://localhost";class dh extends Uh{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return is(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,is(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,is(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:s}=n;return!r||!i||!s||r!==i?null:new dh(r,s)}static _create(e,n){return new dh(e,n)}buildRequest(){return{requestUri:L5,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V5="saml.";class Dv extends ws{constructor(e){oe(e.startsWith(V5),"argument-error"),super(e)}static credentialFromResult(e){return Dv.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Dv.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=dh.fromJSON(e);return oe(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return dh._create(r,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js extends fl{constructor(){super("twitter.com")}static credential(e,n){return ds._fromParams({providerId:js.PROVIDER_ID,signInMethod:js.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return js.credentialFromTaggedObject(e)}static credentialFromError(e){return js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return js.credential(n,r)}catch{return null}}}js.TWITTER_SIGN_IN_METHOD="twitter.com";js.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rf(t,e){return vs(t,"POST","/v1/accounts:signUp",Zt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Zo._fromIdTokenResponse(e,r,i),o=TS(r);return new Kr({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=TS(r);return new Kr({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function TS(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yre(t){var e;const n=hn(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new Kr({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await Rf(n,{returnSecureToken:!0}),i=await Kr._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p extends gi{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,_p.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new _p(e,n,r,i)}}function EO(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?_p._fromErrorAndOperation(t,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IO(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vre(t,e){const n=ke(t);await $g(!0,n,e);const{providerUserInfo:r}=await Y3(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),i=IO(r||[]);return n.providerData=n.providerData.filter(s=>i.has(s.providerId)),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function pI(t,e,n=!1){const r=await hs(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Kr._forOperation(t,"link",r)}async function $g(t,e,n){await lh(e);const r=IO(e.providerData),i=t===!1?"provider-already-linked":"no-such-provider";oe(r.has(n)===t,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TO(t,e,n=!1){const{auth:r}=t,i="reauthenticate";try{const s=await hs(t,EO(r,i,e,t),n);oe(s.idToken,r,"internal-error");const o=Vg(s.idToken);oe(o,r,"internal-error");const{sub:c}=o;return oe(t.uid===c,r,"user-mismatch"),Kr._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&gr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bO(t,e,n=!1){const r="signIn",i=await EO(t,r,e),s=await Kr._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function gI(t,e){return bO(hn(t),e)}async function F5(t,e){const n=ke(t);return await $g(!1,n,e.providerId),pI(n,e)}async function AO(t,e){return TO(ke(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U5(t,e){return vs(t,"POST","/v1/accounts:signInWithCustomToken",Zt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wre(t,e){const n=hn(t),r=await U5(n,{token:e,returnSecureToken:!0}),i=await Kr._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?mI._fromServerResponse(e,n):"totpInfo"in n?_I._fromServerResponse(e,n):gr(e,"internal-error")}}class mI extends Bh{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new mI(n)}}class _I extends Bh{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new _I(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bc(t,e,n){var r;oe(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),oe(typeof n.dynamicLinkDomain=="undefined"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(oe(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(oe(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yI(t){const e=hn(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Ere(t,e,n){var r;const i=hn(t),s={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};if(!((r=i._getRecaptchaConfig())===null||r===void 0)&&r.emailPasswordEnabled){const o=await lo(i,s,"getOobCode",!0);n&&bc(i,o,n),await ey(i,o)}else n&&bc(i,s,n),await ey(i,s).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const c=await lo(i,s,"getOobCode",!0);n&&bc(i,c,n),await ey(i,c)}else return Promise.reject(o)})}async function Ire(t,e,n){await vO(ke(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&yI(t),r})}async function Tre(t,e){await T5(ke(t),{oobCode:e})}async function B5(t,e){const n=ke(t),r=await vO(n,{oobCode:e}),i=r.requestType;switch(oe(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":oe(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":oe(r.mfaInfo,n,"internal-error");default:oe(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=Bh._fromServerResponse(hn(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function bre(t,e){const{data:n}=await B5(ke(t),e);return n.email}async function Are(t,e,n){var r;const i=hn(t),s={returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"};let o;if(!((r=i._getRecaptchaConfig())===null||r===void 0)&&r.emailPasswordEnabled){const h=await lo(i,s,"signUpPassword");o=Rf(i,h)}else o=Rf(i,s).catch(async h=>{if(h.code==="auth/missing-recaptcha-token"){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const f=await lo(i,s,"signUpPassword");return Rf(i,f)}throw h});const c=await o.catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&yI(t),h}),u=await Kr._fromIdTokenResponse(i,"signIn",c);return await i._updateCurrentUser(u.user),u}function Rre(t,e,n){return gI(ke(t),vo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&yI(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sre(t,e,n){var r;const i=hn(t),s={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function o(c,u){oe(u.handleCodeInApp,i,"argument-error"),u&&bc(i,c,u)}if(!((r=i._getRecaptchaConfig())===null||r===void 0)&&r.emailPasswordEnabled){const c=await lo(i,s,"getOobCode",!0);o(c,n),await ty(i,c)}else o(s,n),await ty(i,s).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const u=await lo(i,s,"getOobCode",!0);o(u,n),await ty(i,u)}else return Promise.reject(c)})}function Cre(t,e){const n=Bg.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function Pre(t,e,n){const r=ke(t),i=vo.credentialWithLink(e,n||ch());return oe(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),gI(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $5(t,e){return on(t,"POST","/v1/accounts:createAuthUri",Zt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xre(t,e){const n=uI()?ch():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:i}=await $5(ke(t),r);return i||[]}async function kre(t,e){const n=ke(t),r=await t.getIdToken(),i={requestType:"VERIFY_EMAIL",idToken:r};e&&bc(n.auth,i,e);const{email:s}=await b5(n.auth,i);s!==t.email&&await t.reload()}async function Dre(t,e,n){const r=ke(t),i=await t.getIdToken(),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:i,newEmail:e};n&&bc(r.auth,s,n);const{email:o}=await A5(r.auth,s);o!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q5(t,e){return on(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H5(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=ke(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await hs(r,q5(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const c=r.providerData.find(({providerId:u})=>u==="password");c&&(c.displayName=r.displayName,c.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function W5(t,e){return RO(ke(t),e,null)}function z5(t,e){return RO(ke(t),null,e)}async function RO(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const o=await hs(t,wO(r,s));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j5(t){var e,n;if(!t)return null;const{providerId:r}=t,i=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},s=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(t==null?void 0:t.idToken)){const o=(n=(e=Vg(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(o){const c=o!=="anonymous"&&o!=="custom"?o:null;return new Ac(s,c)}}if(!r)return null;switch(r){case"facebook.com":return new K5(s,i);case"github.com":return new G5(s,i);case"google.com":return new Y5(s,i);case"twitter.com":return new Q5(s,i,t.screenName||null);case"custom":case"anonymous":return new Ac(s,null);default:return new Ac(s,r,i)}}class Ac{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class SO extends Ac{constructor(e,n,r,i){super(e,n,r),this.username=i}}class K5 extends Ac{constructor(e,n){super(e,"facebook.com",n)}}class G5 extends SO{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class Y5 extends Ac{constructor(e,n){super(e,"google.com",n)}}class Q5 extends SO{constructor(e,n,r){super(e,"twitter.com",n,r)}}function Ore(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:j5(n)}function CO(t,e,n,r){return ke(t).onIdTokenChanged(e,n,r)}function J5(t,e,n){return ke(t).beforeAuthStateChanged(e,n)}function X5(t,e,n,r){return ke(t).onAuthStateChanged(e,n,r)}function Nre(t){return ke(t).signOut()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e,n,r){this.type=e,this.credential=n,this.user=r}static _fromIdtoken(e,n){return new jo("enroll",e,n)}static _fromMfaPendingCredential(e){return new jo("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e!=null&&e.multiFactorSession){if(!((n=e.multiFactorSession)===null||n===void 0)&&n.pendingCredential)return jo._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return jo._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=hn(e),i=n.customData._serverResponse,s=(i.mfaInfo||[]).map(c=>Bh._fromServerResponse(r,c));oe(i.mfaPendingCredential,r,"internal-error");const o=jo._fromMfaPendingCredential(i.mfaPendingCredential);return new vI(o,s,async c=>{const u=await c._process(r,o);delete i.mfaInfo,delete i.mfaPendingCredential;const h=Object.assign(Object.assign({},i),{idToken:u.idToken,refreshToken:u.refreshToken});switch(n.operationType){case"signIn":const f=await Kr._fromIdTokenResponse(r,n.operationType,h);return await r._updateCurrentUser(f.user),f;case"reauthenticate":return oe(n.user,r,"internal-error"),Kr._forOperation(n.user,n.operationType,h);default:gr(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function Mre(t,e){var n;const r=ke(t),i=e;return oe(e.customData.operationType,r,"argument-error"),oe((n=i.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,r,"argument-error"),vI._fromError(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z5(t,e){return on(t,"POST","/v2/accounts/mfaEnrollment:start",Zt(t,e))}function eY(t,e){return on(t,"POST","/v2/accounts/mfaEnrollment:finalize",Zt(t,e))}function tY(t,e){return on(t,"POST","/v2/accounts/mfaEnrollment:withdraw",Zt(t,e))}class wI{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>Bh._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new wI(e)}async getSession(){return jo._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const r=e,i=await this.getSession(),s=await hs(this.user,r._process(this.user.auth,i,n));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await hs(this.user,tY(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==n),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const ny=new WeakMap;function Lre(t){const e=ke(t);return ny.has(e)||ny.set(e,wI._fromUser(e)),ny.get(e)}const yp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PO{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(yp,"1"),this.storage.removeItem(yp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nY(){const t=rn();return dI(t)||Fg(t)}const rY=1e3,iY=10;class xO extends PO{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=nY()&&a5(),this.fallbackToPolling=gO(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);o5()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,iY):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},rY)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}xO.type="LOCAL";const sY=xO;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kO extends PO{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}kO.type="SESSION";const DO=kO;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oY(t){return Promise.all(t.map(async e=>{try{const n=await e;return{fulfilled:!0,value:n}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new qg(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(o).map(async h=>h(n.origin,s)),u=await oY(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}qg.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hg(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aY{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel!="undefined"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((c,u)=>{const h=Hg("",20);i.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){const m=p;if(m.data.eventId===h)switch(m.data.status){case"ack":clearTimeout(f),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(m.data.response);break;default:clearTimeout(f),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nn(){return window}function cY(t){nn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EI(){return typeof nn().WorkerGlobalScope!="undefined"&&typeof nn().importScripts=="function"}async function lY(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function uY(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function hY(){return EI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OO="firebaseLocalStorageDb",dY=1,vp="firebaseLocalStorage",NO="fbase_key";class $h{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Wg(t,e){return t.transaction([vp],e?"readwrite":"readonly").objectStore(vp)}function fY(){const t=indexedDB.deleteDatabase(OO);return new $h(t).toPromise()}function Ov(){const t=indexedDB.open(OO,dY);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(vp,{keyPath:NO})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(vp)?e(r):(r.close(),await fY(),e(await Ov()))})})}async function bS(t,e,n){const r=Wg(t,!0).put({[NO]:e,value:n});return new $h(r).toPromise()}async function pY(t,e){const n=Wg(t,!1).get(e),r=await new $h(n).toPromise();return r===void 0?null:r.value}function AS(t,e){const n=Wg(t,!0).delete(e);return new $h(n).toPromise()}const gY=800,mY=3;class MO{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ov(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>mY)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return EI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=qg._getInstance(hY()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await lY(),!this.activeServiceWorker)return;this.sender=new aY(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);!r||((e=r[0])===null||e===void 0?void 0:e.fulfilled)&&((n=r[0])===null||n===void 0?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||uY()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ov();return await bS(e,yp,"1"),await AS(e,yp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>bS(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>pY(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>AS(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Wg(i,!1).getAll();return new $h(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),gY)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}MO.type="LOCAL";const _Y=MO;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yY(t,e){return on(t,"POST","/v2/accounts/mfaSignIn:start",Zt(t,e))}function vY(t,e){return on(t,"POST","/v2/accounts/mfaSignIn:finalize",Zt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wY=500,EY=6e4,tf=1e12;class IY{constructor(e){this.auth=e,this.counter=tf,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new TY(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||tf;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||tf;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||tf;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class TY{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;oe(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=bY(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},EY)},wY))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function bY(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ry=_O("rcb"),AY=new Fh(3e4,6e4),RY="https://www.google.com/recaptcha/api.js?";class SY{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=nn().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return oe(CY(n),e,"argument-error"),this.shouldResolveImmediately(n)&&gS(nn().grecaptcha)?Promise.resolve(nn().grecaptcha):new Promise((r,i)=>{const s=nn().setTimeout(()=>{i(Sr(e,"network-request-failed"))},AY.get());nn()[ry]=()=>{nn().clearTimeout(s),delete nn()[ry];const c=nn().grecaptcha;if(!c||!gS(c)){i(Sr(e,"internal-error"));return}const u=c.render;c.render=(h,f)=>{const p=u(h,f);return this.counter++,p},this.hostLanguage=n,r(c)};const o=`${RY}?${ya({onload:ry,render:"explicit",hl:n})}`;fI(o).catch(()=>{clearTimeout(s),i(Sr(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=nn().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function CY(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class PY{async load(e){return new IY(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LO="recaptcha",xY={theme:"light",type:"image"};class Vre{constructor(e,n,r=Object.assign({},xY)){this.parameters=r,this.type=LO,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=hn(e),this.isInvisible=this.parameters.size==="invisible",oe(typeof document!="undefined",this.auth,"operation-not-supported-in-this-environment");const i=typeof n=="string"?document.getElementById(n):n;oe(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new PY:new SY,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const s=o=>{!o||(this.tokenChangeListeners.delete(s),i(o))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){oe(!this.parameters.sitekey,this.auth,"argument-error"),oe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),oe(typeof document!="undefined",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=nn()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){oe(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){oe(uI()&&!EI(),this.auth,"internal-error"),await kY(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await j3(this.auth);oe(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return oe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function kY(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=ea._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function Fre(t,e,n){const r=hn(t),i=await zg(r,e,ke(n));return new II(i,s=>gI(r,s))}async function Ure(t,e,n){const r=ke(t);await $g(!1,r,"phone");const i=await zg(r.auth,e,ke(n));return new II(i,s=>F5(r,s))}async function Bre(t,e,n){const r=ke(t),i=await zg(r.auth,e,ke(n));return new II(i,s=>AO(r,s))}async function zg(t,e,n){var r;const i=await n.verify();try{oe(typeof i=="string",t,"argument-error"),oe(n.type===LO,t,"argument-error");let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const o=s.session;if("phoneNumber"in s)return oe(o.type==="enroll",t,"internal-error"),(await Z5(t,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{oe(o.type==="signin",t,"internal-error");const c=((r=s.multiFactorHint)===null||r===void 0?void 0:r.uid)||s.multiFactorUid;return oe(c,t,"missing-multi-factor-info"),(await yY(t,{mfaPendingCredential:o.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:o}=await P5(t,{phoneNumber:s.phoneNumber,recaptchaToken:i});return o}}finally{n._reset()}}async function $re(t,e){await pI(ke(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e){this.providerId=Rc.PROVIDER_ID,this.auth=hn(e)}verifyPhoneNumber(e,n){return zg(this.auth,e,ke(n))}static credential(e,n){return ea._fromVerification(e,n)}static credentialFromResult(e){const n=e;return Rc.credentialFromTaggedObject(n)}static credentialFromError(e){return Rc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?ea._fromTokenResponse(n,r):null}}Rc.PROVIDER_ID="phone";Rc.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ta(t,e){return e?es(e):(oe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI extends Uh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return is(e,this._buildIdpRequest())}_linkToIdToken(e,n){return is(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return is(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function DY(t){return bO(t.auth,new TI(t),t.bypassAuthState)}function OY(t){const{auth:e,user:n}=t;return oe(n,e,"internal-error"),TO(n,new TI(t),t.bypassAuthState)}async function NY(t){const{auth:e,user:n}=t;return oe(n,e,"internal-error"),pI(n,new TI(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VO{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:c}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return DY;case"linkViaPopup":case"linkViaRedirect":return NY;case"reauthViaPopup":case"reauthViaRedirect":return OY;default:gr(this.auth,"internal-error")}}resolve(e){us(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){us(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MY=new Fh(2e3,1e4);async function qre(t,e,n){const r=hn(t);dl(t,e,ws);const i=Ta(r,n);return new ts(r,"signInViaPopup",e,i).executeNotNull()}async function Hre(t,e,n){const r=ke(t);dl(r.auth,e,ws);const i=Ta(r.auth,n);return new ts(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function Wre(t,e,n){const r=ke(t);dl(r.auth,e,ws);const i=Ta(r.auth,n);return new ts(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class ts extends VO{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,ts.currentPopupAction&&ts.currentPopupAction.cancel(),ts.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return oe(e,this.auth,"internal-error"),e}async onExecution(){us(this.filter.length===1,"Popup operations only handle one event");const e=Hg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Sr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Sr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ts.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Sr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,MY.get())};e()}}ts.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LY="pendingRedirect",Tu=new Map;class VY extends VO{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Tu.get(this.auth._key());if(!e){try{const r=await FY(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Tu.set(this.auth._key(),e)}return this.bypassAuthState||Tu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function FY(t,e){const n=UO(e),r=FO(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function bI(t,e){return FO(t)._set(UO(e),"true")}function zre(){Tu.clear()}function UY(t,e){Tu.set(t._key(),e)}function FO(t){return es(t._redirectPersistence)}function UO(t){return bf(LY,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jre(t,e,n){return BY(t,e,n)}async function BY(t,e,n){const r=hn(t);dl(t,e,ws),await r._initializationPromise;const i=Ta(r,n);return await bI(i,r),i._openRedirect(r,e,"signInViaRedirect")}function Kre(t,e,n){return $Y(t,e,n)}async function $Y(t,e,n){const r=ke(t);dl(r.auth,e,ws),await r.auth._initializationPromise;const i=Ta(r.auth,n);await bI(i,r.auth);const s=await $O(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",s)}function Gre(t,e,n){return qY(t,e,n)}async function qY(t,e,n){const r=ke(t);dl(r.auth,e,ws),await r.auth._initializationPromise;const i=Ta(r.auth,n);await $g(!1,r,e.providerId),await bI(i,r.auth);const s=await $O(r);return i._openRedirect(r.auth,e,"linkViaRedirect",s)}async function Yre(t,e){return await hn(t)._initializationPromise,BO(t,e,!1)}async function BO(t,e,n=!1){const r=hn(t),i=Ta(r,e),o=await new VY(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function $O(t){const e=Hg(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HY=10*60*1e3;class WY{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!zY(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!qO(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Sr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=HY&&this.cachedEventUids.clear(),this.cachedEventUids.has(RS(e))}saveEventToCache(e){this.cachedEventUids.add(RS(e)),this.lastProcessedEventTime=Date.now()}}function RS(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function qO({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function zY(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qO(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jY(t,e={}){return on(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KY=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,GY=/^https?/;async function YY(t){if(t.config.emulator)return;const{authorizedDomains:e}=await jY(t);for(const n of e)try{if(QY(n))return}catch{}gr(t,"unauthorized-domain")}function QY(t){const e=ch(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!GY.test(n))return!1;if(KY.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JY=new Fh(3e4,6e4);function SS(){const t=nn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function XY(t){return new Promise((e,n)=>{var r,i,s;function o(){SS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{SS(),n(Sr(t,"network-request-failed"))},timeout:JY.get()})}if(!((i=(r=nn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=nn().gapi)===null||s===void 0)&&s.load)o();else{const c=_O("iframefcb");return nn()[c]=()=>{gapi.load?o():n(Sr(t,"network-request-failed"))},fI(`https://apis.google.com/js/api.js?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw Sf=null,e})}let Sf=null;function ZY(t){return Sf=Sf||XY(t),Sf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e8=new Fh(5e3,15e3),t8="__/auth/iframe",n8="emulator/auth/iframe",r8={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},i8=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function s8(t){const e=t.config;oe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?hI(e,n8):`https://${t.config.authDomain}/${t8}`,r={apiKey:e.apiKey,appName:t.name,v:ms},i=i8.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${ya(r).slice(1)}`}async function o8(t){const e=await ZY(t),n=nn().gapi;return oe(n,t,"internal-error"),e.open({where:document.body,url:s8(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:r8,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Sr(t,"network-request-failed"),c=nn().setTimeout(()=>{s(o)},e8.get());function u(){nn().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a8={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},c8=500,l8=600,u8="_blank",h8="http://localhost";class CS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function d8(t,e,n,r=c8,i=l8){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u=Object.assign(Object.assign({},a8),{width:r.toString(),height:i.toString(),top:s,left:o}),h=rn().toLowerCase();n&&(c=uO(h)?u8:n),lO(h)&&(e=e||h8,u.scrollbars="yes");const f=Object.entries(u).reduce((m,[y,v])=>`${m}${y}=${v},`,"");if(s5(h)&&c!=="_self")return f8(e||"",c),new CS(null);const p=window.open(e||"",c,f);oe(p,t,"popup-blocked");try{p.focus()}catch{}return new CS(p)}function f8(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p8="__/auth/handler",g8="emulator/auth/handler",m8=encodeURIComponent("fac");async function PS(t,e,n,r,i,s){oe(t.config.authDomain,t,"auth-domain-config-required"),oe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ms,eventId:i};if(e instanceof ws){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Yy(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries(s||{}))o[f]=p}if(e instanceof fl){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const f of Object.keys(c))c[f]===void 0&&delete c[f];const u=await t._getAppCheckToken(),h=u?`#${m8}=${encodeURIComponent(u)}`:"";return`${_8(t)}?${ya(c).slice(1)}${h}`}function _8({config:t}){return t.emulator?hI(t,g8):`https://${t.authDomain}/${p8}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iy="webStorageSupport";class y8{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=DO,this._completeRedirectFn=BO,this._overrideRedirectResult=UY}async _openPopup(e,n,r,i){var s;us((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await PS(e,n,r,ch(),i);return d8(e,o,Hg())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await PS(e,n,r,ch(),i);return cY(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(us(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await o8(e),r=new WY(e);return n.register("authEvent",i=>(oe(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(iy,{type:iy},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[iy];o!==void 0&&n(!!o),gr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=YY(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return gO()||dI()||Fg()}}const v8=y8;class w8{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return Ci("unexpected MultiFactorSessionType")}}}class AI extends w8{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new AI(e)}_finalizeEnroll(e,n,r){return eY(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return vY(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class E8{constructor(){}static assertion(e){return AI._fromCredential(e)}}E8.FACTOR_ID="phone";var xS="@firebase/auth",kS="1.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I8{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);!n||(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T8(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function b8(t){di(new hi("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;oe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:mO(t)},h=new d5(r,i,s,u);return v5(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),di(new hi("auth-internal",e=>{const n=hn(e.getProvider("auth").getImmediate());return(r=>new I8(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),fr(xS,kS,T8(t)),fr(xS,kS,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A8=5*60,R8=Hx("authIdTokenMaxAge")||A8;let DS=null;const S8=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>R8)return;const i=n==null?void 0:n.token;DS!==i&&(DS=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function HO(t=eg()){const e=va(t,"auth");if(e.isInitialized())return e.getImmediate();const n=y5(t,{popupRedirectResolver:v8,persistence:[_Y,sY,DO]}),r=Hx("authTokenSyncURL");if(r){const s=S8(r);J5(n,s,()=>s(n.currentUser)),CO(n,o=>s(o))}const i=Pz("auth");return i&&w5(n,`http://${i}`),n}b8("Browser");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv=new Map,WO={activated:!1,tokenObservers:[]},C8={initialized:!1,enabled:!1};function un(t){return Nv.get(t)||Object.assign({},WO)}function P8(t,e){return Nv.set(t,e),Nv.get(t)}function jg(){return C8}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zO="https://content-firebaseappcheck.googleapis.com/v1",x8="exchangeRecaptchaV3Token",k8="exchangeDebugToken",OS={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},D8=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O8{constructor(e,n,r,i,s){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new ra,await N8(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new ra,await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function N8(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M8={["already-initialized"]:"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.",["use-before-activation"]:"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.",["fetch-network-error"]:"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",["fetch-parse-error"]:"Fetch client could not parse response. Original error: {$originalErrorMessage}.",["fetch-status-error"]:"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",["storage-open"]:"Error thrown when opening storage. Original error: {$originalErrorMessage}.",["storage-get"]:"Error thrown when reading from storage. Original error: {$originalErrorMessage}.",["storage-set"]:"Error thrown when writing to storage. Original error: {$originalErrorMessage}.",["recaptcha-error"]:"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},ur=new rl("appCheck","AppCheck",M8);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NS(t=!1){var e;return t?(e=self.grecaptcha)===null||e===void 0?void 0:e.enterprise:self.grecaptcha}function RI(t){if(!un(t).activated)throw ur.create("use-before-activation",{appName:t.name})}function jO(t){const e=Math.round(t/1e3),n=Math.floor(e/(3600*24)),r=Math.floor((e-n*3600*24)/3600),i=Math.floor((e-n*3600*24-r*3600)/60),s=e-n*3600*24-r*3600-i*60;let o="";return n&&(o+=nf(n)+"d:"),r&&(o+=nf(r)+"h:"),o+=nf(i)+"m:"+nf(s)+"s",o}function nf(t){return t===0?"00":t>=10?t.toString():"0"+t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SI({url:t,body:e},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const p=await i.getHeartbeatsHeader();p&&(r["X-Firebase-Client"]=p)}const s={method:"POST",body:JSON.stringify(e),headers:r};let o;try{o=await fetch(t,s)}catch(p){throw ur.create("fetch-network-error",{originalErrorMessage:p==null?void 0:p.message})}if(o.status!==200)throw ur.create("fetch-status-error",{httpStatus:o.status});let c;try{c=await o.json()}catch(p){throw ur.create("fetch-parse-error",{originalErrorMessage:p==null?void 0:p.message})}const u=c.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw ur.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${c.ttl}`});const h=Number(u[1])*1e3,f=Date.now();return{token:c.token,expireTimeMillis:f+h,issuedAtTimeMillis:f}}function L8(t,e){const{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${zO}/projects/${n}/apps/${r}:${x8}?key=${i}`,body:{recaptcha_v3_token:e}}}function KO(t,e){const{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${zO}/projects/${n}/apps/${r}:${k8}?key=${i}`,body:{debug_token:e}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V8="firebase-app-check-database",F8=1,fh="firebase-app-check-store",GO="debug-token";let rf=null;function YO(){return rf||(rf=new Promise((t,e)=>{try{const n=indexedDB.open(V8,F8);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(ur.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(fh,{keyPath:"compositeKey"})}}}catch(n){e(ur.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),rf)}function U8(t){return JO(XO(t))}function B8(t,e){return QO(XO(t),e)}function $8(t){return QO(GO,t)}function q8(){return JO(GO)}async function QO(t,e){const r=(await YO()).transaction(fh,"readwrite"),s=r.objectStore(fh).put({compositeKey:t,value:e});return new Promise((o,c)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var h;c(ur.create("storage-set",{originalErrorMessage:(h=u.target.error)===null||h===void 0?void 0:h.message}))}})}async function JO(t){const n=(await YO()).transaction(fh,"readonly"),i=n.objectStore(fh).get(t);return new Promise((s,o)=>{i.onsuccess=c=>{const u=c.target.result;s(u?u.value:void 0)},n.onerror=c=>{var u;o(ur.create("storage-get",{originalErrorMessage:(u=c.target.error)===null||u===void 0?void 0:u.message}))}})}function XO(t){return`${t.options.appId}-${t.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ph=new wh("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H8(t){if(Xp()){let e;try{e=await U8(t)}catch(n){ph.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return e}}function sy(t,e){return Xp()?B8(t,e).catch(n=>{ph.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function W8(){let t;try{t=await q8()}catch{}if(t)return t;{const e=jz();return $8(e).catch(n=>ph.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CI(){return jg().enabled}async function PI(){const t=jg();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function z8(){const t=$x(),e=jg();if(e.initialized=!0,typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&t.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;e.enabled=!0;const n=new ra;e.token=n,typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(t.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(W8())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j8={error:"UNKNOWN_ERROR"};function K8(t){return Qp.encodeString(JSON.stringify(t),!1)}async function Mv(t,e=!1){const n=t.app;RI(n);const r=un(n);let i=r.token,s;if(i&&!hc(i)&&(r.token=void 0,i=void 0),!i){const u=await r.cachedTokenPromise;u&&(hc(u)?i=u:await sy(n,void 0))}if(!e&&i&&hc(i))return{token:i.token};let o=!1;if(CI()){r.exchangeTokenPromise||(r.exchangeTokenPromise=SI(KO(n,await PI()),t.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const u=await r.exchangeTokenPromise;return await sy(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=await un(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?ph.warn(u.message):ph.error(u),s=u}let c;return i?s?hc(i)?c={token:i.token,internalError:s}:c=LS(s):(c={token:i.token},r.token=i,await sy(n,i)):c=LS(s),o&&tN(n,c),c}async function G8(t){const e=t.app;RI(e);const{provider:n}=un(e);if(CI()){const r=await PI(),{token:i}=await SI(KO(e,r),t.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function ZO(t,e,n,r){const{app:i}=t,s=un(i),o={next:n,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&hc(s.token)){const c=s.token;Promise.resolve().then(()=>{n({token:c.token}),MS(t)}).catch(()=>{})}s.cachedTokenPromise.then(()=>MS(t))}function eN(t,e){const n=un(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function MS(t){const{app:e}=t,n=un(e);let r=n.tokenRefresher;r||(r=Y8(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function Y8(t){const{app:e}=t;return new O8(async()=>{const n=un(e);let r;if(n.token?r=await Mv(t,!0):r=await Mv(t),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=un(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},OS.RETRIAL_MIN_WAIT,OS.RETRIAL_MAX_WAIT)}function tN(t,e){const n=un(t).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function hc(t){return t.expireTimeMillis-Date.now()>0}function LS(t){return{token:K8(j8),error:t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q8{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=un(this.app);for(const n of e)eN(this.app,n.next);return Promise.resolve()}}function J8(t,e){return new Q8(t,e)}function X8(t){return{getToken:e=>Mv(t,e),getLimitedUseToken:()=>G8(t),addTokenListener:e=>ZO(t,"INTERNAL",e),removeTokenListener:e=>eN(t.app,e)}}const Z8="@firebase/app-check",eQ="0.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tQ="https://www.google.com/recaptcha/api.js";function nQ(t,e){const n=new ra,r=un(t);r.reCAPTCHAState={initialized:n};const i=rQ(t),s=NS(!1);return s?VS(t,e,s,i,n):oQ(()=>{const o=NS(!1);if(!o)throw new Error("no recaptcha");VS(t,e,o,i,n)}),n.promise}function VS(t,e,n,r,i){n.ready(()=>{sQ(t,e,n,r),i.resolve(n)})}function rQ(t){const e=`fire_app_check_${t.name}`,n=document.createElement("div");return n.id=e,n.style.display="none",document.body.appendChild(n),e}async function iQ(t){RI(t);const n=await un(t).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=un(t).reCAPTCHAState;n.ready(()=>{r(n.execute(s.widgetId,{action:"fire_app_check"}))})})}function sQ(t,e,n,r){const i=n.render(r,{sitekey:e,size:"invisible",callback:()=>{un(t).reCAPTCHAState.succeeded=!0},"error-callback":()=>{un(t).reCAPTCHAState.succeeded=!1}}),s=un(t);s.reCAPTCHAState=Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})}function oQ(t){const e=document.createElement("script");e.src=tQ,e.onload=t,document.head.appendChild(e)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(e){this._siteKey=e,this._throttleData=null}async getToken(){var e,n,r;cQ(this._throttleData);const i=await iQ(this._app).catch(o=>{throw ur.create("recaptcha-error")});if(!(!((e=un(this._app).reCAPTCHAState)===null||e===void 0)&&e.succeeded))throw ur.create("recaptcha-error");let s;try{s=await SI(L8(this._app,i),this._heartbeatServiceProvider)}catch(o){throw!((n=o.code)===null||n===void 0)&&n.includes("fetch-status-error")?(this._throttleData=aQ(Number((r=o.customData)===null||r===void 0?void 0:r.httpStatus),this._throttleData),ur.create("throttled",{time:jO(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):o}return this._throttleData=null,s}initialize(e){this._app=e,this._heartbeatServiceProvider=va(e,"heartbeat"),nQ(e,this._siteKey).catch(()=>{})}isEqual(e){return e instanceof xI?this._siteKey===e._siteKey:!1}}function aQ(t,e){if(t===404||t===403)return{backoffCount:1,allowRequestsAfter:Date.now()+D8,httpStatus:t};{const n=e?e.backoffCount:0,r=Jz(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:t}}}function cQ(t){if(t&&Date.now()-t.allowRequestsAfter<=0)throw ur.create("throttled",{time:jO(t.allowRequestsAfter-Date.now()),httpStatus:t.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lQ(t=eg(),e){t=ke(t);const n=va(t,"app-check");if(jg().initialized||z8(),CI()&&PI().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(s.isTokenAutoRefreshEnabled===e.isTokenAutoRefreshEnabled&&s.provider.isEqual(e.provider))return i;throw ur.create("already-initialized",{appName:t.name})}const r=n.initialize({options:e});return uQ(t,e.provider,e.isTokenAutoRefreshEnabled),un(t).isTokenAutoRefreshEnabled&&ZO(r,"INTERNAL",()=>{}),r}function uQ(t,e,n){const r=P8(t,Object.assign({},WO));r.activated=!0,r.provider=e,r.cachedTokenPromise=H8(t).then(i=>(i&&hc(i)&&(r.token=i,tN(t,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n===void 0?t.automaticDataCollectionEnabled:n,r.provider.initialize(t)}const hQ="app-check",FS="app-check-internal";function dQ(){di(new hi(hQ,t=>{const e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return J8(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(FS).initialize()})),di(new hi(FS,t=>{const e=t.getProvider("app-check").getImmediate();return X8(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),fr(Z8,eQ)}dQ();var fQ="firebase",pQ="10.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fr(fQ,pQ,"app");const nN=Symbol("firebaseApp");function kI(t){return ho()&&dr(nN,null)||eg(t)}const Pi=()=>{};function DI(t,e){return e.split(".").reduce((n,r)=>n&&n[r],t)}function gQ(t,e,n){const r=(""+e).split("."),i=r.pop(),s=r.reduce((o,c)=>o&&o[c],t);if(s!=null)return Array.isArray(s)?s.splice(Number(i),1,n):s[i]=n}function ba(t){return!!t&&typeof t=="object"}const mQ=Object.prototype;function _Q(t){return ba(t)&&Object.getPrototypeOf(t)===mQ}function OI(t){return ba(t)&&t.type==="document"}function yQ(t){return ba(t)&&t.type==="collection"}function vQ(t){return OI(t)||yQ(t)}function wQ(t){return ba(t)&&t.type==="query"}function EQ(t){return ba(t)&&"ref"in t}function IQ(t){return ba(t)&&typeof t.bucket=="string"}function TQ(t,e){let n;return()=>{if(!n)return n=!0,t(e())}}const bQ=Symbol.for("v-scx");function AQ(){return!!dr(bQ,0)}const sf=new WeakMap;function RQ(t,e){if(!sf.has(t)){const n=_w(!0);sf.set(t,n);const{unmount:r}=e;e.unmount=()=>{r.call(e),n.stop(),sf.delete(t)}}return sf.get(t)}const SQ=new WeakMap;function CQ(t){return Kg().then(e=>{if(e)return H5(e,t).then(()=>e.reload())})}const of=new WeakMap;function rN(t){const e=kI(t);if(!of.has(e)){let n;const i=[new Promise(s=>{n=s}),s=>{of.set(e,s),n(s.value)}];of.set(e,i)}return of.get(e)}function Kg(t){const e=rN(t);return Array.isArray(e)?e[0]:Promise.resolve(e.value)}function PQ(t,e){const n=HO(e);CO(n,r=>{const i=rN();t.value=r,Array.isArray(i)&&i[1](t)})}const US="@firebase/database",BS="1.0.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iN="";function xQ(t){iN=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kQ{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Pn(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Uu(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DQ{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return gs(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sN=function(t){try{if(typeof window!="undefined"&&typeof window[t]!="undefined"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new kQ(e)}}catch{}return new DQ},Ko=sN("localStorage"),Lv=sN("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sc=new wh("@firebase/database"),OQ=function(){let t=1;return function(){return t++}}(),oN=function(t){const e=zz(t),n=new Bz;n.update(e);const r=n.digest();return Qp.encodeByteArray(r)},qh=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=qh.apply(null,r):typeof r=="object"?e+=Pn(r):e+=r,e+=" "}return e};let ta=null,$S=!0;const NQ=function(t,e){ce(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Sc.logLevel=Ge.VERBOSE,ta=Sc.log.bind(Sc),e&&Lv.set("logging_enabled",!0)):typeof t=="function"?ta=t:(ta=null,Lv.remove("logging_enabled"))},Vn=function(...t){if($S===!0&&($S=!1,ta===null&&Lv.get("logging_enabled")===!0&&NQ(!0)),ta){const e=qh.apply(null,t);ta(e)}},Hh=function(t){return function(...e){Vn(t,...e)}},Vv=function(...t){const e="FIREBASE INTERNAL ERROR: "+qh(...t);Sc.error(e)},fa=function(...t){const e=`FIREBASE FATAL ERROR: ${qh(...t)}`;throw Sc.error(e),new Error(e)},Cr=function(...t){const e="FIREBASE WARNING: "+qh(...t);Sc.warn(e)},MQ=function(){typeof window!="undefined"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Cr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},aN=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},LQ=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Kc="[MIN_NAME]",pa="[MAX_NAME]",pl=function(t,e){if(t===e)return 0;if(t===Kc||e===pa)return-1;if(e===Kc||t===pa)return 1;{const n=qS(t),r=qS(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},VQ=function(t,e){return t===e?0:t<e?-1:1},ql=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Pn(e))},NI=function(t){if(typeof t!="object"||t===null)return Pn(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Pn(e[r]),n+=":",n+=NI(t[e[r]]);return n+="}",n},cN=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function Gr(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const lN=function(t){ce(!aN(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,c,u;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(c=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=c+r,o=Math.round(t*Math.pow(2,n-c)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const h=[];for(u=n;u;u-=1)h.push(o%2?1:0),o=Math.floor(o/2);for(u=e;u;u-=1)h.push(s%2?1:0),s=Math.floor(s/2);h.push(i?1:0),h.reverse();const f=h.join("");let p="";for(u=0;u<64;u+=8){let m=parseInt(f.substr(u,8),2).toString(16);m.length===1&&(m="0"+m),p=p+m}return p.toLowerCase()},FQ=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},UQ=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},BQ=new RegExp("^-?(0*)\\d{1,10}$"),$Q=-2147483648,qQ=2147483647,qS=function(t){if(BQ.test(t)){const e=Number(t);if(e>=$Q&&e<=qQ)return e}return null},Wh=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Cr("Exception was thrown by user callback.",n),e},Math.floor(0))}},HQ=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},bu=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno!="undefined"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WQ{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Cr(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zQ{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Vn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Cr(e)}}class Fv{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Fv.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI="5",uN="v",hN="s",dN="r",fN="f",pN=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,gN="ls",mN="p",Uv="ac",_N="websocket",yN="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jQ{constructor(e,n,r,i,s=!1,o="",c=!1,u=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=c,this.isUsingEmulator=u,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ko.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ko.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function KQ(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function vN(t,e,n){ce(typeof e=="string","typeof type must == string"),ce(typeof n=="object","typeof params must == object");let r;if(e===_N)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===yN)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);KQ(t)&&(n.ns=t.namespace);const i=[];return Gr(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GQ{constructor(){this.counters_={}}incrementCounter(e,n=1){gs(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return bz(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oy={},ay={};function LI(t){const e=t.toString();return oy[e]||(oy[e]=new GQ),oy[e]}function YQ(t,e){const n=t.toString();return ay[n]||(ay[n]=e()),ay[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QQ{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Wh(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS="start",JQ="close",XQ="pLPCommand",ZQ="pRTLPCB",wN="id",EN="pw",IN="ser",e7="cb",t7="seg",n7="ts",r7="d",i7="dframe",TN=1870,bN=30,s7=TN-bN,o7=25e3,a7=3e4;class dc{constructor(e,n,r,i,s,o,c){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=c,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Hh(e),this.stats_=LI(n),this.urlFn=u=>(this.appCheckToken&&(u[Uv]=this.appCheckToken),vN(n,yN,u))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new QQ(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(a7)),LQ(()=>{if(this.isClosed_)return;this.scriptTagHolder=new VI((...s)=>{const[o,c,u,h,f]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===HS)this.id=c,this.password=u;else if(o===JQ)c?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(c,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,c]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,c)},()=>{this.onClosed_()},this.urlFn);const r={};r[HS]="t",r[IN]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[e7]=this.scriptTagHolder.uniqueCallbackIdentifier),r[uN]=MI,this.transportSessionId&&(r[hN]=this.transportSessionId),this.lastSessionId&&(r[gN]=this.lastSessionId),this.applicationId&&(r[mN]=this.applicationId),this.appCheckToken&&(r[Uv]=this.appCheckToken),typeof location!="undefined"&&location.hostname&&pN.test(location.hostname)&&(r[dN]=fN);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){dc.forceAllow_=!0}static forceDisallow(){dc.forceDisallow_=!0}static isAvailable(){return dc.forceAllow_?!0:!dc.forceDisallow_&&typeof document!="undefined"&&document.createElement!=null&&!FQ()&&!UQ()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Pn(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Fx(n),i=cN(r,s7);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[i7]="t",r[wN]=e,r[EN]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Pn(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class VI{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=OQ(),window[XQ+this.uniqueCallbackIdentifier]=e,window[ZQ+this.uniqueCallbackIdentifier]=n,this.myIFrame=VI.createIFrame_();let s="";if(this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"){const c=document.domain;s='<script>document.domain="'+c+'";<\/script>'}const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(c){Vn("frame writing exception"),c.stack&&Vn(c.stack),Vn(c)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Vn("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[wN]=this.myID,e[EN]=this.myPW,e[IN]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+bN+r.length<=TN;){const o=this.pendingSegs.shift();r=r+"&"+t7+i+"="+o.seg+"&"+n7+i+"="+o.ts+"&"+r7+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(o7)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Vn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c7=16384,l7=45e3;let wp=null;typeof MozWebSocket!="undefined"?wp=MozWebSocket:typeof WebSocket!="undefined"&&(wp=WebSocket);class ri{constructor(e,n,r,i,s,o,c){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Hh(this.connId),this.stats_=LI(n),this.connURL=ri.connectionURL_(n,o,c,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[uN]=MI,typeof location!="undefined"&&location.hostname&&pN.test(location.hostname)&&(o[dN]=fN),n&&(o[hN]=n),r&&(o[gN]=r),i&&(o[Uv]=i),s&&(o[mN]=s),vN(e,_N,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ko.set("previous_websocket_failure",!0);try{let r;zx(),this.mySock=new wp(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){ri.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator!="undefined"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&wp!==null&&!ri.forceDisallow_}static previouslyFailed(){return Ko.isInMemoryStorage||Ko.get("previous_websocket_failure")===!0}markConnectionHealthy(){Ko.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Uu(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(ce(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=Pn(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=cN(n,c7);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(l7))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}ri.responsesRequiredToBeHealthy=2;ri.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[dc,ri]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=ri&&ri.isAvailable();let r=n&&!ri.previouslyFailed();if(e.webSocketOnly&&(n||Cr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[ri];else{const i=this.transports_=[];for(const s of gh.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);gh.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}gh.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u7=6e4,h7=5e3,d7=10*1024,f7=100*1024,cy="t",WS="d",p7="s",zS="r",g7="e",jS="o",KS="a",GS="n",YS="p",m7="h";class _7{constructor(e,n,r,i,s,o,c,u,h,f){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=c,this.onDisconnect_=u,this.onKill_=h,this.lastSessionId=f,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Hh("c:"+this.id+":"),this.transportManager_=new gh(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=bu(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>f7?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>d7?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(cy in e){const n=e[cy];n===KS?this.upgradeIfSecondaryHealthy_():n===zS?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===jS&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=ql("t",e),r=ql("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:YS,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:KS,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:GS,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=ql("t",e),r=ql("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=ql(cy,e);if(WS in e){const r=e[WS];if(n===m7){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===GS){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===p7?this.onConnectionShutdown_(r):n===zS?this.onReset_(r):n===g7?Vv("Server Error: "+r):n===jS?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Vv("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),MI!==r&&Cr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),bu(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(u7))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):bu(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(h7))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:YS,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ko.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(e){this.allowedEvents_=e,this.listeners_={},ce(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){ce(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep extends RN{constructor(){super(["online"]),this.online_=!0,typeof window!="undefined"&&typeof window.addEventListener!="undefined"&&!qw()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Ep}getInitialEvent(e){return ce(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS=32,JS=768;class Nt{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function vt(){return new Nt("")}function st(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function uo(t){return t.pieces_.length-t.pieceNum_}function kt(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Nt(t.pieces_,e)}function SN(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function y7(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function CN(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function PN(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Nt(e,0)}function mn(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Nt)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new Nt(n,0)}function nt(t){return t.pieceNum_>=t.pieces_.length}function Hr(t,e){const n=st(t),r=st(e);if(n===null)return e;if(n===r)return Hr(kt(t),kt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function xN(t,e){if(uo(t)!==uo(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function si(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(uo(t)>uo(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class v7{constructor(e,n){this.errorPrefix_=n,this.parts_=CN(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Zp(this.parts_[r]);kN(this)}}function w7(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Zp(e),kN(t)}function E7(t){const e=t.parts_.pop();t.byteLength_-=Zp(e),t.parts_.length>0&&(t.byteLength_-=1)}function kN(t){if(t.byteLength_>JS)throw new Error(t.errorPrefix_+"has a key path longer than "+JS+" bytes ("+t.byteLength_+").");if(t.parts_.length>QS)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+QS+") or object contains a cycle "+Lo(t))}function Lo(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI extends RN{constructor(){super(["visible"]);let e,n;typeof document!="undefined"&&typeof document.addEventListener!="undefined"&&(typeof document.hidden!="undefined"?(n="visibilitychange",e="hidden"):typeof document.mozHidden!="undefined"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden!="undefined"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden!="undefined"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new FI}getInitialEvent(e){return ce(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hl=1e3,I7=60*5*1e3,XS=30*1e3,T7=1.3,b7=3e4,A7="server_kill",ZS=3;class ss extends AN{constructor(e,n,r,i,s,o,c,u){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=c,this.authOverride_=u,this.id=ss.nextPersistentConnectionId_++,this.log_=Hh("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Hl,this.maxReconnectDelay_=I7,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u&&!zx())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");FI.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Ep.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(Pn(s)),ce(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new ra,r={p:e._path.toString(),q:e._queryObject},i={action:"g",request:r,onComplete:o=>{const c=o.d;o.s==="ok"?n.resolve(c):n.reject(c)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),ce(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ce(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const c={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,c),this.connected_&&this.sendListen_(c)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,c=>{const u=c.d,h=c.s;ss.warnOnListenWarnings_(u,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",c),h!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(h,u))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&gs(e,"w")){const r=Nc(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();Cr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||Uz(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=XS)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=Fz(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),ce(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Pn(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Vv("Unrecognized action received from server: "+Pn(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){ce(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Hl,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Hl,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>b7&&(this.reconnectDelay_=Hl),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*T7)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+ss.nextConnectionId_++,s=this.lastSessionId;let o=!1,c=null;const u=function(){c?c.close():(o=!0,r())},h=function(p){ce(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(p)};this.realtime_={close:u,sendRequest:h};const f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[p,m]=await Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);o?Vn("getToken() completed but was canceled"):(Vn("getToken() completed. Creating connection."),this.authToken_=p&&p.accessToken,this.appCheckToken_=m&&m.token,c=new _7(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,y=>{Cr(y+" ("+this.repoInfo_.toString()+")"),this.interrupt(A7)},s))}catch(p){this.log_("Failed to get token: "+p),o||(this.repoInfo_.nodeAdmin&&Cr(p),u())}}}interrupt(e){Vn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Vn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Yy(this.interruptReasons_)&&(this.reconnectDelay_=Hl,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>NI(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new Nt(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){Vn("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=ZS&&(this.reconnectDelay_=XS,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Vn("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=ZS&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+iN.replace(/\./g,"-")]=1,qw()?e["framework.cordova"]=1:Wx()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Ep.getInstance().currentlyOnline();return Yy(this.interruptReasons_)&&e}}ss.nextPersistentConnectionId_=0;ss.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new ot(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new ot(Kc,e),i=new ot(Kc,n);return this.compare(r,i)!==0}minPost(){return ot.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let af;class DN extends Gg{static get __EMPTY_NODE(){return af}static set __EMPTY_NODE(e){af=e}compare(e,n){return pl(e.name,n.name)}isDefinedOn(e){throw nl("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return ot.MIN}maxPost(){return new ot(pa,af)}makePost(e,n){return ce(typeof e=="string","KeyIndex indexValue must always be a string."),new ot(e,af)}toString(){return".key"}}const Cc=new DN;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class gn{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r!=null?r:gn.RED,this.left=i!=null?i:hr.EMPTY_NODE,this.right=s!=null?s:hr.EMPTY_NODE}copy(e,n,r,i,s){return new gn(e!=null?e:this.key,n!=null?n:this.value,r!=null?r:this.color,i!=null?i:this.left,s!=null?s:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return hr.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return hr.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,gn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,gn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}gn.RED=!0;gn.BLACK=!1;class R7{copy(e,n,r,i,s){return this}insert(e,n,r){return new gn(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class hr{constructor(e,n=hr.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new hr(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,gn.BLACK,null,null))}remove(e){return new hr(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,gn.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new cf(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new cf(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new cf(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new cf(this.root_,null,this.comparator_,!0,e)}}hr.EMPTY_NODE=new R7;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S7(t,e){return pl(t.name,e.name)}function UI(t,e){return pl(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bv;function C7(t){Bv=t}const ON=function(t){return typeof t=="number"?"number:"+lN(t):"string:"+t},NN=function(t){if(t.isLeafNode()){const e=t.val();ce(typeof e=="string"||typeof e=="number"||typeof e=="object"&&gs(e,".sv"),"Priority must be a string or number.")}else ce(t===Bv||t.isEmpty(),"priority of unexpected type.");ce(t===Bv||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eC;class fn{constructor(e,n=fn.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,ce(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),NN(this.priorityNode_)}static set __childrenNodeConstructor(e){eC=e}static get __childrenNodeConstructor(){return eC}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new fn(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:fn.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return nt(e)?this:st(e)===".priority"?this.priorityNode_:fn.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:fn.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=st(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(ce(r!==".priority"||uo(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,fn.__childrenNodeConstructor.EMPTY_NODE.updateChild(kt(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+ON(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=lN(this.value_):e+=this.value_,this.lazyHash_=oN(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===fn.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof fn.__childrenNodeConstructor?-1:(ce(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=fn.VALUE_TYPE_ORDER.indexOf(n),s=fn.VALUE_TYPE_ORDER.indexOf(r);return ce(i>=0,"Unknown leaf type: "+n),ce(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}fn.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let MN,LN;function P7(t){MN=t}function x7(t){LN=t}class k7 extends Gg{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?pl(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return ot.MIN}maxPost(){return new ot(pa,new fn("[PRIORITY-POST]",LN))}makePost(e,n){const r=MN(e);return new ot(n,new fn("[PRIORITY-POST]",r))}toString(){return".priority"}}const $n=new k7;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D7=Math.log(2);class O7{constructor(e){const n=s=>parseInt(Math.log(s)/D7,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Ip=function(t,e,n,r){t.sort(e);const i=function(u,h){const f=h-u;let p,m;if(f===0)return null;if(f===1)return p=t[u],m=n?n(p):p,new gn(m,p.node,gn.BLACK,null,null);{const y=parseInt(f/2,10)+u,v=i(u,y),I=i(y+1,h);return p=t[y],m=n?n(p):p,new gn(m,p.node,gn.BLACK,v,I)}},s=function(u){let h=null,f=null,p=t.length;const m=function(v,I){const A=p-v,N=p;p-=v;const D=i(A+1,N),k=t[A],P=n?n(k):k;y(new gn(P,k.node,I,null,D))},y=function(v){h?(h.left=v,h=v):(f=v,h=v)};for(let v=0;v<u.count;++v){const I=u.nextBitIsOne(),A=Math.pow(2,u.count-(v+1));I?m(A,gn.BLACK):(m(A,gn.BLACK),m(A,gn.RED))}return f},o=new O7(t.length),c=s(o);return new hr(r||e,c)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ly;const Xa={};class ns{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return ce(Xa&&$n,"ChildrenNode.ts has not been loaded"),ly=ly||new ns({".priority":Xa},{".priority":$n}),ly}get(e){const n=Nc(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof hr?n:null}hasIndex(e){return gs(this.indexSet_,e.toString())}addIndex(e,n){ce(e!==Cc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(ot.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let c;i?c=Ip(r,e.getCompare()):c=Xa;const u=e.toString(),h=Object.assign({},this.indexSet_);h[u]=e;const f=Object.assign({},this.indexes_);return f[u]=c,new ns(f,h)}addToIndexes(e,n){const r=jf(this.indexes_,(i,s)=>{const o=Nc(this.indexSet_,s);if(ce(o,"Missing index implementation for "+s),i===Xa)if(o.isDefinedOn(e.node)){const c=[],u=n.getIterator(ot.Wrap);let h=u.getNext();for(;h;)h.name!==e.name&&c.push(h),h=u.getNext();return c.push(e),Ip(c,o.getCompare())}else return Xa;else{const c=n.get(e.name);let u=i;return c&&(u=u.remove(new ot(e.name,c))),u.insert(e,e.node)}});return new ns(r,this.indexSet_)}removeFromIndexes(e,n){const r=jf(this.indexes_,i=>{if(i===Xa)return i;{const s=n.get(e.name);return s?i.remove(new ot(e.name,s)):i}});return new ns(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wl;class pt{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&NN(this.priorityNode_),this.children_.isEmpty()&&ce(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Wl||(Wl=new pt(new hr(UI),null,ns.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Wl}updatePriority(e){return this.children_.isEmpty()?this:new pt(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Wl:n}}getChild(e){const n=st(e);return n===null?this:this.getImmediateChild(n).getChild(kt(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(ce(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new ot(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?Wl:this.priorityNode_;return new pt(i,o,s)}}updateChild(e,n){const r=st(e);if(r===null)return n;{ce(st(e)!==".priority"||uo(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(kt(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild($n,(o,c)=>{n[o]=c.val(e),r++,s&&pt.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const c in n)o[c]=n[c];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+ON(this.getPriority().val())+":"),this.forEachChild($n,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":oN(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new ot(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new ot(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new ot(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,ot.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,ot.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===zh?-1:0}withIndex(e){if(e===Cc||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new pt(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Cc||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator($n),i=n.getIterator($n);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Cc?null:this.indexMap_.get(e.toString())}}pt.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class N7 extends pt{constructor(){super(new hr(UI),pt.EMPTY_NODE,ns.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return pt.EMPTY_NODE}isEmpty(){return!1}}const zh=new N7;Object.defineProperties(ot,{MIN:{value:new ot(Kc,pt.EMPTY_NODE)},MAX:{value:new ot(pa,zh)}});DN.__EMPTY_NODE=pt.EMPTY_NODE;fn.__childrenNodeConstructor=pt;C7(zh);x7(zh);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M7=!0;function Fn(t,e=null){if(t===null)return pt.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),ce(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new fn(n,Fn(e))}if(!(t instanceof Array)&&M7){const n=[];let r=!1;if(Gr(t,(o,c)=>{if(o.substring(0,1)!=="."){const u=Fn(c);u.isEmpty()||(r=r||!u.getPriority().isEmpty(),n.push(new ot(o,u)))}}),n.length===0)return pt.EMPTY_NODE;const s=Ip(n,S7,o=>o.name,UI);if(r){const o=Ip(n,$n.getCompare());return new pt(s,Fn(e),new ns({".priority":o},{".priority":$n}))}else return new pt(s,Fn(e),ns.Default)}else{let n=pt.EMPTY_NODE;return Gr(t,(r,i)=>{if(gs(t,r)&&r.substring(0,1)!=="."){const s=Fn(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(Fn(e))}}P7(Fn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L7 extends Gg{constructor(e){super(),this.indexPath_=e,ce(!nt(e)&&st(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?pl(e.name,n.name):s}makePost(e,n){const r=Fn(e),i=pt.EMPTY_NODE.updateChild(this.indexPath_,r);return new ot(n,i)}maxPost(){const e=pt.EMPTY_NODE.updateChild(this.indexPath_,zh);return new ot(pa,e)}toString(){return CN(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V7 extends Gg{compare(e,n){const r=e.node.compareTo(n.node);return r===0?pl(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return ot.MIN}maxPost(){return ot.MAX}makePost(e,n){const r=Fn(e);return new ot(n,r)}toString(){return".value"}}const F7=new V7;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U7(t){return{type:"value",snapshotNode:t}}function B7(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function $7(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function tC(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function q7(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=$n}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ce(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ce(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Kc}hasEnd(){return this.endSet_}getIndexEndValue(){return ce(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ce(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:pa}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ce(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===$n}copy(){const e=new BI;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function nC(t){const e={};if(t.isDefault())return e;let n;if(t.index_===$n?n="$priority":t.index_===F7?n="$value":t.index_===Cc?n="$key":(ce(t.index_ instanceof L7,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Pn(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=Pn(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Pn(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Pn(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Pn(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function rC(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==$n&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp extends AN{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Hh("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(ce(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=Tp.getListenId_(e,r),c={};this.listens_[o]=c;const u=nC(e._queryParams);this.restRequest_(s+".json",u,(h,f)=>{let p=f;if(h===404&&(p=null,h=null),h===null&&this.onDataUpdate_(s,p,!1,r),Nc(this.listens_,o)===c){let m;h?h===401?m="permission_denied":m="rest_error:"+h:m="ok",i(m,null)}})}unlisten(e,n){const r=Tp.getListenId_(e,n);delete this.listens_[r]}get(e){const n=nC(e._queryParams),r=e._path.toString(),i=new ra;return this.restRequest_(r+".json",n,(s,o)=>{let c=o;s===404&&(c=null,s=null),s===null?(this.onDataUpdate_(r,c,!1,null),i.resolve(c)):i.reject(new Error(c))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+ya(n);this.log_("Sending REST request for "+o);const c=new XMLHttpRequest;c.onreadystatechange=()=>{if(r&&c.readyState===4){this.log_("REST Response for "+o+" received. status:",c.status,"response:",c.responseText);let u=null;if(c.status>=200&&c.status<300){try{u=Uu(c.responseText)}catch{Cr("Failed to parse JSON response for "+o+": "+c.responseText)}r(null,u)}else c.status!==401&&c.status!==404&&Cr("Got unsuccessful REST response for "+o+" Status: "+c.status),r(c.status);r=null}},c.open("GET",o,!0),c.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H7{constructor(){this.rootNode_=pt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bp(){return{value:null,children:new Map}}function VN(t,e,n){if(nt(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=st(e);t.children.has(r)||t.children.set(r,bp());const i=t.children.get(r);e=kt(e),VN(i,e,n)}}function $v(t,e,n){t.value!==null?n(e,t.value):W7(t,(r,i)=>{const s=new Nt(e.toString()+"/"+r);$v(i,s,n)})}function W7(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z7{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Gr(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC=10*1e3,j7=30*1e3,K7=5*60*1e3;class G7{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new z7(e);const r=iC+(j7-iC)*Math.random();bu(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;Gr(e,(i,s)=>{s>0&&gs(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),bu(this.reportStats_.bind(this),Math.floor(Math.random()*2*K7))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xi;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(xi||(xi={}));function FN(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function UN(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function BN(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=xi.ACK_USER_WRITE,this.source=FN()}operationForChild(e){if(nt(this.path)){if(this.affectedTree.value!=null)return ce(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Nt(e));return new Ap(vt(),n,this.revert)}}else return ce(st(this.path)===e,"operationForChild called for unrelated child."),new Ap(kt(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=xi.OVERWRITE}operationForChild(e){return nt(this.path)?new ga(this.source,vt(),this.snap.getImmediateChild(e)):new ga(this.source,kt(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=xi.MERGE}operationForChild(e){if(nt(this.path)){const n=this.children.subtree(new Nt(e));return n.isEmpty()?null:n.value?new ga(this.source,vt(),n.value):new mh(this.source,vt(),n)}else return ce(st(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new mh(this.source,kt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(nt(e))return this.isFullyInitialized()&&!this.filtered_;const n=st(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function Y7(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(q7(o.childName,o.snapshotNode))}),zl(t,i,"child_removed",e,r,n),zl(t,i,"child_added",e,r,n),zl(t,i,"child_moved",s,r,n),zl(t,i,"child_changed",e,r,n),zl(t,i,"value",e,r,n),i}function zl(t,e,n,r,i,s){const o=r.filter(c=>c.type===n);o.sort((c,u)=>J7(t,c,u)),o.forEach(c=>{const u=Q7(t,c,s);i.forEach(h=>{h.respondsTo(c.type)&&e.push(h.createEvent(u,t.query_))})})}function Q7(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function J7(t,e,n){if(e.childName==null||n.childName==null)throw nl("Should only compare child_ events.");const r=new ot(e.childName,e.snapshotNode),i=new ot(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $N(t,e){return{eventCache:t,serverCache:e}}function Au(t,e,n,r){return $N(new $I(e,n,r),t.serverCache)}function qN(t,e,n,r){return $N(t.eventCache,new $I(e,n,r))}function qv(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function ma(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uy;const X7=()=>(uy||(uy=new hr(VQ)),uy);class Pt{constructor(e,n=X7()){this.value=e,this.children=n}static fromObject(e){let n=new Pt(null);return Gr(e,(r,i)=>{n=n.set(new Nt(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:vt(),value:this.value};if(nt(e))return null;{const r=st(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(kt(e),n);return s!=null?{path:mn(new Nt(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(nt(e))return this;{const n=st(e),r=this.children.get(n);return r!==null?r.subtree(kt(e)):new Pt(null)}}set(e,n){if(nt(e))return new Pt(n,this.children);{const r=st(e),s=(this.children.get(r)||new Pt(null)).set(kt(e),n),o=this.children.insert(r,s);return new Pt(this.value,o)}}remove(e){if(nt(e))return this.children.isEmpty()?new Pt(null):new Pt(null,this.children);{const n=st(e),r=this.children.get(n);if(r){const i=r.remove(kt(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new Pt(null):new Pt(this.value,s)}else return this}}get(e){if(nt(e))return this.value;{const n=st(e),r=this.children.get(n);return r?r.get(kt(e)):null}}setTree(e,n){if(nt(e))return n;{const r=st(e),s=(this.children.get(r)||new Pt(null)).setTree(kt(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new Pt(this.value,o)}}fold(e){return this.fold_(vt(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(mn(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,vt(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(nt(e))return null;{const s=st(e),o=this.children.get(s);return o?o.findOnPath_(kt(e),mn(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,vt(),n)}foreachOnPath_(e,n,r){if(nt(e))return this;{this.value&&r(n,this.value);const i=st(e),s=this.children.get(i);return s?s.foreachOnPath_(kt(e),mn(n,i),r):new Pt(null)}}foreach(e){this.foreach_(vt(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(mn(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e){this.writeTree_=e}static empty(){return new ui(new Pt(null))}}function Ru(t,e,n){if(nt(e))return new ui(new Pt(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=Hr(i,e);return s=s.updateChild(o,n),new ui(t.writeTree_.set(i,s))}else{const i=new Pt(n),s=t.writeTree_.setTree(e,i);return new ui(s)}}}function sC(t,e,n){let r=t;return Gr(n,(i,s)=>{r=Ru(r,mn(e,i),s)}),r}function oC(t,e){if(nt(e))return ui.empty();{const n=t.writeTree_.setTree(e,new Pt(null));return new ui(n)}}function Hv(t,e){return Aa(t,e)!=null}function Aa(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Hr(n.path,e)):null}function aC(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild($n,(r,i)=>{e.push(new ot(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new ot(r,i.value))}),e}function to(t,e){if(nt(e))return t;{const n=Aa(t,e);return n!=null?new ui(new Pt(n)):new ui(t.writeTree_.subtree(e))}}function Wv(t){return t.writeTree_.isEmpty()}function Gc(t,e){return HN(vt(),t.writeTree_,e)}function HN(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(ce(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=HN(mn(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(mn(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WN(t,e){return YN(e,t)}function Z7(t,e,n,r,i){ce(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Ru(t.visibleWrites,e,n)),t.lastWriteId=r}function eJ(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function tJ(t,e){const n=t.allWrites.findIndex(c=>c.writeId===e);ce(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const c=t.allWrites[o];c.visible&&(o>=n&&nJ(c,r.path)?i=!1:si(r.path,c.path)&&(s=!0)),o--}if(i){if(s)return rJ(t),!0;if(r.snap)t.visibleWrites=oC(t.visibleWrites,r.path);else{const c=r.children;Gr(c,u=>{t.visibleWrites=oC(t.visibleWrites,mn(r.path,u))})}return!0}else return!1}function nJ(t,e){if(t.snap)return si(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&si(mn(t.path,n),e))return!0;return!1}function rJ(t){t.visibleWrites=zN(t.allWrites,iJ,vt()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function iJ(t){return t.visible}function zN(t,e,n){let r=ui.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let c;if(s.snap)si(n,o)?(c=Hr(n,o),r=Ru(r,c,s.snap)):si(o,n)&&(c=Hr(o,n),r=Ru(r,vt(),s.snap.getChild(c)));else if(s.children){if(si(n,o))c=Hr(n,o),r=sC(r,c,s.children);else if(si(o,n))if(c=Hr(o,n),nt(c))r=sC(r,vt(),s.children);else{const u=Nc(s.children,st(c));if(u){const h=u.getChild(kt(c));r=Ru(r,vt(),h)}}}else throw nl("WriteRecord should have .snap or .children")}}return r}function jN(t,e,n,r,i){if(!r&&!i){const s=Aa(t.visibleWrites,e);if(s!=null)return s;{const o=to(t.visibleWrites,e);if(Wv(o))return n;if(n==null&&!Hv(o,vt()))return null;{const c=n||pt.EMPTY_NODE;return Gc(o,c)}}}else{const s=to(t.visibleWrites,e);if(!i&&Wv(s))return n;if(!i&&n==null&&!Hv(s,vt()))return null;{const o=function(h){return(h.visible||i)&&(!r||!~r.indexOf(h.writeId))&&(si(h.path,e)||si(e,h.path))},c=zN(t.allWrites,o,e),u=n||pt.EMPTY_NODE;return Gc(c,u)}}}function sJ(t,e,n){let r=pt.EMPTY_NODE;const i=Aa(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild($n,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=to(t.visibleWrites,e);return n.forEachChild($n,(o,c)=>{const u=Gc(to(s,new Nt(o)),c);r=r.updateImmediateChild(o,u)}),aC(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=to(t.visibleWrites,e);return aC(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function oJ(t,e,n,r,i){ce(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=mn(e,n);if(Hv(t.visibleWrites,s))return null;{const o=to(t.visibleWrites,s);return Wv(o)?i.getChild(n):Gc(o,i.getChild(n))}}function aJ(t,e,n,r){const i=mn(e,n),s=Aa(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=to(t.visibleWrites,i);return Gc(o,r.getNode().getImmediateChild(n))}else return null}function cJ(t,e){return Aa(t.visibleWrites,e)}function lJ(t,e,n,r,i,s,o){let c;const u=to(t.visibleWrites,e),h=Aa(u,vt());if(h!=null)c=h;else if(n!=null)c=Gc(u,n);else return[];if(c=c.withIndex(o),!c.isEmpty()&&!c.isLeafNode()){const f=[],p=o.getCompare(),m=s?c.getReverseIteratorFrom(r,o):c.getIteratorFrom(r,o);let y=m.getNext();for(;y&&f.length<i;)p(y,r)!==0&&f.push(y),y=m.getNext();return f}else return[]}function uJ(){return{visibleWrites:ui.empty(),allWrites:[],lastWriteId:-1}}function zv(t,e,n,r){return jN(t.writeTree,t.treePath,e,n,r)}function KN(t,e){return sJ(t.writeTree,t.treePath,e)}function cC(t,e,n,r){return oJ(t.writeTree,t.treePath,e,n,r)}function Rp(t,e){return cJ(t.writeTree,mn(t.treePath,e))}function hJ(t,e,n,r,i,s){return lJ(t.writeTree,t.treePath,e,n,r,i,s)}function qI(t,e,n){return aJ(t.writeTree,t.treePath,e,n)}function GN(t,e){return YN(mn(t.treePath,e),t.writeTree)}function YN(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dJ{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;ce(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),ce(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,tC(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,$7(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,B7(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,tC(r,e.snapshotNode,i.oldSnap));else throw nl("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fJ{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const QN=new fJ;class HI{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new $I(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return qI(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ma(this.viewCache_),s=hJ(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}function pJ(t,e){ce(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),ce(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function gJ(t,e,n,r,i){const s=new dJ;let o,c;if(n.type===xi.OVERWRITE){const h=n;h.source.fromUser?o=jv(t,e,h.path,h.snap,r,i,s):(ce(h.source.fromServer,"Unknown source."),c=h.source.tagged||e.serverCache.isFiltered()&&!nt(h.path),o=Sp(t,e,h.path,h.snap,r,i,c,s))}else if(n.type===xi.MERGE){const h=n;h.source.fromUser?o=_J(t,e,h.path,h.children,r,i,s):(ce(h.source.fromServer,"Unknown source."),c=h.source.tagged||e.serverCache.isFiltered(),o=Kv(t,e,h.path,h.children,r,i,c,s))}else if(n.type===xi.ACK_USER_WRITE){const h=n;h.revert?o=wJ(t,e,h.path,r,i,s):o=yJ(t,e,h.path,h.affectedTree,r,i,s)}else if(n.type===xi.LISTEN_COMPLETE)o=vJ(t,e,n.path,r,s);else throw nl("Unknown operation type: "+n.type);const u=s.getChanges();return mJ(e,o,u),{viewCache:o,changes:u}}function mJ(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=qv(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(U7(qv(e)))}}function JN(t,e,n,r,i,s){const o=e.eventCache;if(Rp(r,n)!=null)return e;{let c,u;if(nt(n))if(ce(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const h=ma(e),f=h instanceof pt?h:pt.EMPTY_NODE,p=KN(r,f);c=t.filter.updateFullNode(e.eventCache.getNode(),p,s)}else{const h=zv(r,ma(e));c=t.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{const h=st(n);if(h===".priority"){ce(uo(n)===1,"Can't have a priority with additional path components");const f=o.getNode();u=e.serverCache.getNode();const p=cC(r,n,f,u);p!=null?c=t.filter.updatePriority(f,p):c=o.getNode()}else{const f=kt(n);let p;if(o.isCompleteForChild(h)){u=e.serverCache.getNode();const m=cC(r,n,o.getNode(),u);m!=null?p=o.getNode().getImmediateChild(h).updateChild(f,m):p=o.getNode().getImmediateChild(h)}else p=qI(r,h,e.serverCache);p!=null?c=t.filter.updateChild(o.getNode(),h,p,f,i,s):c=o.getNode()}}return Au(e,c,o.isFullyInitialized()||nt(n),t.filter.filtersNodes())}}function Sp(t,e,n,r,i,s,o,c){const u=e.serverCache;let h;const f=o?t.filter:t.filter.getIndexedFilter();if(nt(n))h=f.updateFullNode(u.getNode(),r,null);else if(f.filtersNodes()&&!u.isFiltered()){const y=u.getNode().updateChild(n,r);h=f.updateFullNode(u.getNode(),y,null)}else{const y=st(n);if(!u.isCompleteForPath(n)&&uo(n)>1)return e;const v=kt(n),A=u.getNode().getImmediateChild(y).updateChild(v,r);y===".priority"?h=f.updatePriority(u.getNode(),A):h=f.updateChild(u.getNode(),y,A,v,QN,null)}const p=qN(e,h,u.isFullyInitialized()||nt(n),f.filtersNodes()),m=new HI(i,p,s);return JN(t,p,n,i,m,c)}function jv(t,e,n,r,i,s,o){const c=e.eventCache;let u,h;const f=new HI(i,e,s);if(nt(n))h=t.filter.updateFullNode(e.eventCache.getNode(),r,o),u=Au(e,h,!0,t.filter.filtersNodes());else{const p=st(n);if(p===".priority")h=t.filter.updatePriority(e.eventCache.getNode(),r),u=Au(e,h,c.isFullyInitialized(),c.isFiltered());else{const m=kt(n),y=c.getNode().getImmediateChild(p);let v;if(nt(m))v=r;else{const I=f.getCompleteChild(p);I!=null?SN(m)===".priority"&&I.getChild(PN(m)).isEmpty()?v=I:v=I.updateChild(m,r):v=pt.EMPTY_NODE}if(y.equals(v))u=e;else{const I=t.filter.updateChild(c.getNode(),p,v,m,f,o);u=Au(e,I,c.isFullyInitialized(),t.filter.filtersNodes())}}}return u}function lC(t,e){return t.eventCache.isCompleteForChild(e)}function _J(t,e,n,r,i,s,o){let c=e;return r.foreach((u,h)=>{const f=mn(n,u);lC(e,st(f))&&(c=jv(t,c,f,h,i,s,o))}),r.foreach((u,h)=>{const f=mn(n,u);lC(e,st(f))||(c=jv(t,c,f,h,i,s,o))}),c}function uC(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Kv(t,e,n,r,i,s,o,c){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let u=e,h;nt(n)?h=r:h=new Pt(null).setTree(n,r);const f=e.serverCache.getNode();return h.children.inorderTraversal((p,m)=>{if(f.hasChild(p)){const y=e.serverCache.getNode().getImmediateChild(p),v=uC(t,y,m);u=Sp(t,u,new Nt(p),v,i,s,o,c)}}),h.children.inorderTraversal((p,m)=>{const y=!e.serverCache.isCompleteForChild(p)&&m.value===null;if(!f.hasChild(p)&&!y){const v=e.serverCache.getNode().getImmediateChild(p),I=uC(t,v,m);u=Sp(t,u,new Nt(p),I,i,s,o,c)}}),u}function yJ(t,e,n,r,i,s,o){if(Rp(i,n)!=null)return e;const c=e.serverCache.isFiltered(),u=e.serverCache;if(r.value!=null){if(nt(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return Sp(t,e,n,u.getNode().getChild(n),i,s,c,o);if(nt(n)){let h=new Pt(null);return u.getNode().forEachChild(Cc,(f,p)=>{h=h.set(new Nt(f),p)}),Kv(t,e,n,h,i,s,c,o)}else return e}else{let h=new Pt(null);return r.foreach((f,p)=>{const m=mn(n,f);u.isCompleteForPath(m)&&(h=h.set(f,u.getNode().getChild(m)))}),Kv(t,e,n,h,i,s,c,o)}}function vJ(t,e,n,r,i){const s=e.serverCache,o=qN(e,s.getNode(),s.isFullyInitialized()||nt(n),s.isFiltered());return JN(t,o,n,r,QN,i)}function wJ(t,e,n,r,i,s){let o;if(Rp(r,n)!=null)return e;{const c=new HI(r,e,i),u=e.eventCache.getNode();let h;if(nt(n)||st(n)===".priority"){let f;if(e.serverCache.isFullyInitialized())f=zv(r,ma(e));else{const p=e.serverCache.getNode();ce(p instanceof pt,"serverChildren would be complete if leaf node"),f=KN(r,p)}f=f,h=t.filter.updateFullNode(u,f,s)}else{const f=st(n);let p=qI(r,f,e.serverCache);p==null&&e.serverCache.isCompleteForChild(f)&&(p=u.getImmediateChild(f)),p!=null?h=t.filter.updateChild(u,f,p,kt(n),c,s):e.eventCache.getNode().hasChild(f)?h=t.filter.updateChild(u,f,pt.EMPTY_NODE,kt(n),c,s):h=u,h.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=zv(r,ma(e)),o.isLeafNode()&&(h=t.filter.updateFullNode(h,o,s)))}return o=e.serverCache.isFullyInitialized()||Rp(r,vt())!=null,Au(e,h,o,t.filter.filtersNodes())}}function EJ(t,e){const n=ma(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!nt(e)&&!n.getImmediateChild(st(e)).isEmpty())?n.getChild(e):null}function hC(t,e,n,r){e.type===xi.MERGE&&e.source.queryId!==null&&(ce(ma(t.viewCache_),"We should always have a full cache before handling merges"),ce(qv(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=gJ(t.processor_,i,e,n,r);return pJ(t.processor_,s.viewCache),ce(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,IJ(t,s.changes,s.viewCache.eventCache.getNode(),null)}function IJ(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return Y7(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dC;function TJ(t){ce(!dC,"__referenceConstructor has already been defined"),dC=t}function WI(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return ce(s!=null,"SyncTree gave us an op for an invalid query."),hC(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(hC(o,e,n,r));return s}}function zI(t,e){let n=null;for(const r of t.views.values())n=n||EJ(r,e);return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fC;function bJ(t){ce(!fC,"__referenceConstructor has already been defined"),fC=t}class pC{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Pt(null),this.pendingWriteTree_=uJ(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function AJ(t,e,n,r,i){return Z7(t.pendingWriteTree_,e,n,r,i),i?Qg(t,new ga(FN(),e,n)):[]}function fc(t,e,n=!1){const r=eJ(t.pendingWriteTree_,e);if(tJ(t.pendingWriteTree_,e)){let s=new Pt(null);return r.snap!=null?s=s.set(vt(),!0):Gr(r.children,o=>{s=s.set(new Nt(o),!0)}),Qg(t,new Ap(r.path,s,n))}else return[]}function Yg(t,e,n){return Qg(t,new ga(UN(),e,n))}function RJ(t,e,n){const r=Pt.fromObject(n);return Qg(t,new mh(UN(),e,r))}function SJ(t,e,n,r){const i=tM(t,r);if(i!=null){const s=nM(i),o=s.path,c=s.queryId,u=Hr(o,e),h=new ga(BN(c),u,n);return rM(t,o,h)}else return[]}function CJ(t,e,n,r){const i=tM(t,r);if(i){const s=nM(i),o=s.path,c=s.queryId,u=Hr(o,e),h=Pt.fromObject(n),f=new mh(BN(c),u,h);return rM(t,o,f)}else return[]}function XN(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,c)=>{const u=Hr(o,e),h=zI(c,u);if(h)return h});return jN(i,e,s,n,!0)}function Qg(t,e){return ZN(e,t.syncPointTree_,null,WN(t.pendingWriteTree_,vt()))}function ZN(t,e,n,r){if(nt(t.path))return eM(t,e,n,r);{const i=e.get(vt());n==null&&i!=null&&(n=zI(i,vt()));let s=[];const o=st(t.path),c=t.operationForChild(o),u=e.children.get(o);if(u&&c){const h=n?n.getImmediateChild(o):null,f=GN(r,o);s=s.concat(ZN(c,u,h,f))}return i&&(s=s.concat(WI(i,t,r,n))),s}}function eM(t,e,n,r){const i=e.get(vt());n==null&&i!=null&&(n=zI(i,vt()));let s=[];return e.children.inorderTraversal((o,c)=>{const u=n?n.getImmediateChild(o):null,h=GN(r,o),f=t.operationForChild(o);f&&(s=s.concat(eM(f,c,u,h)))}),i&&(s=s.concat(WI(i,t,r,n))),s}function tM(t,e){return t.tagToQueryMap.get(e)}function nM(t){const e=t.indexOf("$");return ce(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Nt(t.substr(0,e))}}function rM(t,e,n){const r=t.syncPointTree_.get(e);ce(r,"Missing sync point for query tag that we're tracking");const i=WN(t.pendingWriteTree_,e);return WI(r,n,i,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new jI(n)}node(){return this.node_}}class KI{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=mn(this.path_,e);return new KI(this.syncTree_,n)}node(){return XN(this.syncTree_,this.path_)}}const PJ=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},gC=function(t,e,n){if(!t||typeof t!="object")return t;if(ce(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return xJ(t[".sv"],e,n);if(typeof t[".sv"]=="object")return kJ(t[".sv"],e);ce(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},xJ=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:ce(!1,"Unexpected server value: "+t)}},kJ=function(t,e,n){t.hasOwnProperty("increment")||ce(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&ce(!1,"Unexpected increment value: "+r);const i=e.node();if(ce(i!==null&&typeof i!="undefined","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},DJ=function(t,e,n,r){return GI(e,new KI(n,t),r)},OJ=function(t,e,n){return GI(t,new jI(e),n)};function GI(t,e,n){const r=t.getPriority().val(),i=gC(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,c=gC(o.getValue(),e,n);return c!==o.getValue()||i!==o.getPriority().val()?new fn(c,Fn(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new fn(i))),o.forEachChild($n,(c,u)=>{const h=GI(u,e.getImmediateChild(c),n);h!==u&&(s=s.updateImmediateChild(c,h))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function QI(t,e){let n=e instanceof Nt?e:new Nt(e),r=t,i=st(n);for(;i!==null;){const s=Nc(r.node.children,i)||{children:{},childCount:0};r=new YI(i,r,s),n=kt(n),i=st(n)}return r}function gl(t){return t.node.value}function iM(t,e){t.node.value=e,Gv(t)}function sM(t){return t.node.childCount>0}function NJ(t){return gl(t)===void 0&&!sM(t)}function Jg(t,e){Gr(t.node.children,(n,r)=>{e(new YI(n,t,r))})}function oM(t,e,n,r){n&&!r&&e(t),Jg(t,i=>{oM(i,e,!0,r)}),n&&r&&e(t)}function MJ(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function jh(t){return new Nt(t.parent===null?t.name:jh(t.parent)+"/"+t.name)}function Gv(t){t.parent!==null&&LJ(t.parent,t.name,t)}function LJ(t,e,n){const r=NJ(n),i=gs(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Gv(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,Gv(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VJ=/[\[\].#$\/\u0000-\u001F\u007F]/,FJ=/[\[\].#$\u0000-\u001F\u007F]/,hy=10*1024*1024,aM=function(t){return typeof t=="string"&&t.length!==0&&!VJ.test(t)},UJ=function(t){return typeof t=="string"&&t.length!==0&&!FJ.test(t)},BJ=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),UJ(t)},cM=function(t,e,n){const r=n instanceof Nt?new v7(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Lo(r));if(typeof e=="function")throw new Error(t+"contains a function "+Lo(r)+" with contents = "+e.toString());if(aN(e))throw new Error(t+"contains "+e.toString()+" "+Lo(r));if(typeof e=="string"&&e.length>hy/3&&Zp(e)>hy)throw new Error(t+"contains a string greater than "+hy+" utf8 bytes "+Lo(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(Gr(e,(o,c)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!aM(o)))throw new Error(t+" contains an invalid key ("+o+") "+Lo(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);w7(r,o),cM(t,c,r),E7(r)}),i&&s)throw new Error(t+' contains ".value" child '+Lo(r)+" in addition to actual children.")}},$J=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!aM(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!BJ(n))throw new Error(Wz(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qJ{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function HJ(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!xN(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function Ra(t,e,n){HJ(t,n),WJ(t,r=>si(r,e)||si(e,r))}function WJ(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(zJ(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function zJ(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();ta&&Vn("event: "+n.toString()),Wh(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jJ="repo_interrupt",KJ=25;class GJ{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new qJ,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=bp(),this.transactionQueueTree_=new YI,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function YJ(t,e,n){if(t.stats_=LI(t.repoInfo_),t.forceRestClient_||HQ())t.server_=new Tp(t.repoInfo_,(r,i,s,o)=>{mC(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>_C(t,!0),0);else{if(typeof n!="undefined"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Pn(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new ss(t.repoInfo_,e,(r,i,s,o)=>{mC(t,r,i,s,o)},r=>{_C(t,r)},r=>{JJ(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=YQ(t.repoInfo_,()=>new G7(t.stats_,t.server_)),t.infoData_=new H7,t.infoSyncTree_=new pC({startListening:(r,i,s,o)=>{let c=[];const u=t.infoData_.getNode(r._path);return u.isEmpty()||(c=Yg(t.infoSyncTree_,r._path,u),setTimeout(()=>{o("ok")},0)),c},stopListening:()=>{}}),JI(t,"connected",!1),t.serverSyncTree_=new pC({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(c,u)=>{const h=o(c,u);Ra(t.eventQueue_,r._path,h)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function QJ(t){const n=t.infoData_.getNode(new Nt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function lM(t){return PJ({timestamp:QJ(t)})}function mC(t,e,n,r,i){t.dataUpdateCount++;const s=new Nt(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const u=jf(n,h=>Fn(h));o=CJ(t.serverSyncTree_,s,u,i)}else{const u=Fn(n);o=SJ(t.serverSyncTree_,s,u,i)}else if(r){const u=jf(n,h=>Fn(h));o=RJ(t.serverSyncTree_,s,u)}else{const u=Fn(n);o=Yg(t.serverSyncTree_,s,u)}let c=s;o.length>0&&(c=ZI(t,s)),Ra(t.eventQueue_,c,o)}function _C(t,e){JI(t,"connected",e),e===!1&&ZJ(t)}function JJ(t,e){Gr(e,(n,r)=>{JI(t,n,r)})}function JI(t,e,n){const r=new Nt("/.info/"+e),i=Fn(n);t.infoData_.updateSnapshot(r,i);const s=Yg(t.infoSyncTree_,r,i);Ra(t.eventQueue_,r,s)}function XJ(t){return t.nextWriteId_++}function ZJ(t){uM(t,"onDisconnectEvents");const e=lM(t),n=bp();$v(t.onDisconnect_,vt(),(i,s)=>{const o=DJ(i,s,t.serverSyncTree_,e);VN(n,i,o)});let r=[];$v(n,vt(),(i,s)=>{r=r.concat(Yg(t.serverSyncTree_,i,s));const o=rX(t,i);ZI(t,o)}),t.onDisconnect_=bp(),Ra(t.eventQueue_,vt(),r)}function eX(t){t.persistentConnection_&&t.persistentConnection_.interrupt(jJ)}function uM(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Vn(n,...e)}function hM(t,e,n){return XN(t.serverSyncTree_,e,n)||pt.EMPTY_NODE}function XI(t,e=t.transactionQueueTree_){if(e||Xg(t,e),gl(e)){const n=fM(t,e);ce(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&tX(t,jh(e),n)}else sM(e)&&Jg(e,n=>{XI(t,n)})}function tX(t,e,n){const r=n.map(h=>h.currentWriteId),i=hM(t,e,r);let s=i;const o=i.hash();for(let h=0;h<n.length;h++){const f=n[h];ce(f.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),f.status=1,f.retryCount++;const p=Hr(e,f.path);s=s.updateChild(p,f.currentOutputSnapshotRaw)}const c=s.val(!0),u=e;t.server_.put(u.toString(),c,h=>{uM(t,"transaction put response",{path:u.toString(),status:h});let f=[];if(h==="ok"){const p=[];for(let m=0;m<n.length;m++)n[m].status=2,f=f.concat(fc(t.serverSyncTree_,n[m].currentWriteId)),n[m].onComplete&&p.push(()=>n[m].onComplete(null,!0,n[m].currentOutputSnapshotResolved)),n[m].unwatcher();Xg(t,QI(t.transactionQueueTree_,e)),XI(t,t.transactionQueueTree_),Ra(t.eventQueue_,e,f);for(let m=0;m<p.length;m++)Wh(p[m])}else{if(h==="datastale")for(let p=0;p<n.length;p++)n[p].status===3?n[p].status=4:n[p].status=0;else{Cr("transaction at "+u.toString()+" failed: "+h);for(let p=0;p<n.length;p++)n[p].status=4,n[p].abortReason=h}ZI(t,e)}},o)}function ZI(t,e){const n=dM(t,e),r=jh(n),i=fM(t,n);return nX(t,i,r),r}function nX(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(c=>c.status===0).map(c=>c.currentWriteId);for(let c=0;c<e.length;c++){const u=e[c],h=Hr(n,u.path);let f=!1,p;if(ce(h!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),u.status===4)f=!0,p=u.abortReason,i=i.concat(fc(t.serverSyncTree_,u.currentWriteId,!0));else if(u.status===0)if(u.retryCount>=KJ)f=!0,p="maxretry",i=i.concat(fc(t.serverSyncTree_,u.currentWriteId,!0));else{const m=hM(t,u.path,o);u.currentInputSnapshot=m;const y=e[c].update(m.val());if(y!==void 0){cM("transaction failed: Data returned ",y,u.path);let v=Fn(y);typeof y=="object"&&y!=null&&gs(y,".priority")||(v=v.updatePriority(m.getPriority()));const A=u.currentWriteId,N=lM(t),D=OJ(v,m,N);u.currentOutputSnapshotRaw=v,u.currentOutputSnapshotResolved=D,u.currentWriteId=XJ(t),o.splice(o.indexOf(A),1),i=i.concat(AJ(t.serverSyncTree_,u.path,D,u.currentWriteId,u.applyLocally)),i=i.concat(fc(t.serverSyncTree_,A,!0))}else f=!0,p="nodata",i=i.concat(fc(t.serverSyncTree_,u.currentWriteId,!0))}Ra(t.eventQueue_,n,i),i=[],f&&(e[c].status=2,function(m){setTimeout(m,Math.floor(0))}(e[c].unwatcher),e[c].onComplete&&(p==="nodata"?r.push(()=>e[c].onComplete(null,!1,e[c].currentInputSnapshot)):r.push(()=>e[c].onComplete(new Error(p),!1,null))))}Xg(t,t.transactionQueueTree_);for(let c=0;c<r.length;c++)Wh(r[c]);XI(t,t.transactionQueueTree_)}function dM(t,e){let n,r=t.transactionQueueTree_;for(n=st(e);n!==null&&gl(r)===void 0;)r=QI(r,n),e=kt(e),n=st(e);return r}function fM(t,e){const n=[];return pM(t,e,n),n.sort((r,i)=>r.order-i.order),n}function pM(t,e,n){const r=gl(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Jg(e,i=>{pM(t,i,n)})}function Xg(t,e){const n=gl(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,iM(e,n.length>0?n:void 0)}Jg(e,r=>{Xg(t,r)})}function rX(t,e){const n=jh(dM(t,e)),r=QI(t.transactionQueueTree_,e);return MJ(r,i=>{dy(t,i)}),dy(t,r),oM(r,i=>{dy(t,i)}),n}function dy(t,e){const n=gl(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(ce(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(ce(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(fc(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?iM(e,void 0):n.length=s+1,Ra(t.eventQueue_,jh(e),i);for(let o=0;o<r.length;o++)Wh(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iX(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function sX(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Cr(`Invalid query segment '${n}' in query '${t}'`)}return e}const yC=function(t,e){const n=oX(t),r=n.namespace;n.domain==="firebase.com"&&fa(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&fa("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||MQ();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new jQ(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new Nt(n.pathString)}},oX=function(t){let e="",n="",r="",i="",s="",o=!0,c="https",u=443;if(typeof t=="string"){let h=t.indexOf("//");h>=0&&(c=t.substring(0,h-1),t=t.substring(h+2));let f=t.indexOf("/");f===-1&&(f=t.length);let p=t.indexOf("?");p===-1&&(p=t.length),e=t.substring(0,Math.min(f,p)),f<p&&(i=iX(t.substring(f,p)));const m=sX(t.substring(Math.min(t.length,p)));h=e.indexOf(":"),h>=0?(o=c==="https"||c==="wss",u=parseInt(e.substring(h+1),10)):h=e.length;const y=e.slice(0,h);if(y.toLowerCase()==="localhost")n="localhost";else if(y.split(".").length<=2)n=y;else{const v=e.indexOf(".");r=e.substring(0,v).toLowerCase(),n=e.substring(v+1),s=r}"ns"in m&&(s=m.ns)}return{host:e,port:u,domain:n,subdomain:r,secure:o,scheme:c,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return nt(this._path)?null:SN(this._path)}get ref(){return new ml(this._repo,this._path)}get _queryIdentifier(){const e=rC(this._queryParams),n=NI(e);return n==="{}"?"default":n}get _queryObject(){return rC(this._queryParams)}isEqual(e){if(e=ke(e),!(e instanceof eT))return!1;const n=this._repo===e._repo,r=xN(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+y7(this._path)}}class ml extends eT{constructor(e,n){super(e,n,new BI,!1)}get parent(){const e=PN(this._path);return e===null?null:new ml(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}TJ(ml);bJ(ml);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aX="FIREBASE_DATABASE_EMULATOR_HOST",Yv={};let cX=!1;function lX(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||fa("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Vn("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=yC(s,i),c=o.repoInfo,u,h;typeof process!="undefined"&&process.env&&(h=process.env[aX]),h?(u=!0,s=`http://${h}?ns=${c.namespace}`,o=yC(s,i),c=o.repoInfo):u=!o.repoInfo.secure;const f=i&&u?new Fv(Fv.OWNER):new zQ(t.name,t.options,e);$J("Invalid Firebase Database URL",o),nt(o.path)||fa("Database URL must point to the root of a Firebase Database (not including a child path).");const p=hX(c,t,f,new WQ(t.name,n));return new dX(p,t)}function uX(t,e){const n=Yv[e];(!n||n[t.key]!==t)&&fa(`Database ${e}(${t.repoInfo_}) has already been deleted.`),eX(t),delete n[t.key]}function hX(t,e,n,r){let i=Yv[e.name];i||(i={},Yv[e.name]=i);let s=i[t.toURLString()];return s&&fa("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new GJ(t,cX,n,r),i[t.toURLString()]=s,s}class dX{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(YJ(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ml(this._repo,vt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(uX(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&fa("Cannot call "+e+" on a deleted database.")}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fX(t){xQ(ms),di(new hi("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return lX(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),fr(US,BS,t),fr(US,BS,"esm2017")}ss.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};ss.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};fX();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gM="firebasestorage.googleapis.com",pX="storageBucket",gX=2*60*1e3,mX=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi extends gi{constructor(e,n,r=0){super(fy(e),`Firebase Storage: ${n} (${fy(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Mi.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return fy(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ni;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ni||(Ni={}));function fy(t){return"storage/"+t}function _X(){const t="An unknown error occurred, please check the error payload for server response.";return new Mi(Ni.UNKNOWN,t)}function yX(){return new Mi(Ni.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function vX(){return new Mi(Ni.CANCELED,"User canceled the upload/download.")}function wX(t){return new Mi(Ni.INVALID_URL,"Invalid URL '"+t+"'.")}function EX(t){return new Mi(Ni.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function vC(t){return new Mi(Ni.INVALID_ARGUMENT,t)}function mM(){return new Mi(Ni.APP_DELETED,"The Firebase app was deleted.")}function IX(t){return new Mi(Ni.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=oi.makeFromUrl(e,n)}catch{return new oi(e,"")}if(r.path==="")return r;throw EX(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(P){P.path.charAt(P.path.length-1)==="/"&&(P.path_=P.path_.slice(0,-1))}const o="(/(.*))?$",c=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function h(P){P.path_=decodeURIComponent(P.path)}const f="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",y=new RegExp(`^https?://${p}/${f}/b/${i}/o${m}`,"i"),v={bucket:1,path:3},I=n===gM?"(?:storage.googleapis.com|storage.cloud.google.com)":n,A="([^?#]*)",N=new RegExp(`^https?://${I}/${i}/${A}`,"i"),k=[{regex:c,indices:u,postModify:s},{regex:y,indices:v,postModify:h},{regex:N,indices:{bucket:1,path:2},postModify:h}];for(let P=0;P<k.length;P++){const B=k[P],V=B.regex.exec(e);if(V){const F=V[B.indices.bucket];let M=V[B.indices.path];M||(M=""),r=new oi(F,M),B.postModify(r);break}}if(r==null)throw wX(e);return r}}class TX{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bX(t,e,n){let r=1,i=null,s=null,o=!1,c=0;function u(){return c===2}let h=!1;function f(...A){h||(h=!0,e.apply(null,A))}function p(A){i=setTimeout(()=>{i=null,t(y,u())},A)}function m(){s&&clearTimeout(s)}function y(A,...N){if(h){m();return}if(A){m(),f.call(null,A,...N);return}if(u()||o){m(),f.call(null,A,...N);return}r<64&&(r*=2);let k;c===1?(c=2,k=0):k=(r+Math.random())*1e3,p(k)}let v=!1;function I(A){v||(v=!0,m(),!h&&(i!==null?(A||(c=2),clearTimeout(i),p(0)):A||(c=1)))}return p(0),s=setTimeout(()=>{o=!0,I(!0)},n),I}function AX(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RX(t){return t!==void 0}function wC(t,e,n,r){if(r<e)throw vC(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw vC(`Invalid value for '${t}'. Expected ${n} or less.`)}function SX(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cp;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Cp||(Cp={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CX(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PX{constructor(e,n,r,i,s,o,c,u,h,f,p,m=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=c,this.errorCallback_=u,this.timeout_=h,this.progressCallback_=f,this.connectionFactory_=p,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((y,v)=>{this.resolve_=y,this.reject_=v,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new lf(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=c=>{const u=c.loaded,h=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,h)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const c=s.getErrorCode()===Cp.NO_ERROR,u=s.getStatus();if(!c||CX(u,this.additionalRetryCodes_)&&this.retry){const f=s.getErrorCode()===Cp.ABORT;r(!1,new lf(!1,null,f));return}const h=this.successCodes_.indexOf(u)!==-1;r(!0,new lf(h,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,c=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(c,c.getResponse());RX(u)?s(u):s()}catch(u){o(u)}else if(c!==null){const u=_X();u.serverResponse=c.getErrorText(),this.errorCallback_?o(this.errorCallback_(c,u)):o(u)}else if(i.canceled){const u=this.appDelete_?mM():vX();o(u)}else{const u=yX();o(u)}};this.canceled_?n(!1,new lf(!1,null,!0)):this.backoffId_=bX(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&AX(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class lf{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function xX(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function kX(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e!=null?e:"AppManager")}function DX(t,e){e&&(t["X-Firebase-GMPID"]=e)}function OX(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function NX(t,e,n,r,i,s,o=!0){const c=SX(t.urlParams),u=t.url+c,h=Object.assign({},t.headers);return DX(h,e),xX(h,n),kX(h,s),OX(h,r),new PX(u,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MX(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function LX(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(e,n){this._service=e,n instanceof oi?this._location=n:this._location=oi.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Pp(e,n)}get root(){const e=new oi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return LX(this._location.path)}get storage(){return this._service}get parent(){const e=MX(this._location.path);if(e===null)return null;const n=new oi(this._location.bucket,e);return new Pp(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw IX(e)}}function EC(t,e){const n=e==null?void 0:e[pX];return n==null?null:oi.makeFromBucketSpec(n,t)}class VX{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=gM,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=gX,this._maxUploadRetryTime=mX,this._requests=new Set,i!=null?this._bucket=oi.makeFromBucketSpec(i,this._host):this._bucket=EC(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=oi.makeFromBucketSpec(this._url,e):this._bucket=EC(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){wC("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){wC("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Pp(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new TX(mM());{const o=NX(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const IC="@firebase/storage",TC="0.11.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FX="storage";function UX(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new VX(n,r,i,e,ms)}function BX(){di(new hi(FX,UX,"PUBLIC").setMultipleInstances(!0)),fr(IC,TC,""),fr(IC,TC,"esm2017")}BX();const py=new WeakMap;function _M(t,e){return py.has(e)||py.set(e,t||{f:{},r:{},s:{},u:{}}),py.get(e)}function $X(t,e,n,r){if(!t)return n;const[i,s]=yM(t);if(!i)return n;const o=_M(void 0,r)[i]||{},c=e||s;return c&&c in o?o[c]:n}function qX(t,e,n,r){if(!t)return;const[i,s]=yM(t);if(!i)return;const o=_M(void 0,r)[i],c=e||s;if(c)return n.then(u=>{o[c]=u}).catch(Pi),c}function yM(t){return vQ(t)||wQ(t)?["f",t.path]:EQ(t)?["r",t.toString()]:IQ(t)?["s",t.toString()]:[]}const gy=new WeakMap;function HX(t,e,n){const r=kI();gy.has(r)||gy.set(r,new Map);const i=gy.get(r),s=qX(e,n,t,r);return s&&i.set(s,t),s?()=>i.delete(s):Pi}const WX={toFirestore(t){return t},fromFirestore(t,e){return t.exists()?Object.defineProperties(t.data(e),{id:{value:t.id}}):null}};function Qv(t,e,n,r){if(!_Q(t))return[t,{}];const i=[{},{}],s=Object.keys(n).reduce((c,u)=>{const h=n[u];return c[h.path]=h.data(),c},{});function o(c,u,h,f){u=u||{};const[p,m]=f;Object.getOwnPropertyNames(c).forEach(y=>{const v=Object.getOwnPropertyDescriptor(c,y);v&&!v.enumerable&&Object.defineProperty(p,y,v)});for(const y in c){const v=c[y];if(v==null||v instanceof Date||v instanceof It||v instanceof kg)p[y]=v;else if(OI(v)){const I=h+y;p[y]=I in n?u[y]:v.path,m[I]=v.converter?v:v.withConverter(r.converter)}else if(Array.isArray(v)){p[y]=Array(v.length);for(let I=0;I<v.length;I++){const A=v[I];A&&A.path in s&&(p[y][I]=s[A.path])}o(v,u[y]||p[y],h+y+".",[p[y],m])}else ba(v)?(p[y]={},o(v,u[y],h+y+".",[p[y],m])):p[y]=v}}return o(t,e,"",i),i}const tT={reset:!1,wait:!0,maxRefDepth:2,converter:WX,snapshotOptions:{serverTimestamps:"estimate"}};function xp(t){for(const e in t)t[e].unsub()}function Jv(t,e,n,r,i,s,o,c,u){const[h,f]=Qv(r.data(t.snapshotOptions),DI(e,n),i,t);s.set(e,n,h),Xv(t,e,n,i,f,s,o,c,u)}function zX({ref:t,target:e,path:n,depth:r,resolve:i,reject:s,ops:o},c){const u=Object.create(null);let h=Pi;return c.once?sI(t).then(f=>{f.exists()?Jv(c,e,n,f,u,o,r,i,s):(o.set(e,n,null),i())}).catch(s):h=Ic(t,f=>{f.exists()?Jv(c,e,n,f,u,o,r,i,s):(o.set(e,n,null),i())},s),()=>{h(),xp(u)}}function Xv(t,e,n,r,i,s,o,c,u){const h=Object.keys(i);if(Object.keys(r).filter(I=>h.indexOf(I)<0).forEach(I=>{r[I].unsub(),delete r[I]}),!h.length||++o>t.maxRefDepth)return c(n);let p=0;const m=h.length,y=Object.create(null);function v(I){I in y&&++p>=m&&c(n)}h.forEach(I=>{const A=r[I],N=i[I],D=`${n}.${I}`;if(y[D]=!0,A)if(A.path!==N.path)A.unsub();else return;r[I]={data:()=>DI(e,D),unsub:zX({ref:N,target:e,path:D,depth:o,ops:s,resolve:v.bind(null,D),reject:u},t),path:N.path}})}function jX(t,e,n,r,i,s){const o=Object.assign({},tT,s),{snapshotListenOptions:c,snapshotOptions:u,wait:h,once:f}=o,p="value";let m=Bt(h?[]:t.value);h||n.set(t,p,[]);const y=r;let v,I=Pi;const A=[],N={added:({newIndex:k,doc:P})=>{A.splice(k,0,Object.create(null));const B=A[k],[V,F]=Qv(P.data(u),void 0,B,o);n.add(Yi(m),k,V),Xv(o,m,`${p}.${k}`,B,F,n,0,r.bind(null,P),i)},modified:({oldIndex:k,newIndex:P,doc:B})=>{const V=Yi(m),F=A[k],M=V[k],[J,ee]=Qv(B.data(u),M,F,o);A.splice(P,0,F),n.remove(V,k),n.add(V,P,J),Xv(o,m,`${p}.${P}`,F,ee,n,0,r,i)},removed:({oldIndex:k})=>{const P=Yi(m);n.remove(P,k),xp(A.splice(k,1)[0])}};function D(k){const P=k.docChanges(c);if(!v&&P.length){v=!0;let B=0;const V=P.length,F=Object.create(null);for(let M=0;M<V;M++)F[P[M].doc.id]=!0;r=M=>{M&&M.id in F&&++B>=V&&(h&&(n.set(t,p,Yi(m)),m=t),y(Yi(m)),r=Pi)}}P.forEach(B=>{N[B.type](B)}),P.length||(h&&(n.set(t,p,Yi(m)),m=t),r(Yi(m)))}return f?gp(e).then(D).catch(i):I=Ic(e,D,i),k=>{if(I(),k){const P=typeof k=="function"?k():[];n.set(t,p,P)}A.forEach(xp)}}function KX(t,e,n,r,i,s){const o=Object.assign({},tT,s),c="value",u=Object.create(null);r=TQ(r,()=>DI(t,c));let h=Pi;function f(p){p.exists()?Jv(o,t,c,p,u,n,0,r,i):(n.set(t,c,null),r(null))}return o.once?sI(e).then(f).catch(i):h=Ic(e,f,i),p=>{if(h(),p){const m=typeof p=="function"?p():null;n.set(t,c,m)}xp(u)}}const bC=Symbol();function vM(t,e){let n=Pi;const r=Object.assign({},tT,e),i=Yi(t),s=r.target||Bt();AQ()&&(r.once=!0);const o=$X(i,r.ssrKey,bC,kI()),c=o!==bC;c&&(s.value=o);let u=!c;const h=Bt(!1),f=Bt(),p=NP(),m=yw();let y=Pi;function v(){let N=Yi(t);const D=new Promise((k,P)=>{if(n(r.reset),!N)return n=Pi,k(null);h.value=u,u=!0,N.converter||(N=N.withConverter(r.converter)),n=(OI(N)?KX:jX)(s,N,GX,k,P,r)}).catch(k=>(p.value===D&&(f.value=k),Promise.reject(k))).finally(()=>{p.value===D&&(h.value=!1)});p.value=D}let I=Pi;zt(t)&&(I=Yo(t,v)),v(),i&&(y=HX(p.value,i,r.ssrKey)),ho()&&XP(()=>p.value),m&&yP(A);function A(N=r.reset){I(),y(),n(N)}return Object.defineProperties(s,{error:{get:()=>f},data:{get:()=>s},pending:{get:()=>h},promise:{get:()=>p},stop:{get:()=>A}})}const GX={set:(t,e,n)=>gQ(t,e,n),add:(t,e,n)=>t.splice(e,0,n),remove:(t,e)=>t.splice(e,1)};function YX(t,e){return vM(t,{target:Bt([]),...e})}function QX(t,e){return vM(t,e)}function JX(t){return(e,n)=>{const r=RQ(e,n).run(()=>Bt(t));SQ.set(e,r),PQ(r,e)}}function XX(t,{firebaseApp:e,modules:n=[]}){t.provide(nN,e);for(const r of n)r(e,t)}var jl=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},Zv={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(t,e){(function(){var n,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",c="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",h=500,f="__lodash_placeholder__",p=1,m=2,y=4,v=1,I=2,A=1,N=2,D=4,k=8,P=16,B=32,V=64,F=128,M=256,J=512,ee=30,ge="...",te=800,Be=16,fe=1,Fe=2,Ne=3,je=1/0,$e=9007199254740991,zn=17976931348623157e292,ht=0/0,Qe=4294967295,wt=Qe-1,En=Qe>>>1,In=[["ary",F],["bind",A],["bindKey",N],["curry",k],["curryRight",P],["flip",J],["partial",B],["partialRight",V],["rearg",M]],Vt="[object Arguments]",bt="[object Array]",W="[object AsyncFunction]",de="[object Boolean]",se="[object Date]",Ee="[object DOMException]",Ze="[object Error]",T="[object Function]",R="[object GeneratorFunction]",O="[object Map]",$="[object Number]",G="[object Null]",Y="[object Object]",he="[object Promise]",ne="[object Proxy]",ie="[object RegExp]",Q="[object Set]",we="[object String]",me="[object Symbol]",Ie="[object Undefined]",Se="[object WeakMap]",Ke="[object WeakSet]",lt="[object ArrayBuffer]",et="[object DataView]",Mt="[object Float32Array]",jn="[object Float64Array]",mi="[object Int8Array]",Sa="[object Int16Array]",Vi="[object Int32Array]",Ca="[object Uint8Array]",Tn="[object Uint8ClampedArray]",er="[object Uint16Array]",Pa="[object Uint32Array]",pL=/\b__p \+= '';/g,gL=/\b(__p \+=) '' \+/g,mL=/(__e\(.*?\)|\b__t\)) \+\n'';/g,_T=/&(?:amp|lt|gt|quot|#39);/g,yT=/[&<>"']/g,_L=RegExp(_T.source),yL=RegExp(yT.source),vL=/<%-([\s\S]+?)%>/g,wL=/<%([\s\S]+?)%>/g,vT=/<%=([\s\S]+?)%>/g,EL=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,IL=/^\w*$/,TL=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,am=/[\\^$.*+?()[\]{}|]/g,bL=RegExp(am.source),cm=/^\s+/,AL=/\s/,RL=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,SL=/\{\n\/\* \[wrapped with (.+)\] \*/,CL=/,? & /,PL=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,xL=/[()=,{}\[\]\/\s]/,kL=/\\(\\)?/g,DL=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,wT=/\w*$/,OL=/^[-+]0x[0-9a-f]+$/i,NL=/^0b[01]+$/i,ML=/^\[object .+?Constructor\]$/,LL=/^0o[0-7]+$/i,VL=/^(?:0|[1-9]\d*)$/,FL=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Qh=/($^)/,UL=/['\n\r\u2028\u2029\\]/g,Jh="\\ud800-\\udfff",BL="\\u0300-\\u036f",$L="\\ufe20-\\ufe2f",qL="\\u20d0-\\u20ff",ET=BL+$L+qL,IT="\\u2700-\\u27bf",TT="a-z\\xdf-\\xf6\\xf8-\\xff",HL="\\xac\\xb1\\xd7\\xf7",WL="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",zL="\\u2000-\\u206f",jL=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",bT="A-Z\\xc0-\\xd6\\xd8-\\xde",AT="\\ufe0e\\ufe0f",RT=HL+WL+zL+jL,lm="['\u2019]",KL="["+Jh+"]",ST="["+RT+"]",Xh="["+ET+"]",CT="\\d+",GL="["+IT+"]",PT="["+TT+"]",xT="[^"+Jh+RT+CT+IT+TT+bT+"]",um="\\ud83c[\\udffb-\\udfff]",YL="(?:"+Xh+"|"+um+")",kT="[^"+Jh+"]",hm="(?:\\ud83c[\\udde6-\\uddff]){2}",dm="[\\ud800-\\udbff][\\udc00-\\udfff]",xa="["+bT+"]",DT="\\u200d",OT="(?:"+PT+"|"+xT+")",QL="(?:"+xa+"|"+xT+")",NT="(?:"+lm+"(?:d|ll|m|re|s|t|ve))?",MT="(?:"+lm+"(?:D|LL|M|RE|S|T|VE))?",LT=YL+"?",VT="["+AT+"]?",JL="(?:"+DT+"(?:"+[kT,hm,dm].join("|")+")"+VT+LT+")*",XL="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ZL="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",FT=VT+LT+JL,eV="(?:"+[GL,hm,dm].join("|")+")"+FT,tV="(?:"+[kT+Xh+"?",Xh,hm,dm,KL].join("|")+")",nV=RegExp(lm,"g"),rV=RegExp(Xh,"g"),fm=RegExp(um+"(?="+um+")|"+tV+FT,"g"),iV=RegExp([xa+"?"+PT+"+"+NT+"(?="+[ST,xa,"$"].join("|")+")",QL+"+"+MT+"(?="+[ST,xa+OT,"$"].join("|")+")",xa+"?"+OT+"+"+NT,xa+"+"+MT,ZL,XL,CT,eV].join("|"),"g"),sV=RegExp("["+DT+Jh+ET+AT+"]"),oV=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,aV=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],cV=-1,Ct={};Ct[Mt]=Ct[jn]=Ct[mi]=Ct[Sa]=Ct[Vi]=Ct[Ca]=Ct[Tn]=Ct[er]=Ct[Pa]=!0,Ct[Vt]=Ct[bt]=Ct[lt]=Ct[de]=Ct[et]=Ct[se]=Ct[Ze]=Ct[T]=Ct[O]=Ct[$]=Ct[Y]=Ct[ie]=Ct[Q]=Ct[we]=Ct[Se]=!1;var At={};At[Vt]=At[bt]=At[lt]=At[et]=At[de]=At[se]=At[Mt]=At[jn]=At[mi]=At[Sa]=At[Vi]=At[O]=At[$]=At[Y]=At[ie]=At[Q]=At[we]=At[me]=At[Ca]=At[Tn]=At[er]=At[Pa]=!0,At[Ze]=At[T]=At[Se]=!1;var lV={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},uV={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},hV={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},dV={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},fV=parseFloat,pV=parseInt,UT=typeof jl=="object"&&jl&&jl.Object===Object&&jl,gV=typeof self=="object"&&self&&self.Object===Object&&self,bn=UT||gV||Function("return this")(),pm=e&&!e.nodeType&&e,wo=pm&&!0&&t&&!t.nodeType&&t,BT=wo&&wo.exports===pm,gm=BT&&UT.process,kr=function(){try{var C=wo&&wo.require&&wo.require("util").types;return C||gm&&gm.binding&&gm.binding("util")}catch{}}(),$T=kr&&kr.isArrayBuffer,qT=kr&&kr.isDate,HT=kr&&kr.isMap,WT=kr&&kr.isRegExp,zT=kr&&kr.isSet,jT=kr&&kr.isTypedArray;function mr(C,H,U){switch(U.length){case 0:return C.call(H);case 1:return C.call(H,U[0]);case 2:return C.call(H,U[0],U[1]);case 3:return C.call(H,U[0],U[1],U[2])}return C.apply(H,U)}function mV(C,H,U,pe){for(var Me=-1,ut=C==null?0:C.length;++Me<ut;){var an=C[Me];H(pe,an,U(an),C)}return pe}function Dr(C,H){for(var U=-1,pe=C==null?0:C.length;++U<pe&&H(C[U],U,C)!==!1;);return C}function _V(C,H){for(var U=C==null?0:C.length;U--&&H(C[U],U,C)!==!1;);return C}function KT(C,H){for(var U=-1,pe=C==null?0:C.length;++U<pe;)if(!H(C[U],U,C))return!1;return!0}function Es(C,H){for(var U=-1,pe=C==null?0:C.length,Me=0,ut=[];++U<pe;){var an=C[U];H(an,U,C)&&(ut[Me++]=an)}return ut}function Zh(C,H){var U=C==null?0:C.length;return!!U&&ka(C,H,0)>-1}function mm(C,H,U){for(var pe=-1,Me=C==null?0:C.length;++pe<Me;)if(U(H,C[pe]))return!0;return!1}function Lt(C,H){for(var U=-1,pe=C==null?0:C.length,Me=Array(pe);++U<pe;)Me[U]=H(C[U],U,C);return Me}function Is(C,H){for(var U=-1,pe=H.length,Me=C.length;++U<pe;)C[Me+U]=H[U];return C}function _m(C,H,U,pe){var Me=-1,ut=C==null?0:C.length;for(pe&&ut&&(U=C[++Me]);++Me<ut;)U=H(U,C[Me],Me,C);return U}function yV(C,H,U,pe){var Me=C==null?0:C.length;for(pe&&Me&&(U=C[--Me]);Me--;)U=H(U,C[Me],Me,C);return U}function ym(C,H){for(var U=-1,pe=C==null?0:C.length;++U<pe;)if(H(C[U],U,C))return!0;return!1}var vV=vm("length");function wV(C){return C.split("")}function EV(C){return C.match(PL)||[]}function GT(C,H,U){var pe;return U(C,function(Me,ut,an){if(H(Me,ut,an))return pe=ut,!1}),pe}function ed(C,H,U,pe){for(var Me=C.length,ut=U+(pe?1:-1);pe?ut--:++ut<Me;)if(H(C[ut],ut,C))return ut;return-1}function ka(C,H,U){return H===H?OV(C,H,U):ed(C,YT,U)}function IV(C,H,U,pe){for(var Me=U-1,ut=C.length;++Me<ut;)if(pe(C[Me],H))return Me;return-1}function YT(C){return C!==C}function QT(C,H){var U=C==null?0:C.length;return U?Em(C,H)/U:ht}function vm(C){return function(H){return H==null?n:H[C]}}function wm(C){return function(H){return C==null?n:C[H]}}function JT(C,H,U,pe,Me){return Me(C,function(ut,an,Et){U=pe?(pe=!1,ut):H(U,ut,an,Et)}),U}function TV(C,H){var U=C.length;for(C.sort(H);U--;)C[U]=C[U].value;return C}function Em(C,H){for(var U,pe=-1,Me=C.length;++pe<Me;){var ut=H(C[pe]);ut!==n&&(U=U===n?ut:U+ut)}return U}function Im(C,H){for(var U=-1,pe=Array(C);++U<C;)pe[U]=H(U);return pe}function bV(C,H){return Lt(H,function(U){return[U,C[U]]})}function XT(C){return C&&C.slice(0,n0(C)+1).replace(cm,"")}function _r(C){return function(H){return C(H)}}function Tm(C,H){return Lt(H,function(U){return C[U]})}function yl(C,H){return C.has(H)}function ZT(C,H){for(var U=-1,pe=C.length;++U<pe&&ka(H,C[U],0)>-1;);return U}function e0(C,H){for(var U=C.length;U--&&ka(H,C[U],0)>-1;);return U}function AV(C,H){for(var U=C.length,pe=0;U--;)C[U]===H&&++pe;return pe}var RV=wm(lV),SV=wm(uV);function CV(C){return"\\"+dV[C]}function PV(C,H){return C==null?n:C[H]}function Da(C){return sV.test(C)}function xV(C){return oV.test(C)}function kV(C){for(var H,U=[];!(H=C.next()).done;)U.push(H.value);return U}function bm(C){var H=-1,U=Array(C.size);return C.forEach(function(pe,Me){U[++H]=[Me,pe]}),U}function t0(C,H){return function(U){return C(H(U))}}function Ts(C,H){for(var U=-1,pe=C.length,Me=0,ut=[];++U<pe;){var an=C[U];(an===H||an===f)&&(C[U]=f,ut[Me++]=U)}return ut}function td(C){var H=-1,U=Array(C.size);return C.forEach(function(pe){U[++H]=pe}),U}function DV(C){var H=-1,U=Array(C.size);return C.forEach(function(pe){U[++H]=[pe,pe]}),U}function OV(C,H,U){for(var pe=U-1,Me=C.length;++pe<Me;)if(C[pe]===H)return pe;return-1}function NV(C,H,U){for(var pe=U+1;pe--;)if(C[pe]===H)return pe;return pe}function Oa(C){return Da(C)?LV(C):vV(C)}function Yr(C){return Da(C)?VV(C):wV(C)}function n0(C){for(var H=C.length;H--&&AL.test(C.charAt(H)););return H}var MV=wm(hV);function LV(C){for(var H=fm.lastIndex=0;fm.test(C);)++H;return H}function VV(C){return C.match(fm)||[]}function FV(C){return C.match(iV)||[]}var UV=function C(H){H=H==null?bn:Na.defaults(bn.Object(),H,Na.pick(bn,aV));var U=H.Array,pe=H.Date,Me=H.Error,ut=H.Function,an=H.Math,Et=H.Object,Am=H.RegExp,BV=H.String,Or=H.TypeError,nd=U.prototype,$V=ut.prototype,Ma=Et.prototype,rd=H["__core-js_shared__"],id=$V.toString,gt=Ma.hasOwnProperty,qV=0,r0=function(){var a=/[^.]+$/.exec(rd&&rd.keys&&rd.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),sd=Ma.toString,HV=id.call(Et),WV=bn._,zV=Am("^"+id.call(gt).replace(am,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),od=BT?H.Buffer:n,bs=H.Symbol,ad=H.Uint8Array,i0=od?od.allocUnsafe:n,cd=t0(Et.getPrototypeOf,Et),s0=Et.create,o0=Ma.propertyIsEnumerable,ld=nd.splice,a0=bs?bs.isConcatSpreadable:n,vl=bs?bs.iterator:n,Eo=bs?bs.toStringTag:n,ud=function(){try{var a=Ro(Et,"defineProperty");return a({},"",{}),a}catch{}}(),jV=H.clearTimeout!==bn.clearTimeout&&H.clearTimeout,KV=pe&&pe.now!==bn.Date.now&&pe.now,GV=H.setTimeout!==bn.setTimeout&&H.setTimeout,hd=an.ceil,dd=an.floor,Rm=Et.getOwnPropertySymbols,YV=od?od.isBuffer:n,c0=H.isFinite,QV=nd.join,JV=t0(Et.keys,Et),cn=an.max,Dn=an.min,XV=pe.now,ZV=H.parseInt,l0=an.random,eF=nd.reverse,Sm=Ro(H,"DataView"),wl=Ro(H,"Map"),Cm=Ro(H,"Promise"),La=Ro(H,"Set"),El=Ro(H,"WeakMap"),Il=Ro(Et,"create"),fd=El&&new El,Va={},tF=So(Sm),nF=So(wl),rF=So(Cm),iF=So(La),sF=So(El),pd=bs?bs.prototype:n,Tl=pd?pd.valueOf:n,u0=pd?pd.toString:n;function w(a){if(qt(a)&&!Le(a)&&!(a instanceof Je)){if(a instanceof Nr)return a;if(gt.call(a,"__wrapped__"))return hb(a)}return new Nr(a)}var Fa=function(){function a(){}return function(l){if(!Ft(l))return{};if(s0)return s0(l);a.prototype=l;var d=new a;return a.prototype=n,d}}();function gd(){}function Nr(a,l){this.__wrapped__=a,this.__actions__=[],this.__chain__=!!l,this.__index__=0,this.__values__=n}w.templateSettings={escape:vL,evaluate:wL,interpolate:vT,variable:"",imports:{_:w}},w.prototype=gd.prototype,w.prototype.constructor=w,Nr.prototype=Fa(gd.prototype),Nr.prototype.constructor=Nr;function Je(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Qe,this.__views__=[]}function oF(){var a=new Je(this.__wrapped__);return a.__actions__=tr(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=tr(this.__iteratees__),a.__takeCount__=this.__takeCount__,a.__views__=tr(this.__views__),a}function aF(){if(this.__filtered__){var a=new Je(this);a.__dir__=-1,a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a}function cF(){var a=this.__wrapped__.value(),l=this.__dir__,d=Le(a),g=l<0,_=d?a.length:0,E=wU(0,_,this.__views__),b=E.start,S=E.end,x=S-b,z=g?S:b-1,K=this.__iteratees__,X=K.length,ae=0,ye=Dn(x,this.__takeCount__);if(!d||!g&&_==x&&ye==x)return N0(a,this.__actions__);var Ce=[];e:for(;x--&&ae<ye;){z+=l;for(var He=-1,Pe=a[z];++He<X;){var Ye=K[He],tt=Ye.iteratee,wr=Ye.type,Yn=tt(Pe);if(wr==Fe)Pe=Yn;else if(!Yn){if(wr==fe)continue e;break e}}Ce[ae++]=Pe}return Ce}Je.prototype=Fa(gd.prototype),Je.prototype.constructor=Je;function Io(a){var l=-1,d=a==null?0:a.length;for(this.clear();++l<d;){var g=a[l];this.set(g[0],g[1])}}function lF(){this.__data__=Il?Il(null):{},this.size=0}function uF(a){var l=this.has(a)&&delete this.__data__[a];return this.size-=l?1:0,l}function hF(a){var l=this.__data__;if(Il){var d=l[a];return d===u?n:d}return gt.call(l,a)?l[a]:n}function dF(a){var l=this.__data__;return Il?l[a]!==n:gt.call(l,a)}function fF(a,l){var d=this.__data__;return this.size+=this.has(a)?0:1,d[a]=Il&&l===n?u:l,this}Io.prototype.clear=lF,Io.prototype.delete=uF,Io.prototype.get=hF,Io.prototype.has=dF,Io.prototype.set=fF;function Fi(a){var l=-1,d=a==null?0:a.length;for(this.clear();++l<d;){var g=a[l];this.set(g[0],g[1])}}function pF(){this.__data__=[],this.size=0}function gF(a){var l=this.__data__,d=md(l,a);if(d<0)return!1;var g=l.length-1;return d==g?l.pop():ld.call(l,d,1),--this.size,!0}function mF(a){var l=this.__data__,d=md(l,a);return d<0?n:l[d][1]}function _F(a){return md(this.__data__,a)>-1}function yF(a,l){var d=this.__data__,g=md(d,a);return g<0?(++this.size,d.push([a,l])):d[g][1]=l,this}Fi.prototype.clear=pF,Fi.prototype.delete=gF,Fi.prototype.get=mF,Fi.prototype.has=_F,Fi.prototype.set=yF;function Ui(a){var l=-1,d=a==null?0:a.length;for(this.clear();++l<d;){var g=a[l];this.set(g[0],g[1])}}function vF(){this.size=0,this.__data__={hash:new Io,map:new(wl||Fi),string:new Io}}function wF(a){var l=Cd(this,a).delete(a);return this.size-=l?1:0,l}function EF(a){return Cd(this,a).get(a)}function IF(a){return Cd(this,a).has(a)}function TF(a,l){var d=Cd(this,a),g=d.size;return d.set(a,l),this.size+=d.size==g?0:1,this}Ui.prototype.clear=vF,Ui.prototype.delete=wF,Ui.prototype.get=EF,Ui.prototype.has=IF,Ui.prototype.set=TF;function To(a){var l=-1,d=a==null?0:a.length;for(this.__data__=new Ui;++l<d;)this.add(a[l])}function bF(a){return this.__data__.set(a,u),this}function AF(a){return this.__data__.has(a)}To.prototype.add=To.prototype.push=bF,To.prototype.has=AF;function Qr(a){var l=this.__data__=new Fi(a);this.size=l.size}function RF(){this.__data__=new Fi,this.size=0}function SF(a){var l=this.__data__,d=l.delete(a);return this.size=l.size,d}function CF(a){return this.__data__.get(a)}function PF(a){return this.__data__.has(a)}function xF(a,l){var d=this.__data__;if(d instanceof Fi){var g=d.__data__;if(!wl||g.length<i-1)return g.push([a,l]),this.size=++d.size,this;d=this.__data__=new Ui(g)}return d.set(a,l),this.size=d.size,this}Qr.prototype.clear=RF,Qr.prototype.delete=SF,Qr.prototype.get=CF,Qr.prototype.has=PF,Qr.prototype.set=xF;function h0(a,l){var d=Le(a),g=!d&&Co(a),_=!d&&!g&&Ps(a),E=!d&&!g&&!_&&qa(a),b=d||g||_||E,S=b?Im(a.length,BV):[],x=S.length;for(var z in a)(l||gt.call(a,z))&&!(b&&(z=="length"||_&&(z=="offset"||z=="parent")||E&&(z=="buffer"||z=="byteLength"||z=="byteOffset")||Hi(z,x)))&&S.push(z);return S}function d0(a){var l=a.length;return l?a[Um(0,l-1)]:n}function kF(a,l){return Pd(tr(a),bo(l,0,a.length))}function DF(a){return Pd(tr(a))}function Pm(a,l,d){(d!==n&&!Jr(a[l],d)||d===n&&!(l in a))&&Bi(a,l,d)}function bl(a,l,d){var g=a[l];(!(gt.call(a,l)&&Jr(g,d))||d===n&&!(l in a))&&Bi(a,l,d)}function md(a,l){for(var d=a.length;d--;)if(Jr(a[d][0],l))return d;return-1}function OF(a,l,d,g){return As(a,function(_,E,b){l(g,_,d(_),b)}),g}function f0(a,l){return a&&yi(l,dn(l),a)}function NF(a,l){return a&&yi(l,rr(l),a)}function Bi(a,l,d){l=="__proto__"&&ud?ud(a,l,{configurable:!0,enumerable:!0,value:d,writable:!0}):a[l]=d}function xm(a,l){for(var d=-1,g=l.length,_=U(g),E=a==null;++d<g;)_[d]=E?n:u_(a,l[d]);return _}function bo(a,l,d){return a===a&&(d!==n&&(a=a<=d?a:d),l!==n&&(a=a>=l?a:l)),a}function Mr(a,l,d,g,_,E){var b,S=l&p,x=l&m,z=l&y;if(d&&(b=_?d(a,g,_,E):d(a)),b!==n)return b;if(!Ft(a))return a;var K=Le(a);if(K){if(b=IU(a),!S)return tr(a,b)}else{var X=On(a),ae=X==T||X==R;if(Ps(a))return V0(a,S);if(X==Y||X==Vt||ae&&!_){if(b=x||ae?{}:nb(a),!S)return x?hU(a,NF(b,a)):uU(a,f0(b,a))}else{if(!At[X])return _?a:{};b=TU(a,X,S)}}E||(E=new Qr);var ye=E.get(a);if(ye)return ye;E.set(a,b),kb(a)?a.forEach(function(Pe){b.add(Mr(Pe,l,d,Pe,a,E))}):Pb(a)&&a.forEach(function(Pe,Ye){b.set(Ye,Mr(Pe,l,d,Ye,a,E))});var Ce=z?x?Qm:Ym:x?rr:dn,He=K?n:Ce(a);return Dr(He||a,function(Pe,Ye){He&&(Ye=Pe,Pe=a[Ye]),bl(b,Ye,Mr(Pe,l,d,Ye,a,E))}),b}function MF(a){var l=dn(a);return function(d){return p0(d,a,l)}}function p0(a,l,d){var g=d.length;if(a==null)return!g;for(a=Et(a);g--;){var _=d[g],E=l[_],b=a[_];if(b===n&&!(_ in a)||!E(b))return!1}return!0}function g0(a,l,d){if(typeof a!="function")throw new Or(o);return kl(function(){a.apply(n,d)},l)}function Al(a,l,d,g){var _=-1,E=Zh,b=!0,S=a.length,x=[],z=l.length;if(!S)return x;d&&(l=Lt(l,_r(d))),g?(E=mm,b=!1):l.length>=i&&(E=yl,b=!1,l=new To(l));e:for(;++_<S;){var K=a[_],X=d==null?K:d(K);if(K=g||K!==0?K:0,b&&X===X){for(var ae=z;ae--;)if(l[ae]===X)continue e;x.push(K)}else E(l,X,g)||x.push(K)}return x}var As=q0(_i),m0=q0(Dm,!0);function LF(a,l){var d=!0;return As(a,function(g,_,E){return d=!!l(g,_,E),d}),d}function _d(a,l,d){for(var g=-1,_=a.length;++g<_;){var E=a[g],b=l(E);if(b!=null&&(S===n?b===b&&!vr(b):d(b,S)))var S=b,x=E}return x}function VF(a,l,d,g){var _=a.length;for(d=qe(d),d<0&&(d=-d>_?0:_+d),g=g===n||g>_?_:qe(g),g<0&&(g+=_),g=d>g?0:Ob(g);d<g;)a[d++]=l;return a}function _0(a,l){var d=[];return As(a,function(g,_,E){l(g,_,E)&&d.push(g)}),d}function An(a,l,d,g,_){var E=-1,b=a.length;for(d||(d=AU),_||(_=[]);++E<b;){var S=a[E];l>0&&d(S)?l>1?An(S,l-1,d,g,_):Is(_,S):g||(_[_.length]=S)}return _}var km=H0(),y0=H0(!0);function _i(a,l){return a&&km(a,l,dn)}function Dm(a,l){return a&&y0(a,l,dn)}function yd(a,l){return Es(l,function(d){return Wi(a[d])})}function Ao(a,l){l=Ss(l,a);for(var d=0,g=l.length;a!=null&&d<g;)a=a[vi(l[d++])];return d&&d==g?a:n}function v0(a,l,d){var g=l(a);return Le(a)?g:Is(g,d(a))}function Kn(a){return a==null?a===n?Ie:G:Eo&&Eo in Et(a)?vU(a):DU(a)}function Om(a,l){return a>l}function FF(a,l){return a!=null&&gt.call(a,l)}function UF(a,l){return a!=null&&l in Et(a)}function BF(a,l,d){return a>=Dn(l,d)&&a<cn(l,d)}function Nm(a,l,d){for(var g=d?mm:Zh,_=a[0].length,E=a.length,b=E,S=U(E),x=1/0,z=[];b--;){var K=a[b];b&&l&&(K=Lt(K,_r(l))),x=Dn(K.length,x),S[b]=!d&&(l||_>=120&&K.length>=120)?new To(b&&K):n}K=a[0];var X=-1,ae=S[0];e:for(;++X<_&&z.length<x;){var ye=K[X],Ce=l?l(ye):ye;if(ye=d||ye!==0?ye:0,!(ae?yl(ae,Ce):g(z,Ce,d))){for(b=E;--b;){var He=S[b];if(!(He?yl(He,Ce):g(a[b],Ce,d)))continue e}ae&&ae.push(Ce),z.push(ye)}}return z}function $F(a,l,d,g){return _i(a,function(_,E,b){l(g,d(_),E,b)}),g}function Rl(a,l,d){l=Ss(l,a),a=ob(a,l);var g=a==null?a:a[vi(Vr(l))];return g==null?n:mr(g,a,d)}function w0(a){return qt(a)&&Kn(a)==Vt}function qF(a){return qt(a)&&Kn(a)==lt}function HF(a){return qt(a)&&Kn(a)==se}function Sl(a,l,d,g,_){return a===l?!0:a==null||l==null||!qt(a)&&!qt(l)?a!==a&&l!==l:WF(a,l,d,g,Sl,_)}function WF(a,l,d,g,_,E){var b=Le(a),S=Le(l),x=b?bt:On(a),z=S?bt:On(l);x=x==Vt?Y:x,z=z==Vt?Y:z;var K=x==Y,X=z==Y,ae=x==z;if(ae&&Ps(a)){if(!Ps(l))return!1;b=!0,K=!1}if(ae&&!K)return E||(E=new Qr),b||qa(a)?Z0(a,l,d,g,_,E):_U(a,l,x,d,g,_,E);if(!(d&v)){var ye=K&&gt.call(a,"__wrapped__"),Ce=X&&gt.call(l,"__wrapped__");if(ye||Ce){var He=ye?a.value():a,Pe=Ce?l.value():l;return E||(E=new Qr),_(He,Pe,d,g,E)}}return ae?(E||(E=new Qr),yU(a,l,d,g,_,E)):!1}function zF(a){return qt(a)&&On(a)==O}function Mm(a,l,d,g){var _=d.length,E=_,b=!g;if(a==null)return!E;for(a=Et(a);_--;){var S=d[_];if(b&&S[2]?S[1]!==a[S[0]]:!(S[0]in a))return!1}for(;++_<E;){S=d[_];var x=S[0],z=a[x],K=S[1];if(b&&S[2]){if(z===n&&!(x in a))return!1}else{var X=new Qr;if(g)var ae=g(z,K,x,a,l,X);if(!(ae===n?Sl(K,z,v|I,g,X):ae))return!1}}return!0}function E0(a){if(!Ft(a)||SU(a))return!1;var l=Wi(a)?zV:ML;return l.test(So(a))}function jF(a){return qt(a)&&Kn(a)==ie}function KF(a){return qt(a)&&On(a)==Q}function GF(a){return qt(a)&&Md(a.length)&&!!Ct[Kn(a)]}function I0(a){return typeof a=="function"?a:a==null?ir:typeof a=="object"?Le(a)?A0(a[0],a[1]):b0(a):Wb(a)}function Lm(a){if(!xl(a))return JV(a);var l=[];for(var d in Et(a))gt.call(a,d)&&d!="constructor"&&l.push(d);return l}function YF(a){if(!Ft(a))return kU(a);var l=xl(a),d=[];for(var g in a)g=="constructor"&&(l||!gt.call(a,g))||d.push(g);return d}function Vm(a,l){return a<l}function T0(a,l){var d=-1,g=nr(a)?U(a.length):[];return As(a,function(_,E,b){g[++d]=l(_,E,b)}),g}function b0(a){var l=Xm(a);return l.length==1&&l[0][2]?ib(l[0][0],l[0][1]):function(d){return d===a||Mm(d,a,l)}}function A0(a,l){return e_(a)&&rb(l)?ib(vi(a),l):function(d){var g=u_(d,a);return g===n&&g===l?h_(d,a):Sl(l,g,v|I)}}function vd(a,l,d,g,_){a!==l&&km(l,function(E,b){if(_||(_=new Qr),Ft(E))QF(a,l,b,d,vd,g,_);else{var S=g?g(n_(a,b),E,b+"",a,l,_):n;S===n&&(S=E),Pm(a,b,S)}},rr)}function QF(a,l,d,g,_,E,b){var S=n_(a,d),x=n_(l,d),z=b.get(x);if(z){Pm(a,d,z);return}var K=E?E(S,x,d+"",a,l,b):n,X=K===n;if(X){var ae=Le(x),ye=!ae&&Ps(x),Ce=!ae&&!ye&&qa(x);K=x,ae||ye||Ce?Le(S)?K=S:Kt(S)?K=tr(S):ye?(X=!1,K=V0(x,!0)):Ce?(X=!1,K=F0(x,!0)):K=[]:Dl(x)||Co(x)?(K=S,Co(S)?K=Nb(S):(!Ft(S)||Wi(S))&&(K=nb(x))):X=!1}X&&(b.set(x,K),_(K,x,g,E,b),b.delete(x)),Pm(a,d,K)}function R0(a,l){var d=a.length;if(!!d)return l+=l<0?d:0,Hi(l,d)?a[l]:n}function S0(a,l,d){l.length?l=Lt(l,function(E){return Le(E)?function(b){return Ao(b,E.length===1?E[0]:E)}:E}):l=[ir];var g=-1;l=Lt(l,_r(Re()));var _=T0(a,function(E,b,S){var x=Lt(l,function(z){return z(E)});return{criteria:x,index:++g,value:E}});return TV(_,function(E,b){return lU(E,b,d)})}function JF(a,l){return C0(a,l,function(d,g){return h_(a,g)})}function C0(a,l,d){for(var g=-1,_=l.length,E={};++g<_;){var b=l[g],S=Ao(a,b);d(S,b)&&Cl(E,Ss(b,a),S)}return E}function XF(a){return function(l){return Ao(l,a)}}function Fm(a,l,d,g){var _=g?IV:ka,E=-1,b=l.length,S=a;for(a===l&&(l=tr(l)),d&&(S=Lt(a,_r(d)));++E<b;)for(var x=0,z=l[E],K=d?d(z):z;(x=_(S,K,x,g))>-1;)S!==a&&ld.call(S,x,1),ld.call(a,x,1);return a}function P0(a,l){for(var d=a?l.length:0,g=d-1;d--;){var _=l[d];if(d==g||_!==E){var E=_;Hi(_)?ld.call(a,_,1):qm(a,_)}}return a}function Um(a,l){return a+dd(l0()*(l-a+1))}function ZF(a,l,d,g){for(var _=-1,E=cn(hd((l-a)/(d||1)),0),b=U(E);E--;)b[g?E:++_]=a,a+=d;return b}function Bm(a,l){var d="";if(!a||l<1||l>$e)return d;do l%2&&(d+=a),l=dd(l/2),l&&(a+=a);while(l);return d}function We(a,l){return r_(sb(a,l,ir),a+"")}function eU(a){return d0(Ha(a))}function tU(a,l){var d=Ha(a);return Pd(d,bo(l,0,d.length))}function Cl(a,l,d,g){if(!Ft(a))return a;l=Ss(l,a);for(var _=-1,E=l.length,b=E-1,S=a;S!=null&&++_<E;){var x=vi(l[_]),z=d;if(x==="__proto__"||x==="constructor"||x==="prototype")return a;if(_!=b){var K=S[x];z=g?g(K,x,S):n,z===n&&(z=Ft(K)?K:Hi(l[_+1])?[]:{})}bl(S,x,z),S=S[x]}return a}var x0=fd?function(a,l){return fd.set(a,l),a}:ir,nU=ud?function(a,l){return ud(a,"toString",{configurable:!0,enumerable:!1,value:f_(l),writable:!0})}:ir;function rU(a){return Pd(Ha(a))}function Lr(a,l,d){var g=-1,_=a.length;l<0&&(l=-l>_?0:_+l),d=d>_?_:d,d<0&&(d+=_),_=l>d?0:d-l>>>0,l>>>=0;for(var E=U(_);++g<_;)E[g]=a[g+l];return E}function iU(a,l){var d;return As(a,function(g,_,E){return d=l(g,_,E),!d}),!!d}function wd(a,l,d){var g=0,_=a==null?g:a.length;if(typeof l=="number"&&l===l&&_<=En){for(;g<_;){var E=g+_>>>1,b=a[E];b!==null&&!vr(b)&&(d?b<=l:b<l)?g=E+1:_=E}return _}return $m(a,l,ir,d)}function $m(a,l,d,g){var _=0,E=a==null?0:a.length;if(E===0)return 0;l=d(l);for(var b=l!==l,S=l===null,x=vr(l),z=l===n;_<E;){var K=dd((_+E)/2),X=d(a[K]),ae=X!==n,ye=X===null,Ce=X===X,He=vr(X);if(b)var Pe=g||Ce;else z?Pe=Ce&&(g||ae):S?Pe=Ce&&ae&&(g||!ye):x?Pe=Ce&&ae&&!ye&&(g||!He):ye||He?Pe=!1:Pe=g?X<=l:X<l;Pe?_=K+1:E=K}return Dn(E,wt)}function k0(a,l){for(var d=-1,g=a.length,_=0,E=[];++d<g;){var b=a[d],S=l?l(b):b;if(!d||!Jr(S,x)){var x=S;E[_++]=b===0?0:b}}return E}function D0(a){return typeof a=="number"?a:vr(a)?ht:+a}function yr(a){if(typeof a=="string")return a;if(Le(a))return Lt(a,yr)+"";if(vr(a))return u0?u0.call(a):"";var l=a+"";return l=="0"&&1/a==-je?"-0":l}function Rs(a,l,d){var g=-1,_=Zh,E=a.length,b=!0,S=[],x=S;if(d)b=!1,_=mm;else if(E>=i){var z=l?null:gU(a);if(z)return td(z);b=!1,_=yl,x=new To}else x=l?[]:S;e:for(;++g<E;){var K=a[g],X=l?l(K):K;if(K=d||K!==0?K:0,b&&X===X){for(var ae=x.length;ae--;)if(x[ae]===X)continue e;l&&x.push(X),S.push(K)}else _(x,X,d)||(x!==S&&x.push(X),S.push(K))}return S}function qm(a,l){return l=Ss(l,a),a=ob(a,l),a==null||delete a[vi(Vr(l))]}function O0(a,l,d,g){return Cl(a,l,d(Ao(a,l)),g)}function Ed(a,l,d,g){for(var _=a.length,E=g?_:-1;(g?E--:++E<_)&&l(a[E],E,a););return d?Lr(a,g?0:E,g?E+1:_):Lr(a,g?E+1:0,g?_:E)}function N0(a,l){var d=a;return d instanceof Je&&(d=d.value()),_m(l,function(g,_){return _.func.apply(_.thisArg,Is([g],_.args))},d)}function Hm(a,l,d){var g=a.length;if(g<2)return g?Rs(a[0]):[];for(var _=-1,E=U(g);++_<g;)for(var b=a[_],S=-1;++S<g;)S!=_&&(E[_]=Al(E[_]||b,a[S],l,d));return Rs(An(E,1),l,d)}function M0(a,l,d){for(var g=-1,_=a.length,E=l.length,b={};++g<_;){var S=g<E?l[g]:n;d(b,a[g],S)}return b}function Wm(a){return Kt(a)?a:[]}function zm(a){return typeof a=="function"?a:ir}function Ss(a,l){return Le(a)?a:e_(a,l)?[a]:ub(dt(a))}var sU=We;function Cs(a,l,d){var g=a.length;return d=d===n?g:d,!l&&d>=g?a:Lr(a,l,d)}var L0=jV||function(a){return bn.clearTimeout(a)};function V0(a,l){if(l)return a.slice();var d=a.length,g=i0?i0(d):new a.constructor(d);return a.copy(g),g}function jm(a){var l=new a.constructor(a.byteLength);return new ad(l).set(new ad(a)),l}function oU(a,l){var d=l?jm(a.buffer):a.buffer;return new a.constructor(d,a.byteOffset,a.byteLength)}function aU(a){var l=new a.constructor(a.source,wT.exec(a));return l.lastIndex=a.lastIndex,l}function cU(a){return Tl?Et(Tl.call(a)):{}}function F0(a,l){var d=l?jm(a.buffer):a.buffer;return new a.constructor(d,a.byteOffset,a.length)}function U0(a,l){if(a!==l){var d=a!==n,g=a===null,_=a===a,E=vr(a),b=l!==n,S=l===null,x=l===l,z=vr(l);if(!S&&!z&&!E&&a>l||E&&b&&x&&!S&&!z||g&&b&&x||!d&&x||!_)return 1;if(!g&&!E&&!z&&a<l||z&&d&&_&&!g&&!E||S&&d&&_||!b&&_||!x)return-1}return 0}function lU(a,l,d){for(var g=-1,_=a.criteria,E=l.criteria,b=_.length,S=d.length;++g<b;){var x=U0(_[g],E[g]);if(x){if(g>=S)return x;var z=d[g];return x*(z=="desc"?-1:1)}}return a.index-l.index}function B0(a,l,d,g){for(var _=-1,E=a.length,b=d.length,S=-1,x=l.length,z=cn(E-b,0),K=U(x+z),X=!g;++S<x;)K[S]=l[S];for(;++_<b;)(X||_<E)&&(K[d[_]]=a[_]);for(;z--;)K[S++]=a[_++];return K}function $0(a,l,d,g){for(var _=-1,E=a.length,b=-1,S=d.length,x=-1,z=l.length,K=cn(E-S,0),X=U(K+z),ae=!g;++_<K;)X[_]=a[_];for(var ye=_;++x<z;)X[ye+x]=l[x];for(;++b<S;)(ae||_<E)&&(X[ye+d[b]]=a[_++]);return X}function tr(a,l){var d=-1,g=a.length;for(l||(l=U(g));++d<g;)l[d]=a[d];return l}function yi(a,l,d,g){var _=!d;d||(d={});for(var E=-1,b=l.length;++E<b;){var S=l[E],x=g?g(d[S],a[S],S,d,a):n;x===n&&(x=a[S]),_?Bi(d,S,x):bl(d,S,x)}return d}function uU(a,l){return yi(a,Zm(a),l)}function hU(a,l){return yi(a,eb(a),l)}function Id(a,l){return function(d,g){var _=Le(d)?mV:OF,E=l?l():{};return _(d,a,Re(g,2),E)}}function Ua(a){return We(function(l,d){var g=-1,_=d.length,E=_>1?d[_-1]:n,b=_>2?d[2]:n;for(E=a.length>3&&typeof E=="function"?(_--,E):n,b&&Gn(d[0],d[1],b)&&(E=_<3?n:E,_=1),l=Et(l);++g<_;){var S=d[g];S&&a(l,S,g,E)}return l})}function q0(a,l){return function(d,g){if(d==null)return d;if(!nr(d))return a(d,g);for(var _=d.length,E=l?_:-1,b=Et(d);(l?E--:++E<_)&&g(b[E],E,b)!==!1;);return d}}function H0(a){return function(l,d,g){for(var _=-1,E=Et(l),b=g(l),S=b.length;S--;){var x=b[a?S:++_];if(d(E[x],x,E)===!1)break}return l}}function dU(a,l,d){var g=l&A,_=Pl(a);function E(){var b=this&&this!==bn&&this instanceof E?_:a;return b.apply(g?d:this,arguments)}return E}function W0(a){return function(l){l=dt(l);var d=Da(l)?Yr(l):n,g=d?d[0]:l.charAt(0),_=d?Cs(d,1).join(""):l.slice(1);return g[a]()+_}}function Ba(a){return function(l){return _m(qb($b(l).replace(nV,"")),a,"")}}function Pl(a){return function(){var l=arguments;switch(l.length){case 0:return new a;case 1:return new a(l[0]);case 2:return new a(l[0],l[1]);case 3:return new a(l[0],l[1],l[2]);case 4:return new a(l[0],l[1],l[2],l[3]);case 5:return new a(l[0],l[1],l[2],l[3],l[4]);case 6:return new a(l[0],l[1],l[2],l[3],l[4],l[5]);case 7:return new a(l[0],l[1],l[2],l[3],l[4],l[5],l[6])}var d=Fa(a.prototype),g=a.apply(d,l);return Ft(g)?g:d}}function fU(a,l,d){var g=Pl(a);function _(){for(var E=arguments.length,b=U(E),S=E,x=$a(_);S--;)b[S]=arguments[S];var z=E<3&&b[0]!==x&&b[E-1]!==x?[]:Ts(b,x);if(E-=z.length,E<d)return Y0(a,l,Td,_.placeholder,n,b,z,n,n,d-E);var K=this&&this!==bn&&this instanceof _?g:a;return mr(K,this,b)}return _}function z0(a){return function(l,d,g){var _=Et(l);if(!nr(l)){var E=Re(d,3);l=dn(l),d=function(S){return E(_[S],S,_)}}var b=a(l,d,g);return b>-1?_[E?l[b]:b]:n}}function j0(a){return qi(function(l){var d=l.length,g=d,_=Nr.prototype.thru;for(a&&l.reverse();g--;){var E=l[g];if(typeof E!="function")throw new Or(o);if(_&&!b&&Sd(E)=="wrapper")var b=new Nr([],!0)}for(g=b?g:d;++g<d;){E=l[g];var S=Sd(E),x=S=="wrapper"?Jm(E):n;x&&t_(x[0])&&x[1]==(F|k|B|M)&&!x[4].length&&x[9]==1?b=b[Sd(x[0])].apply(b,x[3]):b=E.length==1&&t_(E)?b[S]():b.thru(E)}return function(){var z=arguments,K=z[0];if(b&&z.length==1&&Le(K))return b.plant(K).value();for(var X=0,ae=d?l[X].apply(this,z):K;++X<d;)ae=l[X].call(this,ae);return ae}})}function Td(a,l,d,g,_,E,b,S,x,z){var K=l&F,X=l&A,ae=l&N,ye=l&(k|P),Ce=l&J,He=ae?n:Pl(a);function Pe(){for(var Ye=arguments.length,tt=U(Ye),wr=Ye;wr--;)tt[wr]=arguments[wr];if(ye)var Yn=$a(Pe),Er=AV(tt,Yn);if(g&&(tt=B0(tt,g,_,ye)),E&&(tt=$0(tt,E,b,ye)),Ye-=Er,ye&&Ye<z){var Gt=Ts(tt,Yn);return Y0(a,l,Td,Pe.placeholder,d,tt,Gt,S,x,z-Ye)}var Xr=X?d:this,ji=ae?Xr[a]:a;return Ye=tt.length,S?tt=OU(tt,S):Ce&&Ye>1&&tt.reverse(),K&&x<Ye&&(tt.length=x),this&&this!==bn&&this instanceof Pe&&(ji=He||Pl(ji)),ji.apply(Xr,tt)}return Pe}function K0(a,l){return function(d,g){return $F(d,a,l(g),{})}}function bd(a,l){return function(d,g){var _;if(d===n&&g===n)return l;if(d!==n&&(_=d),g!==n){if(_===n)return g;typeof d=="string"||typeof g=="string"?(d=yr(d),g=yr(g)):(d=D0(d),g=D0(g)),_=a(d,g)}return _}}function Km(a){return qi(function(l){return l=Lt(l,_r(Re())),We(function(d){var g=this;return a(l,function(_){return mr(_,g,d)})})})}function Ad(a,l){l=l===n?" ":yr(l);var d=l.length;if(d<2)return d?Bm(l,a):l;var g=Bm(l,hd(a/Oa(l)));return Da(l)?Cs(Yr(g),0,a).join(""):g.slice(0,a)}function pU(a,l,d,g){var _=l&A,E=Pl(a);function b(){for(var S=-1,x=arguments.length,z=-1,K=g.length,X=U(K+x),ae=this&&this!==bn&&this instanceof b?E:a;++z<K;)X[z]=g[z];for(;x--;)X[z++]=arguments[++S];return mr(ae,_?d:this,X)}return b}function G0(a){return function(l,d,g){return g&&typeof g!="number"&&Gn(l,d,g)&&(d=g=n),l=zi(l),d===n?(d=l,l=0):d=zi(d),g=g===n?l<d?1:-1:zi(g),ZF(l,d,g,a)}}function Rd(a){return function(l,d){return typeof l=="string"&&typeof d=="string"||(l=Fr(l),d=Fr(d)),a(l,d)}}function Y0(a,l,d,g,_,E,b,S,x,z){var K=l&k,X=K?b:n,ae=K?n:b,ye=K?E:n,Ce=K?n:E;l|=K?B:V,l&=~(K?V:B),l&D||(l&=~(A|N));var He=[a,l,_,ye,X,Ce,ae,S,x,z],Pe=d.apply(n,He);return t_(a)&&ab(Pe,He),Pe.placeholder=g,cb(Pe,a,l)}function Gm(a){var l=an[a];return function(d,g){if(d=Fr(d),g=g==null?0:Dn(qe(g),292),g&&c0(d)){var _=(dt(d)+"e").split("e"),E=l(_[0]+"e"+(+_[1]+g));return _=(dt(E)+"e").split("e"),+(_[0]+"e"+(+_[1]-g))}return l(d)}}var gU=La&&1/td(new La([,-0]))[1]==je?function(a){return new La(a)}:m_;function Q0(a){return function(l){var d=On(l);return d==O?bm(l):d==Q?DV(l):bV(l,a(l))}}function $i(a,l,d,g,_,E,b,S){var x=l&N;if(!x&&typeof a!="function")throw new Or(o);var z=g?g.length:0;if(z||(l&=~(B|V),g=_=n),b=b===n?b:cn(qe(b),0),S=S===n?S:qe(S),z-=_?_.length:0,l&V){var K=g,X=_;g=_=n}var ae=x?n:Jm(a),ye=[a,l,d,g,_,K,X,E,b,S];if(ae&&xU(ye,ae),a=ye[0],l=ye[1],d=ye[2],g=ye[3],_=ye[4],S=ye[9]=ye[9]===n?x?0:a.length:cn(ye[9]-z,0),!S&&l&(k|P)&&(l&=~(k|P)),!l||l==A)var Ce=dU(a,l,d);else l==k||l==P?Ce=fU(a,l,S):(l==B||l==(A|B))&&!_.length?Ce=pU(a,l,d,g):Ce=Td.apply(n,ye);var He=ae?x0:ab;return cb(He(Ce,ye),a,l)}function J0(a,l,d,g){return a===n||Jr(a,Ma[d])&&!gt.call(g,d)?l:a}function X0(a,l,d,g,_,E){return Ft(a)&&Ft(l)&&(E.set(l,a),vd(a,l,n,X0,E),E.delete(l)),a}function mU(a){return Dl(a)?n:a}function Z0(a,l,d,g,_,E){var b=d&v,S=a.length,x=l.length;if(S!=x&&!(b&&x>S))return!1;var z=E.get(a),K=E.get(l);if(z&&K)return z==l&&K==a;var X=-1,ae=!0,ye=d&I?new To:n;for(E.set(a,l),E.set(l,a);++X<S;){var Ce=a[X],He=l[X];if(g)var Pe=b?g(He,Ce,X,l,a,E):g(Ce,He,X,a,l,E);if(Pe!==n){if(Pe)continue;ae=!1;break}if(ye){if(!ym(l,function(Ye,tt){if(!yl(ye,tt)&&(Ce===Ye||_(Ce,Ye,d,g,E)))return ye.push(tt)})){ae=!1;break}}else if(!(Ce===He||_(Ce,He,d,g,E))){ae=!1;break}}return E.delete(a),E.delete(l),ae}function _U(a,l,d,g,_,E,b){switch(d){case et:if(a.byteLength!=l.byteLength||a.byteOffset!=l.byteOffset)return!1;a=a.buffer,l=l.buffer;case lt:return!(a.byteLength!=l.byteLength||!E(new ad(a),new ad(l)));case de:case se:case $:return Jr(+a,+l);case Ze:return a.name==l.name&&a.message==l.message;case ie:case we:return a==l+"";case O:var S=bm;case Q:var x=g&v;if(S||(S=td),a.size!=l.size&&!x)return!1;var z=b.get(a);if(z)return z==l;g|=I,b.set(a,l);var K=Z0(S(a),S(l),g,_,E,b);return b.delete(a),K;case me:if(Tl)return Tl.call(a)==Tl.call(l)}return!1}function yU(a,l,d,g,_,E){var b=d&v,S=Ym(a),x=S.length,z=Ym(l),K=z.length;if(x!=K&&!b)return!1;for(var X=x;X--;){var ae=S[X];if(!(b?ae in l:gt.call(l,ae)))return!1}var ye=E.get(a),Ce=E.get(l);if(ye&&Ce)return ye==l&&Ce==a;var He=!0;E.set(a,l),E.set(l,a);for(var Pe=b;++X<x;){ae=S[X];var Ye=a[ae],tt=l[ae];if(g)var wr=b?g(tt,Ye,ae,l,a,E):g(Ye,tt,ae,a,l,E);if(!(wr===n?Ye===tt||_(Ye,tt,d,g,E):wr)){He=!1;break}Pe||(Pe=ae=="constructor")}if(He&&!Pe){var Yn=a.constructor,Er=l.constructor;Yn!=Er&&"constructor"in a&&"constructor"in l&&!(typeof Yn=="function"&&Yn instanceof Yn&&typeof Er=="function"&&Er instanceof Er)&&(He=!1)}return E.delete(a),E.delete(l),He}function qi(a){return r_(sb(a,n,pb),a+"")}function Ym(a){return v0(a,dn,Zm)}function Qm(a){return v0(a,rr,eb)}var Jm=fd?function(a){return fd.get(a)}:m_;function Sd(a){for(var l=a.name+"",d=Va[l],g=gt.call(Va,l)?d.length:0;g--;){var _=d[g],E=_.func;if(E==null||E==a)return _.name}return l}function $a(a){var l=gt.call(w,"placeholder")?w:a;return l.placeholder}function Re(){var a=w.iteratee||p_;return a=a===p_?I0:a,arguments.length?a(arguments[0],arguments[1]):a}function Cd(a,l){var d=a.__data__;return RU(l)?d[typeof l=="string"?"string":"hash"]:d.map}function Xm(a){for(var l=dn(a),d=l.length;d--;){var g=l[d],_=a[g];l[d]=[g,_,rb(_)]}return l}function Ro(a,l){var d=PV(a,l);return E0(d)?d:n}function vU(a){var l=gt.call(a,Eo),d=a[Eo];try{a[Eo]=n;var g=!0}catch{}var _=sd.call(a);return g&&(l?a[Eo]=d:delete a[Eo]),_}var Zm=Rm?function(a){return a==null?[]:(a=Et(a),Es(Rm(a),function(l){return o0.call(a,l)}))}:__,eb=Rm?function(a){for(var l=[];a;)Is(l,Zm(a)),a=cd(a);return l}:__,On=Kn;(Sm&&On(new Sm(new ArrayBuffer(1)))!=et||wl&&On(new wl)!=O||Cm&&On(Cm.resolve())!=he||La&&On(new La)!=Q||El&&On(new El)!=Se)&&(On=function(a){var l=Kn(a),d=l==Y?a.constructor:n,g=d?So(d):"";if(g)switch(g){case tF:return et;case nF:return O;case rF:return he;case iF:return Q;case sF:return Se}return l});function wU(a,l,d){for(var g=-1,_=d.length;++g<_;){var E=d[g],b=E.size;switch(E.type){case"drop":a+=b;break;case"dropRight":l-=b;break;case"take":l=Dn(l,a+b);break;case"takeRight":a=cn(a,l-b);break}}return{start:a,end:l}}function EU(a){var l=a.match(SL);return l?l[1].split(CL):[]}function tb(a,l,d){l=Ss(l,a);for(var g=-1,_=l.length,E=!1;++g<_;){var b=vi(l[g]);if(!(E=a!=null&&d(a,b)))break;a=a[b]}return E||++g!=_?E:(_=a==null?0:a.length,!!_&&Md(_)&&Hi(b,_)&&(Le(a)||Co(a)))}function IU(a){var l=a.length,d=new a.constructor(l);return l&&typeof a[0]=="string"&&gt.call(a,"index")&&(d.index=a.index,d.input=a.input),d}function nb(a){return typeof a.constructor=="function"&&!xl(a)?Fa(cd(a)):{}}function TU(a,l,d){var g=a.constructor;switch(l){case lt:return jm(a);case de:case se:return new g(+a);case et:return oU(a,d);case Mt:case jn:case mi:case Sa:case Vi:case Ca:case Tn:case er:case Pa:return F0(a,d);case O:return new g;case $:case we:return new g(a);case ie:return aU(a);case Q:return new g;case me:return cU(a)}}function bU(a,l){var d=l.length;if(!d)return a;var g=d-1;return l[g]=(d>1?"& ":"")+l[g],l=l.join(d>2?", ":" "),a.replace(RL,`{
/* [wrapped with `+l+`] */
`)}function AU(a){return Le(a)||Co(a)||!!(a0&&a&&a[a0])}function Hi(a,l){var d=typeof a;return l=l==null?$e:l,!!l&&(d=="number"||d!="symbol"&&VL.test(a))&&a>-1&&a%1==0&&a<l}function Gn(a,l,d){if(!Ft(d))return!1;var g=typeof l;return(g=="number"?nr(d)&&Hi(l,d.length):g=="string"&&l in d)?Jr(d[l],a):!1}function e_(a,l){if(Le(a))return!1;var d=typeof a;return d=="number"||d=="symbol"||d=="boolean"||a==null||vr(a)?!0:IL.test(a)||!EL.test(a)||l!=null&&a in Et(l)}function RU(a){var l=typeof a;return l=="string"||l=="number"||l=="symbol"||l=="boolean"?a!=="__proto__":a===null}function t_(a){var l=Sd(a),d=w[l];if(typeof d!="function"||!(l in Je.prototype))return!1;if(a===d)return!0;var g=Jm(d);return!!g&&a===g[0]}function SU(a){return!!r0&&r0 in a}var CU=rd?Wi:y_;function xl(a){var l=a&&a.constructor,d=typeof l=="function"&&l.prototype||Ma;return a===d}function rb(a){return a===a&&!Ft(a)}function ib(a,l){return function(d){return d==null?!1:d[a]===l&&(l!==n||a in Et(d))}}function PU(a){var l=Od(a,function(g){return d.size===h&&d.clear(),g}),d=l.cache;return l}function xU(a,l){var d=a[1],g=l[1],_=d|g,E=_<(A|N|F),b=g==F&&d==k||g==F&&d==M&&a[7].length<=l[8]||g==(F|M)&&l[7].length<=l[8]&&d==k;if(!(E||b))return a;g&A&&(a[2]=l[2],_|=d&A?0:D);var S=l[3];if(S){var x=a[3];a[3]=x?B0(x,S,l[4]):S,a[4]=x?Ts(a[3],f):l[4]}return S=l[5],S&&(x=a[5],a[5]=x?$0(x,S,l[6]):S,a[6]=x?Ts(a[5],f):l[6]),S=l[7],S&&(a[7]=S),g&F&&(a[8]=a[8]==null?l[8]:Dn(a[8],l[8])),a[9]==null&&(a[9]=l[9]),a[0]=l[0],a[1]=_,a}function kU(a){var l=[];if(a!=null)for(var d in Et(a))l.push(d);return l}function DU(a){return sd.call(a)}function sb(a,l,d){return l=cn(l===n?a.length-1:l,0),function(){for(var g=arguments,_=-1,E=cn(g.length-l,0),b=U(E);++_<E;)b[_]=g[l+_];_=-1;for(var S=U(l+1);++_<l;)S[_]=g[_];return S[l]=d(b),mr(a,this,S)}}function ob(a,l){return l.length<2?a:Ao(a,Lr(l,0,-1))}function OU(a,l){for(var d=a.length,g=Dn(l.length,d),_=tr(a);g--;){var E=l[g];a[g]=Hi(E,d)?_[E]:n}return a}function n_(a,l){if(!(l==="constructor"&&typeof a[l]=="function")&&l!="__proto__")return a[l]}var ab=lb(x0),kl=GV||function(a,l){return bn.setTimeout(a,l)},r_=lb(nU);function cb(a,l,d){var g=l+"";return r_(a,bU(g,NU(EU(g),d)))}function lb(a){var l=0,d=0;return function(){var g=XV(),_=Be-(g-d);if(d=g,_>0){if(++l>=te)return arguments[0]}else l=0;return a.apply(n,arguments)}}function Pd(a,l){var d=-1,g=a.length,_=g-1;for(l=l===n?g:l;++d<l;){var E=Um(d,_),b=a[E];a[E]=a[d],a[d]=b}return a.length=l,a}var ub=PU(function(a){var l=[];return a.charCodeAt(0)===46&&l.push(""),a.replace(TL,function(d,g,_,E){l.push(_?E.replace(kL,"$1"):g||d)}),l});function vi(a){if(typeof a=="string"||vr(a))return a;var l=a+"";return l=="0"&&1/a==-je?"-0":l}function So(a){if(a!=null){try{return id.call(a)}catch{}try{return a+""}catch{}}return""}function NU(a,l){return Dr(In,function(d){var g="_."+d[0];l&d[1]&&!Zh(a,g)&&a.push(g)}),a.sort()}function hb(a){if(a instanceof Je)return a.clone();var l=new Nr(a.__wrapped__,a.__chain__);return l.__actions__=tr(a.__actions__),l.__index__=a.__index__,l.__values__=a.__values__,l}function MU(a,l,d){(d?Gn(a,l,d):l===n)?l=1:l=cn(qe(l),0);var g=a==null?0:a.length;if(!g||l<1)return[];for(var _=0,E=0,b=U(hd(g/l));_<g;)b[E++]=Lr(a,_,_+=l);return b}function LU(a){for(var l=-1,d=a==null?0:a.length,g=0,_=[];++l<d;){var E=a[l];E&&(_[g++]=E)}return _}function VU(){var a=arguments.length;if(!a)return[];for(var l=U(a-1),d=arguments[0],g=a;g--;)l[g-1]=arguments[g];return Is(Le(d)?tr(d):[d],An(l,1))}var FU=We(function(a,l){return Kt(a)?Al(a,An(l,1,Kt,!0)):[]}),UU=We(function(a,l){var d=Vr(l);return Kt(d)&&(d=n),Kt(a)?Al(a,An(l,1,Kt,!0),Re(d,2)):[]}),BU=We(function(a,l){var d=Vr(l);return Kt(d)&&(d=n),Kt(a)?Al(a,An(l,1,Kt,!0),n,d):[]});function $U(a,l,d){var g=a==null?0:a.length;return g?(l=d||l===n?1:qe(l),Lr(a,l<0?0:l,g)):[]}function qU(a,l,d){var g=a==null?0:a.length;return g?(l=d||l===n?1:qe(l),l=g-l,Lr(a,0,l<0?0:l)):[]}function HU(a,l){return a&&a.length?Ed(a,Re(l,3),!0,!0):[]}function WU(a,l){return a&&a.length?Ed(a,Re(l,3),!0):[]}function zU(a,l,d,g){var _=a==null?0:a.length;return _?(d&&typeof d!="number"&&Gn(a,l,d)&&(d=0,g=_),VF(a,l,d,g)):[]}function db(a,l,d){var g=a==null?0:a.length;if(!g)return-1;var _=d==null?0:qe(d);return _<0&&(_=cn(g+_,0)),ed(a,Re(l,3),_)}function fb(a,l,d){var g=a==null?0:a.length;if(!g)return-1;var _=g-1;return d!==n&&(_=qe(d),_=d<0?cn(g+_,0):Dn(_,g-1)),ed(a,Re(l,3),_,!0)}function pb(a){var l=a==null?0:a.length;return l?An(a,1):[]}function jU(a){var l=a==null?0:a.length;return l?An(a,je):[]}function KU(a,l){var d=a==null?0:a.length;return d?(l=l===n?1:qe(l),An(a,l)):[]}function GU(a){for(var l=-1,d=a==null?0:a.length,g={};++l<d;){var _=a[l];g[_[0]]=_[1]}return g}function gb(a){return a&&a.length?a[0]:n}function YU(a,l,d){var g=a==null?0:a.length;if(!g)return-1;var _=d==null?0:qe(d);return _<0&&(_=cn(g+_,0)),ka(a,l,_)}function QU(a){var l=a==null?0:a.length;return l?Lr(a,0,-1):[]}var JU=We(function(a){var l=Lt(a,Wm);return l.length&&l[0]===a[0]?Nm(l):[]}),XU=We(function(a){var l=Vr(a),d=Lt(a,Wm);return l===Vr(d)?l=n:d.pop(),d.length&&d[0]===a[0]?Nm(d,Re(l,2)):[]}),ZU=We(function(a){var l=Vr(a),d=Lt(a,Wm);return l=typeof l=="function"?l:n,l&&d.pop(),d.length&&d[0]===a[0]?Nm(d,n,l):[]});function e2(a,l){return a==null?"":QV.call(a,l)}function Vr(a){var l=a==null?0:a.length;return l?a[l-1]:n}function t2(a,l,d){var g=a==null?0:a.length;if(!g)return-1;var _=g;return d!==n&&(_=qe(d),_=_<0?cn(g+_,0):Dn(_,g-1)),l===l?NV(a,l,_):ed(a,YT,_,!0)}function n2(a,l){return a&&a.length?R0(a,qe(l)):n}var r2=We(mb);function mb(a,l){return a&&a.length&&l&&l.length?Fm(a,l):a}function i2(a,l,d){return a&&a.length&&l&&l.length?Fm(a,l,Re(d,2)):a}function s2(a,l,d){return a&&a.length&&l&&l.length?Fm(a,l,n,d):a}var o2=qi(function(a,l){var d=a==null?0:a.length,g=xm(a,l);return P0(a,Lt(l,function(_){return Hi(_,d)?+_:_}).sort(U0)),g});function a2(a,l){var d=[];if(!(a&&a.length))return d;var g=-1,_=[],E=a.length;for(l=Re(l,3);++g<E;){var b=a[g];l(b,g,a)&&(d.push(b),_.push(g))}return P0(a,_),d}function i_(a){return a==null?a:eF.call(a)}function c2(a,l,d){var g=a==null?0:a.length;return g?(d&&typeof d!="number"&&Gn(a,l,d)?(l=0,d=g):(l=l==null?0:qe(l),d=d===n?g:qe(d)),Lr(a,l,d)):[]}function l2(a,l){return wd(a,l)}function u2(a,l,d){return $m(a,l,Re(d,2))}function h2(a,l){var d=a==null?0:a.length;if(d){var g=wd(a,l);if(g<d&&Jr(a[g],l))return g}return-1}function d2(a,l){return wd(a,l,!0)}function f2(a,l,d){return $m(a,l,Re(d,2),!0)}function p2(a,l){var d=a==null?0:a.length;if(d){var g=wd(a,l,!0)-1;if(Jr(a[g],l))return g}return-1}function g2(a){return a&&a.length?k0(a):[]}function m2(a,l){return a&&a.length?k0(a,Re(l,2)):[]}function _2(a){var l=a==null?0:a.length;return l?Lr(a,1,l):[]}function y2(a,l,d){return a&&a.length?(l=d||l===n?1:qe(l),Lr(a,0,l<0?0:l)):[]}function v2(a,l,d){var g=a==null?0:a.length;return g?(l=d||l===n?1:qe(l),l=g-l,Lr(a,l<0?0:l,g)):[]}function w2(a,l){return a&&a.length?Ed(a,Re(l,3),!1,!0):[]}function E2(a,l){return a&&a.length?Ed(a,Re(l,3)):[]}var I2=We(function(a){return Rs(An(a,1,Kt,!0))}),T2=We(function(a){var l=Vr(a);return Kt(l)&&(l=n),Rs(An(a,1,Kt,!0),Re(l,2))}),b2=We(function(a){var l=Vr(a);return l=typeof l=="function"?l:n,Rs(An(a,1,Kt,!0),n,l)});function A2(a){return a&&a.length?Rs(a):[]}function R2(a,l){return a&&a.length?Rs(a,Re(l,2)):[]}function S2(a,l){return l=typeof l=="function"?l:n,a&&a.length?Rs(a,n,l):[]}function s_(a){if(!(a&&a.length))return[];var l=0;return a=Es(a,function(d){if(Kt(d))return l=cn(d.length,l),!0}),Im(l,function(d){return Lt(a,vm(d))})}function _b(a,l){if(!(a&&a.length))return[];var d=s_(a);return l==null?d:Lt(d,function(g){return mr(l,n,g)})}var C2=We(function(a,l){return Kt(a)?Al(a,l):[]}),P2=We(function(a){return Hm(Es(a,Kt))}),x2=We(function(a){var l=Vr(a);return Kt(l)&&(l=n),Hm(Es(a,Kt),Re(l,2))}),k2=We(function(a){var l=Vr(a);return l=typeof l=="function"?l:n,Hm(Es(a,Kt),n,l)}),D2=We(s_);function O2(a,l){return M0(a||[],l||[],bl)}function N2(a,l){return M0(a||[],l||[],Cl)}var M2=We(function(a){var l=a.length,d=l>1?a[l-1]:n;return d=typeof d=="function"?(a.pop(),d):n,_b(a,d)});function yb(a){var l=w(a);return l.__chain__=!0,l}function L2(a,l){return l(a),a}function xd(a,l){return l(a)}var V2=qi(function(a){var l=a.length,d=l?a[0]:0,g=this.__wrapped__,_=function(E){return xm(E,a)};return l>1||this.__actions__.length||!(g instanceof Je)||!Hi(d)?this.thru(_):(g=g.slice(d,+d+(l?1:0)),g.__actions__.push({func:xd,args:[_],thisArg:n}),new Nr(g,this.__chain__).thru(function(E){return l&&!E.length&&E.push(n),E}))});function F2(){return yb(this)}function U2(){return new Nr(this.value(),this.__chain__)}function B2(){this.__values__===n&&(this.__values__=Db(this.value()));var a=this.__index__>=this.__values__.length,l=a?n:this.__values__[this.__index__++];return{done:a,value:l}}function $2(){return this}function q2(a){for(var l,d=this;d instanceof gd;){var g=hb(d);g.__index__=0,g.__values__=n,l?_.__wrapped__=g:l=g;var _=g;d=d.__wrapped__}return _.__wrapped__=a,l}function H2(){var a=this.__wrapped__;if(a instanceof Je){var l=a;return this.__actions__.length&&(l=new Je(this)),l=l.reverse(),l.__actions__.push({func:xd,args:[i_],thisArg:n}),new Nr(l,this.__chain__)}return this.thru(i_)}function W2(){return N0(this.__wrapped__,this.__actions__)}var z2=Id(function(a,l,d){gt.call(a,d)?++a[d]:Bi(a,d,1)});function j2(a,l,d){var g=Le(a)?KT:LF;return d&&Gn(a,l,d)&&(l=n),g(a,Re(l,3))}function K2(a,l){var d=Le(a)?Es:_0;return d(a,Re(l,3))}var G2=z0(db),Y2=z0(fb);function Q2(a,l){return An(kd(a,l),1)}function J2(a,l){return An(kd(a,l),je)}function X2(a,l,d){return d=d===n?1:qe(d),An(kd(a,l),d)}function vb(a,l){var d=Le(a)?Dr:As;return d(a,Re(l,3))}function wb(a,l){var d=Le(a)?_V:m0;return d(a,Re(l,3))}var Z2=Id(function(a,l,d){gt.call(a,d)?a[d].push(l):Bi(a,d,[l])});function eB(a,l,d,g){a=nr(a)?a:Ha(a),d=d&&!g?qe(d):0;var _=a.length;return d<0&&(d=cn(_+d,0)),Ld(a)?d<=_&&a.indexOf(l,d)>-1:!!_&&ka(a,l,d)>-1}var tB=We(function(a,l,d){var g=-1,_=typeof l=="function",E=nr(a)?U(a.length):[];return As(a,function(b){E[++g]=_?mr(l,b,d):Rl(b,l,d)}),E}),nB=Id(function(a,l,d){Bi(a,d,l)});function kd(a,l){var d=Le(a)?Lt:T0;return d(a,Re(l,3))}function rB(a,l,d,g){return a==null?[]:(Le(l)||(l=l==null?[]:[l]),d=g?n:d,Le(d)||(d=d==null?[]:[d]),S0(a,l,d))}var iB=Id(function(a,l,d){a[d?0:1].push(l)},function(){return[[],[]]});function sB(a,l,d){var g=Le(a)?_m:JT,_=arguments.length<3;return g(a,Re(l,4),d,_,As)}function oB(a,l,d){var g=Le(a)?yV:JT,_=arguments.length<3;return g(a,Re(l,4),d,_,m0)}function aB(a,l){var d=Le(a)?Es:_0;return d(a,Nd(Re(l,3)))}function cB(a){var l=Le(a)?d0:eU;return l(a)}function lB(a,l,d){(d?Gn(a,l,d):l===n)?l=1:l=qe(l);var g=Le(a)?kF:tU;return g(a,l)}function uB(a){var l=Le(a)?DF:rU;return l(a)}function hB(a){if(a==null)return 0;if(nr(a))return Ld(a)?Oa(a):a.length;var l=On(a);return l==O||l==Q?a.size:Lm(a).length}function dB(a,l,d){var g=Le(a)?ym:iU;return d&&Gn(a,l,d)&&(l=n),g(a,Re(l,3))}var fB=We(function(a,l){if(a==null)return[];var d=l.length;return d>1&&Gn(a,l[0],l[1])?l=[]:d>2&&Gn(l[0],l[1],l[2])&&(l=[l[0]]),S0(a,An(l,1),[])}),Dd=KV||function(){return bn.Date.now()};function pB(a,l){if(typeof l!="function")throw new Or(o);return a=qe(a),function(){if(--a<1)return l.apply(this,arguments)}}function Eb(a,l,d){return l=d?n:l,l=a&&l==null?a.length:l,$i(a,F,n,n,n,n,l)}function Ib(a,l){var d;if(typeof l!="function")throw new Or(o);return a=qe(a),function(){return--a>0&&(d=l.apply(this,arguments)),a<=1&&(l=n),d}}var o_=We(function(a,l,d){var g=A;if(d.length){var _=Ts(d,$a(o_));g|=B}return $i(a,g,l,d,_)}),Tb=We(function(a,l,d){var g=A|N;if(d.length){var _=Ts(d,$a(Tb));g|=B}return $i(l,g,a,d,_)});function bb(a,l,d){l=d?n:l;var g=$i(a,k,n,n,n,n,n,l);return g.placeholder=bb.placeholder,g}function Ab(a,l,d){l=d?n:l;var g=$i(a,P,n,n,n,n,n,l);return g.placeholder=Ab.placeholder,g}function Rb(a,l,d){var g,_,E,b,S,x,z=0,K=!1,X=!1,ae=!0;if(typeof a!="function")throw new Or(o);l=Fr(l)||0,Ft(d)&&(K=!!d.leading,X="maxWait"in d,E=X?cn(Fr(d.maxWait)||0,l):E,ae="trailing"in d?!!d.trailing:ae);function ye(Gt){var Xr=g,ji=_;return g=_=n,z=Gt,b=a.apply(ji,Xr),b}function Ce(Gt){return z=Gt,S=kl(Ye,l),K?ye(Gt):b}function He(Gt){var Xr=Gt-x,ji=Gt-z,zb=l-Xr;return X?Dn(zb,E-ji):zb}function Pe(Gt){var Xr=Gt-x,ji=Gt-z;return x===n||Xr>=l||Xr<0||X&&ji>=E}function Ye(){var Gt=Dd();if(Pe(Gt))return tt(Gt);S=kl(Ye,He(Gt))}function tt(Gt){return S=n,ae&&g?ye(Gt):(g=_=n,b)}function wr(){S!==n&&L0(S),z=0,g=x=_=S=n}function Yn(){return S===n?b:tt(Dd())}function Er(){var Gt=Dd(),Xr=Pe(Gt);if(g=arguments,_=this,x=Gt,Xr){if(S===n)return Ce(x);if(X)return L0(S),S=kl(Ye,l),ye(x)}return S===n&&(S=kl(Ye,l)),b}return Er.cancel=wr,Er.flush=Yn,Er}var gB=We(function(a,l){return g0(a,1,l)}),mB=We(function(a,l,d){return g0(a,Fr(l)||0,d)});function _B(a){return $i(a,J)}function Od(a,l){if(typeof a!="function"||l!=null&&typeof l!="function")throw new Or(o);var d=function(){var g=arguments,_=l?l.apply(this,g):g[0],E=d.cache;if(E.has(_))return E.get(_);var b=a.apply(this,g);return d.cache=E.set(_,b)||E,b};return d.cache=new(Od.Cache||Ui),d}Od.Cache=Ui;function Nd(a){if(typeof a!="function")throw new Or(o);return function(){var l=arguments;switch(l.length){case 0:return!a.call(this);case 1:return!a.call(this,l[0]);case 2:return!a.call(this,l[0],l[1]);case 3:return!a.call(this,l[0],l[1],l[2])}return!a.apply(this,l)}}function yB(a){return Ib(2,a)}var vB=sU(function(a,l){l=l.length==1&&Le(l[0])?Lt(l[0],_r(Re())):Lt(An(l,1),_r(Re()));var d=l.length;return We(function(g){for(var _=-1,E=Dn(g.length,d);++_<E;)g[_]=l[_].call(this,g[_]);return mr(a,this,g)})}),a_=We(function(a,l){var d=Ts(l,$a(a_));return $i(a,B,n,l,d)}),Sb=We(function(a,l){var d=Ts(l,$a(Sb));return $i(a,V,n,l,d)}),wB=qi(function(a,l){return $i(a,M,n,n,n,l)});function EB(a,l){if(typeof a!="function")throw new Or(o);return l=l===n?l:qe(l),We(a,l)}function IB(a,l){if(typeof a!="function")throw new Or(o);return l=l==null?0:cn(qe(l),0),We(function(d){var g=d[l],_=Cs(d,0,l);return g&&Is(_,g),mr(a,this,_)})}function TB(a,l,d){var g=!0,_=!0;if(typeof a!="function")throw new Or(o);return Ft(d)&&(g="leading"in d?!!d.leading:g,_="trailing"in d?!!d.trailing:_),Rb(a,l,{leading:g,maxWait:l,trailing:_})}function bB(a){return Eb(a,1)}function AB(a,l){return a_(zm(l),a)}function RB(){if(!arguments.length)return[];var a=arguments[0];return Le(a)?a:[a]}function SB(a){return Mr(a,y)}function CB(a,l){return l=typeof l=="function"?l:n,Mr(a,y,l)}function PB(a){return Mr(a,p|y)}function xB(a,l){return l=typeof l=="function"?l:n,Mr(a,p|y,l)}function kB(a,l){return l==null||p0(a,l,dn(l))}function Jr(a,l){return a===l||a!==a&&l!==l}var DB=Rd(Om),OB=Rd(function(a,l){return a>=l}),Co=w0(function(){return arguments}())?w0:function(a){return qt(a)&&gt.call(a,"callee")&&!o0.call(a,"callee")},Le=U.isArray,NB=$T?_r($T):qF;function nr(a){return a!=null&&Md(a.length)&&!Wi(a)}function Kt(a){return qt(a)&&nr(a)}function MB(a){return a===!0||a===!1||qt(a)&&Kn(a)==de}var Ps=YV||y_,LB=qT?_r(qT):HF;function VB(a){return qt(a)&&a.nodeType===1&&!Dl(a)}function FB(a){if(a==null)return!0;if(nr(a)&&(Le(a)||typeof a=="string"||typeof a.splice=="function"||Ps(a)||qa(a)||Co(a)))return!a.length;var l=On(a);if(l==O||l==Q)return!a.size;if(xl(a))return!Lm(a).length;for(var d in a)if(gt.call(a,d))return!1;return!0}function UB(a,l){return Sl(a,l)}function BB(a,l,d){d=typeof d=="function"?d:n;var g=d?d(a,l):n;return g===n?Sl(a,l,n,d):!!g}function c_(a){if(!qt(a))return!1;var l=Kn(a);return l==Ze||l==Ee||typeof a.message=="string"&&typeof a.name=="string"&&!Dl(a)}function $B(a){return typeof a=="number"&&c0(a)}function Wi(a){if(!Ft(a))return!1;var l=Kn(a);return l==T||l==R||l==W||l==ne}function Cb(a){return typeof a=="number"&&a==qe(a)}function Md(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=$e}function Ft(a){var l=typeof a;return a!=null&&(l=="object"||l=="function")}function qt(a){return a!=null&&typeof a=="object"}var Pb=HT?_r(HT):zF;function qB(a,l){return a===l||Mm(a,l,Xm(l))}function HB(a,l,d){return d=typeof d=="function"?d:n,Mm(a,l,Xm(l),d)}function WB(a){return xb(a)&&a!=+a}function zB(a){if(CU(a))throw new Me(s);return E0(a)}function jB(a){return a===null}function KB(a){return a==null}function xb(a){return typeof a=="number"||qt(a)&&Kn(a)==$}function Dl(a){if(!qt(a)||Kn(a)!=Y)return!1;var l=cd(a);if(l===null)return!0;var d=gt.call(l,"constructor")&&l.constructor;return typeof d=="function"&&d instanceof d&&id.call(d)==HV}var l_=WT?_r(WT):jF;function GB(a){return Cb(a)&&a>=-$e&&a<=$e}var kb=zT?_r(zT):KF;function Ld(a){return typeof a=="string"||!Le(a)&&qt(a)&&Kn(a)==we}function vr(a){return typeof a=="symbol"||qt(a)&&Kn(a)==me}var qa=jT?_r(jT):GF;function YB(a){return a===n}function QB(a){return qt(a)&&On(a)==Se}function JB(a){return qt(a)&&Kn(a)==Ke}var XB=Rd(Vm),ZB=Rd(function(a,l){return a<=l});function Db(a){if(!a)return[];if(nr(a))return Ld(a)?Yr(a):tr(a);if(vl&&a[vl])return kV(a[vl]());var l=On(a),d=l==O?bm:l==Q?td:Ha;return d(a)}function zi(a){if(!a)return a===0?a:0;if(a=Fr(a),a===je||a===-je){var l=a<0?-1:1;return l*zn}return a===a?a:0}function qe(a){var l=zi(a),d=l%1;return l===l?d?l-d:l:0}function Ob(a){return a?bo(qe(a),0,Qe):0}function Fr(a){if(typeof a=="number")return a;if(vr(a))return ht;if(Ft(a)){var l=typeof a.valueOf=="function"?a.valueOf():a;a=Ft(l)?l+"":l}if(typeof a!="string")return a===0?a:+a;a=XT(a);var d=NL.test(a);return d||LL.test(a)?pV(a.slice(2),d?2:8):OL.test(a)?ht:+a}function Nb(a){return yi(a,rr(a))}function e$(a){return a?bo(qe(a),-$e,$e):a===0?a:0}function dt(a){return a==null?"":yr(a)}var t$=Ua(function(a,l){if(xl(l)||nr(l)){yi(l,dn(l),a);return}for(var d in l)gt.call(l,d)&&bl(a,d,l[d])}),Mb=Ua(function(a,l){yi(l,rr(l),a)}),Vd=Ua(function(a,l,d,g){yi(l,rr(l),a,g)}),n$=Ua(function(a,l,d,g){yi(l,dn(l),a,g)}),r$=qi(xm);function i$(a,l){var d=Fa(a);return l==null?d:f0(d,l)}var s$=We(function(a,l){a=Et(a);var d=-1,g=l.length,_=g>2?l[2]:n;for(_&&Gn(l[0],l[1],_)&&(g=1);++d<g;)for(var E=l[d],b=rr(E),S=-1,x=b.length;++S<x;){var z=b[S],K=a[z];(K===n||Jr(K,Ma[z])&&!gt.call(a,z))&&(a[z]=E[z])}return a}),o$=We(function(a){return a.push(n,X0),mr(Lb,n,a)});function a$(a,l){return GT(a,Re(l,3),_i)}function c$(a,l){return GT(a,Re(l,3),Dm)}function l$(a,l){return a==null?a:km(a,Re(l,3),rr)}function u$(a,l){return a==null?a:y0(a,Re(l,3),rr)}function h$(a,l){return a&&_i(a,Re(l,3))}function d$(a,l){return a&&Dm(a,Re(l,3))}function f$(a){return a==null?[]:yd(a,dn(a))}function p$(a){return a==null?[]:yd(a,rr(a))}function u_(a,l,d){var g=a==null?n:Ao(a,l);return g===n?d:g}function g$(a,l){return a!=null&&tb(a,l,FF)}function h_(a,l){return a!=null&&tb(a,l,UF)}var m$=K0(function(a,l,d){l!=null&&typeof l.toString!="function"&&(l=sd.call(l)),a[l]=d},f_(ir)),_$=K0(function(a,l,d){l!=null&&typeof l.toString!="function"&&(l=sd.call(l)),gt.call(a,l)?a[l].push(d):a[l]=[d]},Re),y$=We(Rl);function dn(a){return nr(a)?h0(a):Lm(a)}function rr(a){return nr(a)?h0(a,!0):YF(a)}function v$(a,l){var d={};return l=Re(l,3),_i(a,function(g,_,E){Bi(d,l(g,_,E),g)}),d}function w$(a,l){var d={};return l=Re(l,3),_i(a,function(g,_,E){Bi(d,_,l(g,_,E))}),d}var E$=Ua(function(a,l,d){vd(a,l,d)}),Lb=Ua(function(a,l,d,g){vd(a,l,d,g)}),I$=qi(function(a,l){var d={};if(a==null)return d;var g=!1;l=Lt(l,function(E){return E=Ss(E,a),g||(g=E.length>1),E}),yi(a,Qm(a),d),g&&(d=Mr(d,p|m|y,mU));for(var _=l.length;_--;)qm(d,l[_]);return d});function T$(a,l){return Vb(a,Nd(Re(l)))}var b$=qi(function(a,l){return a==null?{}:JF(a,l)});function Vb(a,l){if(a==null)return{};var d=Lt(Qm(a),function(g){return[g]});return l=Re(l),C0(a,d,function(g,_){return l(g,_[0])})}function A$(a,l,d){l=Ss(l,a);var g=-1,_=l.length;for(_||(_=1,a=n);++g<_;){var E=a==null?n:a[vi(l[g])];E===n&&(g=_,E=d),a=Wi(E)?E.call(a):E}return a}function R$(a,l,d){return a==null?a:Cl(a,l,d)}function S$(a,l,d,g){return g=typeof g=="function"?g:n,a==null?a:Cl(a,l,d,g)}var Fb=Q0(dn),Ub=Q0(rr);function C$(a,l,d){var g=Le(a),_=g||Ps(a)||qa(a);if(l=Re(l,4),d==null){var E=a&&a.constructor;_?d=g?new E:[]:Ft(a)?d=Wi(E)?Fa(cd(a)):{}:d={}}return(_?Dr:_i)(a,function(b,S,x){return l(d,b,S,x)}),d}function P$(a,l){return a==null?!0:qm(a,l)}function x$(a,l,d){return a==null?a:O0(a,l,zm(d))}function k$(a,l,d,g){return g=typeof g=="function"?g:n,a==null?a:O0(a,l,zm(d),g)}function Ha(a){return a==null?[]:Tm(a,dn(a))}function D$(a){return a==null?[]:Tm(a,rr(a))}function O$(a,l,d){return d===n&&(d=l,l=n),d!==n&&(d=Fr(d),d=d===d?d:0),l!==n&&(l=Fr(l),l=l===l?l:0),bo(Fr(a),l,d)}function N$(a,l,d){return l=zi(l),d===n?(d=l,l=0):d=zi(d),a=Fr(a),BF(a,l,d)}function M$(a,l,d){if(d&&typeof d!="boolean"&&Gn(a,l,d)&&(l=d=n),d===n&&(typeof l=="boolean"?(d=l,l=n):typeof a=="boolean"&&(d=a,a=n)),a===n&&l===n?(a=0,l=1):(a=zi(a),l===n?(l=a,a=0):l=zi(l)),a>l){var g=a;a=l,l=g}if(d||a%1||l%1){var _=l0();return Dn(a+_*(l-a+fV("1e-"+((_+"").length-1))),l)}return Um(a,l)}var L$=Ba(function(a,l,d){return l=l.toLowerCase(),a+(d?Bb(l):l)});function Bb(a){return d_(dt(a).toLowerCase())}function $b(a){return a=dt(a),a&&a.replace(FL,RV).replace(rV,"")}function V$(a,l,d){a=dt(a),l=yr(l);var g=a.length;d=d===n?g:bo(qe(d),0,g);var _=d;return d-=l.length,d>=0&&a.slice(d,_)==l}function F$(a){return a=dt(a),a&&yL.test(a)?a.replace(yT,SV):a}function U$(a){return a=dt(a),a&&bL.test(a)?a.replace(am,"\\$&"):a}var B$=Ba(function(a,l,d){return a+(d?"-":"")+l.toLowerCase()}),$$=Ba(function(a,l,d){return a+(d?" ":"")+l.toLowerCase()}),q$=W0("toLowerCase");function H$(a,l,d){a=dt(a),l=qe(l);var g=l?Oa(a):0;if(!l||g>=l)return a;var _=(l-g)/2;return Ad(dd(_),d)+a+Ad(hd(_),d)}function W$(a,l,d){a=dt(a),l=qe(l);var g=l?Oa(a):0;return l&&g<l?a+Ad(l-g,d):a}function z$(a,l,d){a=dt(a),l=qe(l);var g=l?Oa(a):0;return l&&g<l?Ad(l-g,d)+a:a}function j$(a,l,d){return d||l==null?l=0:l&&(l=+l),ZV(dt(a).replace(cm,""),l||0)}function K$(a,l,d){return(d?Gn(a,l,d):l===n)?l=1:l=qe(l),Bm(dt(a),l)}function G$(){var a=arguments,l=dt(a[0]);return a.length<3?l:l.replace(a[1],a[2])}var Y$=Ba(function(a,l,d){return a+(d?"_":"")+l.toLowerCase()});function Q$(a,l,d){return d&&typeof d!="number"&&Gn(a,l,d)&&(l=d=n),d=d===n?Qe:d>>>0,d?(a=dt(a),a&&(typeof l=="string"||l!=null&&!l_(l))&&(l=yr(l),!l&&Da(a))?Cs(Yr(a),0,d):a.split(l,d)):[]}var J$=Ba(function(a,l,d){return a+(d?" ":"")+d_(l)});function X$(a,l,d){return a=dt(a),d=d==null?0:bo(qe(d),0,a.length),l=yr(l),a.slice(d,d+l.length)==l}function Z$(a,l,d){var g=w.templateSettings;d&&Gn(a,l,d)&&(l=n),a=dt(a),l=Vd({},l,g,J0);var _=Vd({},l.imports,g.imports,J0),E=dn(_),b=Tm(_,E),S,x,z=0,K=l.interpolate||Qh,X="__p += '",ae=Am((l.escape||Qh).source+"|"+K.source+"|"+(K===vT?DL:Qh).source+"|"+(l.evaluate||Qh).source+"|$","g"),ye="//# sourceURL="+(gt.call(l,"sourceURL")?(l.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++cV+"]")+`
`;a.replace(ae,function(Pe,Ye,tt,wr,Yn,Er){return tt||(tt=wr),X+=a.slice(z,Er).replace(UL,CV),Ye&&(S=!0,X+=`' +
__e(`+Ye+`) +
'`),Yn&&(x=!0,X+=`';
`+Yn+`;
__p += '`),tt&&(X+=`' +
((__t = (`+tt+`)) == null ? '' : __t) +
'`),z=Er+Pe.length,Pe}),X+=`';
`;var Ce=gt.call(l,"variable")&&l.variable;if(!Ce)X=`with (obj) {
`+X+`
}
`;else if(xL.test(Ce))throw new Me(c);X=(x?X.replace(pL,""):X).replace(gL,"$1").replace(mL,"$1;"),X="function("+(Ce||"obj")+`) {
`+(Ce?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(S?", __e = _.escape":"")+(x?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+X+`return __p
}`;var He=Hb(function(){return ut(E,ye+"return "+X).apply(n,b)});if(He.source=X,c_(He))throw He;return He}function eq(a){return dt(a).toLowerCase()}function tq(a){return dt(a).toUpperCase()}function nq(a,l,d){if(a=dt(a),a&&(d||l===n))return XT(a);if(!a||!(l=yr(l)))return a;var g=Yr(a),_=Yr(l),E=ZT(g,_),b=e0(g,_)+1;return Cs(g,E,b).join("")}function rq(a,l,d){if(a=dt(a),a&&(d||l===n))return a.slice(0,n0(a)+1);if(!a||!(l=yr(l)))return a;var g=Yr(a),_=e0(g,Yr(l))+1;return Cs(g,0,_).join("")}function iq(a,l,d){if(a=dt(a),a&&(d||l===n))return a.replace(cm,"");if(!a||!(l=yr(l)))return a;var g=Yr(a),_=ZT(g,Yr(l));return Cs(g,_).join("")}function sq(a,l){var d=ee,g=ge;if(Ft(l)){var _="separator"in l?l.separator:_;d="length"in l?qe(l.length):d,g="omission"in l?yr(l.omission):g}a=dt(a);var E=a.length;if(Da(a)){var b=Yr(a);E=b.length}if(d>=E)return a;var S=d-Oa(g);if(S<1)return g;var x=b?Cs(b,0,S).join(""):a.slice(0,S);if(_===n)return x+g;if(b&&(S+=x.length-S),l_(_)){if(a.slice(S).search(_)){var z,K=x;for(_.global||(_=Am(_.source,dt(wT.exec(_))+"g")),_.lastIndex=0;z=_.exec(K);)var X=z.index;x=x.slice(0,X===n?S:X)}}else if(a.indexOf(yr(_),S)!=S){var ae=x.lastIndexOf(_);ae>-1&&(x=x.slice(0,ae))}return x+g}function oq(a){return a=dt(a),a&&_L.test(a)?a.replace(_T,MV):a}var aq=Ba(function(a,l,d){return a+(d?" ":"")+l.toUpperCase()}),d_=W0("toUpperCase");function qb(a,l,d){return a=dt(a),l=d?n:l,l===n?xV(a)?FV(a):EV(a):a.match(l)||[]}var Hb=We(function(a,l){try{return mr(a,n,l)}catch(d){return c_(d)?d:new Me(d)}}),cq=qi(function(a,l){return Dr(l,function(d){d=vi(d),Bi(a,d,o_(a[d],a))}),a});function lq(a){var l=a==null?0:a.length,d=Re();return a=l?Lt(a,function(g){if(typeof g[1]!="function")throw new Or(o);return[d(g[0]),g[1]]}):[],We(function(g){for(var _=-1;++_<l;){var E=a[_];if(mr(E[0],this,g))return mr(E[1],this,g)}})}function uq(a){return MF(Mr(a,p))}function f_(a){return function(){return a}}function hq(a,l){return a==null||a!==a?l:a}var dq=j0(),fq=j0(!0);function ir(a){return a}function p_(a){return I0(typeof a=="function"?a:Mr(a,p))}function pq(a){return b0(Mr(a,p))}function gq(a,l){return A0(a,Mr(l,p))}var mq=We(function(a,l){return function(d){return Rl(d,a,l)}}),_q=We(function(a,l){return function(d){return Rl(a,d,l)}});function g_(a,l,d){var g=dn(l),_=yd(l,g);d==null&&!(Ft(l)&&(_.length||!g.length))&&(d=l,l=a,a=this,_=yd(l,dn(l)));var E=!(Ft(d)&&"chain"in d)||!!d.chain,b=Wi(a);return Dr(_,function(S){var x=l[S];a[S]=x,b&&(a.prototype[S]=function(){var z=this.__chain__;if(E||z){var K=a(this.__wrapped__),X=K.__actions__=tr(this.__actions__);return X.push({func:x,args:arguments,thisArg:a}),K.__chain__=z,K}return x.apply(a,Is([this.value()],arguments))})}),a}function yq(){return bn._===this&&(bn._=WV),this}function m_(){}function vq(a){return a=qe(a),We(function(l){return R0(l,a)})}var wq=Km(Lt),Eq=Km(KT),Iq=Km(ym);function Wb(a){return e_(a)?vm(vi(a)):XF(a)}function Tq(a){return function(l){return a==null?n:Ao(a,l)}}var bq=G0(),Aq=G0(!0);function __(){return[]}function y_(){return!1}function Rq(){return{}}function Sq(){return""}function Cq(){return!0}function Pq(a,l){if(a=qe(a),a<1||a>$e)return[];var d=Qe,g=Dn(a,Qe);l=Re(l),a-=Qe;for(var _=Im(g,l);++d<a;)l(d);return _}function xq(a){return Le(a)?Lt(a,vi):vr(a)?[a]:tr(ub(dt(a)))}function kq(a){var l=++qV;return dt(a)+l}var Dq=bd(function(a,l){return a+l},0),Oq=Gm("ceil"),Nq=bd(function(a,l){return a/l},1),Mq=Gm("floor");function Lq(a){return a&&a.length?_d(a,ir,Om):n}function Vq(a,l){return a&&a.length?_d(a,Re(l,2),Om):n}function Fq(a){return QT(a,ir)}function Uq(a,l){return QT(a,Re(l,2))}function Bq(a){return a&&a.length?_d(a,ir,Vm):n}function $q(a,l){return a&&a.length?_d(a,Re(l,2),Vm):n}var qq=bd(function(a,l){return a*l},1),Hq=Gm("round"),Wq=bd(function(a,l){return a-l},0);function zq(a){return a&&a.length?Em(a,ir):0}function jq(a,l){return a&&a.length?Em(a,Re(l,2)):0}return w.after=pB,w.ary=Eb,w.assign=t$,w.assignIn=Mb,w.assignInWith=Vd,w.assignWith=n$,w.at=r$,w.before=Ib,w.bind=o_,w.bindAll=cq,w.bindKey=Tb,w.castArray=RB,w.chain=yb,w.chunk=MU,w.compact=LU,w.concat=VU,w.cond=lq,w.conforms=uq,w.constant=f_,w.countBy=z2,w.create=i$,w.curry=bb,w.curryRight=Ab,w.debounce=Rb,w.defaults=s$,w.defaultsDeep=o$,w.defer=gB,w.delay=mB,w.difference=FU,w.differenceBy=UU,w.differenceWith=BU,w.drop=$U,w.dropRight=qU,w.dropRightWhile=HU,w.dropWhile=WU,w.fill=zU,w.filter=K2,w.flatMap=Q2,w.flatMapDeep=J2,w.flatMapDepth=X2,w.flatten=pb,w.flattenDeep=jU,w.flattenDepth=KU,w.flip=_B,w.flow=dq,w.flowRight=fq,w.fromPairs=GU,w.functions=f$,w.functionsIn=p$,w.groupBy=Z2,w.initial=QU,w.intersection=JU,w.intersectionBy=XU,w.intersectionWith=ZU,w.invert=m$,w.invertBy=_$,w.invokeMap=tB,w.iteratee=p_,w.keyBy=nB,w.keys=dn,w.keysIn=rr,w.map=kd,w.mapKeys=v$,w.mapValues=w$,w.matches=pq,w.matchesProperty=gq,w.memoize=Od,w.merge=E$,w.mergeWith=Lb,w.method=mq,w.methodOf=_q,w.mixin=g_,w.negate=Nd,w.nthArg=vq,w.omit=I$,w.omitBy=T$,w.once=yB,w.orderBy=rB,w.over=wq,w.overArgs=vB,w.overEvery=Eq,w.overSome=Iq,w.partial=a_,w.partialRight=Sb,w.partition=iB,w.pick=b$,w.pickBy=Vb,w.property=Wb,w.propertyOf=Tq,w.pull=r2,w.pullAll=mb,w.pullAllBy=i2,w.pullAllWith=s2,w.pullAt=o2,w.range=bq,w.rangeRight=Aq,w.rearg=wB,w.reject=aB,w.remove=a2,w.rest=EB,w.reverse=i_,w.sampleSize=lB,w.set=R$,w.setWith=S$,w.shuffle=uB,w.slice=c2,w.sortBy=fB,w.sortedUniq=g2,w.sortedUniqBy=m2,w.split=Q$,w.spread=IB,w.tail=_2,w.take=y2,w.takeRight=v2,w.takeRightWhile=w2,w.takeWhile=E2,w.tap=L2,w.throttle=TB,w.thru=xd,w.toArray=Db,w.toPairs=Fb,w.toPairsIn=Ub,w.toPath=xq,w.toPlainObject=Nb,w.transform=C$,w.unary=bB,w.union=I2,w.unionBy=T2,w.unionWith=b2,w.uniq=A2,w.uniqBy=R2,w.uniqWith=S2,w.unset=P$,w.unzip=s_,w.unzipWith=_b,w.update=x$,w.updateWith=k$,w.values=Ha,w.valuesIn=D$,w.without=C2,w.words=qb,w.wrap=AB,w.xor=P2,w.xorBy=x2,w.xorWith=k2,w.zip=D2,w.zipObject=O2,w.zipObjectDeep=N2,w.zipWith=M2,w.entries=Fb,w.entriesIn=Ub,w.extend=Mb,w.extendWith=Vd,g_(w,w),w.add=Dq,w.attempt=Hb,w.camelCase=L$,w.capitalize=Bb,w.ceil=Oq,w.clamp=O$,w.clone=SB,w.cloneDeep=PB,w.cloneDeepWith=xB,w.cloneWith=CB,w.conformsTo=kB,w.deburr=$b,w.defaultTo=hq,w.divide=Nq,w.endsWith=V$,w.eq=Jr,w.escape=F$,w.escapeRegExp=U$,w.every=j2,w.find=G2,w.findIndex=db,w.findKey=a$,w.findLast=Y2,w.findLastIndex=fb,w.findLastKey=c$,w.floor=Mq,w.forEach=vb,w.forEachRight=wb,w.forIn=l$,w.forInRight=u$,w.forOwn=h$,w.forOwnRight=d$,w.get=u_,w.gt=DB,w.gte=OB,w.has=g$,w.hasIn=h_,w.head=gb,w.identity=ir,w.includes=eB,w.indexOf=YU,w.inRange=N$,w.invoke=y$,w.isArguments=Co,w.isArray=Le,w.isArrayBuffer=NB,w.isArrayLike=nr,w.isArrayLikeObject=Kt,w.isBoolean=MB,w.isBuffer=Ps,w.isDate=LB,w.isElement=VB,w.isEmpty=FB,w.isEqual=UB,w.isEqualWith=BB,w.isError=c_,w.isFinite=$B,w.isFunction=Wi,w.isInteger=Cb,w.isLength=Md,w.isMap=Pb,w.isMatch=qB,w.isMatchWith=HB,w.isNaN=WB,w.isNative=zB,w.isNil=KB,w.isNull=jB,w.isNumber=xb,w.isObject=Ft,w.isObjectLike=qt,w.isPlainObject=Dl,w.isRegExp=l_,w.isSafeInteger=GB,w.isSet=kb,w.isString=Ld,w.isSymbol=vr,w.isTypedArray=qa,w.isUndefined=YB,w.isWeakMap=QB,w.isWeakSet=JB,w.join=e2,w.kebabCase=B$,w.last=Vr,w.lastIndexOf=t2,w.lowerCase=$$,w.lowerFirst=q$,w.lt=XB,w.lte=ZB,w.max=Lq,w.maxBy=Vq,w.mean=Fq,w.meanBy=Uq,w.min=Bq,w.minBy=$q,w.stubArray=__,w.stubFalse=y_,w.stubObject=Rq,w.stubString=Sq,w.stubTrue=Cq,w.multiply=qq,w.nth=n2,w.noConflict=yq,w.noop=m_,w.now=Dd,w.pad=H$,w.padEnd=W$,w.padStart=z$,w.parseInt=j$,w.random=M$,w.reduce=sB,w.reduceRight=oB,w.repeat=K$,w.replace=G$,w.result=A$,w.round=Hq,w.runInContext=C,w.sample=cB,w.size=hB,w.snakeCase=Y$,w.some=dB,w.sortedIndex=l2,w.sortedIndexBy=u2,w.sortedIndexOf=h2,w.sortedLastIndex=d2,w.sortedLastIndexBy=f2,w.sortedLastIndexOf=p2,w.startCase=J$,w.startsWith=X$,w.subtract=Wq,w.sum=zq,w.sumBy=jq,w.template=Z$,w.times=Pq,w.toFinite=zi,w.toInteger=qe,w.toLength=Ob,w.toLower=eq,w.toNumber=Fr,w.toSafeInteger=e$,w.toString=dt,w.toUpper=tq,w.trim=nq,w.trimEnd=rq,w.trimStart=iq,w.truncate=sq,w.unescape=oq,w.uniqueId=kq,w.upperCase=aq,w.upperFirst=d_,w.each=vb,w.eachRight=wb,w.first=gb,g_(w,function(){var a={};return _i(w,function(l,d){gt.call(w.prototype,d)||(a[d]=l)}),a}(),{chain:!1}),w.VERSION=r,Dr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(a){w[a].placeholder=w}),Dr(["drop","take"],function(a,l){Je.prototype[a]=function(d){d=d===n?1:cn(qe(d),0);var g=this.__filtered__&&!l?new Je(this):this.clone();return g.__filtered__?g.__takeCount__=Dn(d,g.__takeCount__):g.__views__.push({size:Dn(d,Qe),type:a+(g.__dir__<0?"Right":"")}),g},Je.prototype[a+"Right"]=function(d){return this.reverse()[a](d).reverse()}}),Dr(["filter","map","takeWhile"],function(a,l){var d=l+1,g=d==fe||d==Ne;Je.prototype[a]=function(_){var E=this.clone();return E.__iteratees__.push({iteratee:Re(_,3),type:d}),E.__filtered__=E.__filtered__||g,E}}),Dr(["head","last"],function(a,l){var d="take"+(l?"Right":"");Je.prototype[a]=function(){return this[d](1).value()[0]}}),Dr(["initial","tail"],function(a,l){var d="drop"+(l?"":"Right");Je.prototype[a]=function(){return this.__filtered__?new Je(this):this[d](1)}}),Je.prototype.compact=function(){return this.filter(ir)},Je.prototype.find=function(a){return this.filter(a).head()},Je.prototype.findLast=function(a){return this.reverse().find(a)},Je.prototype.invokeMap=We(function(a,l){return typeof a=="function"?new Je(this):this.map(function(d){return Rl(d,a,l)})}),Je.prototype.reject=function(a){return this.filter(Nd(Re(a)))},Je.prototype.slice=function(a,l){a=qe(a);var d=this;return d.__filtered__&&(a>0||l<0)?new Je(d):(a<0?d=d.takeRight(-a):a&&(d=d.drop(a)),l!==n&&(l=qe(l),d=l<0?d.dropRight(-l):d.take(l-a)),d)},Je.prototype.takeRightWhile=function(a){return this.reverse().takeWhile(a).reverse()},Je.prototype.toArray=function(){return this.take(Qe)},_i(Je.prototype,function(a,l){var d=/^(?:filter|find|map|reject)|While$/.test(l),g=/^(?:head|last)$/.test(l),_=w[g?"take"+(l=="last"?"Right":""):l],E=g||/^find/.test(l);!_||(w.prototype[l]=function(){var b=this.__wrapped__,S=g?[1]:arguments,x=b instanceof Je,z=S[0],K=x||Le(b),X=function(Ye){var tt=_.apply(w,Is([Ye],S));return g&&ae?tt[0]:tt};K&&d&&typeof z=="function"&&z.length!=1&&(x=K=!1);var ae=this.__chain__,ye=!!this.__actions__.length,Ce=E&&!ae,He=x&&!ye;if(!E&&K){b=He?b:new Je(this);var Pe=a.apply(b,S);return Pe.__actions__.push({func:xd,args:[X],thisArg:n}),new Nr(Pe,ae)}return Ce&&He?a.apply(this,S):(Pe=this.thru(X),Ce?g?Pe.value()[0]:Pe.value():Pe)})}),Dr(["pop","push","shift","sort","splice","unshift"],function(a){var l=nd[a],d=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",g=/^(?:pop|shift)$/.test(a);w.prototype[a]=function(){var _=arguments;if(g&&!this.__chain__){var E=this.value();return l.apply(Le(E)?E:[],_)}return this[d](function(b){return l.apply(Le(b)?b:[],_)})}}),_i(Je.prototype,function(a,l){var d=w[l];if(d){var g=d.name+"";gt.call(Va,g)||(Va[g]=[]),Va[g].push({name:l,func:d})}}),Va[Td(n,N).name]=[{name:"wrapper",func:n}],Je.prototype.clone=oF,Je.prototype.reverse=aF,Je.prototype.value=cF,w.prototype.at=V2,w.prototype.chain=F2,w.prototype.commit=U2,w.prototype.next=B2,w.prototype.plant=q2,w.prototype.reverse=H2,w.prototype.toJSON=w.prototype.valueOf=w.prototype.value=W2,w.prototype.first=w.prototype.head,vl&&(w.prototype[vl]=$2),w},Na=UV();wo?((wo.exports=Na)._=Na,pm._=Na):bn._=Na}).call(jl)})(Zv,Zv.exports);function wM(t,e){return function(){return t.apply(e,arguments)}}const{toString:ZX}=Object.prototype,{getPrototypeOf:nT}=Object,Zg=(t=>e=>{const n=ZX.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Li=t=>(t=t.toLowerCase(),e=>Zg(e)===t),em=t=>e=>typeof e===t,{isArray:_l}=Array,_h=em("undefined");function eZ(t){return t!==null&&!_h(t)&&t.constructor!==null&&!_h(t.constructor)&&jr(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const EM=Li("ArrayBuffer");function tZ(t){let e;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&EM(t.buffer),e}const nZ=em("string"),jr=em("function"),IM=em("number"),tm=t=>t!==null&&typeof t=="object",rZ=t=>t===!0||t===!1,Cf=t=>{if(Zg(t)!=="object")return!1;const e=nT(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},iZ=Li("Date"),sZ=Li("File"),oZ=Li("Blob"),aZ=Li("FileList"),cZ=t=>tm(t)&&jr(t.pipe),lZ=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||jr(t.append)&&((e=Zg(t))==="formdata"||e==="object"&&jr(t.toString)&&t.toString()==="[object FormData]"))},uZ=Li("URLSearchParams"),hZ=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Kh(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t=="undefined")return;let r,i;if(typeof t!="object"&&(t=[t]),_l(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let c;for(r=0;r<o;r++)c=s[r],e.call(null,t[c],c,t)}}function TM(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const bM=(()=>typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:global)(),AM=t=>!_h(t)&&t!==bM;function ew(){const{caseless:t}=AM(this)&&this||{},e={},n=(r,i)=>{const s=t&&TM(e,i)||i;Cf(e[s])&&Cf(r)?e[s]=ew(e[s],r):Cf(r)?e[s]=ew({},r):_l(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Kh(arguments[r],n);return e}const dZ=(t,e,n,{allOwnKeys:r}={})=>(Kh(e,(i,s)=>{n&&jr(i)?t[s]=wM(i,n):t[s]=i},{allOwnKeys:r}),t),fZ=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),pZ=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},gZ=(t,e,n,r)=>{let i,s,o;const c={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!r||r(o,t,e))&&!c[o]&&(e[o]=t[o],c[o]=!0);t=n!==!1&&nT(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},mZ=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},_Z=t=>{if(!t)return null;if(_l(t))return t;let e=t.length;if(!IM(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},yZ=(t=>e=>t&&e instanceof t)(typeof Uint8Array!="undefined"&&nT(Uint8Array)),vZ=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},wZ=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},EZ=Li("HTMLFormElement"),IZ=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),AC=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),TZ=Li("RegExp"),RM=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Kh(n,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(r[s]=o||i)}),Object.defineProperties(t,r)},bZ=t=>{RM(t,(e,n)=>{if(jr(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(!!jr(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},AZ=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return _l(t)?r(t):r(String(t).split(e)),n},RZ=()=>{},SZ=(t,e)=>(t=+t,Number.isFinite(t)?t:e),my="abcdefghijklmnopqrstuvwxyz",RC="0123456789",SM={DIGIT:RC,ALPHA:my,ALPHA_DIGIT:my+my.toUpperCase()+RC},CZ=(t=16,e=SM.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function PZ(t){return!!(t&&jr(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const xZ=t=>{const e=new Array(10),n=(r,i)=>{if(tm(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=_l(r)?[]:{};return Kh(r,(o,c)=>{const u=n(o,i+1);!_h(u)&&(s[c]=u)}),e[i]=void 0,s}}return r};return n(t,0)},kZ=Li("AsyncFunction"),DZ=t=>t&&(tm(t)||jr(t))&&jr(t.then)&&jr(t.catch);var j={isArray:_l,isArrayBuffer:EM,isBuffer:eZ,isFormData:lZ,isArrayBufferView:tZ,isString:nZ,isNumber:IM,isBoolean:rZ,isObject:tm,isPlainObject:Cf,isUndefined:_h,isDate:iZ,isFile:sZ,isBlob:oZ,isRegExp:TZ,isFunction:jr,isStream:cZ,isURLSearchParams:uZ,isTypedArray:yZ,isFileList:aZ,forEach:Kh,merge:ew,extend:dZ,trim:hZ,stripBOM:fZ,inherits:pZ,toFlatObject:gZ,kindOf:Zg,kindOfTest:Li,endsWith:mZ,toArray:_Z,forEachEntry:vZ,matchAll:wZ,isHTMLForm:EZ,hasOwnProperty:AC,hasOwnProp:AC,reduceDescriptors:RM,freezeMethods:bZ,toObjectSet:AZ,toCamelCase:IZ,noop:RZ,toFiniteNumber:SZ,findKey:TM,global:bM,isContextDefined:AM,ALPHABET:SM,generateString:CZ,isSpecCompliantForm:PZ,toJSONObject:xZ,isAsyncFn:kZ,isThenable:DZ};function ct(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}j.inherits(ct,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:j.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const CM=ct.prototype,PM={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{PM[t]={value:t}});Object.defineProperties(ct,PM);Object.defineProperty(CM,"isAxiosError",{value:!0});ct.from=(t,e,n,r,i,s)=>{const o=Object.create(CM);return j.toFlatObject(t,o,function(u){return u!==Error.prototype},c=>c!=="isAxiosError"),ct.call(o,t.message,e,n,r,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};var OZ=null;function tw(t){return j.isPlainObject(t)||j.isArray(t)}function xM(t){return j.endsWith(t,"[]")?t.slice(0,-2):t}function SC(t,e,n){return t?t.concat(e).map(function(i,s){return i=xM(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function NZ(t){return j.isArray(t)&&!t.some(tw)}const MZ=j.toFlatObject(j,{},null,function(e){return/^is[A-Z]/.test(e)});function nm(t,e,n){if(!j.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=j.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(I,A){return!j.isUndefined(A[I])});const r=n.metaTokens,i=n.visitor||f,s=n.dots,o=n.indexes,u=(n.Blob||typeof Blob!="undefined"&&Blob)&&j.isSpecCompliantForm(e);if(!j.isFunction(i))throw new TypeError("visitor must be a function");function h(v){if(v===null)return"";if(j.isDate(v))return v.toISOString();if(!u&&j.isBlob(v))throw new ct("Blob is not supported. Use a Buffer instead.");return j.isArrayBuffer(v)||j.isTypedArray(v)?u&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function f(v,I,A){let N=v;if(v&&!A&&typeof v=="object"){if(j.endsWith(I,"{}"))I=r?I:I.slice(0,-2),v=JSON.stringify(v);else if(j.isArray(v)&&NZ(v)||(j.isFileList(v)||j.endsWith(I,"[]"))&&(N=j.toArray(v)))return I=xM(I),N.forEach(function(k,P){!(j.isUndefined(k)||k===null)&&e.append(o===!0?SC([I],P,s):o===null?I:I+"[]",h(k))}),!1}return tw(v)?!0:(e.append(SC(A,I,s),h(v)),!1)}const p=[],m=Object.assign(MZ,{defaultVisitor:f,convertValue:h,isVisitable:tw});function y(v,I){if(!j.isUndefined(v)){if(p.indexOf(v)!==-1)throw Error("Circular reference detected in "+I.join("."));p.push(v),j.forEach(v,function(N,D){(!(j.isUndefined(N)||N===null)&&i.call(e,N,j.isString(D)?D.trim():D,I,m))===!0&&y(N,I?I.concat(D):[D])}),p.pop()}}if(!j.isObject(t))throw new TypeError("data must be an object");return y(t),e}function CC(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function rT(t,e){this._pairs=[],t&&nm(t,this,e)}const kM=rT.prototype;kM.append=function(e,n){this._pairs.push([e,n])};kM.toString=function(e){const n=e?function(r){return e.call(this,r,CC)}:CC;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function LZ(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function DM(t,e,n){if(!e)return t;const r=n&&n.encode||LZ,i=n&&n.serialize;let s;if(i?s=i(e,n):s=j.isURLSearchParams(e)?e.toString():new rT(e,n).toString(r),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class VZ{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){j.forEach(this.handlers,function(r){r!==null&&e(r)})}}var PC=VZ,OM={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},FZ=typeof URLSearchParams!="undefined"?URLSearchParams:rT,UZ=typeof FormData!="undefined"?FormData:null,BZ=typeof Blob!="undefined"?Blob:null;const $Z=(()=>{let t;return typeof navigator!="undefined"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"})(),qZ=(()=>typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")();var ai={isBrowser:!0,classes:{URLSearchParams:FZ,FormData:UZ,Blob:BZ},isStandardBrowserEnv:$Z,isStandardBrowserWebWorkerEnv:qZ,protocols:["http","https","file","blob","url","data"]};function HZ(t,e){return nm(t,new ai.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return ai.isNode&&j.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function WZ(t){return j.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function zZ(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function NM(t){function e(n,r,i,s){let o=n[s++];const c=Number.isFinite(+o),u=s>=n.length;return o=!o&&j.isArray(i)?i.length:o,u?(j.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!c):((!i[o]||!j.isObject(i[o]))&&(i[o]=[]),e(n,r,i[o],s)&&j.isArray(i[o])&&(i[o]=zZ(i[o])),!c)}if(j.isFormData(t)&&j.isFunction(t.entries)){const n={};return j.forEachEntry(t,(r,i)=>{e(WZ(r),i,n,0)}),n}return null}function jZ(t,e,n){if(j.isString(t))try{return(e||JSON.parse)(t),j.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const iT={transitional:OM,adapter:ai.isNode?"http":"xhr",transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=j.isObject(e);if(s&&j.isHTMLForm(e)&&(e=new FormData(e)),j.isFormData(e))return i&&i?JSON.stringify(NM(e)):e;if(j.isArrayBuffer(e)||j.isBuffer(e)||j.isStream(e)||j.isFile(e)||j.isBlob(e))return e;if(j.isArrayBufferView(e))return e.buffer;if(j.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let c;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return HZ(e,this.formSerializer).toString();if((c=j.isFileList(e))||r.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return nm(c?{"files[]":e}:e,u&&new u,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),jZ(e)):e}],transformResponse:[function(e){const n=this.transitional||iT.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(e&&j.isString(e)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(c){if(o)throw c.name==="SyntaxError"?ct.from(c,ct.ERR_BAD_RESPONSE,this,null,this.response):c}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ai.classes.FormData,Blob:ai.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};j.forEach(["delete","get","head","post","put","patch"],t=>{iT.headers[t]={}});var sT=iT;const KZ=j.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);var GZ=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||e[n]&&KZ[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e};const xC=Symbol("internals");function Kl(t){return t&&String(t).trim().toLowerCase()}function Pf(t){return t===!1||t==null?t:j.isArray(t)?t.map(Pf):String(t)}function YZ(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const QZ=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function _y(t,e,n,r,i){if(j.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!j.isString(e)){if(j.isString(r))return e.indexOf(r)!==-1;if(j.isRegExp(r))return r.test(e)}}function JZ(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function XZ(t,e){const n=j.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}class rm{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(c,u,h){const f=Kl(u);if(!f)throw new Error("header name must be a non-empty string");const p=j.findKey(i,f);(!p||i[p]===void 0||h===!0||h===void 0&&i[p]!==!1)&&(i[p||u]=Pf(c))}const o=(c,u)=>j.forEach(c,(h,f)=>s(h,f,u));return j.isPlainObject(e)||e instanceof this.constructor?o(e,n):j.isString(e)&&(e=e.trim())&&!QZ(e)?o(GZ(e),n):e!=null&&s(n,e,r),this}get(e,n){if(e=Kl(e),e){const r=j.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return YZ(i);if(j.isFunction(n))return n.call(this,i,r);if(j.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Kl(e),e){const r=j.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||_y(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(o){if(o=Kl(o),o){const c=j.findKey(r,o);c&&(!n||_y(r,r[c],c,n))&&(delete r[c],i=!0)}}return j.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||_y(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return j.forEach(this,(i,s)=>{const o=j.findKey(r,s);if(o){n[o]=Pf(i),delete n[s];return}const c=e?JZ(s):String(s).trim();c!==s&&delete n[s],n[c]=Pf(i),r[c]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return j.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&j.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[xC]=this[xC]={accessors:{}}).accessors,i=this.prototype;function s(o){const c=Kl(o);r[c]||(XZ(i,o),r[c]=!0)}return j.isArray(e)?e.forEach(s):s(e),this}}rm.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);j.reduceDescriptors(rm.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});j.freezeMethods(rm);var os=rm;function yy(t,e){const n=this||sT,r=e||n,i=os.from(r.headers);let s=r.data;return j.forEach(t,function(c){s=c.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function MM(t){return!!(t&&t.__CANCEL__)}function Gh(t,e,n){ct.call(this,t==null?"canceled":t,ct.ERR_CANCELED,e,n),this.name="CanceledError"}j.inherits(Gh,ct,{__CANCEL__:!0});function ZZ(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new ct("Request failed with status code "+n.status,[ct.ERR_BAD_REQUEST,ct.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}var eee=ai.isStandardBrowserEnv?function(){return{write:function(n,r,i,s,o,c){const u=[];u.push(n+"="+encodeURIComponent(r)),j.isNumber(i)&&u.push("expires="+new Date(i).toGMTString()),j.isString(s)&&u.push("path="+s),j.isString(o)&&u.push("domain="+o),c===!0&&u.push("secure"),document.cookie=u.join("; ")},read:function(n){const r=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function tee(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function nee(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function LM(t,e){return t&&!tee(e)?nee(t,e):e}var ree=ai.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function i(s){let o=s;return e&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=i(window.location.href),function(o){const c=j.isString(o)?i(o):o;return c.protocol===r.protocol&&c.host===r.host}}():function(){return function(){return!0}}();function iee(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function see(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(u){const h=Date.now(),f=r[s];o||(o=h),n[i]=u,r[i]=h;let p=s,m=0;for(;p!==i;)m+=n[p++],p=p%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),h-o<e)return;const y=f&&h-f;return y?Math.round(m*1e3/y):void 0}}function kC(t,e){let n=0;const r=see(50,250);return i=>{const s=i.loaded,o=i.lengthComputable?i.total:void 0,c=s-n,u=r(c),h=s<=o;n=s;const f={loaded:s,total:o,progress:o?s/o:void 0,bytes:c,rate:u||void 0,estimated:u&&o&&h?(o-s)/u:void 0,event:i};f[e?"download":"upload"]=!0,t(f)}}const oee=typeof XMLHttpRequest!="undefined";var aee=oee&&function(t){return new Promise(function(n,r){let i=t.data;const s=os.from(t.headers).normalize(),o=t.responseType;let c;function u(){t.cancelToken&&t.cancelToken.unsubscribe(c),t.signal&&t.signal.removeEventListener("abort",c)}j.isFormData(i)&&(ai.isStandardBrowserEnv||ai.isStandardBrowserWebWorkerEnv?s.setContentType(!1):s.setContentType("multipart/form-data;",!1));let h=new XMLHttpRequest;if(t.auth){const y=t.auth.username||"",v=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";s.set("Authorization","Basic "+btoa(y+":"+v))}const f=LM(t.baseURL,t.url);h.open(t.method.toUpperCase(),DM(f,t.params,t.paramsSerializer),!0),h.timeout=t.timeout;function p(){if(!h)return;const y=os.from("getAllResponseHeaders"in h&&h.getAllResponseHeaders()),I={data:!o||o==="text"||o==="json"?h.responseText:h.response,status:h.status,statusText:h.statusText,headers:y,config:t,request:h};ZZ(function(N){n(N),u()},function(N){r(N),u()},I),h=null}if("onloadend"in h?h.onloadend=p:h.onreadystatechange=function(){!h||h.readyState!==4||h.status===0&&!(h.responseURL&&h.responseURL.indexOf("file:")===0)||setTimeout(p)},h.onabort=function(){!h||(r(new ct("Request aborted",ct.ECONNABORTED,t,h)),h=null)},h.onerror=function(){r(new ct("Network Error",ct.ERR_NETWORK,t,h)),h=null},h.ontimeout=function(){let v=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const I=t.transitional||OM;t.timeoutErrorMessage&&(v=t.timeoutErrorMessage),r(new ct(v,I.clarifyTimeoutError?ct.ETIMEDOUT:ct.ECONNABORTED,t,h)),h=null},ai.isStandardBrowserEnv){const y=(t.withCredentials||ree(f))&&t.xsrfCookieName&&eee.read(t.xsrfCookieName);y&&s.set(t.xsrfHeaderName,y)}i===void 0&&s.setContentType(null),"setRequestHeader"in h&&j.forEach(s.toJSON(),function(v,I){h.setRequestHeader(I,v)}),j.isUndefined(t.withCredentials)||(h.withCredentials=!!t.withCredentials),o&&o!=="json"&&(h.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&h.addEventListener("progress",kC(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&h.upload&&h.upload.addEventListener("progress",kC(t.onUploadProgress)),(t.cancelToken||t.signal)&&(c=y=>{!h||(r(!y||y.type?new Gh(null,t,h):y),h.abort(),h=null)},t.cancelToken&&t.cancelToken.subscribe(c),t.signal&&(t.signal.aborted?c():t.signal.addEventListener("abort",c)));const m=iee(f);if(m&&ai.protocols.indexOf(m)===-1){r(new ct("Unsupported protocol "+m+":",ct.ERR_BAD_REQUEST,t));return}h.send(i||null)})};const xf={http:OZ,xhr:aee};j.forEach(xf,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});var VM={getAdapter:t=>{t=j.isArray(t)?t:[t];const{length:e}=t;let n,r;for(let i=0;i<e&&(n=t[i],!(r=j.isString(n)?xf[n.toLowerCase()]:n));i++);if(!r)throw r===!1?new ct(`Adapter ${n} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(j.hasOwnProp(xf,n)?`Adapter '${n}' is not available in the build`:`Unknown adapter '${n}'`);if(!j.isFunction(r))throw new TypeError("adapter is not a function");return r},adapters:xf};function vy(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Gh(null,t)}function DC(t){return vy(t),t.headers=os.from(t.headers),t.data=yy.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),VM.getAdapter(t.adapter||sT.adapter)(t).then(function(r){return vy(t),r.data=yy.call(t,t.transformResponse,r),r.headers=os.from(r.headers),r},function(r){return MM(r)||(vy(t),r&&r.response&&(r.response.data=yy.call(t,t.transformResponse,r.response),r.response.headers=os.from(r.response.headers))),Promise.reject(r)})}const OC=t=>t instanceof os?t.toJSON():t;function Yc(t,e){e=e||{};const n={};function r(h,f,p){return j.isPlainObject(h)&&j.isPlainObject(f)?j.merge.call({caseless:p},h,f):j.isPlainObject(f)?j.merge({},f):j.isArray(f)?f.slice():f}function i(h,f,p){if(j.isUndefined(f)){if(!j.isUndefined(h))return r(void 0,h,p)}else return r(h,f,p)}function s(h,f){if(!j.isUndefined(f))return r(void 0,f)}function o(h,f){if(j.isUndefined(f)){if(!j.isUndefined(h))return r(void 0,h)}else return r(void 0,f)}function c(h,f,p){if(p in e)return r(h,f);if(p in t)return r(void 0,h)}const u={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:c,headers:(h,f)=>i(OC(h),OC(f),!0)};return j.forEach(Object.keys(Object.assign({},t,e)),function(f){const p=u[f]||i,m=p(t[f],e[f],f);j.isUndefined(m)&&p!==c||(n[f]=m)}),n}const FM="1.5.0",oT={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{oT[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const NC={};oT.transitional=function(e,n,r){function i(s,o){return"[Axios v"+FM+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,c)=>{if(e===!1)throw new ct(i(o," has been removed"+(n?" in "+n:"")),ct.ERR_DEPRECATED);return n&&!NC[o]&&(NC[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,c):!0}};function cee(t,e,n){if(typeof t!="object")throw new ct("options must be an object",ct.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const c=t[s],u=c===void 0||o(c,s,t);if(u!==!0)throw new ct("option "+s+" must be "+u,ct.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new ct("Unknown option "+s,ct.ERR_BAD_OPTION)}}var nw={assertOptions:cee,validators:oT};const Ms=nw.validators;class kp{constructor(e){this.defaults=e,this.interceptors={request:new PC,response:new PC}}request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Yc(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&nw.assertOptions(r,{silentJSONParsing:Ms.transitional(Ms.boolean),forcedJSONParsing:Ms.transitional(Ms.boolean),clarifyTimeoutError:Ms.transitional(Ms.boolean)},!1),i!=null&&(j.isFunction(i)?n.paramsSerializer={serialize:i}:nw.assertOptions(i,{encode:Ms.function,serialize:Ms.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&j.merge(s.common,s[n.method]);s&&j.forEach(["delete","get","head","post","put","patch","common"],v=>{delete s[v]}),n.headers=os.concat(o,s);const c=[];let u=!0;this.interceptors.request.forEach(function(I){typeof I.runWhen=="function"&&I.runWhen(n)===!1||(u=u&&I.synchronous,c.unshift(I.fulfilled,I.rejected))});const h=[];this.interceptors.response.forEach(function(I){h.push(I.fulfilled,I.rejected)});let f,p=0,m;if(!u){const v=[DC.bind(this),void 0];for(v.unshift.apply(v,c),v.push.apply(v,h),m=v.length,f=Promise.resolve(n);p<m;)f=f.then(v[p++],v[p++]);return f}m=c.length;let y=n;for(p=0;p<m;){const v=c[p++],I=c[p++];try{y=v(y)}catch(A){I.call(this,A);break}}try{f=DC.call(this,y)}catch(v){return Promise.reject(v)}for(p=0,m=h.length;p<m;)f=f.then(h[p++],h[p++]);return f}getUri(e){e=Yc(this.defaults,e);const n=LM(e.baseURL,e.url);return DM(n,e.params,e.paramsSerializer)}}j.forEach(["delete","get","head","options"],function(e){kp.prototype[e]=function(n,r){return this.request(Yc(r||{},{method:e,url:n,data:(r||{}).data}))}});j.forEach(["post","put","patch"],function(e){function n(r){return function(s,o,c){return this.request(Yc(c||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}kp.prototype[e]=n(),kp.prototype[e+"Form"]=n(!0)});var kf=kp;class aT{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(c=>{r.subscribe(c),s=c}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,c){r.reason||(r.reason=new Gh(s,o,c),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new aT(function(i){e=i}),cancel:e}}}var lee=aT;function uee(t){return function(n){return t.apply(null,n)}}function hee(t){return j.isObject(t)&&t.isAxiosError===!0}const rw={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(rw).forEach(([t,e])=>{rw[e]=t});var dee=rw;function UM(t){const e=new kf(t),n=wM(kf.prototype.request,e);return j.extend(n,kf.prototype,e,{allOwnKeys:!0}),j.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return UM(Yc(t,i))},n}const sn=UM(sT);sn.Axios=kf;sn.CanceledError=Gh;sn.CancelToken=lee;sn.isCancel=MM;sn.VERSION=FM;sn.toFormData=nm;sn.AxiosError=ct;sn.Cancel=sn.CanceledError;sn.all=function(e){return Promise.all(e)};sn.spread=uee;sn.isAxiosError=hee;sn.mergeConfig=Yc;sn.AxiosHeaders=os;sn.formToJSON=t=>NM(j.isHTMLForm(t)?new FormData(t):t);sn.getAdapter=VM.getAdapter;sn.HttpStatusCode=dee;sn.default=sn;var BM=sn;const fee={apiKey:"AIzaSyDMydjsxDCNqYeYFbNL0q8VtzM8sXE_rXg",authDomain:"kifkaf-d4850.firebaseapp.com",projectId:"kifkaf-d4850",storageBucket:"kifkaf-d4850.appspot.com",messagingSenderId:"296402111022",appId:"1:296402111022:web:9e147ef8aa0fcb44822dbf",measurementId:"G-6KB3RTH5GX"},im=zw(fee),Zr=fs(h3(im,{localCache:C3({tabManager:D3()})})),$M=HO(im);self.FIREBASE_APPCHECK_DEBUG_TOKEN={}.CYPRESS_APP_CHECK_DEBUG_TOKEN_FROM_CI||!1||!1;console.log("FIREBASE_APPCHECK_DEBUG_TOKEN",self.FIREBASE_APPCHECK_DEBUG_TOKEN);lQ(im,{provider:new xI("6Lcwc_AmAAAAALodsOgDWM_0W3Ts1yrj_SKoPEfB"),isTokenAutoRefreshEnabled:!0});const pee=async()=>{const t=await Kg();if(!t||!t.uid){console.log("In emptyNeedsMomentsRetry, returning early because no user");return}const e=E3(ou(Zr,`users/${t.uid}/moments`),hS("needsSatisAndImp","==",{}),hS("retries","<",3),dS("retries"),dS("date","desc"),I3(5)),n=await gp(e);if(!n.size){console.log("In emptyNeedsMomentsRetry, no moments with empty needsSatisAndImp found");return}const r=await t.getIdToken(!0),i=n.docs.map(async s=>{console.log("In emptyNeedsMomentsRetry, triggering retry call to llm for moment",s.data().text),await BM.get("/api/learn/needs/",{params:{momentText:s.data().text,momentDate:JSON.stringify(s.data().date),momentId:s.id},headers:{authorization:`Bearer ${r}`}}),await R3(s.ref,{retries:M3(1)}),console.log("Successful retried llm call for moment",s.data().text)});await Promise.all(i)},cT=Zv.exports.debounce(()=>{console.log("llmRetryHandler called!"),pee()},6e4,{leading:!0,trailing:!1});window.addEventListener("online",cT);document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&cT()});var gee=({app:t,router:e})=>{t.use(XX,{firebaseApp:im,modules:[JX()]}),X5($M,n=>{n||e.push("/login")}),e.beforeEach(async n=>{if(n.meta.requiresAuth){const r=await Kg();if(!r||!r.emailVerified)return{path:"/login",query:{redirect:n.fullPath}}}}),cT()},mee=Object.freeze(Object.defineProperty({__proto__:null,db:Zr,auth:$M,default:gee},Symbol.toStringTag,{value:"Module"}));function _ee(t){return t.charAt(0).toUpperCase()+t.slice(1)}function Qre(t,e,n){return n<=e?e:Math.min(n,Math.max(e,t))}function tn(t,e=2,n="0"){if(t==null)return t;const r=""+t;return r.length>=e?r:new Array(e-r.length+1).join(n)+r}const Gs=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function Jre(t,e,n){return Object.prototype.toString.call(t)==="[object Date]"&&(n=t.getDate(),e=t.getMonth()+1,t=t.getFullYear()),Iee(lT(t,e,n))}function Xre(t,e,n){return HM(Eee(t,e,n))}function yee(t){return wee(t)===0}function vee(t,e){return e<=6?31:e<=11||yee(t)?30:29}function wee(t){const e=Gs.length;let n=Gs[0],r,i,s,o,c;if(t<n||t>=Gs[e-1])throw new Error("Invalid Jalaali year "+t);for(c=1;c<e&&(r=Gs[c],i=r-n,!(t<r));c+=1)n=r;return o=t-n,i-o<6&&(o=o-i+Dt(i+4,33)*33),s=br(br(o+1,33)-1,4),s===-1&&(s=4),s}function qM(t,e){const n=Gs.length,r=t+621;let i=-14,s=Gs[0],o,c,u,h,f;if(t<s||t>=Gs[n-1])throw new Error("Invalid Jalaali year "+t);for(f=1;f<n&&(o=Gs[f],c=o-s,!(t<o));f+=1)i=i+Dt(c,33)*8+Dt(br(c,33),4),s=o;h=t-s,i=i+Dt(h,33)*8+Dt(br(h,33)+3,4),br(c,33)===4&&c-h===4&&(i+=1);const p=Dt(r,4)-Dt((Dt(r,100)+1)*3,4)-150,m=20+i-p;return e||(c-h<6&&(h=h-c+Dt(c+4,33)*33),u=br(br(h+1,33)-1,4),u===-1&&(u=4)),{leap:u,gy:r,march:m}}function Eee(t,e,n){const r=qM(t,!0);return lT(r.gy,3,r.march)+(e-1)*31-Dt(e,7)*(e-7)+n-1}function Iee(t){const e=HM(t).gy;let n=e-621,r,i,s;const o=qM(n,!1),c=lT(e,3,o.march);if(s=t-c,s>=0){if(s<=185)return i=1+Dt(s,31),r=br(s,31)+1,{jy:n,jm:i,jd:r};s-=186}else n-=1,s+=179,o.leap===1&&(s+=1);return i=7+Dt(s,30),r=br(s,30)+1,{jy:n,jm:i,jd:r}}function lT(t,e,n){let r=Dt((t+Dt(e-8,6)+100100)*1461,4)+Dt(153*br(e+9,12)+2,5)+n-34840408;return r=r-Dt(Dt(t+100100+Dt(e-8,6),100)*3,4)+752,r}function HM(t){let e=4*t+139361631;e=e+Dt(Dt(4*t+183187720,146097)*3,4)*4-3908;const n=Dt(br(e,1461),4)*5+308,r=Dt(br(n,153),5)+1,i=br(Dt(n,153),12)+1;return{gy:Dt(e,1461)-100100+Dt(8-i,6),gm:i,gd:r}}function Dt(t,e){return~~(t/e)}function br(t,e){return t-~~(t/e)*e}const WM=864e5,Tee=36e5,iw=6e4,zM="YYYY-MM-DDTHH:mm:ss.SSSZ",bee=/\[((?:[^\]\\]|\\]|\\)*)\]|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,Aee=/(\[[^\]]*\])|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\s${}()|\\]+)/g,wy={};function Ree(t,e){const n="("+e.days.join("|")+")",r=t+n;if(wy[r]!==void 0)return wy[r];const i="("+e.daysShort.join("|")+")",s="("+e.months.join("|")+")",o="("+e.monthsShort.join("|")+")",c={};let u=0;const h=t.replace(Aee,p=>{switch(u++,p){case"YY":return c.YY=u,"(-?\\d{1,2})";case"YYYY":return c.YYYY=u,"(-?\\d{1,4})";case"M":return c.M=u,"(\\d{1,2})";case"MM":return c.M=u,"(\\d{2})";case"MMM":return c.MMM=u,o;case"MMMM":return c.MMMM=u,s;case"D":return c.D=u,"(\\d{1,2})";case"Do":return c.D=u++,"(\\d{1,2}(st|nd|rd|th))";case"DD":return c.D=u,"(\\d{2})";case"H":return c.H=u,"(\\d{1,2})";case"HH":return c.H=u,"(\\d{2})";case"h":return c.h=u,"(\\d{1,2})";case"hh":return c.h=u,"(\\d{2})";case"m":return c.m=u,"(\\d{1,2})";case"mm":return c.m=u,"(\\d{2})";case"s":return c.s=u,"(\\d{1,2})";case"ss":return c.s=u,"(\\d{2})";case"S":return c.S=u,"(\\d{1})";case"SS":return c.S=u,"(\\d{2})";case"SSS":return c.S=u,"(\\d{3})";case"A":return c.A=u,"(AM|PM)";case"a":return c.a=u,"(am|pm)";case"aa":return c.aa=u,"(a\\.m\\.|p\\.m\\.)";case"ddd":return i;case"dddd":return n;case"Q":case"d":case"E":return"(\\d{1})";case"Qo":return"(1st|2nd|3rd|4th)";case"DDD":case"DDDD":return"(\\d{1,3})";case"w":return"(\\d{1,2})";case"ww":return"(\\d{2})";case"Z":return c.Z=u,"(Z|[+-]\\d{2}:\\d{2})";case"ZZ":return c.ZZ=u,"(Z|[+-]\\d{2}\\d{2})";case"X":return c.X=u,"(-?\\d+)";case"x":return c.x=u,"(-?\\d{4,})";default:return u--,p[0]==="["&&(p=p.substring(1,p.length-1)),p.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}),f={map:c,regex:new RegExp("^"+h)};return wy[r]=f,f}function jM(t,e){return t!==void 0?t:e!==void 0?e.date:zy.date}function MC(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.floor(r/60),s=r%60;return n+tn(i)+e+tn(s)}function See(t,e,n){let r=t.getFullYear(),i=t.getMonth();const s=t.getDate();return e.year!==void 0&&(r+=n*e.year,delete e.year),e.month!==void 0&&(i+=n*e.month,delete e.month),t.setDate(1),t.setMonth(2),t.setFullYear(r),t.setMonth(i),t.setDate(Math.min(s,hT(t))),e.date!==void 0&&(t.setDate(t.getDate()+n*e.date),delete e.date),t}function Cee(t,e,n){const r=e.year!==void 0?e.year:t[`get${n}FullYear`](),i=e.month!==void 0?e.month-1:t[`get${n}Month`](),s=new Date(r,i+1,0).getDate(),o=Math.min(s,e.date!==void 0?e.date:t[`get${n}Date`]());return t[`set${n}Date`](1),t[`set${n}Month`](2),t[`set${n}FullYear`](r),t[`set${n}Month`](i),t[`set${n}Date`](o),delete e.year,delete e.month,delete e.date,t}function uT(t,e,n){const r=KM(e),i=new Date(t),s=r.year!==void 0||r.month!==void 0||r.date!==void 0?See(i,r,n):i;for(const o in r){const c=_ee(o);s[`set${c}`](s[`get${c}`]()+n*r[o])}return s}function KM(t){const e={...t};return t.years!==void 0&&(e.year=t.years,delete e.years),t.months!==void 0&&(e.month=t.months,delete e.months),t.days!==void 0&&(e.date=t.days,delete e.days),t.day!==void 0&&(e.date=t.day,delete e.day),t.hour!==void 0&&(e.hours=t.hour,delete e.hour),t.minute!==void 0&&(e.minutes=t.minute,delete e.minute),t.second!==void 0&&(e.seconds=t.second,delete e.second),t.millisecond!==void 0&&(e.milliseconds=t.millisecond,delete e.millisecond),e}function GM(t,e,n){const r=KM(e),i=n===!0?"UTC":"",s=new Date(t),o=r.year!==void 0||r.month!==void 0||r.date!==void 0?Cee(s,r,i):s;for(const c in r){const u=c.charAt(0).toUpperCase()+c.slice(1);o[`set${i}${u}`](r[c])}return o}function Pee(t,e,n){const r=xee(t,e,n),i=new Date(r.year,r.month===null?null:r.month-1,r.day===null?1:r.day,r.hour,r.minute,r.second,r.millisecond),s=i.getTimezoneOffset();return r.timezoneOffset===null||r.timezoneOffset===s?i:uT(i,{minutes:r.timezoneOffset-s},1)}function xee(t,e,n,r,i){const s={year:null,month:null,day:null,hour:null,minute:null,second:null,millisecond:null,timezoneOffset:null,dateHash:null,timeHash:null};if(i!==void 0&&Object.assign(s,i),t==null||t===""||typeof t!="string")return s;e===void 0&&(e=zM);const o=jM(n,Tr.props),c=o.months,u=o.monthsShort,{regex:h,map:f}=Ree(e,o),p=t.match(h);if(p===null)return s;let m="";if(f.X!==void 0||f.x!==void 0){const y=parseInt(p[f.X!==void 0?f.X:f.x],10);if(isNaN(y)===!0||y<0)return s;const v=new Date(y*(f.X!==void 0?1e3:1));s.year=v.getFullYear(),s.month=v.getMonth()+1,s.day=v.getDate(),s.hour=v.getHours(),s.minute=v.getMinutes(),s.second=v.getSeconds(),s.millisecond=v.getMilliseconds()}else{if(f.YYYY!==void 0)s.year=parseInt(p[f.YYYY],10);else if(f.YY!==void 0){const y=parseInt(p[f.YY],10);s.year=y<0?y:2e3+y}if(f.M!==void 0){if(s.month=parseInt(p[f.M],10),s.month<1||s.month>12)return s}else f.MMM!==void 0?s.month=u.indexOf(p[f.MMM])+1:f.MMMM!==void 0&&(s.month=c.indexOf(p[f.MMMM])+1);if(f.D!==void 0){if(s.day=parseInt(p[f.D],10),s.year===null||s.month===null||s.day<1)return s;const y=r!=="persian"?new Date(s.year,s.month,0).getDate():vee(s.year,s.month);if(s.day>y)return s}f.H!==void 0?s.hour=parseInt(p[f.H],10)%24:f.h!==void 0&&(s.hour=parseInt(p[f.h],10)%12,(f.A&&p[f.A]==="PM"||f.a&&p[f.a]==="pm"||f.aa&&p[f.aa]==="p.m.")&&(s.hour+=12),s.hour=s.hour%24),f.m!==void 0&&(s.minute=parseInt(p[f.m],10)%60),f.s!==void 0&&(s.second=parseInt(p[f.s],10)%60),f.S!==void 0&&(s.millisecond=parseInt(p[f.S],10)*10**(3-p[f.S].length)),(f.Z!==void 0||f.ZZ!==void 0)&&(m=f.Z!==void 0?p[f.Z].replace(":",""):p[f.ZZ],s.timezoneOffset=(m[0]==="+"?-1:1)*(60*m.slice(1,3)+1*m.slice(3,5)))}return s.dateHash=tn(s.year,6)+"/"+tn(s.month)+"/"+tn(s.day),s.timeHash=tn(s.hour)+":"+tn(s.minute)+":"+tn(s.second)+m,s}function kee(t){return typeof t=="number"?!0:isNaN(Date.parse(t))===!1}function Dee(t,e){return GM(new Date,t,e)}function Oee(t){const e=new Date(t).getDay();return e===0?7:e}function sw(t){const e=new Date(t.getFullYear(),t.getMonth(),t.getDate());e.setDate(e.getDate()-(e.getDay()+6)%7+3);const n=new Date(e.getFullYear(),0,4);n.setDate(n.getDate()-(n.getDay()+6)%7+3);const r=e.getTimezoneOffset()-n.getTimezoneOffset();e.setHours(e.getHours()-r);const i=(e-n)/(WM*7);return 1+Math.floor(i)}function Nee(t){return t.getFullYear()*1e4+t.getMonth()*100+t.getDate()}function Ey(t,e){const n=new Date(t);return e===!0?Nee(n):n.getTime()}function Mee(t,e,n,r={}){const i=Ey(e,r.onlyDate),s=Ey(n,r.onlyDate),o=Ey(t,r.onlyDate);return(o>i||r.inclusiveFrom===!0&&o===i)&&(o<s||r.inclusiveTo===!0&&o===s)}function Lee(t,e){return uT(t,e,1)}function Vee(t,e){return uT(t,e,-1)}function wi(t,e,n){const r=new Date(t),i=`set${n===!0?"UTC":""}`;switch(e){case"year":case"years":r[`${i}Month`](0);case"month":case"months":r[`${i}Date`](1);case"day":case"days":case"date":r[`${i}Hours`](0);case"hour":case"hours":r[`${i}Minutes`](0);case"minute":case"minutes":r[`${i}Seconds`](0);case"second":case"seconds":r[`${i}Milliseconds`](0)}return r}function Fee(t,e,n){const r=new Date(t),i=`set${n===!0?"UTC":""}`;switch(e){case"year":case"years":r[`${i}Month`](11);case"month":case"months":r[`${i}Date`](hT(r));case"day":case"days":case"date":r[`${i}Hours`](23);case"hour":case"hours":r[`${i}Minutes`](59);case"minute":case"minutes":r[`${i}Seconds`](59);case"second":case"seconds":r[`${i}Milliseconds`](999)}return r}function Uee(t){let e=new Date(t);return Array.prototype.slice.call(arguments,1).forEach(n=>{e=Math.max(e,new Date(n))}),e}function Bee(t){let e=new Date(t);return Array.prototype.slice.call(arguments,1).forEach(n=>{e=Math.min(e,new Date(n))}),e}function uf(t,e,n){return(t.getTime()-t.getTimezoneOffset()*iw-(e.getTime()-e.getTimezoneOffset()*iw))/n}function YM(t,e,n="days"){const r=new Date(t),i=new Date(e);switch(n){case"years":case"year":return r.getFullYear()-i.getFullYear();case"months":case"month":return(r.getFullYear()-i.getFullYear())*12+r.getMonth()-i.getMonth();case"days":case"day":case"date":return uf(wi(r,"day"),wi(i,"day"),WM);case"hours":case"hour":return uf(wi(r,"hour"),wi(i,"hour"),Tee);case"minutes":case"minute":return uf(wi(r,"minute"),wi(i,"minute"),iw);case"seconds":case"second":return uf(wi(r,"second"),wi(i,"second"),1e3)}}function ow(t){return YM(t,wi(t,"year"),"days")+1}function $ee(t){return kx(t)===!0?"date":typeof t=="number"?"number":"string"}function qee(t,e,n){const r=new Date(t);if(e){const i=new Date(e);if(r<i)return i}if(n){const i=new Date(n);if(r>i)return i}return r}function Hee(t,e,n){const r=new Date(t),i=new Date(e);if(n===void 0)return r.getTime()===i.getTime();switch(n){case"second":case"seconds":if(r.getSeconds()!==i.getSeconds())return!1;case"minute":case"minutes":if(r.getMinutes()!==i.getMinutes())return!1;case"hour":case"hours":if(r.getHours()!==i.getHours())return!1;case"day":case"days":case"date":if(r.getDate()!==i.getDate())return!1;case"month":case"months":if(r.getMonth()!==i.getMonth())return!1;case"year":case"years":if(r.getFullYear()!==i.getFullYear())return!1;break;default:throw new Error(`date isSameDate unknown unit ${n}`)}return!0}function hT(t){return new Date(t.getFullYear(),t.getMonth()+1,0).getDate()}function LC(t){if(t>=11&&t<=13)return`${t}th`;switch(t%10){case 1:return`${t}st`;case 2:return`${t}nd`;case 3:return`${t}rd`}return`${t}th`}const VC={YY(t,e,n){const r=this.YYYY(t,e,n)%100;return r>=0?tn(r):"-"+tn(Math.abs(r))},YYYY(t,e,n){return n!=null?n:t.getFullYear()},M(t){return t.getMonth()+1},MM(t){return tn(t.getMonth()+1)},MMM(t,e){return e.monthsShort[t.getMonth()]},MMMM(t,e){return e.months[t.getMonth()]},Q(t){return Math.ceil((t.getMonth()+1)/3)},Qo(t){return LC(this.Q(t))},D(t){return t.getDate()},Do(t){return LC(t.getDate())},DD(t){return tn(t.getDate())},DDD(t){return ow(t)},DDDD(t){return tn(ow(t),3)},d(t){return t.getDay()},dd(t,e){return this.dddd(t,e).slice(0,2)},ddd(t,e){return e.daysShort[t.getDay()]},dddd(t,e){return e.days[t.getDay()]},E(t){return t.getDay()||7},w(t){return sw(t)},ww(t){return tn(sw(t))},H(t){return t.getHours()},HH(t){return tn(t.getHours())},h(t){const e=t.getHours();return e===0?12:e>12?e%12:e},hh(t){return tn(this.h(t))},m(t){return t.getMinutes()},mm(t){return tn(t.getMinutes())},s(t){return t.getSeconds()},ss(t){return tn(t.getSeconds())},S(t){return Math.floor(t.getMilliseconds()/100)},SS(t){return tn(Math.floor(t.getMilliseconds()/10))},SSS(t){return tn(t.getMilliseconds(),3)},A(t){return this.H(t)<12?"AM":"PM"},a(t){return this.H(t)<12?"am":"pm"},aa(t){return this.H(t)<12?"a.m.":"p.m."},Z(t,e,n,r){const i=r==null?t.getTimezoneOffset():r;return MC(i,":")},ZZ(t,e,n,r){const i=r==null?t.getTimezoneOffset():r;return MC(i)},X(t){return Math.floor(t.getTime()/1e3)},x(t){return t.getTime()}};function Wee(t,e,n,r,i){if(t!==0&&!t||t===1/0||t===-1/0)return;const s=new Date(t);if(isNaN(s))return;e===void 0&&(e=zM);const o=jM(n,Tr.props);return e.replace(bee,(c,u)=>c in VC?VC[c](s,o,r,i):u===void 0?c:u.split("\\]").join("]"))}function zee(t){return kx(t)===!0?new Date(t.getTime()):t}var Oo={isValid:kee,extractDate:Pee,buildDate:Dee,getDayOfWeek:Oee,getWeekOfYear:sw,isBetweenDates:Mee,addToDate:Lee,subtractFromDate:Vee,adjustDate:GM,startOfDate:wi,endOfDate:Fee,getMaxDate:Uee,getMinDate:Bee,getDateDiff:YM,getDayOfYear:ow,inferDateFormat:$ee,getDateBetween:qee,isSameDate:Hee,daysInMonth:hT,formatDate:Wee,clone:zee};const aw={xs:18,sm:24,md:32,lg:38,xl:46},dT={size:String};function fT(t,e=aw){return xe(()=>t.size!==void 0?{fontSize:t.size in e?`${e[t.size]}px`:t.size}:null)}const Yh=t=>fs(kw(t)),jee=t=>fs(t);function Kee(t,e){return t!==void 0&&t()||e}function Zre(t,e){if(t!==void 0){const n=t();if(n!=null)return n.slice()}return e}function lu(t,e){return t!==void 0?e.concat(t()):e}function Gee(t,e){return t===void 0?e:e!==void 0?e.concat(t()):t()}function eie(t,e,n,r,i,s){e.key=r+i;const o=De(t,e,n);return i===!0?jP(o,s()):o}const FC="0 0 24 24",UC=t=>t,Iy=t=>`ionicons ${t}`,QM={"mdi-":t=>`mdi ${t}`,"icon-":UC,"bt-":t=>`bt ${t}`,"eva-":t=>`eva ${t}`,"ion-md":Iy,"ion-ios":Iy,"ion-logo":Iy,"iconfont ":UC,"ti-":t=>`themify-icon ${t}`,"bi-":t=>`bootstrap-icons ${t}`},JM={o_:"-outlined",r_:"-round",s_:"-sharp"},XM={sym_o_:"-outlined",sym_r_:"-rounded",sym_s_:"-sharp"},Yee=new RegExp("^("+Object.keys(QM).join("|")+")"),Qee=new RegExp("^("+Object.keys(JM).join("|")+")"),BC=new RegExp("^("+Object.keys(XM).join("|")+")"),Jee=/^[Mm]\s?[-+]?\.?\d/,Xee=/^img:/,Zee=/^svguse:/,ete=/^ion-/,tte=/^(fa-(sharp|solid|regular|light|brands|duotone|thin)|[lf]a[srlbdk]?) /;var Dp=Yh({name:"QIcon",props:{...dT,tag:{type:String,default:"i"},name:String,color:String,left:Boolean,right:Boolean},setup(t,{slots:e}){const{proxy:{$q:n}}=ho(),r=fT(t),i=xe(()=>"q-icon"+(t.left===!0?" on-left":"")+(t.right===!0?" on-right":"")+(t.color!==void 0?` text-${t.color}`:"")),s=xe(()=>{let o,c=t.name;if(c==="none"||!c)return{none:!0};if(n.iconMapFn!==null){const f=n.iconMapFn(c);if(f!==void 0)if(f.icon!==void 0){if(c=f.icon,c==="none"||!c)return{none:!0}}else return{cls:f.cls,content:f.content!==void 0?f.content:" "}}if(Jee.test(c)===!0){const[f,p=FC]=c.split("|");return{svg:!0,viewBox:p,nodes:f.split("&&").map(m=>{const[y,v,I]=m.split("@@");return De("path",{style:v,d:y,transform:I})})}}if(Xee.test(c)===!0)return{img:!0,src:c.substring(4)};if(Zee.test(c)===!0){const[f,p=FC]=c.split("|");return{svguse:!0,src:f.substring(7),viewBox:p}}let u=" ";const h=c.match(Yee);if(h!==null)o=QM[h[1]](c);else if(tte.test(c)===!0)o=c;else if(ete.test(c)===!0)o=`ionicons ion-${n.platform.is.ios===!0?"ios":"md"}${c.substring(3)}`;else if(BC.test(c)===!0){o="notranslate material-symbols";const f=c.match(BC);f!==null&&(c=c.substring(6),o+=XM[f[1]]),u=c}else{o="notranslate material-icons";const f=c.match(Qee);f!==null&&(c=c.substring(2),o+=JM[f[1]]),u=c}return{cls:o,content:u}});return()=>{const o={class:i.value,style:r.value,"aria-hidden":"true",role:"presentation"};return s.value.none===!0?De(t.tag,o,Kee(e.default)):s.value.img===!0?De("span",o,lu(e.default,[De("img",{src:s.value.src})])):s.value.svg===!0?De("span",o,lu(e.default,[De("svg",{viewBox:s.value.viewBox||"0 0 24 24"},s.value.nodes)])):s.value.svguse===!0?De("span",o,lu(e.default,[De("svg",{viewBox:s.value.viewBox},[De("use",{"xlink:href":s.value.src})])])):(s.value.cls!==void 0&&(o.class+=" "+s.value.cls),De(t.tag,o,lu(e.default,[s.value.content])))}}}),nte=Yh({name:"QAvatar",props:{...dT,fontSize:String,color:String,textColor:String,icon:String,square:Boolean,rounded:Boolean},setup(t,{slots:e}){const n=fT(t),r=xe(()=>"q-avatar"+(t.color?` bg-${t.color}`:"")+(t.textColor?` text-${t.textColor} q-chip--colored`:"")+(t.square===!0?" q-avatar--square":t.rounded===!0?" rounded-borders":"")),i=xe(()=>t.fontSize?{fontSize:t.fontSize}:null);return()=>{const s=t.icon!==void 0?[De(Dp,{name:t.icon})]:void 0;return De("div",{class:r.value,style:n.value},[De("div",{class:"q-avatar__content row flex-center overflow-hidden",style:i.value},Gee(e.default,s))])}}});const rte={size:{type:[Number,String],default:"1em"},color:String};function ite(t){return{cSize:xe(()=>t.size in aw?`${aw[t.size]}px`:t.size),classes:xe(()=>"q-spinner"+(t.color?` text-${t.color}`:""))}}var ZM=Yh({name:"QSpinner",props:{...rte,thickness:{type:Number,default:5}},setup(t){const{cSize:e,classes:n}=ite(t);return()=>De("svg",{class:n.value+" q-spinner-mat",width:e.value,height:e.value,viewBox:"25 25 50 50"},[De("circle",{class:"path",cx:"50",cy:"50",r:"20",fill:"none",stroke:"currentColor","stroke-width":t.thickness,"stroke-miterlimit":"10"})])}});function ste(t,e){const n=t.style;for(const r in e)n[r]=e[r]}function tie(t){if(t==null)return;if(typeof t=="string")try{return document.querySelector(t)||void 0}catch{return}const e=Js(t);if(e)return e.$el||e}function nie(t,e){if(t==null||t.contains(e)===!0)return!0;for(let n=t.nextElementSibling;n!==null;n=n.nextElementSibling)if(n.contains(e))return!0;return!1}function ote(t,e=250){let n=!1,r;return function(){return n===!1&&(n=!0,setTimeout(()=>{n=!1},e),r=t.apply(this,arguments)),r}}function $C(t,e,n,r){n.modifiers.stop===!0&&Rx(t);const i=n.modifiers.color;let s=n.modifiers.center;s=s===!0||r===!0;const o=document.createElement("span"),c=document.createElement("span"),u=WW(t),{left:h,top:f,width:p,height:m}=e.getBoundingClientRect(),y=Math.sqrt(p*p+m*m),v=y/2,I=`${(p-y)/2}px`,A=s?I:`${u.left-h-v}px`,N=`${(m-y)/2}px`,D=s?N:`${u.top-f-v}px`;c.className="q-ripple__inner",ste(c,{height:`${y}px`,width:`${y}px`,transform:`translate3d(${A},${D},0) scale3d(.2,.2,1)`,opacity:0}),o.className=`q-ripple${i?" text-"+i:""}`,o.setAttribute("dir","ltr"),o.appendChild(c),e.appendChild(o);const k=()=>{o.remove(),clearTimeout(P)};n.abort.push(k);let P=setTimeout(()=>{c.classList.add("q-ripple__inner--enter"),c.style.transform=`translate3d(${I},${N},0) scale3d(1,1,1)`,c.style.opacity=.2,P=setTimeout(()=>{c.classList.remove("q-ripple__inner--enter"),c.classList.add("q-ripple__inner--leave"),c.style.opacity=0,P=setTimeout(()=>{o.remove(),n.abort.splice(n.abort.indexOf(k),1)},275)},250)},50)}function qC(t,{modifiers:e,value:n,arg:r}){const i=Object.assign({},t.cfg.ripple,e,n);t.modifiers={early:i.early===!0,stop:i.stop===!0,center:i.center===!0,color:i.color||r,keyCodes:[].concat(i.keyCodes||13)}}var ate=jee({name:"ripple",beforeMount(t,e){const n=e.instance.$.appContext.config.globalProperties.$q.config||{};if(n.ripple===!1)return;const r={cfg:n,enabled:e.value!==!1,modifiers:{},abort:[],start(i){r.enabled===!0&&i.qSkipRipple!==!0&&i.type===(r.modifiers.early===!0?"pointerdown":"click")&&$C(i,t,r,i.qKeyEvent===!0)},keystart:ote(i=>{r.enabled===!0&&i.qSkipRipple!==!0&&jy(i,r.modifiers.keyCodes)===!0&&i.type===`key${r.modifiers.early===!0?"down":"up"}`&&$C(i,t,r,!0)},300)};qC(r,e),t.__qripple=r,jW(r,"main",[[t,"pointerdown","start","passive"],[t,"click","start","passive"],[t,"keydown","keystart","passive"],[t,"keyup","keystart","passive"]])},updated(t,e){if(e.oldValue!==e.value){const n=t.__qripple;n!==void 0&&(n.enabled=e.value!==!1,n.enabled===!0&&Object(e.value)===e.value&&qC(n,e))}},beforeUnmount(t){const e=t.__qripple;e!==void 0&&(e.abort.forEach(n=>{n()}),KW(e,"main"),delete t._qripple)}});const eL={left:"start",center:"center",right:"end",between:"between",around:"around",evenly:"evenly",stretch:"stretch"},cte=Object.keys(eL),lte={align:{type:String,validator:t=>cte.includes(t)}};function ute(t){return xe(()=>{const e=t.align===void 0?t.vertical===!0?"stretch":"left":t.align;return`${t.vertical===!0?"items":"justify"}-${eL[e]}`})}function rie(t){if(Object(t.$parent)===t.$parent)return t.$parent;let{parent:e}=t.$;for(;Object(e)===e;){if(Object(e.proxy)===e.proxy)return e.proxy;e=e.parent}}function hte(t){return t.appContext.config.globalProperties.$router!==void 0}function iie(t){return t.isUnmounted===!0||t.isDeactivated===!0}function HC(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}function WC(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function dte(t,e){for(const n in e){const r=e[n],i=t[n];if(typeof r=="string"){if(r!==i)return!1}else if(Array.isArray(i)===!1||i.length!==r.length||r.some((s,o)=>s!==i[o]))return!1}return!0}function zC(t,e){return Array.isArray(e)===!0?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function fte(t,e){return Array.isArray(t)===!0?zC(t,e):Array.isArray(e)===!0?zC(e,t):t===e}function pte(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(fte(t[n],e[n])===!1)return!1;return!0}const gte={to:[String,Object],replace:Boolean,exact:Boolean,activeClass:{type:String,default:"q-router-link--active"},exactActiveClass:{type:String,default:"q-router-link--exact-active"},href:String,target:String,disable:Boolean};function mte({fallbackTag:t,useDisableForRouterLinkProps:e=!0}={}){const n=ho(),{props:r,proxy:i,emit:s}=n,o=hte(n),c=xe(()=>r.disable!==!0&&r.href!==void 0),u=xe(e===!0?()=>o===!0&&r.disable!==!0&&c.value!==!0&&r.to!==void 0&&r.to!==null&&r.to!=="":()=>o===!0&&c.value!==!0&&r.to!==void 0&&r.to!==null&&r.to!==""),h=xe(()=>u.value===!0?D(r.to):null),f=xe(()=>h.value!==null),p=xe(()=>c.value===!0||f.value===!0),m=xe(()=>r.type==="a"||p.value===!0?"a":r.tag||t||"div"),y=xe(()=>c.value===!0?{href:r.href,target:r.target}:f.value===!0?{href:h.value.href,target:r.target}:{}),v=xe(()=>{if(f.value===!1)return-1;const{matched:B}=h.value,{length:V}=B,F=B[V-1];if(F===void 0)return-1;const M=i.$route.matched;if(M.length===0)return-1;const J=M.findIndex(WC.bind(null,F));if(J>-1)return J;const ee=HC(B[V-2]);return V>1&&HC(F)===ee&&M[M.length-1].path!==ee?M.findIndex(WC.bind(null,B[V-2])):J}),I=xe(()=>f.value===!0&&v.value!==-1&&dte(i.$route.params,h.value.params)),A=xe(()=>I.value===!0&&v.value===i.$route.matched.length-1&&pte(i.$route.params,h.value.params)),N=xe(()=>f.value===!0?A.value===!0?` ${r.exactActiveClass} ${r.activeClass}`:r.exact===!0?"":I.value===!0?` ${r.activeClass}`:"":"");function D(B){try{return i.$router.resolve(B)}catch{}return null}function k(B,{returnRouterError:V,to:F=r.to,replace:M=r.replace}={}){if(r.disable===!0)return B.preventDefault(),Promise.resolve(!1);if(B.metaKey||B.altKey||B.ctrlKey||B.shiftKey||B.button!==void 0&&B.button!==0||r.target==="_blank")return Promise.resolve(!1);B.preventDefault();const J=i.$router[M===!0?"replace":"push"](F);return V===!0?J:J.then(()=>{}).catch(()=>{})}function P(B){if(f.value===!0){const V=F=>k(B,F);s("click",B,V),B.defaultPrevented!==!0&&V()}else s("click",B)}return{hasRouterLink:f,hasHrefLink:c,hasLink:p,linkTag:m,resolvedLink:h,linkIsActive:I,linkIsExactActive:A,linkClass:N,linkAttrs:y,getLink:D,navigateToRouterLink:k,navigateOnClick:P}}const jC={none:0,xs:4,sm:8,md:16,lg:24,xl:32},_te={xs:8,sm:10,md:14,lg:20,xl:24},yte=["button","submit","reset"],vte=/[^\s]\/[^\s]/,wte=["flat","outline","push","unelevated"],Ete=(t,e)=>t.flat===!0?"flat":t.outline===!0?"outline":t.push===!0?"push":t.unelevated===!0?"unelevated":e,Ite={...dT,...gte,type:{type:String,default:"button"},label:[Number,String],icon:String,iconRight:String,...wte.reduce((t,e)=>(t[e]=Boolean)&&t,{}),square:Boolean,round:Boolean,rounded:Boolean,glossy:Boolean,size:String,fab:Boolean,fabMini:Boolean,padding:String,color:String,textColor:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,tabindex:[Number,String],ripple:{type:[Boolean,Object],default:!0},align:{...lte.align,default:"center"},stack:Boolean,stretch:Boolean,loading:{type:Boolean,default:null},disable:Boolean};function Tte(t){const e=fT(t,_te),n=ute(t),{hasRouterLink:r,hasLink:i,linkTag:s,linkAttrs:o,navigateOnClick:c}=mte({fallbackTag:"button"}),u=xe(()=>{const A=t.fab===!1&&t.fabMini===!1?e.value:{};return t.padding!==void 0?Object.assign({},A,{padding:t.padding.split(/\s+/).map(N=>N in jC?jC[N]+"px":N).join(" "),minWidth:"0",minHeight:"0"}):A}),h=xe(()=>t.rounded===!0||t.fab===!0||t.fabMini===!0),f=xe(()=>t.disable!==!0&&t.loading!==!0),p=xe(()=>f.value===!0?t.tabindex||0:-1),m=xe(()=>Ete(t,"standard")),y=xe(()=>{const A={tabindex:p.value};return i.value===!0?Object.assign(A,o.value):yte.includes(t.type)===!0&&(A.type=t.type),s.value==="a"?(t.disable===!0?A["aria-disabled"]="true":A.href===void 0&&(A.role="button"),r.value!==!0&&vte.test(t.type)===!0&&(A.type=t.type)):t.disable===!0&&(A.disabled="",A["aria-disabled"]="true"),t.loading===!0&&t.percentage!==void 0&&Object.assign(A,{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":t.percentage}),A}),v=xe(()=>{let A;t.color!==void 0?t.flat===!0||t.outline===!0?A=`text-${t.textColor||t.color}`:A=`bg-${t.color} text-${t.textColor||"white"}`:t.textColor&&(A=`text-${t.textColor}`);const N=t.round===!0?"round":`rectangle${h.value===!0?" q-btn--rounded":t.square===!0?" q-btn--square":""}`;return`q-btn--${m.value} q-btn--${N}`+(A!==void 0?" "+A:"")+(f.value===!0?" q-btn--actionable q-focusable q-hoverable":t.disable===!0?" disabled":"")+(t.fab===!0?" q-btn--fab":t.fabMini===!0?" q-btn--fab-mini":"")+(t.noCaps===!0?" q-btn--no-uppercase":"")+(t.dense===!0?" q-btn--dense":"")+(t.stretch===!0?" no-border-radius self-stretch":"")+(t.glossy===!0?" glossy":"")+(t.square?" q-btn--square":"")}),I=xe(()=>n.value+(t.stack===!0?" column":" row")+(t.noWrap===!0?" no-wrap text-no-wrap":"")+(t.loading===!0?" q-btn__content--hidden":""));return{classes:v,style:u,innerClasses:I,attributes:y,hasLink:i,linkTag:s,navigateOnClick:c,isActionable:f}}const{passiveCapture:Br}=vh;let Za=null,ec=null,tc=null;var bte=Yh({name:"QBtn",props:{...Ite,percentage:Number,darkPercentage:Boolean,onTouchstart:[Function,Array]},emits:["click","keydown","mousedown","keyup"],setup(t,{slots:e,emit:n}){const{proxy:r}=ho(),{classes:i,style:s,innerClasses:o,attributes:c,hasLink:u,linkTag:h,navigateOnClick:f,isActionable:p}=Tte(t),m=Bt(null),y=Bt(null);let v=null,I,A=null;const N=xe(()=>t.label!==void 0&&t.label!==null&&t.label!==""),D=xe(()=>t.disable===!0||t.ripple===!1?!1:{keyCodes:u.value===!0?[13,32]:[13],...t.ripple===!0?{}:t.ripple}),k=xe(()=>({center:t.round})),P=xe(()=>{const fe=Math.max(0,Math.min(100,t.percentage));return fe>0?{transition:"transform 0.6s",transform:`translateX(${fe-100}%)`}:{}}),B=xe(()=>{if(t.loading===!0)return{onMousedown:Be,onTouchstart:Be,onClick:Be,onKeydown:Be,onKeyup:Be};if(p.value===!0){const fe={onClick:F,onKeydown:M,onMousedown:ee};if(r.$q.platform.has.touch===!0){const Fe=t.onTouchstart!==void 0?"":"Passive";fe[`onTouchstart${Fe}`]=J}return fe}return{onClick:za}}),V=xe(()=>({ref:m,class:"q-btn q-btn-item non-selectable no-outline "+i.value,style:s.value,...c.value,...B.value}));function F(fe){if(m.value!==null){if(fe!==void 0){if(fe.defaultPrevented===!0)return;const Fe=document.activeElement;if(t.type==="submit"&&Fe!==document.body&&m.value.contains(Fe)===!1&&Fe.contains(m.value)===!1){m.value.focus();const Ne=()=>{document.removeEventListener("keydown",za,!0),document.removeEventListener("keyup",Ne,Br),m.value!==null&&m.value.removeEventListener("blur",Ne,Br)};document.addEventListener("keydown",za,!0),document.addEventListener("keyup",Ne,Br),m.value.addEventListener("blur",Ne,Br)}}f(fe)}}function M(fe){m.value!==null&&(n("keydown",fe),jy(fe,[13,32])===!0&&ec!==m.value&&(ec!==null&&te(),fe.defaultPrevented!==!0&&(m.value.focus(),ec=m.value,m.value.classList.add("q-btn--active"),document.addEventListener("keyup",ge,!0),m.value.addEventListener("blur",ge,Br)),za(fe)))}function J(fe){m.value!==null&&(n("touchstart",fe),fe.defaultPrevented!==!0&&(Za!==m.value&&(Za!==null&&te(),Za=m.value,v=fe.target,v.addEventListener("touchcancel",ge,Br),v.addEventListener("touchend",ge,Br)),I=!0,A!==null&&clearTimeout(A),A=setTimeout(()=>{A=null,I=!1},200)))}function ee(fe){m.value!==null&&(fe.qSkipRipple=I===!0,n("mousedown",fe),fe.defaultPrevented!==!0&&tc!==m.value&&(tc!==null&&te(),tc=m.value,m.value.classList.add("q-btn--active"),document.addEventListener("mouseup",ge,Br)))}function ge(fe){if(m.value!==null&&!(fe!==void 0&&fe.type==="blur"&&document.activeElement===m.value)){if(fe!==void 0&&fe.type==="keyup"){if(ec===m.value&&jy(fe,[13,32])===!0){const Fe=new MouseEvent("click",fe);Fe.qKeyEvent=!0,fe.defaultPrevented===!0&&zW(Fe),fe.cancelBubble===!0&&Rx(Fe),m.value.dispatchEvent(Fe),za(fe),fe.qKeyEvent=!0}n("keyup",fe)}te()}}function te(fe){const Fe=y.value;fe!==!0&&(Za===m.value||tc===m.value)&&Fe!==null&&Fe!==document.activeElement&&(Fe.setAttribute("tabindex",-1),Fe.focus()),Za===m.value&&(v!==null&&(v.removeEventListener("touchcancel",ge,Br),v.removeEventListener("touchend",ge,Br)),Za=v=null),tc===m.value&&(document.removeEventListener("mouseup",ge,Br),tc=null),ec===m.value&&(document.removeEventListener("keyup",ge,!0),m.value!==null&&m.value.removeEventListener("blur",ge,Br),ec=null),m.value!==null&&m.value.classList.remove("q-btn--active")}function Be(fe){za(fe),fe.qSkipRipple=!0}return Hp(()=>{te(!0)}),Object.assign(r,{click:F}),()=>{let fe=[];t.icon!==void 0&&fe.push(De(Dp,{name:t.icon,left:t.stack===!1&&N.value===!0,role:"img","aria-hidden":"true"})),N.value===!0&&fe.push(De("span",{class:"block"},[t.label])),fe=lu(e.default,fe),t.iconRight!==void 0&&t.round===!1&&fe.push(De(Dp,{name:t.iconRight,right:t.stack===!1&&N.value===!0,role:"img","aria-hidden":"true"}));const Fe=[De("span",{class:"q-focus-helper",ref:y})];return t.loading===!0&&t.percentage!==void 0&&Fe.push(De("span",{class:"q-btn__progress absolute-full overflow-hidden"+(t.darkPercentage===!0?" q-btn__progress--dark":"")},[De("span",{class:"q-btn__progress-indicator fit block",style:P.value})])),Fe.push(De("span",{class:"q-btn__content text-center col items-center q-anchor--skip "+o.value},fe)),t.loading!==null&&Fe.push(De(Uw,{name:"q-transition--fade"},()=>t.loading===!0?[De("span",{key:"loading",class:"absolute-full flex flex-center"},e.loading!==void 0?e.loading():[De(ZM)])]:null)),jP(De(h.value,V.value,Fe),[[ate,D.value,void 0,k.value]])}}});let Ate=1,Rte=document.body;function Ste(t,e){const n=document.createElement("div");if(n.id=e!==void 0?`q-portal--${e}--${Ate++}`:t,Wf.globalNodes!==void 0){const r=Wf.globalNodes.class;r!==void 0&&(n.className=r)}return Rte.appendChild(n),n}function sie(t){t.remove()}let Cte=0;const Df={},Of={},ei={},tL={},Pte=/^\s*$/,nL=[],pT=["top-left","top-right","bottom-left","bottom-right","top","bottom","left","right","center"],xte=["top-left","top-right","bottom-left","bottom-right"],ac={positive:{icon:t=>t.iconSet.type.positive,color:"positive"},negative:{icon:t=>t.iconSet.type.negative,color:"negative"},warning:{icon:t=>t.iconSet.type.warning,color:"warning",textColor:"dark"},info:{icon:t=>t.iconSet.type.info,color:"info"},ongoing:{group:!1,timeout:0,spinner:!0,color:"grey-8"}};function rL(t,e,n){if(!t)return Gl("parameter required");let r;const i={textColor:"white"};if(t.ignoreDefaults!==!0&&Object.assign(i,Df),Fu(t)===!1&&(i.type&&Object.assign(i,ac[i.type]),t={message:t}),Object.assign(i,ac[t.type||i.type],t),typeof i.icon=="function"&&(i.icon=i.icon(e)),i.spinner?(i.spinner===!0&&(i.spinner=ZM),i.spinner=fs(i.spinner)):i.spinner=!1,i.meta={hasMedia:Boolean(i.spinner!==!1||i.icon||i.avatar),hasText:KC(i.message)||KC(i.caption)},i.position){if(pT.includes(i.position)===!1)return Gl("wrong position",t)}else i.position="bottom";if(i.timeout===void 0)i.timeout=5e3;else{const u=parseInt(i.timeout,10);if(isNaN(u)||u<0)return Gl("wrong timeout",t);i.timeout=u}i.timeout===0?i.progress=!1:i.progress===!0&&(i.meta.progressClass="q-notification__progress"+(i.progressClass?` ${i.progressClass}`:""),i.meta.progressStyle={animationDuration:`${i.timeout+1e3}ms`});const s=(Array.isArray(t.actions)===!0?t.actions:[]).concat(t.ignoreDefaults!==!0&&Array.isArray(Df.actions)===!0?Df.actions:[]).concat(ac[t.type]!==void 0&&Array.isArray(ac[t.type].actions)===!0?ac[t.type].actions:[]),{closeBtn:o}=i;if(o&&s.push({label:typeof o=="string"?o:e.lang.label.close}),i.actions=s.map(({handler:u,noDismiss:h,...f})=>({flat:!0,...f,onClick:typeof u=="function"?()=>{u(),h!==!0&&c()}:()=>{c()}})),i.multiLine===void 0&&(i.multiLine=i.actions.length>1),Object.assign(i.meta,{class:`q-notification row items-stretch q-notification--${i.multiLine===!0?"multi-line":"standard"}`+(i.color!==void 0?` bg-${i.color}`:"")+(i.textColor!==void 0?` text-${i.textColor}`:"")+(i.classes!==void 0?` ${i.classes}`:""),wrapperClass:"q-notification__wrapper col relative-position border-radius-inherit "+(i.multiLine===!0?"column no-wrap justify-center":"row items-center"),contentClass:"q-notification__content row items-center"+(i.multiLine===!0?"":" col"),leftClass:i.meta.hasText===!0?"additional":"single",attrs:{role:"alert",...i.attrs}}),i.group===!1?(i.group=void 0,i.meta.group=void 0):((i.group===void 0||i.group===!0)&&(i.group=[i.message,i.caption,i.multiline].concat(i.actions.map(u=>`${u.label}*${u.icon}`)).join("|")),i.meta.group=i.group+"|"+i.position),i.actions.length===0?i.actions=void 0:i.meta.actionsClass="q-notification__actions row items-center "+(i.multiLine===!0?"justify-end":"col-auto")+(i.meta.hasMedia===!0?" q-notification__actions--with-media":""),n!==void 0){n.notif.meta.timer&&(clearTimeout(n.notif.meta.timer),n.notif.meta.timer=void 0),i.meta.uid=n.notif.meta.uid;const u=ei[i.position].value.indexOf(n.notif);ei[i.position].value[u]=i}else{const u=Of[i.meta.group];if(u===void 0){if(i.meta.uid=Cte++,i.meta.badge=1,["left","right","center"].indexOf(i.position)!==-1)ei[i.position].value.splice(Math.floor(ei[i.position].value.length/2),0,i);else{const h=i.position.indexOf("top")>-1?"unshift":"push";ei[i.position].value[h](i)}i.group!==void 0&&(Of[i.meta.group]=i)}else{if(u.meta.timer&&(clearTimeout(u.meta.timer),u.meta.timer=void 0),i.badgePosition!==void 0){if(xte.includes(i.badgePosition)===!1)return Gl("wrong badgePosition",t)}else i.badgePosition=`top-${i.position.indexOf("left")>-1?"right":"left"}`;i.meta.uid=u.meta.uid,i.meta.badge=u.meta.badge+1,i.meta.badgeClass=`q-notification__badge q-notification__badge--${i.badgePosition}`+(i.badgeColor!==void 0?` bg-${i.badgeColor}`:"")+(i.badgeTextColor!==void 0?` text-${i.badgeTextColor}`:"")+(i.badgeClass?` ${i.badgeClass}`:"");const h=ei[i.position].value.indexOf(u);ei[i.position].value[h]=Of[i.meta.group]=i}}const c=()=>{kte(i),r=void 0};if(i.timeout>0&&(i.meta.timer=setTimeout(()=>{i.meta.timer=void 0,c()},i.timeout+1e3)),i.group!==void 0)return u=>{u!==void 0?Gl("trying to update a grouped one which is forbidden",t):c()};if(r={dismiss:c,config:t,notif:i},n!==void 0){Object.assign(n,r);return}return u=>{if(r!==void 0)if(u===void 0)r.dismiss();else{const h=Object.assign({},r.config,u,{group:!1,position:i.position});rL(h,e,r)}}}function kte(t){t.meta.timer&&(clearTimeout(t.meta.timer),t.meta.timer=void 0);const e=ei[t.position].value.indexOf(t);if(e!==-1){t.group!==void 0&&delete Of[t.meta.group];const n=nL[""+t.meta.uid];if(n){const{width:r,height:i}=getComputedStyle(n);n.style.left=`${n.offsetLeft}px`,n.style.width=r,n.style.height=i}ei[t.position].value.splice(e,1),typeof t.onDismiss=="function"&&t.onDismiss()}}function KC(t){return t!=null&&Pte.test(t)!==!0}function Gl(t,e){return console.error(`Notify: ${t}`,e),!1}function Dte(){return Yh({name:"QNotifications",devtools:{hide:!0},setup(){return()=>De("div",{class:"q-notifications"},pT.map(t=>De(vW,{key:t,class:tL[t],tag:"div",name:`q-notification--${t}`},()=>ei[t].value.map(e=>{const n=e.meta,r=[];if(n.hasMedia===!0&&(e.spinner!==!1?r.push(De(e.spinner,{class:"q-notification__spinner q-notification__spinner--"+n.leftClass,color:e.spinnerColor,size:e.spinnerSize})):e.icon?r.push(De(Dp,{class:"q-notification__icon q-notification__icon--"+n.leftClass,name:e.icon,color:e.iconColor,size:e.iconSize,role:"img"})):e.avatar&&r.push(De(nte,{class:"q-notification__avatar q-notification__avatar--"+n.leftClass},()=>De("img",{src:e.avatar,"aria-hidden":"true"})))),n.hasText===!0){let s;const o={class:"q-notification__message col"};if(e.html===!0)o.innerHTML=e.caption?`<div>${e.message}</div><div class="q-notification__caption">${e.caption}</div>`:e.message;else{const c=[e.message];s=e.caption?[De("div",c),De("div",{class:"q-notification__caption"},[e.caption])]:c}r.push(De("div",o,s))}const i=[De("div",{class:n.contentClass},r)];return e.progress===!0&&i.push(De("div",{key:`${n.uid}|p|${n.badge}`,class:n.progressClass,style:n.progressStyle})),e.actions!==void 0&&i.push(De("div",{class:n.actionsClass},e.actions.map(s=>De(bte,s)))),n.badge>1&&i.push(De("div",{key:`${n.uid}|${n.badge}`,class:e.meta.badgeClass,style:e.badgeStyle},[n.badge])),De("div",{ref:s=>{nL[""+n.uid]=s},key:n.uid,class:n.class,...n.attrs},[De("div",{class:n.wrapperClass},i)])}))))}})}var Nf={setDefaults(t){Fu(t)===!0&&Object.assign(Df,t)},registerType(t,e){Fu(e)===!0&&(ac[t]=e)},install({$q:t,parentApp:e}){if(t.notify=this.create=n=>rL(n,t),t.notify.setDefaults=this.setDefaults,t.notify.registerType=this.registerType,t.config.notify!==void 0&&this.setDefaults(t.config.notify),this.__installed!==!0){pT.forEach(r=>{ei[r]=Bt([]);const i=["left","center","right"].includes(r)===!0?"center":r.indexOf("top")>-1?"top":"bottom",s=r.indexOf("left")>-1?"start":r.indexOf("right")>-1?"end":"center",o=["left","right"].includes(r)?`items-${r==="left"?"start":"end"} justify-center`:r==="center"?"flex-center":`items-${s}`;tL[r]=`q-notifications__list q-notifications__list--${i} fixed column no-wrap ${o}`});const n=Ste("q-notify");uz(Dte(),e).mount(n)}}};const Ote=Ez("moments",()=>{const t=Bt(null),e=Bt(null),n=Bt(null),r=Bt([]),i=Bt({}),s=Bt(!1),o=Bt(!1),c=Bt(!1),u=Bt(!1),h=Bt({"Physical Well-Being":"\u{1F6E1}\uFE0F","Sustenance & Nourishment":"\u{1F34E}",Shelter:"\u{1F3E0}","Financial Security":"\u{1F4B0}","Rest & Relaxation":"\u{1F319}","Physical Movement":"\u{1F938}","Physical Contact & Intimacy":"\u{1F450}","Contact with Nature":"\u{1F3DE}\uFE0F","Social Connection":"\u{1F465}","Belongingness & Community":"\u{1F3D8}\uFE0F","Support, Understanding & Validation":"\u{1F442}","Affection & Love":"\u2764\uFE0F","Emotional Safety & Inner Peace":"\u{1F9D8}\u200D\u2642\uFE0F","Boundaries & Privacy":"\u{1F6AA}",Autonomy:"\u{1F6E4}\uFE0F","Self-Esteem & Social Recognition":"\u{1F4AA}","Competence & Effectiveness":"\u{1F3AF}","Outward Care & Contribution":"\u{1F932}","Self-Expression & Creativity":"\u{1F3A8}","Exploration, Novelty & Inspiration":"\u{1F30C}",Learning:"\u{1F4DA}","Self-Actualization":"\u{1F331}",Challenge:"\u26F0\uFE0F","Play, Humor & Entertainment":"\u{1F3A0}","Fairness & Justice":"\u2696\uFE0F","Order & Structure":"\u{1F4D0}","Meaning & Purpose":"\u{1F9ED}","Gratitude & Celebration":"\u{1F388}","Spiritual Transcendence":"\u{1F338}"}),f=async()=>{try{if(s.value){console.log("In fetchUser, already userFetched");return}if(t.value=await Kg(),!t.value||!t.value.uid){console.log("Failed to fetch user or user.uid");return}e.value=$l(Zr,"users",`${t.value.uid}`),(await sI(e.value)).exists()||(console.log("User doc does not exist, creating it"),await A3(e.value,{momentsDays:[],hasNeeds:!1})),n.value=QX(e),s.value=!0}catch(V){console.log("Error in fetchUser",V)}},p=async()=>{try{if(o.value){console.log("In fetchMoments, already momentsFetched");return}s.value||(console.log("User not yet fetched, fetching it"),await f()),r.value=YX(ou(Zr,`users/${t.value.uid}/moments`)),o.value=!0}catch(V){console.log("Error in fetchMoments",V)}},m=xe(()=>async(V,F)=>{try{if(!V)return console.log("In getMomentById, momentId is null, returning null"),null;o.value||(console.log("In getMomentById, moments not yet fetched, fetching them"),await p()),Ic($l(Zr,`users/${t.value.uid}/moments/${V}`),M=>{F.value=M.data()})}catch(M){console.log("Error in getMomentById",M)}}),y=async()=>{try{if(c.value){console.log("In fetchAggregateData, already aggregateDataFetched");return}s.value||(console.log("User not yet fetched, fetching it"),await f());const V=new Date,F=V.getFullYear().toString(),M=`${F}-${(V.getMonth()+1).toString().padStart(2,"0")}`;Ic($l(Zr,`users/${t.value.uid}/aggregateYearly/${F}`),J=>{i.value[F]=J.data()}),Ic($l(Zr,`users/${t.value.uid}/aggregateMonthly/${M}`),J=>{i.value[M]=J.data()}),gp(ou(Zr,`users/${t.value.uid}/aggregateYearly`)).then(J=>{J.forEach(ee=>{ee.id.length===4&&ee.id!==F&&(i.value[ee.id]=ee.data())})}),gp(ou(Zr,`users/${t.value.uid}/aggregateMonthly`)).then(J=>{J.forEach(ee=>{ee.id.length===7&&ee.id!==M&&(i.value[ee.id]=ee.data())})}),c.value=!0,console.log("In fetchAggregateData, aggregateData.value:",i.value)}catch(V){console.log("Error in fetchAggregateData",V)}},v=xe(()=>{var V,F,M;return(M=(F=(V=n==null?void 0:n.value)==null?void 0:V.data)==null?void 0:F.hasNeeds)!=null?M:!1}),I=async V=>{try{console.log("In addMoment, moment:",V);const F=L3(Zr),M=$l(ou(Zr,`users/${t.value.uid}/moments`));F.set(M,V),F.update(M,{needsSatisAndImp:{},retries:0});const ee=new It(V.date.seconds,V.date.nanoseconds).toDate();ee.setHours(0,0,0,0),F.update(e.value,{momentsDays:N3(It.fromDate(ee))}),navigator.onLine?Nf.create("Moment saved."):Nf.create("Moment saved. Needs analysis will complete next time you\u2019re online."),await F.commit();const ge=await t.value.getIdToken(!0);console.log("In addMoment, triggering call to llm for moment",M.id,V.text);const te=await BM.get("/api/learn/needs/",{params:{momentText:V.text,momentDate:JSON.stringify(V.date),momentId:M.id},headers:{authorization:`Bearer ${ge}`}});Nf.create("Needs analysis complete."),console.log("In addMoment",te.data)}catch(F){console.log("Error in addMoment",F)}},A=xe(()=>{var F,M,J;return!s.value||!((J=(M=(F=n==null?void 0:n.value)==null?void 0:F.data)==null?void 0:M.momentsDays)!=null&&J.length)?[]:n.value.data.momentsDays.map(ee=>ee.seconds).sort((ee,ge)=>ge-ee)}),N=(V,F=!1,M=!0)=>{if(!V)return;const ee=new It(V,0).toDate(),ge=new Date;if(!M)return Oo.formatDate(ee,"MMMM D, YYYY");const te=Oo.isSameDate(ee,ge,"day")?"Today":Oo.isSameDate(ee,ge-864e5,"day")?"Yesterday":Oo.isSameDate(ee,ge,"year")?Oo.formatDate(ee,"MMMM D"):Oo.formatDate(ee,"MMMM D, YYYY");return F?te+", "+Oo.formatDate(ee,"HH:mm"):te},D=xe(()=>{var F,M,J;return!s.value||!((J=(M=(F=n==null?void 0:n.value)==null?void 0:F.data)==null?void 0:M.momentsDays)!=null&&J.length)?void 0:n.value.data.momentsDays.sort((ee,ge)=>ee.seconds-ge.seconds)[0].toDate()}),k=V=>{u.value=V},P=async V=>{try{if(V.displayName&&(await CQ({displayName:V.displayName}),console.log("displayName updated!")),V.email||V.password){const F=vo.credential(t.value.email,V.oldPassword);await AO(t.value,F),V.email?(await W5(t.value,V.email),console.log("email updated!")):V.password&&(await z5(t.value,V.password),console.log("password updated!"))}}catch(F){console.log("Error in updateUser: ",F)}};function B(){t.value=null,e.value=null,n.value=null,r.value=[],i.value={},s.value=!1,o.value=!1,c.value=!1,u.value=!1,h.value={}}return{user:t,momentsColl:r,isEditorFocused:u,uniqueDays:A,oldestMomentDate:D,userFetched:s,momentsFetched:o,aggregateDataFetched:c,hasNeeds:v,needsMap:h,aggregateData:i,getMomentById:m,getFormattedDate:N,addMoment:I,fetchUser:f,fetchMoments:p,fetchAggregateData:y,updateUser:P,setIsEditorFocused:k,$reset:B}}),cc={__name:"App",setup(t){const e=Ote();return qp(async()=>{try{e.userFetched||await e.fetchUser()}catch(n){console.error("In App.vue momentsStore.fetchUser() error:",n)}}),(n,r)=>{const i=gH("router-view");return By(),$y(i,null,{default:HP(({Component:s})=>[(By(),$y(mH(s)))]),_:1})}}};var Ty=()=>gz();/*!
  * vue-router v4.2.4
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const lc=typeof window!="undefined";function Nte(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const mt=Object.assign;function by(t,e){const n={};for(const r in e){const i=e[r];n[r]=pi(i)?i.map(t):t(i)}return n}const Su=()=>{},pi=Array.isArray,Mte=/\/$/,Lte=t=>t.replace(Mte,"");function Ay(t,e,n="/"){let r,i={},s="",o="";const c=e.indexOf("#");let u=e.indexOf("?");return c<u&&c>=0&&(u=-1),u>-1&&(r=e.slice(0,u),s=e.slice(u+1,c>-1?c:e.length),i=t(s)),c>-1&&(r=r||e.slice(0,c),o=e.slice(c,e.length)),r=Bte(r!=null?r:e,n),{fullPath:r+(s&&"?")+s+o,path:r,query:i,hash:o}}function Vte(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function GC(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function Fte(t,e,n){const r=e.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&Qc(e.matched[r],n.matched[i])&&iL(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Qc(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function iL(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!Ute(t[n],e[n]))return!1;return!0}function Ute(t,e){return pi(t)?YC(t,e):pi(e)?YC(e,t):t===e}function YC(t,e){return pi(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function Bte(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let s=n.length-1,o,c;for(o=0;o<r.length;o++)if(c=r[o],c!==".")if(c==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+r.slice(o-(o===r.length?1:0)).join("/")}var yh;(function(t){t.pop="pop",t.push="push"})(yh||(yh={}));var Cu;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Cu||(Cu={}));function $te(t){if(!t)if(lc){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),Lte(t)}const qte=/^[^#]+#/;function Hte(t,e){return t.replace(qte,"#")+e}function Wte(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const sm=()=>({left:window.pageXOffset,top:window.pageYOffset});function zte(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=Wte(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function QC(t,e){return(history.state?history.state.position-e:-1)+t}const cw=new Map;function jte(t,e){cw.set(t,e)}function Kte(t){const e=cw.get(t);return cw.delete(t),e}let Gte=()=>location.protocol+"//"+location.host;function sL(t,e){const{pathname:n,search:r,hash:i}=e,s=t.indexOf("#");if(s>-1){let c=i.includes(t.slice(s))?t.slice(s).length:1,u=i.slice(c);return u[0]!=="/"&&(u="/"+u),GC(u,"")}return GC(n,t)+r+i}function Yte(t,e,n,r){let i=[],s=[],o=null;const c=({state:m})=>{const y=sL(t,location),v=n.value,I=e.value;let A=0;if(m){if(n.value=y,e.value=m,o&&o===v){o=null;return}A=I?m.position-I.position:0}else r(y);i.forEach(N=>{N(n.value,v,{delta:A,type:yh.pop,direction:A?A>0?Cu.forward:Cu.back:Cu.unknown})})};function u(){o=n.value}function h(m){i.push(m);const y=()=>{const v=i.indexOf(m);v>-1&&i.splice(v,1)};return s.push(y),y}function f(){const{history:m}=window;!m.state||m.replaceState(mt({},m.state,{scroll:sm()}),"")}function p(){for(const m of s)m();s=[],window.removeEventListener("popstate",c),window.removeEventListener("beforeunload",f)}return window.addEventListener("popstate",c),window.addEventListener("beforeunload",f,{passive:!0}),{pauseListeners:u,listen:h,destroy:p}}function JC(t,e,n,r=!1,i=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:i?sm():null}}function Qte(t){const{history:e,location:n}=window,r={value:sL(t,n)},i={value:e.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(u,h,f){const p=t.indexOf("#"),m=p>-1?(n.host&&document.querySelector("base")?t:t.slice(p))+u:Gte()+t+u;try{e[f?"replaceState":"pushState"](h,"",m),i.value=h}catch(y){console.error(y),n[f?"replace":"assign"](m)}}function o(u,h){const f=mt({},e.state,JC(i.value.back,u,i.value.forward,!0),h,{position:i.value.position});s(u,f,!0),r.value=u}function c(u,h){const f=mt({},i.value,e.state,{forward:u,scroll:sm()});s(f.current,f,!0);const p=mt({},JC(r.value,u,null),{position:f.position+1},h);s(u,p,!1),r.value=u}return{location:r,state:i,push:c,replace:o}}function Jte(t){t=$te(t);const e=Qte(t),n=Yte(t,e.state,e.location,e.replace);function r(s,o=!0){o||n.pauseListeners(),history.go(s)}const i=mt({location:"",base:t,go:r,createHref:Hte.bind(null,t)},e,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function Xte(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),Jte(t)}function Zte(t){return typeof t=="string"||t&&typeof t=="object"}function oL(t){return typeof t=="string"||typeof t=="symbol"}const Ls={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},aL=Symbol("");var XC;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(XC||(XC={}));function Jc(t,e){return mt(new Error,{type:t,[aL]:!0},e)}function Ki(t,e){return t instanceof Error&&aL in t&&(e==null||!!(t.type&e))}const ZC="[^/]+?",ene={sensitive:!1,strict:!1,start:!0,end:!0},tne=/[.+*?^${}()[\]/\\]/g;function nne(t,e){const n=mt({},ene,e),r=[];let i=n.start?"^":"";const s=[];for(const h of t){const f=h.length?[]:[90];n.strict&&!h.length&&(i+="/");for(let p=0;p<h.length;p++){const m=h[p];let y=40+(n.sensitive?.25:0);if(m.type===0)p||(i+="/"),i+=m.value.replace(tne,"\\$&"),y+=40;else if(m.type===1){const{value:v,repeatable:I,optional:A,regexp:N}=m;s.push({name:v,repeatable:I,optional:A});const D=N||ZC;if(D!==ZC){y+=10;try{new RegExp(`(${D})`)}catch(P){throw new Error(`Invalid custom RegExp for param "${v}" (${D}): `+P.message)}}let k=I?`((?:${D})(?:/(?:${D}))*)`:`(${D})`;p||(k=A&&h.length<2?`(?:/${k})`:"/"+k),A&&(k+="?"),i+=k,y+=20,A&&(y+=-8),I&&(y+=-20),D===".*"&&(y+=-50)}f.push(y)}r.push(f)}if(n.strict&&n.end){const h=r.length-1;r[h][r[h].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function c(h){const f=h.match(o),p={};if(!f)return null;for(let m=1;m<f.length;m++){const y=f[m]||"",v=s[m-1];p[v.name]=y&&v.repeatable?y.split("/"):y}return p}function u(h){let f="",p=!1;for(const m of t){(!p||!f.endsWith("/"))&&(f+="/"),p=!1;for(const y of m)if(y.type===0)f+=y.value;else if(y.type===1){const{value:v,repeatable:I,optional:A}=y,N=v in h?h[v]:"";if(pi(N)&&!I)throw new Error(`Provided param "${v}" is an array but it is not repeatable (* or + modifiers)`);const D=pi(N)?N.join("/"):N;if(!D)if(A)m.length<2&&(f.endsWith("/")?f=f.slice(0,-1):p=!0);else throw new Error(`Missing required param "${v}"`);f+=D}}return f||"/"}return{re:o,score:r,keys:s,parse:c,stringify:u}}function rne(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===40+40?-1:1:t.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function ine(t,e){let n=0;const r=t.score,i=e.score;for(;n<r.length&&n<i.length;){const s=rne(r[n],i[n]);if(s)return s;n++}if(Math.abs(i.length-r.length)===1){if(eP(r))return 1;if(eP(i))return-1}return i.length-r.length}function eP(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const sne={type:0,value:""},one=/[a-zA-Z0-9_]/;function ane(t){if(!t)return[[]];if(t==="/")return[[sne]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(y){throw new Error(`ERR (${n})/"${h}": ${y}`)}let n=0,r=n;const i=[];let s;function o(){s&&i.push(s),s=[]}let c=0,u,h="",f="";function p(){!h||(n===0?s.push({type:0,value:h}):n===1||n===2||n===3?(s.length>1&&(u==="*"||u==="+")&&e(`A repeatable param (${h}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:h,regexp:f,repeatable:u==="*"||u==="+",optional:u==="*"||u==="?"})):e("Invalid state to consume buffer"),h="")}function m(){h+=u}for(;c<t.length;){if(u=t[c++],u==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:u==="/"?(h&&p(),o()):u===":"?(p(),n=1):m();break;case 4:m(),n=r;break;case 1:u==="("?n=2:one.test(u)?m():(p(),n=0,u!=="*"&&u!=="?"&&u!=="+"&&c--);break;case 2:u===")"?f[f.length-1]=="\\"?f=f.slice(0,-1)+u:n=3:f+=u;break;case 3:p(),n=0,u!=="*"&&u!=="?"&&u!=="+"&&c--,f="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${h}"`),p(),o(),i}function cne(t,e,n){const r=nne(ane(t.path),n),i=mt(r,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function lne(t,e){const n=[],r=new Map;e=rP({strict:!1,end:!0,sensitive:!1},e);function i(f){return r.get(f)}function s(f,p,m){const y=!m,v=une(f);v.aliasOf=m&&m.record;const I=rP(e,f),A=[v];if("alias"in f){const k=typeof f.alias=="string"?[f.alias]:f.alias;for(const P of k)A.push(mt({},v,{components:m?m.record.components:v.components,path:P,aliasOf:m?m.record:v}))}let N,D;for(const k of A){const{path:P}=k;if(p&&P[0]!=="/"){const B=p.record.path,V=B[B.length-1]==="/"?"":"/";k.path=p.record.path+(P&&V+P)}if(N=cne(k,p,I),m?m.alias.push(N):(D=D||N,D!==N&&D.alias.push(N),y&&f.name&&!nP(N)&&o(f.name)),v.children){const B=v.children;for(let V=0;V<B.length;V++)s(B[V],N,m&&m.children[V])}m=m||N,(N.record.components&&Object.keys(N.record.components).length||N.record.name||N.record.redirect)&&u(N)}return D?()=>{o(D)}:Su}function o(f){if(oL(f)){const p=r.get(f);p&&(r.delete(f),n.splice(n.indexOf(p),1),p.children.forEach(o),p.alias.forEach(o))}else{const p=n.indexOf(f);p>-1&&(n.splice(p,1),f.record.name&&r.delete(f.record.name),f.children.forEach(o),f.alias.forEach(o))}}function c(){return n}function u(f){let p=0;for(;p<n.length&&ine(f,n[p])>=0&&(f.record.path!==n[p].record.path||!cL(f,n[p]));)p++;n.splice(p,0,f),f.record.name&&!nP(f)&&r.set(f.record.name,f)}function h(f,p){let m,y={},v,I;if("name"in f&&f.name){if(m=r.get(f.name),!m)throw Jc(1,{location:f});I=m.record.name,y=mt(tP(p.params,m.keys.filter(D=>!D.optional).map(D=>D.name)),f.params&&tP(f.params,m.keys.map(D=>D.name))),v=m.stringify(y)}else if("path"in f)v=f.path,m=n.find(D=>D.re.test(v)),m&&(y=m.parse(v),I=m.record.name);else{if(m=p.name?r.get(p.name):n.find(D=>D.re.test(p.path)),!m)throw Jc(1,{location:f,currentLocation:p});I=m.record.name,y=mt({},p.params,f.params),v=m.stringify(y)}const A=[];let N=m;for(;N;)A.unshift(N.record),N=N.parent;return{name:I,path:v,params:y,matched:A,meta:dne(A)}}return t.forEach(f=>s(f)),{addRoute:s,resolve:h,removeRoute:o,getRoutes:c,getRecordMatcher:i}}function tP(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function une(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:hne(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function hne(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function nP(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function dne(t){return t.reduce((e,n)=>mt(e,n.meta),{})}function rP(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function cL(t,e){return e.children.some(n=>n===t||cL(t,n))}const lL=/#/g,fne=/&/g,pne=/\//g,gne=/=/g,mne=/\?/g,uL=/\+/g,_ne=/%5B/g,yne=/%5D/g,hL=/%5E/g,vne=/%60/g,dL=/%7B/g,wne=/%7C/g,fL=/%7D/g,Ene=/%20/g;function gT(t){return encodeURI(""+t).replace(wne,"|").replace(_ne,"[").replace(yne,"]")}function Ine(t){return gT(t).replace(dL,"{").replace(fL,"}").replace(hL,"^")}function lw(t){return gT(t).replace(uL,"%2B").replace(Ene,"+").replace(lL,"%23").replace(fne,"%26").replace(vne,"`").replace(dL,"{").replace(fL,"}").replace(hL,"^")}function Tne(t){return lw(t).replace(gne,"%3D")}function bne(t){return gT(t).replace(lL,"%23").replace(mne,"%3F")}function Ane(t){return t==null?"":bne(t).replace(pne,"%2F")}function Op(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function Rne(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let i=0;i<r.length;++i){const s=r[i].replace(uL," "),o=s.indexOf("="),c=Op(o<0?s:s.slice(0,o)),u=o<0?null:Op(s.slice(o+1));if(c in e){let h=e[c];pi(h)||(h=e[c]=[h]),h.push(u)}else e[c]=u}return e}function iP(t){let e="";for(let n in t){const r=t[n];if(n=Tne(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(pi(r)?r.map(s=>s&&lw(s)):[r&&lw(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function Sne(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=pi(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return e}const Cne=Symbol(""),sP=Symbol(""),om=Symbol(""),mT=Symbol(""),uw=Symbol("");function Yl(){let t=[];function e(r){return t.push(r),()=>{const i=t.indexOf(r);i>-1&&t.splice(i,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Bs(t,e,n,r,i){const s=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((o,c)=>{const u=p=>{p===!1?c(Jc(4,{from:n,to:e})):p instanceof Error?c(p):Zte(p)?c(Jc(2,{from:e,to:p})):(s&&r.enterCallbacks[i]===s&&typeof p=="function"&&s.push(p),o())},h=t.call(r&&r.instances[i],e,n,u);let f=Promise.resolve(h);t.length<3&&(f=f.then(u)),f.catch(p=>c(p))})}function Ry(t,e,n,r){const i=[];for(const s of t)for(const o in s.components){let c=s.components[o];if(!(e!=="beforeRouteEnter"&&!s.instances[o]))if(Pne(c)){const h=(c.__vccOpts||c)[e];h&&i.push(Bs(h,n,r,s,o))}else{let u=c();i.push(()=>u.then(h=>{if(!h)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${s.path}"`));const f=Nte(h)?h.default:h;s.components[o]=f;const m=(f.__vccOpts||f)[e];return m&&Bs(m,n,r,s,o)()}))}}return i}function Pne(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function oP(t){const e=dr(om),n=dr(mT),r=xe(()=>e.resolve(Js(t.to))),i=xe(()=>{const{matched:u}=r.value,{length:h}=u,f=u[h-1],p=n.matched;if(!f||!p.length)return-1;const m=p.findIndex(Qc.bind(null,f));if(m>-1)return m;const y=aP(u[h-2]);return h>1&&aP(f)===y&&p[p.length-1].path!==y?p.findIndex(Qc.bind(null,u[h-2])):m}),s=xe(()=>i.value>-1&&One(n.params,r.value.params)),o=xe(()=>i.value>-1&&i.value===n.matched.length-1&&iL(n.params,r.value.params));function c(u={}){return Dne(u)?e[Js(t.replace)?"replace":"push"](Js(t.to)).catch(Su):Promise.resolve()}return{route:r,href:xe(()=>r.value.href),isActive:s,isExactActive:o,navigate:c}}const xne=kw({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:oP,setup(t,{slots:e}){const n=_a(oP(t)),{options:r}=dr(om),i=xe(()=>({[cP(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[cP(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=e.default&&e.default(n);return t.custom?s:De("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},s)}}}),kne=xne;function Dne(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function One(t,e){for(const n in e){const r=e[n],i=t[n];if(typeof r=="string"){if(r!==i)return!1}else if(!pi(i)||i.length!==r.length||r.some((s,o)=>s!==i[o]))return!1}return!0}function aP(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const cP=(t,e,n)=>t!=null?t:e!=null?e:n,Nne=kw({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=dr(uw),i=xe(()=>t.route||r.value),s=dr(sP,0),o=xe(()=>{let h=Js(s);const{matched:f}=i.value;let p;for(;(p=f[h])&&!p.components;)h++;return h}),c=xe(()=>i.value.matched[o.value]);ff(sP,xe(()=>o.value+1)),ff(Cne,c),ff(uw,i);const u=Bt();return Yo(()=>[u.value,c.value,t.name],([h,f,p],[m,y,v])=>{f&&(f.instances[p]=h,y&&y!==f&&h&&h===m&&(f.leaveGuards.size||(f.leaveGuards=y.leaveGuards),f.updateGuards.size||(f.updateGuards=y.updateGuards))),h&&f&&(!y||!Qc(f,y)||!m)&&(f.enterCallbacks[p]||[]).forEach(I=>I(h))},{flush:"post"}),()=>{const h=i.value,f=t.name,p=c.value,m=p&&p.components[f];if(!m)return lP(n.default,{Component:m,route:h});const y=p.props[f],v=y?y===!0?h.params:typeof y=="function"?y(h):y:null,A=De(m,mt({},v,e,{onVnodeUnmounted:N=>{N.component.isUnmounted&&(p.instances[f]=null)},ref:u}));return lP(n.default,{Component:A,route:h})||A}}});function lP(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const Mne=Nne;function Lne(t){const e=lne(t.routes,t),n=t.parseQuery||Rne,r=t.stringifyQuery||iP,i=t.history,s=Yl(),o=Yl(),c=Yl(),u=NP(Ls);let h=Ls;lc&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const f=by.bind(null,W=>""+W),p=by.bind(null,Ane),m=by.bind(null,Op);function y(W,de){let se,Ee;return oL(W)?(se=e.getRecordMatcher(W),Ee=de):Ee=W,e.addRoute(Ee,se)}function v(W){const de=e.getRecordMatcher(W);de&&e.removeRoute(de)}function I(){return e.getRoutes().map(W=>W.record)}function A(W){return!!e.getRecordMatcher(W)}function N(W,de){if(de=mt({},de||u.value),typeof W=="string"){const O=Ay(n,W,de.path),$=e.resolve({path:O.path},de),G=i.createHref(O.fullPath);return mt(O,$,{params:m($.params),hash:Op(O.hash),redirectedFrom:void 0,href:G})}let se;if("path"in W)se=mt({},W,{path:Ay(n,W.path,de.path).path});else{const O=mt({},W.params);for(const $ in O)O[$]==null&&delete O[$];se=mt({},W,{params:p(O)}),de.params=p(de.params)}const Ee=e.resolve(se,de),Ze=W.hash||"";Ee.params=f(m(Ee.params));const T=Vte(r,mt({},W,{hash:Ine(Ze),path:Ee.path})),R=i.createHref(T);return mt({fullPath:T,hash:Ze,query:r===iP?Sne(W.query):W.query||{}},Ee,{redirectedFrom:void 0,href:R})}function D(W){return typeof W=="string"?Ay(n,W,u.value.path):mt({},W)}function k(W,de){if(h!==W)return Jc(8,{from:de,to:W})}function P(W){return F(W)}function B(W){return P(mt(D(W),{replace:!0}))}function V(W){const de=W.matched[W.matched.length-1];if(de&&de.redirect){const{redirect:se}=de;let Ee=typeof se=="function"?se(W):se;return typeof Ee=="string"&&(Ee=Ee.includes("?")||Ee.includes("#")?Ee=D(Ee):{path:Ee},Ee.params={}),mt({query:W.query,hash:W.hash,params:"path"in Ee?{}:W.params},Ee)}}function F(W,de){const se=h=N(W),Ee=u.value,Ze=W.state,T=W.force,R=W.replace===!0,O=V(se);if(O)return F(mt(D(O),{state:typeof O=="object"?mt({},Ze,O.state):Ze,force:T,replace:R}),de||se);const $=se;$.redirectedFrom=de;let G;return!T&&Fte(r,Ee,se)&&(G=Jc(16,{to:$,from:Ee}),Qe(Ee,Ee,!0,!1)),(G?Promise.resolve(G):ee($,Ee)).catch(Y=>Ki(Y)?Ki(Y,2)?Y:ht(Y):$e(Y,$,Ee)).then(Y=>{if(Y){if(Ki(Y,2))return F(mt({replace:R},D(Y.to),{state:typeof Y.to=="object"?mt({},Ze,Y.to.state):Ze,force:T}),de||$)}else Y=te($,Ee,!0,R,Ze);return ge($,Ee,Y),Y})}function M(W,de){const se=k(W,de);return se?Promise.reject(se):Promise.resolve()}function J(W){const de=In.values().next().value;return de&&typeof de.runWithContext=="function"?de.runWithContext(W):W()}function ee(W,de){let se;const[Ee,Ze,T]=Vne(W,de);se=Ry(Ee.reverse(),"beforeRouteLeave",W,de);for(const O of Ee)O.leaveGuards.forEach($=>{se.push(Bs($,W,de))});const R=M.bind(null,W,de);return se.push(R),bt(se).then(()=>{se=[];for(const O of s.list())se.push(Bs(O,W,de));return se.push(R),bt(se)}).then(()=>{se=Ry(Ze,"beforeRouteUpdate",W,de);for(const O of Ze)O.updateGuards.forEach($=>{se.push(Bs($,W,de))});return se.push(R),bt(se)}).then(()=>{se=[];for(const O of T)if(O.beforeEnter)if(pi(O.beforeEnter))for(const $ of O.beforeEnter)se.push(Bs($,W,de));else se.push(Bs(O.beforeEnter,W,de));return se.push(R),bt(se)}).then(()=>(W.matched.forEach(O=>O.enterCallbacks={}),se=Ry(T,"beforeRouteEnter",W,de),se.push(R),bt(se))).then(()=>{se=[];for(const O of o.list())se.push(Bs(O,W,de));return se.push(R),bt(se)}).catch(O=>Ki(O,8)?O:Promise.reject(O))}function ge(W,de,se){c.list().forEach(Ee=>J(()=>Ee(W,de,se)))}function te(W,de,se,Ee,Ze){const T=k(W,de);if(T)return T;const R=de===Ls,O=lc?history.state:{};se&&(Ee||R?i.replace(W.fullPath,mt({scroll:R&&O&&O.scroll},Ze)):i.push(W.fullPath,Ze)),u.value=W,Qe(W,de,se,R),ht()}let Be;function fe(){Be||(Be=i.listen((W,de,se)=>{if(!Vt.listening)return;const Ee=N(W),Ze=V(Ee);if(Ze){F(mt(Ze,{replace:!0}),Ee).catch(Su);return}h=Ee;const T=u.value;lc&&jte(QC(T.fullPath,se.delta),sm()),ee(Ee,T).catch(R=>Ki(R,12)?R:Ki(R,2)?(F(R.to,Ee).then(O=>{Ki(O,20)&&!se.delta&&se.type===yh.pop&&i.go(-1,!1)}).catch(Su),Promise.reject()):(se.delta&&i.go(-se.delta,!1),$e(R,Ee,T))).then(R=>{R=R||te(Ee,T,!1),R&&(se.delta&&!Ki(R,8)?i.go(-se.delta,!1):se.type===yh.pop&&Ki(R,20)&&i.go(-1,!1)),ge(Ee,T,R)}).catch(Su)}))}let Fe=Yl(),Ne=Yl(),je;function $e(W,de,se){ht(W);const Ee=Ne.list();return Ee.length?Ee.forEach(Ze=>Ze(W,de,se)):console.error(W),Promise.reject(W)}function zn(){return je&&u.value!==Ls?Promise.resolve():new Promise((W,de)=>{Fe.add([W,de])})}function ht(W){return je||(je=!W,fe(),Fe.list().forEach(([de,se])=>W?se(W):de()),Fe.reset()),W}function Qe(W,de,se,Ee){const{scrollBehavior:Ze}=t;if(!lc||!Ze)return Promise.resolve();const T=!se&&Kte(QC(W.fullPath,0))||(Ee||!se)&&history.state&&history.state.scroll||null;return Sw().then(()=>Ze(W,de,T)).then(R=>R&&zte(R)).catch(R=>$e(R,W,de))}const wt=W=>i.go(W);let En;const In=new Set,Vt={currentRoute:u,listening:!0,addRoute:y,removeRoute:v,hasRoute:A,getRoutes:I,resolve:N,options:t,push:P,replace:B,go:wt,back:()=>wt(-1),forward:()=>wt(1),beforeEach:s.add,beforeResolve:o.add,afterEach:c.add,onError:Ne.add,isReady:zn,install(W){const de=this;W.component("RouterLink",kne),W.component("RouterView",Mne),W.config.globalProperties.$router=de,Object.defineProperty(W.config.globalProperties,"$route",{enumerable:!0,get:()=>Js(u)}),lc&&!En&&u.value===Ls&&(En=!0,P(i.location).catch(Ze=>{}));const se={};for(const Ze in Ls)Object.defineProperty(se,Ze,{get:()=>u.value[Ze],enumerable:!0});W.provide(om,de),W.provide(mT,PP(se)),W.provide(uw,u);const Ee=W.unmount;In.add(W),W.unmount=function(){In.delete(W),In.size<1&&(h=Ls,Be&&Be(),Be=null,u.value=Ls,En=!1,je=!1),Ee()}}};function bt(W){return W.reduce((de,se)=>de.then(()=>J(se)),Promise.resolve())}return Vt}function Vne(t,e){const n=[],r=[],i=[],s=Math.max(e.matched.length,t.matched.length);for(let o=0;o<s;o++){const c=e.matched[o];c&&(t.matched.find(h=>Qc(h,c))?r.push(c):n.push(c));const u=t.matched[o];u&&(e.matched.find(h=>Qc(h,u))||i.push(u))}return[n,r,i]}function oie(){return dr(om)}function aie(){return dr(mT)}const Fne=[{path:"/",component:()=>Ut(()=>import("./MainLayout.2a6f0430.js"),["assets/MainLayout.2a6f0430.js","assets/MainLayout.fff096a2.css","assets/QLayout.5e28e65f.js","assets/scroll.8ba91029.js","assets/QToolbar.60019c25.js","assets/uid.42677368.js","assets/use-timeout.a1378caa.js"]),meta:{requiresAuth:!0},children:[{path:"",component:()=>Ut(()=>import("./HomeTab.9f931d07.js"),["assets/HomeTab.9f931d07.js","assets/HomeTab.5c7b3cad.css","assets/QDialog.2982e651.js","assets/use-dark.33053ea6.js","assets/use-timeout.a1378caa.js","assets/QCardSection.b9a121b1.js","assets/scroll.8ba91029.js","assets/QInput.269eeae8.js","assets/uid.42677368.js","assets/QCard.5c7dff5f.js","assets/QPage.91e185e6.js","assets/plugin-vue_export-helper.21dcd24c.js","assets/QToolbar.60019c25.js","assets/ClosePopup.be3b6694.js"])}]},{path:"/learn",component:()=>Ut(()=>import("./MainLayout.2a6f0430.js"),["assets/MainLayout.2a6f0430.js","assets/MainLayout.fff096a2.css","assets/QLayout.5e28e65f.js","assets/scroll.8ba91029.js","assets/QToolbar.60019c25.js","assets/uid.42677368.js","assets/use-timeout.a1378caa.js"]),meta:{requiresAuth:!0},children:[{path:"",component:()=>Ut(()=>import("./LearnTabV1.c67a06b7.js"),["assets/LearnTabV1.c67a06b7.js","assets/LearnTabV1.51371e4e.css","assets/QDialog.2982e651.js","assets/use-dark.33053ea6.js","assets/use-timeout.a1378caa.js","assets/QCardSection.b9a121b1.js","assets/scroll.8ba91029.js","assets/QCardActions.d2332bc6.js","assets/QCard.5c7dff5f.js","assets/QPage.91e185e6.js","assets/uid.42677368.js"])}]},{path:"/timeline",component:()=>Ut(()=>import("./MainLayout.2a6f0430.js"),["assets/MainLayout.2a6f0430.js","assets/MainLayout.fff096a2.css","assets/QLayout.5e28e65f.js","assets/scroll.8ba91029.js","assets/QToolbar.60019c25.js","assets/uid.42677368.js","assets/use-timeout.a1378caa.js"]),meta:{requiresAuth:!0},children:[{path:"",component:()=>Ut(()=>import("./TimelineTab.6f9e26fc.js"),["assets/TimelineTab.6f9e26fc.js","assets/TimelineTab.daf9a974.css","assets/QPage.91e185e6.js"])}]},{path:"/search",component:()=>Ut(()=>import("./MainLayout.2a6f0430.js"),["assets/MainLayout.2a6f0430.js","assets/MainLayout.fff096a2.css","assets/QLayout.5e28e65f.js","assets/scroll.8ba91029.js","assets/QToolbar.60019c25.js","assets/uid.42677368.js","assets/use-timeout.a1378caa.js"]),meta:{requiresAuth:!0},children:[{path:"",component:()=>Ut(()=>import("./SearchTab.6149a270.js"),["assets/SearchTab.6149a270.js","assets/QPage.91e185e6.js"])}]},{path:"/settings",component:()=>Ut(()=>import("./SettingsLayout.94ffff23.js"),["assets/SettingsLayout.94ffff23.js","assets/PrivacyPolicyLayout.2513182b.css","assets/QLayout.5e28e65f.js","assets/scroll.8ba91029.js","assets/QToolbar.60019c25.js"]),meta:{requiresAuth:!0},children:[{path:"",component:()=>Ut(()=>import("./SettingsPage.1019d00a.js"),["assets/SettingsPage.1019d00a.js","assets/SettingsPage.cf303c07.css","assets/QDialog.2982e651.js","assets/use-dark.33053ea6.js","assets/use-timeout.a1378caa.js","assets/QCardSection.b9a121b1.js","assets/scroll.8ba91029.js","assets/QCard.5c7dff5f.js","assets/QInput.269eeae8.js","assets/uid.42677368.js","assets/QSeparator.a15088f4.js","assets/QCardActions.d2332bc6.js","assets/QPage.91e185e6.js","assets/ClosePopup.be3b6694.js","assets/use-quasar.c5871871.js"])}]},{path:"/login",component:()=>Ut(()=>import("./AuthLayout.ad105353.js"),["assets/AuthLayout.ad105353.js","assets/PrivacyPolicyLayout.2513182b.css","assets/QLayout.5e28e65f.js","assets/scroll.8ba91029.js","assets/QToolbar.60019c25.js","assets/plugin-vue_export-helper.21dcd24c.js"]),children:[{path:"",component:()=>Ut(()=>import("./LoginPage.4bd77514.js"),["assets/LoginPage.4bd77514.js","assets/LoginPage.3ff93c15.css","assets/QSeparator.a15088f4.js","assets/use-dark.33053ea6.js","assets/QPage.91e185e6.js"])}]},{path:"/privacy-policy",component:()=>Ut(()=>import("./PrivacyPolicyLayout.65592dd8.js"),["assets/PrivacyPolicyLayout.65592dd8.js","assets/PrivacyPolicyLayout.2513182b.css","assets/QLayout.5e28e65f.js","assets/scroll.8ba91029.js","assets/QToolbar.60019c25.js"]),children:[{path:"",component:()=>Ut(()=>import("./PrivacyPolicyPage.85ba0e18.js"),["assets/PrivacyPolicyPage.85ba0e18.js","assets/TermsConditionsPage.cb10f9e3.css","assets/QCard.5c7dff5f.js","assets/use-dark.33053ea6.js","assets/QPage.91e185e6.js","assets/plugin-vue_export-helper.21dcd24c.js"])}]},{path:"/terms",component:()=>Ut(()=>import("./TermsLayout.ad2482e4.js"),["assets/TermsLayout.ad2482e4.js","assets/PrivacyPolicyLayout.2513182b.css","assets/QLayout.5e28e65f.js","assets/scroll.8ba91029.js","assets/QToolbar.60019c25.js"]),children:[{path:"",component:()=>Ut(()=>import("./TermsConditionsPage.e1d12daf.js"),["assets/TermsConditionsPage.e1d12daf.js","assets/TermsConditionsPage.cb10f9e3.css","assets/QCard.5c7dff5f.js","assets/use-dark.33053ea6.js","assets/QPage.91e185e6.js","assets/plugin-vue_export-helper.21dcd24c.js"])}]},{path:"/contact",component:()=>Ut(()=>import("./ContactLayout.e76df7e2.js"),["assets/ContactLayout.e76df7e2.js","assets/PrivacyPolicyLayout.2513182b.css","assets/QLayout.5e28e65f.js","assets/scroll.8ba91029.js","assets/QToolbar.60019c25.js"]),children:[{path:"",component:()=>Ut(()=>import("./ContactUsPage.77b71e20.js"),["assets/ContactUsPage.77b71e20.js","assets/QCardSection.b9a121b1.js","assets/QSeparator.a15088f4.js","assets/use-dark.33053ea6.js","assets/QInput.269eeae8.js","assets/uid.42677368.js","assets/QCardActions.d2332bc6.js","assets/QCard.5c7dff5f.js","assets/QPage.91e185e6.js","assets/use-quasar.c5871871.js"])}]},{path:"/:catchAll(.*)*",component:()=>Ut(()=>import("./ErrorNotFound.6d8ab911.js"),["assets/ErrorNotFound.6d8ab911.js","assets/plugin-vue_export-helper.21dcd24c.js"])}];var Sy=function(){return Lne({scrollBehavior:()=>({left:0,top:0}),routes:Fne,history:Xte("")})};async function Une(t,e){const n=t(cc);n.use(fz,e),n.config.globalProperties.$q.capacitor=window.Capacitor;const r=typeof Ty=="function"?await Ty({}):Ty;n.use(r);const i=fs(typeof Sy=="function"?await Sy({store:r}):Sy);return r.use(({store:s})=>{s.router=i}),{app:n,store:r,router:i}}function Bne(t,e=document.body){if(typeof t!="string")throw new TypeError("Expected a string as propName");if(!(e instanceof Element))throw new TypeError("Expected a DOM element");return getComputedStyle(e).getPropertyValue(`--q-${t}`).trim()||null}let hf;function $ne(){return Yt.is.winphone?"msapplication-navbutton-color":Yt.is.safari?"apple-mobile-web-app-status-bar-style":"theme-color"}function qne(t){const e=document.getElementsByTagName("META");for(const n in e)if(e[n].name===t)return e[n]}function Hne(t){hf===void 0&&(hf=$ne());let e=qne(hf);const n=e===void 0;n&&(e=document.createElement("meta"),e.setAttribute("name",hf)),e.setAttribute("content",t),n&&document.head.appendChild(e)}var Wne={set:Yt.is.mobile===!0&&(Yt.is.nativeMobile===!0||Yt.is.winphone===!0||Yt.is.safari===!0||Yt.is.webkit===!0||Yt.is.vivaldi===!0)?t=>{const e=t||Bne("primary");Yt.is.nativeMobile===!0&&window.StatusBar?window.StatusBar.backgroundColorByHexString(e):Hne(e)}:Oc,install({$q:t}){t.addressbarColor=this,t.config.addressbarColor&&this.set(t.config.addressbarColor)}},zne={config:{notify:{}},plugins:{Notify:Nf,AddressbarColor:Wne}};let Cy=typeof cc.preFetch=="function"?cc.preFetch:cc.__c!==void 0&&typeof cc.__c.preFetch=="function"?cc.__c.preFetch:!1;function uP(t,e){const n=t?t.matched?t:e.resolve(t).route:e.currentRoute.value;if(!n)return[];const r=n.matched.filter(i=>i.components!==void 0);return r.length===0?[]:Array.prototype.concat.apply([],r.map(i=>Object.keys(i.components).map(s=>{const o=i.components[s];return{path:i.path,c:o}})))}function jne({router:t,store:e,publicPath:n}){t.beforeResolve((r,i,s)=>{const o=window.location.href.replace(window.location.origin,""),c=uP(r,t),u=uP(i,t);let h=!1;const f=c.filter((v,I)=>h||(h=!u[I]||u[I].c!==v.c||v.path.indexOf("/:")>-1)).filter(v=>v.c!==void 0&&(typeof v.c.preFetch=="function"||v.c.__c!==void 0&&typeof v.c.__c.preFetch=="function")).map(v=>v.c.__c!==void 0?v.c.__c.preFetch:v.c.preFetch);if(Cy!==!1&&(f.unshift(Cy),Cy=!1),f.length===0)return s();let p=!1;const m=v=>{p=!0,s(v)},y=()=>{p===!1&&s()};f.reduce((v,I)=>v.then(()=>p===!1&&I({store:e,currentRoute:r,previousRoute:i,redirect:m,urlPath:o,publicPath:n})),Promise.resolve()).then(y).catch(v=>{console.error(v),y()})})}const Kne="";async function Gne({app:t,router:e,store:n},r){let i=!1;const s=u=>{try{return e.resolve(u).href}catch{}return Object(u)===u?null:u},o=u=>{if(i=!0,typeof u=="string"&&/^https?:\/\//.test(u)){window.location.href=u;return}const h=s(u);h!==null&&(window.location.href=h,window.location.reload())},c=window.location.href.replace(window.location.origin,"");for(let u=0;i===!1&&u<r.length;u++)try{await r[u]({app:t,router:e,store:n,ssrContext:null,redirect:o,urlPath:c,publicPath:Kne})}catch(h){if(h&&h.url){o(h.url);return}console.error("[Quasar] boot error:",h);return}i!==!0&&(t.use(e),jne({router:e,store:n}),t.mount("#q-app"))}Une(Ix,zne).then(t=>{const[e,n]=Promise.allSettled!==void 0?["allSettled",r=>r.map(i=>{if(i.status==="rejected"){console.error("[Quasar] boot error:",i.reason);return}return i.value.default})]:["all",r=>r.map(i=>i.default)];return Promise[e]([Ut(()=>Promise.resolve().then(function(){return mee}),void 0),Ut(()=>import("./browserAddressbarColor.4d76780b.js"),[]),Ut(()=>import("./swiperBoot.8181036c.js"),[])]).then(r=>{const i=n(r).filter(s=>typeof s=="function");Gne(t,i)})});export{ite as $,Wne as A,HP as B,ar as C,BH as D,bte as E,mH as F,na as G,Oc as H,Sw as I,vh as J,Jne as K,Zre as L,ire as M,sre as N,_a as O,JP as P,Dp as Q,ate as R,iie as S,ste as T,tie as U,dT as V,bx as W,fT as X,Gee as Y,Qre as Z,rte as _,qp as a,ure as a$,Ote as a0,It as a1,eie as a2,hx as a3,Yne as a4,Js as a5,ere as a6,ti as a7,Xne as a8,tre as a9,vee as aA,Qne as aB,gw as aC,nre as aD,vW as aE,nte as aF,lte as aG,ute as aH,jl as aI,oie as aJ,Nre as aK,$M as aL,cz as aM,rl as aN,lre as aO,$z as aP,Bx as aQ,wh as aR,fr as aS,Qx as aT,hi as aU,Xj as aV,$u as aW,jj as aX,eK as aY,Zj as aZ,ms as a_,Oo as aa,ZW as ab,hte as ac,rie as ad,$w as ae,Zne as af,Ste as ag,sie as ah,Yt as ai,rre as aj,Uw as ak,nie as al,ore as am,GW as an,hH as ao,zW as ap,ZM as aq,Rx as ar,jee as as,Jre as at,tn as au,xee as av,Fu as aw,Xre as ax,Wee as ay,YM as az,jy as b,Ure as b$,gs as b0,zw as b1,di as b2,hn as b3,DO as b4,BO as b5,UY as b6,gr as b7,zre as b8,Sr as b9,gI as bA,wre as bB,Rre as bC,Pre as bD,Fre as bE,qre as bF,jre as bG,bre as bH,vS as bI,gre as bJ,vo as bK,Hs as bL,zs as bM,Ws as bN,Af as bO,Dv as bP,E8 as bQ,js as bR,Uh as bS,gi as bT,kz as bU,Wx as bV,xz as bW,Xp as bX,Ore as bY,Lre as bZ,F5 as b_,us as ba,Fg as bb,dO as bc,PS as bd,jY as be,_re as bf,oe as bg,WY as bh,es as bi,sY as bj,bf as bk,Zl as bl,Rc as bm,mre as bn,w5 as bo,Tre as bp,B5 as bq,Ire as br,Are as bs,xre as bt,Cre as bu,Yre as bv,Sre as bw,Ere as bx,_Y as by,yre as bz,xe as c,Wre as c0,Gre as c1,AO as c2,Bre as c3,Hre as c4,Kre as c5,kre as c6,vre as c7,W5 as c8,z5 as c9,$re as ca,H5 as cb,Dre as cc,Vre as cd,rn as ce,Hg as cf,v8 as cg,Mre as ch,pre as ci,dh as cj,ds as ck,Dz as cl,aie as cm,Ut as cn,kw as co,BM as cp,nz as d,cre as e,lu as f,ho as g,De as h,dr as i,k_ as j,Yh as k,mte as l,Yo as m,cH as n,Hp as o,ff as p,aH as q,Bt as r,za as s,are as t,gte as u,Kee as v,jP as w,gH as x,By as y,$y as z};
